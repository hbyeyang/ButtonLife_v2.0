Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GoodsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GoodsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GoodsAdapter.java	(revision )
@@ -1,70 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-
-import java.util.ArrayList;
-/***
- * 
- * @ClassName:  GoodsAdapter
- * @Description: 订单详情中展示所购买商品的详情列表
- * @author YY
- * @date 2015年7月3日 上午9:59:52
- */
-public class GoodsAdapter extends BaseAdapter {
-	private ArrayList<Goods> goodsList;
-	private Context mContext;
-	public GoodsAdapter(ArrayList<Goods> goodslist,Context context) {
-		super();
-		this.goodsList = goodslist;
-		this.mContext = context;
-	}
-
-	@Override
-	public int getCount() {
-		return goodsList.size();
-	}
-
-	@Override
-	public Object getItem(int arg0) {
-		return null;
-	}
-
-	@Override
-	public long getItemId(int arg0) {
-		return 0;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup arg2) {
-		ViewHolder holder;
-		Goods goods = (Goods) goodsList.get(position);
-		if (convertView == null) {
-			convertView = LayoutInflater.from(mContext).inflate(R.layout.item_goods_name_num_money, null);
-			holder = new ViewHolder();
-			convertView.setTag(holder);
-			holder.tv_goodsName = (TextView) convertView.findViewById(R.id.tv_order_goods_name);
-			holder.tv_goodsNum = (TextView) convertView.findViewById(R.id.tv_order_goods_num);
-			holder.tv_goodsMoney = (TextView) convertView.findViewById(R.id.tv_order_goods_money);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		holder.tv_goodsName.setText(goods.getGoods_name());
-		holder.tv_goodsNum.setText(goods.getGoods_num()+"");
-		holder.tv_goodsMoney.setText("￥"+goods.getGoods_price()*goods.getGoods_num());
-		return convertView;
-	}
-	
-	static class ViewHolder{
-		TextView tv_goodsName;
-		TextView tv_goodsNum;
-		TextView tv_goodsMoney;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BalanceGoodsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BalanceGoodsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BalanceGoodsAdapter.java	(revision )
@@ -1,76 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-import java.util.List;
-/***
-* @ClassName: BalanceGoodsAdapter 
-* @Description: 结算页面商品适配器 
-* @author zxl
-* @date 2015年7月16日 下午4:05:59
- */
-public class BalanceGoodsAdapter extends BaseAdapter {
-	private List<Goods> goodsList  = new ArrayList<Goods>();
-	private Context mContext;
-	private LayoutInflater mInflater;
-	public BalanceGoodsAdapter(Context context , List<Goods> cargoodsList) {
-		super();
-		this.goodsList = cargoodsList;
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-	}
-
-	@Override
-	public int getCount() {
-		return goodsList.size();
-	}
-
-	@Override
-	public Object getItem(int arg0) {
-		return goodsList.get(arg0);
-	}
-
-	@Override
-	public long getItemId(int arg0) {
-		return arg0;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup arg2) {
-		ViewHolder holder;
-		Goods goods = (Goods) goodsList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_goods_name_num_money, null);
-			holder.tv_goodsName = (TextView) convertView.findViewById(R.id.tv_order_goods_name);
-			holder.tv_goodsNum = (TextView) convertView.findViewById(R.id.tv_order_goods_num);
-			holder.tv_goodsMoney = (TextView) convertView.findViewById(R.id.tv_order_goods_money);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		double money = goods.getGoods_price() * goods.getGoods_num();
-		BigDecimal bdmoney = new BigDecimal(money);
-		bdmoney = bdmoney.setScale(2, BigDecimal.ROUND_DOWN);
-		holder.tv_goodsName.setText(goods.getGoods_name());
-		holder.tv_goodsNum.setText(goods.getGoods_num()+"");
-		holder.tv_goodsMoney.setText("￥" +bdmoney);
-		return convertView;
-	}
-	
-	static class ViewHolder{
-		TextView tv_goodsName;
-		TextView tv_goodsNum;
-		TextView tv_goodsMoney;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/OrderLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/OrderLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/OrderLogic.java	(revision )
@@ -1,876 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.db.jsondb.UserInfo;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.AckorderReq;
-import com.anniu.shandiandaojia.net.bean.entity.CancelOrderReq;
-import com.anniu.shandiandaojia.net.bean.entity.ConfirmOrderReq;
-import com.anniu.shandiandaojia.net.bean.entity.FindallOrdersReq;
-import com.anniu.shandiandaojia.net.bean.entity.OrderInsertorderReq;
-import com.anniu.shandiandaojia.net.bean.entity.OrderStatusReq;
-import com.anniu.shandiandaojia.net.bean.entity.PrepayIdReq;
-import com.anniu.shandiandaojia.net.bean.entity.WXCheckPayReq;
-import com.anniu.shandiandaojia.net.bean.entity.WaterSubmitReq;
-import com.anniu.shandiandaojia.service.HttpService;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-/***
- * 
- * @ClassName:  OrderLogic
- * @Description: 用户账单
- * @author YY
- * @date 2015年6月5日 下午12:57:10
- */
-public class OrderLogic extends BaseLogic {
-	
-	/** 获取用户订单 */
-	public static String ACTION_GET_USER_ORDER = "OrderLogic.ACTION_GET_USER_ORDER";
-	/** 取消订单 */
-	public static String ACTION_POST_CANCEL_ORDER = "OrderLogic.ACTION_POST_CANCEL_ORDER";
-	/** 取消订单详情页面 */
-	public static String ACTION_POST_CANCEL_ORDER_DETAIL = "OrderLogic.ACTION_POST_CANCEL_ORDER_DETAIL";
-	/** 确认订单 */
-	public static String ACTION_GET_CONFIRM_ORDER = "OrderLogic.ACTION_GET_CONFIRM_ORDER";
-	/** 订单详情 */
-	public static String ACTION_GET_ORDER_STATUS = "OrderLogic.ACTION_GET_ORDER_STATUS";
-	/** 结算请求 */
-	public static String ACTION_GET_ACKORDER_STATUS = "OrderLogic.ACTION_GET_ACKORDER_STATUS";
-	/** 普通商品订单结算 */
-	public static String ACTION_POST_ORDER_INSERTORDER = "OrderLogic.ACTION_POST_ORDER_INSERTORDER";
-	/** 购买水票 */
-	public static String ACTION_POST_ORDER_WATER_TICKET = "OrderLogic.ACTION_POST_ORDER_WATER_TICKET";
-	/** WX支付获取prepayid */
-	public static String ACTION_GET_PREPAYID = "OrderLogic.ACTION_GET_PREPAYID";
-	/** WX支付获取prepayid订单列表页 */
-	public static String ACTION_GET_PREPAYID_ORDERDETAIL = "OrderLogic.ACTION_GET_PREPAYID_ORDERDETAIL";
-	/** WX支付获取prepayid水票 */
-	public static String ACTION_GET_PREPAYID_WATER = "OrderLogic.ACTION_GET_PREPAYID_WATER";
-	/** WX支付检查状态 */
-	public static String ACTION_GET_CHECKPAY = "OrderLogic.ACTION_GET_CHECKPAY";
-	/** WX支付获取prepayid订单列表页 */
-	public static String ACTION_GET_PREPAYID_ORDERDETAIL_ADAPTER = "OrderLogic.ACTION_GET_PREPAYID_ORDERDETAIL_ADAPTER";
-
-
-	public static String EXTRA_USER_CODE = "user_code";
-	public static String EXTRA_SHOP_CODE = "shop_code";
-	public static String EXTRA_ORDER_NUM = "order_num";
-	public static String EXTRA_RECEIVING = "order_receiving";
-	public static String EXTRA_DETAIL = "detail";
-	public static String EXTRA_ORDERINFO = "orderInfo";
-	public static String EXTRA_NOTICE = "notice";
-	public static String EXTRA_CARTGOODSLIST = "cartGoodsList";
-	public static String EXTRA_ORDER_STATES_LIST = "order_states_list";
-	public static String EXTRA_GOODS_LIST = "goods_list";
-	public static String EXTRA_ORDER_INFO_LIST = "order_info_list";
-	public static String EXTRA_CANCELCANSE ="cancelCanse";
-	public static String EXTRA_CAR_GOODS_LIST = "car_goods_list";
-	public static String EXTRA_LOCMAP = "locMap";
-	public static String EXTRA_TOTALMONEY = "totalmoney";
-	public static String EXTRA_USER_LIST = "user_list";
-	public static String EXTRA_TYPE = "type";
-	public static String EXTRA_REMARK = "remark";
-	public static String EXTRA_STARTTIME = "starttime";
-	public static String EXTRA_ENDTIME = "endtime";
-	public static String EXTRA_PAY_WAY = "payway";
-	public static String EXTRA_COUPON_CODE ="coupon_code";
-	public static String EXTRA_ORDER_BUY_GOODS = "order_buy_goods";
-	public static String EXTRA_GOODS_CODE = "goods_code";
-	
-	/**total_fee*/
-	public static String EXTRA_TOTAL_FEE = "total_fee";
-	public static String EXTRA_OUT_TRADE_NO = "out_trade_no";
-	public static String EXTRA_SIGN = "sign";
-	public static String EXTRA_MCH_ID = "mch_id";
-	public static String EXTRA_PREPAY_ID = "prepay_id";
-	
-	public static String EXTRA_PAYMENT_MONEY = "payment_money";
-	public static String EXTRA_PAY_TIME = "pay_time";
-	public static String EXTRA_PAYMENT_WAY= "payment_way";
-	public static String EXTRA_PAYMENT_STATUS= "payment_status";
-	
-	public OrderLogic(HttpService service) {
-		super(service);
-		ArrayList<String> actions = new ArrayList<String>();
-		actions.add(ACTION_GET_USER_ORDER);
-		actions.add(ACTION_POST_CANCEL_ORDER);
-		actions.add(ACTION_GET_CONFIRM_ORDER);
-		actions.add(ACTION_GET_ORDER_STATUS);
-		actions.add(ACTION_GET_ACKORDER_STATUS);
-		actions.add(ACTION_POST_ORDER_INSERTORDER);
-		actions.add(ACTION_GET_PREPAYID);
-		actions.add(ACTION_GET_PREPAYID_ORDERDETAIL);
-		actions.add(ACTION_GET_PREPAYID_WATER);
-		actions.add(ACTION_GET_CHECKPAY);
-		actions.add(ACTION_POST_ORDER_WATER_TICKET);
-		actions.add(ACTION_POST_CANCEL_ORDER_DETAIL);
-		actions.add(ACTION_GET_PREPAYID_ORDERDETAIL_ADAPTER);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_GET_USER_ORDER.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE,0);
-			getFindallOrders(userCode);
-		}else if (ACTION_POST_CANCEL_ORDER.equals(action)) {
-			String orderNum = intent.getStringExtra(EXTRA_ORDER_NUM);
-			String cancelCanse = intent.getStringExtra(EXTRA_CANCELCANSE);
-			getcancelorder(orderNum,cancelCanse);
-		}else if (ACTION_GET_CONFIRM_ORDER.equals(action)) {
-			String orderNum = intent.getStringExtra(EXTRA_ORDER_NUM);
-			String receiving = intent.getStringExtra(EXTRA_RECEIVING);
-			String receivingTime = receiving.substring(0, 2);
-			getconfirmorder(orderNum,receivingTime);
-		}else if (ACTION_GET_ORDER_STATUS.equals(action)) {
-			String orderNum = intent.getStringExtra(EXTRA_ORDER_NUM);
-			getorderstatus(orderNum);
-		}else if (ACTION_GET_ACKORDER_STATUS.equals(action)) {
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			getAckorder(shopCode,userCode);
-		}else if (ACTION_POST_ORDER_INSERTORDER.equals(action)) {
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			String remark = intent.getStringExtra(EXTRA_REMARK);
-			String startTime = intent.getStringExtra(EXTRA_STARTTIME);
-			String endTime = intent.getStringExtra(EXTRA_ENDTIME);
-			int payWay = intent.getIntExtra(EXTRA_PAY_WAY, 0);
-			String couponCode = intent.getStringExtra(EXTRA_COUPON_CODE);
-			postOrderInsertorder(shopCode,userCode,remark,startTime,endTime,payWay,couponCode);
-		}else if (ACTION_GET_PREPAYID.equals(action)) {
-			String ordernum = intent.getStringExtra(EXTRA_OUT_TRADE_NO);
-			getPrepayid(ordernum);
-		}else if (ACTION_GET_CHECKPAY.equals(action)) {
-			String ordernum = intent.getStringExtra(EXTRA_OUT_TRADE_NO);
-			checkPayState(ordernum);
-		}else if (ACTION_POST_ORDER_WATER_TICKET.equals(action)) {
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			int goodsCode = intent.getIntExtra(EXTRA_GOODS_CODE, 0);
-			int payWay = intent.getIntExtra(EXTRA_PAY_WAY, 0);
-			postBayWaterTicket(shopCode,userCode,goodsCode,payWay);
-		}else if (ACTION_GET_PREPAYID_WATER.equals(action)) {
-			String ordernum = intent.getStringExtra(EXTRA_OUT_TRADE_NO);
-			getPrepayidWater(ordernum);
-		}else if (ACTION_GET_PREPAYID_ORDERDETAIL.equals(action)){
-			String ordernum = intent.getStringExtra(EXTRA_OUT_TRADE_NO);
-			getPrepayidDetail(ordernum);
-		}else if (ACTION_POST_CANCEL_ORDER_DETAIL.equals(action)){
-			String orderNum = intent.getStringExtra(EXTRA_ORDER_NUM);
-			String cancelCanse = intent.getStringExtra(EXTRA_CANCELCANSE);
-			getCancelOrderDetail(orderNum, cancelCanse);
-		}else if (ACTION_GET_PREPAYID_ORDERDETAIL_ADAPTER.equals(action)){
-			String ordernum = intent.getStringExtra(EXTRA_OUT_TRADE_NO);
-			getPrepayidDetailAdapter(ordernum);
-		}
-	}
-
-	private void getPrepayidDetailAdapter(String ordernum) {
-		PrepayIdReq req = new PrepayIdReq(ReqInfo.REQ_GET_GETPREPAYID,ordernum);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject preobj = obj.getJSONObject(GlobalValue.KEY_MSG);
-								PrepayIdInfo info = gson.fromJson(preobj.toString(), PrepayIdInfo.class);
-								SPUtils.saveString(mContext, GlobalInfo.APP_ID, preobj.toString());
-								bundle.putSerializable(EXTRA_PREPAY_ID, info);
-							}
-							notice(Event.GET_PREPAY_ID_DETAIL_ADAPTER_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PREPAY_ID_DETAIL_ADAPTER_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_PREPAY_ID_DETAIL_ADAPTER_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PREPAY_ID_DETAIL_ADAPTER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-		}
-
-	private void getCancelOrderDetail(String orderNum, String cancelCanse) {
-		CancelOrderReq req = new CancelOrderReq(ReqInfo.REQ_GET_CANCELORDER, orderNum, cancelCanse);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_CANCEL_ORDER_DETAIL_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_CANCEL_ORDER_DETAIL_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.POST_CANCEL_ORDER_DETAIL_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR, httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_CANCEL_ORDER_DETAIL_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	private void getPrepayidDetail(String ordernum) {
-			PrepayIdReq req = new PrepayIdReq(ReqInfo.REQ_GET_GETPREPAYID,ordernum);
-			req.setOnHttpRsp(new OnHttpRsp() {
-				@Override
-				public void onHttpRsp(HttpRsp httpRsp) {
-					Bundle bundle = new Bundle();
-					if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-						byte[] data = httpRsp.data;
-						int code = 0;
-						try {
-							String string = new String(data, GlobalValue.ENCODING);
-							JSONObject obj = new JSONObject(string);
-							if (obj.has(GlobalValue.KEY_CODE)) {
-								code = obj.getInt(GlobalValue.KEY_CODE);
-								bundle.putInt(GlobalValue.KEY_CODE, code);
-							}
-							if (code==200) {
-								if (obj.has(GlobalValue.KEY_MSG)) {
-									JSONObject preobj = obj.getJSONObject(GlobalValue.KEY_MSG);
-									PrepayIdInfo info = gson.fromJson(preobj.toString(), PrepayIdInfo.class);
-									SPUtils.saveString(mContext, GlobalInfo.APP_ID, preobj.toString());
-									bundle.putSerializable(EXTRA_PREPAY_ID, info);
-								}
-								notice(Event.GET_PREPAY_ID_DETAIL_TRUE_SUCESS, bundle);
-							}else if(code == 0){
-								String error = obj.getString(GlobalValue.KEY_MSG);
-								bundle.putString(BaseLogic.EXTRA_ERROR, error);
-								notice(Event.GET_PREPAY_ID_DETAIL_TRUE_FAILED, bundle);
-							}else {
-								bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-								notice(Event.GET_PREPAY_ID_DETAIL_TRUE_FAILED, bundle);
-							}
-						} catch (UnsupportedEncodingException e) {
-							e.printStackTrace();
-						} catch (JSONException e) {
-							e.printStackTrace();
-						}
-					} else {
-						bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-						notice(Event.GET_PREPAY_ID_DETAIL_TRUE_FAILED, bundle);
-					}
-				}
-			});
-			sendHttpReq(req);
-	}
-
-	private void getPrepayidWater(String ordernum) {
-		PrepayIdReq req = new PrepayIdReq(ReqInfo.REQ_GET_GETPREPAYID,ordernum);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject preobj = obj.getJSONObject(GlobalValue.KEY_MSG);
-								PrepayIdInfo info = gson.fromJson(preobj.toString(), PrepayIdInfo.class);
-								SPUtils.saveString(mContext, GlobalInfo.APP_ID, preobj.toString());
-								bundle.putSerializable(EXTRA_PREPAY_ID, info);
-							}
-							notice(Event.GET_PREPAY_ID_WATER_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PREPAY_ID_WATER_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_PREPAY_ID_WATER_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PREPAY_ID_WATER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	private void postBayWaterTicket(int shopCode, int userCode, int goodsCode,
-			int payWay) {
-		WaterSubmitReq req = new WaterSubmitReq(ReqInfo.REQ_GET_WATER_SUBMIT, shopCode, userCode, goodsCode, payWay);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_DETAIL)) {
-									JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_DETAIL);
-									if (jsonArray != null && jsonArray.length() > 0) {
-										ArrayList<Goods> goodsList = new ArrayList<>();
-										Goods goods = null;
-										for (int i = 0; i < jsonArray.length(); i++) {
-											JSONObject goodsObject = (JSONObject) jsonArray.get(i);
-											goods = gson.fromJson(goodsObject.toString(), Goods.class);
-											goodsList.add(goods);
-										}
-										bundle.putSerializable(EXTRA_ORDER_BUY_GOODS,goodsList);
-									}
-								}
-								if (jsonObject.has(EXTRA_ORDERINFO)) {
-									JSONObject orderinfoObject = jsonObject.getJSONObject(EXTRA_ORDERINFO);
-									OrderInfo orderInfo = gson.fromJson(orderinfoObject.toString(), OrderInfo.class);
-									bundle.putSerializable(EXTRA_ORDER_INFO_LIST, orderInfo);
-								}
-							}
-							notice(Event.GET_WATER_SUBMIT_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_WATER_SUBMIT_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_WATER_SUBMIT_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_WATER_SUBMIT_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	private void checkPayState(String ordernum) {
-		WXCheckPayReq req = new WXCheckPayReq(ReqInfo.REQ_GET_WXCALLBACK, ordernum);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject orderstate = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (orderstate.has(EXTRA_PAYMENT_STATUS)) {
-									int state = orderstate.getInt(EXTRA_PAYMENT_STATUS);
-									String ordernumber = orderstate.getString(EXTRA_ORDER_NUM);
-									bundle.putInt(EXTRA_PAYMENT_STATUS, state);
-									bundle.putString(EXTRA_ORDER_NUM, ordernumber);
-									notice(Event.GET_PREPAY_CHECKPAY_SUCESS, bundle);
-								}
-							}
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PREPAY_CHECKPAY_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_PREPAY_CHECKPAY_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PREPAY_CHECKPAY_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	private void getPrepayid(String ordernum) {
-		PrepayIdReq req = new PrepayIdReq(ReqInfo.REQ_GET_GETPREPAYID,ordernum);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject preobj = obj.getJSONObject(GlobalValue.KEY_MSG);
-								PrepayIdInfo info = gson.fromJson(preobj.toString(), PrepayIdInfo.class);
-								SPUtils.saveString(mContext, GlobalInfo.APP_ID, preobj.toString());
-								bundle.putSerializable(EXTRA_PREPAY_ID, info);
-							}
-							notice(Event.GET_PREPAY_ID_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PREPAY_ID_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_PREPAY_ID_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PREPAY_ID_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**普通商品订单支付*/
-	private void postOrderInsertorder(int shopCode, int userCode,String remark, String startTime, String endTime, int payWay,String couponCode) {
-		OrderInsertorderReq req = new OrderInsertorderReq(ReqInfo.REQ_POST_ORDER_INSERTORDER,shopCode, userCode, remark, startTime, endTime, payWay, couponCode);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_DETAIL)) {
-									JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_DETAIL);
-									if (jsonArray != null && jsonArray.length() > 0) {
-										ArrayList<Goods> goodsList = new ArrayList<>();
-										Goods goods = null;
-										for (int i = 0; i < jsonArray.length(); i++) {
-											JSONObject goodsObject = (JSONObject) jsonArray.get(i);
-											goods = gson.fromJson(goodsObject.toString(), Goods.class);
-											goodsList.add(goods);
-										}
-										bundle.putSerializable(EXTRA_ORDER_BUY_GOODS,goodsList);
-									}
-								}
-								if (jsonObject.has(EXTRA_ORDERINFO)) {
-									JSONObject orderinfoObject = jsonObject.getJSONObject(EXTRA_ORDERINFO);
-									OrderInfo orderInfo = gson.fromJson(orderinfoObject.toString(), OrderInfo.class);
-									bundle.putSerializable(EXTRA_ORDER_INFO_LIST, orderInfo);
-								}
-							}
-							notice(Event.POST_ORDER_INSERTORDER_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_ORDER_INSERTORDER_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.POST_ORDER_INSERTORDER_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_ORDER_INSERTORDER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**结算请求*/
-	private void getAckorder(int shopCode, int userCode) {
-		AckorderReq req = new AckorderReq(ReqInfo.REQ_GET_ACKORDER, shopCode, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings({ "unchecked"})
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject != null) {
-									if (jsonObject.has(EXTRA_CARTGOODSLIST)) {
-										ArrayList<Goods> goodslist = new ArrayList<Goods>();
-										Goods goods = null;
-										JSONObject object = null;
-										JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_CARTGOODSLIST);
-										for (int i = 0; i < jsonArray.length(); i++) {
-											object = (JSONObject) jsonArray.get(i);
-											goods = gson.fromJson(object.toString(), Goods.class);
-											goodslist.add(goods);
-										}
-										bundle.putSerializable(EXTRA_CAR_GOODS_LIST,goodslist);
-									}
-									
-									if (jsonObject.has(EXTRA_LOCMAP)) {
-										String text = jsonObject.getString(EXTRA_LOCMAP);
-										if (text.equals("null")) {
-											bundle.putSerializable(EXTRA_USER_LIST, null);
-										}else{
-											JSONObject userObject = jsonObject.getJSONObject(EXTRA_LOCMAP);
-											UserInfo userInfo = gson.fromJson(userObject.toString(), UserInfo.class);
-											bundle.putSerializable(EXTRA_USER_LIST, userInfo);
-										}
-									}
-									
-									if (jsonObject.has(EXTRA_TOTALMONEY)) {
-										String totalMonay = jsonObject.getString(EXTRA_TOTALMONEY);
-										bundle.putString(EXTRA_TOTALMONEY, totalMonay);
-									}
-								}
-							}
-							notice(Event.GET_ACKORDER_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_ACKORDER_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_ACKORDER_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_ACKORDER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取订单详情*/
-	private void getorderstatus(String orderNum) {
-		OrderStatusReq req = new OrderStatusReq(ReqInfo.REQ_GET_ORDERSTATUS, orderNum);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_DETAIL)) {
-									JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_DETAIL);
-									if (jsonArray != null && jsonArray.length() > 0) {
-										ArrayList<Goods> goodslist = new ArrayList<Goods>();
-										Goods goods = null;
-										JSONObject object = null;
-										for (int i = 0; i < jsonArray.length(); i++) {
-											object = (JSONObject) jsonArray.get(i);
-											goods = gson.fromJson(object.toString(),Goods.class);
-											goodslist.add(goods);
-										}
-										bundle.putSerializable(EXTRA_GOODS_LIST,goodslist);
-									}
-								}
-								
-								if (jsonObject.has(EXTRA_ORDERINFO)) {
-									JSONObject orderObject = jsonObject.getJSONObject(EXTRA_ORDERINFO);
-									OrderInfo orderInfo  = gson.fromJson(orderObject.toString(), OrderInfo.class);
-									bundle.putSerializable(EXTRA_ORDER_INFO_LIST, orderInfo);
-								}
-							}
-							notice(Event.GET_ORDER_STATUS_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_ORDER_STATUS_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_ORDER_STATUS_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_ORDER_STATUS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**确定订单*/
-	private void getconfirmorder(String orderNum, String receivingTime) {
-		ConfirmOrderReq req = new ConfirmOrderReq(ReqInfo.REQ_GET_CONFIRMORDER, orderNum, receivingTime);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							notice(Event.GET_CONFIRM_ORDER_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_CONFIRM_ORDER_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_CONFIRM_ORDER_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_CONFIRM_ORDER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**取消订单*/
-	private void getcancelorder(String orderNum,String cancelCause) {
-		CancelOrderReq req = new CancelOrderReq(ReqInfo.REQ_GET_CANCELORDER, orderNum,cancelCause);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							notice(Event.POST_CANCEL_ORDER_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_CANCEL_ORDER_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.POST_CANCEL_ORDER_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_CANCEL_ORDER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取用户订单*/
-	private void getFindallOrders(int userCode) {
-		FindallOrdersReq req = new FindallOrdersReq(ReqInfo.REQ_GET_FIND_ALLORDERS, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String string = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(string);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONArray jsonArray = obj.getJSONArray(GlobalValue.KEY_MSG);
-								if (jsonArray != null && jsonArray.length() > 0) {
-									ArrayList<OrderInfo> orders = new ArrayList<OrderInfo>();//所有订单集合
-									JSONObject jsonObject = null ;
-									OrderInfo orderInfo = null ;
-									for (int i = 0; i < jsonArray.length(); i++) {
-										jsonObject = (JSONObject) jsonArray.get(i);
-										orderInfo = gson.fromJson(jsonObject.toString(),OrderInfo.class);// 单个订单
-										orders.add(orderInfo);
-									}
-									bundle.putSerializable(EXTRA_ORDER_STATES_LIST,orders);
-								}
-							}
-							notice(Event.GET_USER_ALLORDERS_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_USER_ALLORDERS_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_USER_ALLORDERS_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_USER_ALLORDERS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterDetailReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterDetailReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterDetailReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: WaterDetailReq
- * @Description: 获取水票详情
- * @author YY
- * @date 2015年6月17日 下午2:29:22
- */
-public class WaterDetailReq extends HttpReq {
-
-	private int goodsCode;
-	private int shopCode;
-
-	public WaterDetailReq(int reqid, int goodsCode, int shopCode) {
-		super();
-		this.id = reqid;
-		this.goodsCode = goodsCode;
-		this.shopCode = shopCode;
-	}
-
-	public int getGoodsCode() {
-		return goodsCode;
-	}
-
-	public void setGoodsCode(int goodsCode) {
-		this.goodsCode = goodsCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?goods_code=" + goodsCode + "&shop_code=" + shopCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/Pullable.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/Pullable.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/Pullable.java	(revision )
@@ -1,18 +0,0 @@
-package com.anniu.shandiandaojia.view.pulltorefreshlayout.pullableview;
-
-public interface Pullable
-{
-	/**
-	 * 判断是否可以下拉，如果不需要下拉功能可以直接return false
-	 * 
-	 * @return true如果可以下拉否则返回false
-	 */
-	boolean canPullDown();
-
-	/**
-	 * 判断是否可以上拉，如果不需要上拉功能可以直接return false
-	 * 
-	 * @return true如果可以上拉否则返回false
-	 */
-	boolean canPullUp();
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IconPageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IconPageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IconPageIndicator.java	(revision )
@@ -1,174 +0,0 @@
-/*
- * Copyright (C) 2011 The Android Open Source Project
- * Copyright (C) 2012 Jake Wharton
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.support.v4.view.PagerAdapter;
-import android.support.v4.view.ViewPager;
-import android.support.v4.view.ViewPager.OnPageChangeListener;
-import android.util.AttributeSet;
-import android.view.Gravity;
-import android.view.View;
-import android.widget.HorizontalScrollView;
-import android.widget.ImageView;
-
-import com.anniu.shandiandaojia.R;
-
-import static android.view.ViewGroup.LayoutParams.FILL_PARENT;
-import static android.view.ViewGroup.LayoutParams.WRAP_CONTENT;
-
-/**
- * This widget implements the dynamic action bar tab behavior that can change
- * across different configurations or circumstances.
- */
-public class IconPageIndicator extends HorizontalScrollView implements PageIndicator {
-    private final IcsLinearLayout mIconsLayout;
-
-    private ViewPager mViewPager;
-    private OnPageChangeListener mListener;
-    private Runnable mIconSelector;
-    private int mSelectedIndex;
-
-    public IconPageIndicator(Context context) {
-        this(context, null);
-    }
-
-    public IconPageIndicator(Context context, AttributeSet attrs) {
-        super(context, attrs);
-        setHorizontalScrollBarEnabled(false);
-
-        mIconsLayout = new IcsLinearLayout(context, R.attr.vpiIconPageIndicatorStyle);
-        addView(mIconsLayout, new LayoutParams(WRAP_CONTENT, FILL_PARENT, Gravity.CENTER));
-    }
-
-    private void animateToIcon(final int position) {
-        final View iconView = mIconsLayout.getChildAt(position);
-        if (mIconSelector != null) {
-            removeCallbacks(mIconSelector);
-        }
-        mIconSelector = new Runnable() {
-            public void run() {
-                final int scrollPos = iconView.getLeft() - (getWidth() - iconView.getWidth()) / 2;
-                smoothScrollTo(scrollPos, 0);
-                mIconSelector = null;
-            }
-        };
-        post(mIconSelector);
-    }
-
-    @Override
-    public void onAttachedToWindow() {
-        super.onAttachedToWindow();
-        if (mIconSelector != null) {
-            // Re-post the selector we saved
-            post(mIconSelector);
-        }
-    }
-
-    @Override
-    public void onDetachedFromWindow() {
-        super.onDetachedFromWindow();
-        if (mIconSelector != null) {
-            removeCallbacks(mIconSelector);
-        }
-    }
-
-    @Override
-    public void onPageScrollStateChanged(int arg0) {
-        if (mListener != null) {
-            mListener.onPageScrollStateChanged(arg0);
-        }
-    }
-
-    @Override
-    public void onPageScrolled(int arg0, float arg1, int arg2) {
-        if (mListener != null) {
-            mListener.onPageScrolled(arg0, arg1, arg2);
-        }
-    }
-
-    @Override
-    public void onPageSelected(int arg0) {
-        setCurrentItem(arg0);
-        if (mListener != null) {
-            mListener.onPageSelected(arg0);
-        }
-    }
-
-    @Override
-    public void setViewPager(ViewPager view) {
-        if (mViewPager == view) {
-            return;
-        }
-        if (mViewPager != null) {
-            mViewPager.setOnPageChangeListener(null);
-        }
-        PagerAdapter adapter = view.getAdapter();
-        if (adapter == null) {
-            throw new IllegalStateException("ViewPager does not have adapter instance.");
-        }
-        mViewPager = view;
-        view.setOnPageChangeListener(this);
-        notifyDataSetChanged();
-    }
-
-    public void notifyDataSetChanged() {
-        mIconsLayout.removeAllViews();
-        IconPagerAdapter iconAdapter = (IconPagerAdapter) mViewPager.getAdapter();
-        int count = iconAdapter.getCount();
-        for (int i = 0; i < count; i++) {
-            ImageView view = new ImageView(getContext(), null, R.attr.vpiIconPageIndicatorStyle);
-            view.setImageResource(iconAdapter.getIconResId(i));
-            mIconsLayout.addView(view);
-        }
-        if (mSelectedIndex > count) {
-            mSelectedIndex = count - 1;
-        }
-        setCurrentItem(mSelectedIndex);
-        requestLayout();
-    }
-
-    @Override
-    public void setViewPager(ViewPager view, int initialPosition) {
-        setViewPager(view);
-        setCurrentItem(initialPosition);
-    }
-
-    @Override
-    public void setCurrentItem(int item) {
-        if (mViewPager == null) {
-            throw new IllegalStateException("ViewPager has not been bound.");
-        }
-        mSelectedIndex = item;
-        mViewPager.setCurrentItem(item);
-
-        int tabCount = mIconsLayout.getChildCount();
-        for (int i = 0; i < tabCount; i++) {
-            View child = mIconsLayout.getChildAt(i);
-            boolean isSelected = (i == item);
-            child.setSelected(isSelected);
-            if (isSelected) {
-                animateToIcon(item);
-            }
-        }
-    }
-
-    @Override
-    public void setOnPageChangeListener(OnPageChangeListener listener) {
-        mListener = listener;
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/VouchersActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/VouchersActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/VouchersActivity.java	(revision )
@@ -1,172 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.KeyEvent;
-import android.view.View;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ListView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.VoucherAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.VoucherTicket;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-/**
- * @ClassName:  VouchersActivity
- * @Description: 代金券
- * @author YY
- * @date 2015年5月30日 下午7:32:55
- */
-public class VouchersActivity extends BaseActivity {
-	private TextView titleBarTv;//界面标题
-	/**存放水票详细信息的集合*/
-	ArrayList<VoucherTicket> voucherTickets = new ArrayList<>();
-	/**展示优惠券*/
-	private ListView listview;
-	/**适配器*/
-	private VoucherAdapter voucherAdapter = null;
-	public static int REQUESTCODE = 4;
-	public static String ISHASVOUCHER = "hasvoucher";
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {
-			setDefaut();
-		}
-	}
-	
-	private void setDefaut() {
-		Intent inten = new Intent();
-			inten.putExtra(ISHASVOUCHER, false);
-			setResult(REQUESTCODE, inten);
-			finish();
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_myvoucher);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("我的代金券");
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		listview = (ListView) findViewById(R.id.lv_voucherticket);
-		//创建界面的时候请求数据
-		Intent intent = getIntent();
-		int code = intent.getIntExtra(BalanceActivity.CODE, 0);
-		String totalMoney = intent.getStringExtra(TicketLogic.EXTRA_TOTALMONEY);
-		
-		if (code == 6) {
-			getOrderFindcoupon(totalMoney);  
-		}else {
-			getFindusercoupon();
-		}
-	}
-
-	/**根据金额获取可用的优惠券*/
-	private void getOrderFindcoupon(String totalMoney) {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_ORDER_FINDCOUPON);
-		intent.putExtra(TicketLogic.EXTRA_USER_CODE, SPUtils.getInt(VouchersActivity.this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(TicketLogic.EXTRA_TOTALMONEY, totalMoney);
-		sendAction(intent);
-	}
-
-	/**获取所有的优惠券*/
-	private void getFindusercoupon() {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_FINDUSERCOUPON);
-		intent.putExtra(TicketLogic.EXTRA_USER_CODE, SPUtils.getInt(VouchersActivity.this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	@SuppressWarnings({ "unchecked", "rawtypes" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_FINDUSERCOUPON_SUCESS://获取优惠券成功事件 
-			ArrayList<VoucherTicket> voucherList = (ArrayList<VoucherTicket>) bundle.getSerializable(TicketLogic.EXTRA_VOUCHER_TICKET_LIST);
-			if (voucherList != null) {
-				voucherTickets.clear();
-				voucherTickets.addAll(voucherList);
-				if (voucherAdapter == null) {
-					voucherAdapter = new VoucherAdapter(VouchersActivity.this,voucherTickets);
-					listview.setAdapter(voucherAdapter);
-				} else {
-					voucherAdapter.notifyDataSetChanged();
-				}
-			}
-			break;
-		case Event.GET_FINDUSERCOUPON_FAILED://获取优惠券失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_ORDER_FINDCOUPON_SUCESS://触发优惠券成功事件 
-			ArrayList<VoucherTicket> voucherArrayList = (ArrayList<VoucherTicket>) bundle.getSerializable(TicketLogic.EXTRA_VOUCHER_TICKET_LIST);
-			if (voucherArrayList != null) {
-				voucherTickets.clear();
-				voucherTickets.addAll(voucherArrayList);
-				if (voucherAdapter == null) {
-					voucherAdapter = new VoucherAdapter(VouchersActivity.this,voucherTickets);
-					listview.setAdapter(voucherAdapter);
-				} else {
-					voucherAdapter.notifyDataSetChanged();
-				}
-				listview.setOnItemClickListener(new OnItemClickListener() {
-
-					@Override
-					public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-						VoucherTicket voucherTicket = voucherTickets.get(position);
-						Intent intent = new Intent();
-						intent.putExtra(TicketLogic.EXTRA_COUPON, voucherTicket);
-						intent.putExtra(ISHASVOUCHER, true);
-						setResult(REQUESTCODE, intent);
-						finish();
-					}
-				});
-			}
-			break;
-		case Event.GET_ORDER_FINDCOUPON_FAILED://触发优惠券失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_FINDUSERCOUPON_SUCESS,
-				Event.GET_FINDUSERCOUPON_FAILED,
-				Event.GET_ORDER_FINDCOUPON_SUCESS,
-				Event.GET_ORDER_FINDCOUPON_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			setDefaut();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/OrderInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/OrderInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/OrderInfo.java	(revision )
@@ -1,206 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/**
- * 
- * @ClassName: OrderInfo
- * @Description: 订单详情
- * @author YY
- * @date 2015年6月9日 下午3:24:30
- */
-public class OrderInfo implements Serializable {
-
-	private static final long serialVersionUID = -1266443445040629024L;
-	/** 配送起始时间 */
-	private String start_time;
-	/** 配送结束时间 */
-	private String end_time;
-	/** 订单时间 */
-	private String order_time;
-	/** 订单编号 */
-	private String order_num;
-	/** 订单状态 1、已提交 2、发货中  3、已完成  4、商家取消  5、用户取消  6、待支付*/
-	private int order_status;
-	/** 订单金额 */
-	private double ordermoney;
-	/** 支付金额 */
-	private double paymoney;
-	/** 支付方式 */
-	private int payment_way;
-	/** 订单备注信息 */
-	private String remark;
-	/** 用户名称 */
-	private String rev_name;
-	/** 超市名称 */
-	private String shop_name;
-	/** 超市电话 */
-	private String shop_tel;
-	/** 用户收货地址 */
-	private String transaddr;
-	/** 配送费 */
-	private String transmoney;
-	/** 用户电话 */
-	private String user_tel;
-	/** 商店编号 */
-	private int shop_code;
-
-	private int price;
-	/** 优惠券 */
-	private int couprice;
-	/** 图片地址 */
-	private String pictrue_addr;
-
-	public String getPictrue_addr() {
-		return pictrue_addr;
-	}
-
-	public void setPictrue_addr(String pictrue_addr) {
-		this.pictrue_addr = pictrue_addr;
-	}
-
-	public int getCouprice() {
-		return couprice;
-	}
-
-	public void setCouprice(int couprice) {
-		this.couprice = couprice;
-	}
-
-	public int getPrice() {
-		return price;
-	}
-
-	public void setPrice(int price) {
-		this.price = price;
-	}
-
-	public int getShop_code() {
-		return shop_code;
-	}
-
-	public void setShop_code(int shop_code) {
-		this.shop_code = shop_code;
-	}
-
-	public double getPaymoney() {
-		return paymoney;
-	}
-
-	public void setPaymoney(double paymoney) {
-		this.paymoney = paymoney;
-	}
-
-	public String getStart_time() {
-		return start_time;
-	}
-
-	public void setStart_time(String start_time) {
-		this.start_time = start_time;
-	}
-
-	public String getEnd_time() {
-		return end_time;
-	}
-
-	public void setEnd_time(String end_time) {
-		this.end_time = end_time;
-	}
-
-	public String getOrder_time() {
-		return order_time;
-	}
-
-	public void setOrder_time(String order_time) {
-		this.order_time = order_time;
-	}
-
-	public String getOrder_num() {
-		return order_num;
-	}
-
-	public void setOrder_num(String order_num) {
-		this.order_num = order_num;
-	}
-
-	public int getOrder_status() {
-		return order_status;
-	}
-
-	public void setOrder_status(int order_status) {
-		this.order_status = order_status;
-	}
-
-	public double getOrdermoney() {
-		return ordermoney;
-	}
-
-	public void setOrdermoney(double ordermoney) {
-		this.ordermoney = ordermoney;
-	}
-
-	public int getPayment_way() {
-		return payment_way;
-	}
-
-	public void setPayment_way(int payment_way) {
-		this.payment_way = payment_way;
-	}
-
-	public String getRemark() {
-		return remark;
-	}
-
-	public void setRemark(String remark) {
-		this.remark = remark;
-	}
-
-	public String getRev_name() {
-		return rev_name;
-	}
-
-	public void setRev_name(String rev_name) {
-		this.rev_name = rev_name;
-	}
-
-	public String getShop_name() {
-		return shop_name;
-	}
-
-	public void setShop_name(String shop_name) {
-		this.shop_name = shop_name;
-	}
-
-	public String getShop_tel() {
-		return shop_tel;
-	}
-
-	public void setShop_tel(String shop_tel) {
-		this.shop_tel = shop_tel;
-	}
-
-	public String getTransaddr() {
-		return transaddr;
-	}
-
-	public void setTransaddr(String transaddr) {
-		this.transaddr = transaddr;
-	}
-
-	public String getTransmoney() {
-		return transmoney;
-	}
-
-	public void setTransmoney(String transmoney) {
-		this.transmoney = transmoney;
-	}
-
-	public String getUser_tel() {
-		return user_tel;
-	}
-
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CategoryGoodsAdapter1.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CategoryGoodsAdapter1.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CategoryGoodsAdapter1.java	(revision )
@@ -1,182 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.Paint;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.GoodsDetailActivity;
-import com.anniu.shandiandaojia.activity.RegistActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.List;
-
-/**
- * @ClassName: BargainGoodsAdapter
- * @Description: 商品分类数据适配器
- * @author zxl
- * @date 2015年6月2日 下午7:40:26
- */
-public class CategoryGoodsAdapter1 extends BaseAdapter {
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private List<Goods> mList;
-	public ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	public int changecode;
-
-	@SuppressWarnings("deprecation")
-	public CategoryGoodsAdapter1(Context context) {
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				.showStubImage(R.drawable.no_data)// 加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-
-	@Override
-	public Object getItem(int position) {
-		if (mList != null) {
-			return mList.get(position);
-		}
-		return null;
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	public void setItem(List<Goods> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-
-	@Override
-	public int getCount() {
-		if (mList != null) {
-			return mList.size();
-		}
-		return 0;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_bargain_goods1, null);
-			holder.rl_price = (RelativeLayout) convertView.findViewById(R.id.rl_price);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			
-			LayoutParams imgParams = holder.shopImg.getLayoutParams();
-			imgParams.height = App.windowWidth / 3;
-			imgParams.width = App.windowWidth / 3;
-			holder.shopImg.setLayoutParams(imgParams);
-			
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.promotePrice = (TextView) convertView.findViewById(R.id.tv_promote_price);
-			holder.add = (ImageView) convertView.findViewById(R.id.iv_add);
-			holder.add.setOnClickListener(new OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					if (Utils.loginState()) {// 先判断有没有登陆
-						Goods goods = (Goods) v.getTag();
-						sendAddGood2CartAction(goods.getChange_code(),goods.getLimited());
-					}else {
-						mContext.startActivity(new Intent(mContext,RegistActivity.class));
-					}
-				}
-			});
-			
-			holder.shopImg.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					Goods good = (Goods) v.getTag();
-					Intent intent = new Intent(mContext, GoodsDetailActivity.class);
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_CODE, good.getChange_code());
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_NUMBER, good.getGoods_num());
-					intent.putExtra(GoodsLogic.EXTRA_LIMITED,good.getLimited());
-					mContext.startActivity(intent);
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		mImageLoader.displayImage(goods.getPictrue_addr(), holder.shopImg,options);
-		holder.goodsName.setText(goods.getGoods_name());
-		holder.goodsName.setTextColor(mContext.getResources().getColor(R.color.black));//设置分类页面字体颜色
-		
-		int status = goods.getGoods_status();
-//		double goods_price = goods.getGoods_price();
-//		BigDecimal bdgoods_price = new BigDecimal(goods_price);
-//		bdgoods_price = bdgoods_price.setScale(2, BigDecimal.ROUND_DOWN);
-		if (status == 1) {//特价
-//			double promote_price = goods.getPromote_price();
-//			BigDecimal bdpromote_price = new BigDecimal(promote_price);
-//			bdpromote_price = bdpromote_price.setScale(2, BigDecimal.ROUND_DOWN);
-			
-			holder.rl_price.setVisibility(View.VISIBLE);
-			holder.goodsPrice.setText("￥"+goods.getGoods_price());
-			holder.promotePrice.setVisibility(View.VISIBLE);
-			holder.promotePrice.setText("￥"+goods.getPromote_price());
-			holder.goodsPrice.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG );
-		}else{
-			holder.rl_price.setVisibility(View.GONE);
-			holder.promotePrice.setText("￥"+goods.getGoods_price());
-		}
-		holder.add.setTag(goods);
-		holder.shopImg.setTag(goods);
-		return convertView;
-	}
-	
-	static class ViewHolder {
-		RelativeLayout rl_price;
-		ImageView shopImg;
-		TextView goodsName;
-		TextView goodsPrice;
-		TextView promotePrice;
-		ImageView add;
-	}
-	
-	/** 添加商品数量 */
-	public void sendAddGood2CartAction(int changecode,int limited){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(mContext, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 1);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED, limited);
-		App.getInstance().sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Category.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Category.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Category.java	(revision )
@@ -1,45 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-import java.util.ArrayList;
-
-/***
- * @ClassName: Category
- * @Description: 首页商品分类
- * @author zxl
- * @date 2015年6月3日 上午11:16:35
- */
-public class Category implements Serializable {
-	private static final long serialVersionUID = 8142657093680066131L;
-	/** 商品分类编号 */
-	private int goodstype_code;
-	/** 商品分类名称 */
-	private String goodstype_name;
-	/** 分类商品列表 */
-	private ArrayList<Goods> goodsList = new ArrayList<Goods>();
-
-	public int getGoodstype_code() {
-		return goodstype_code;
-	}
-
-	public void setGoodstype_code(int goodstype_code) {
-		this.goodstype_code = goodstype_code;
-	}
-
-	public String getGoodstype_name() {
-		return goodstype_name;
-	}
-
-	public void setGoodstype_name(String goodstype_name) {
-		this.goodstype_name = goodstype_name;
-	}
-
-	public ArrayList<Goods> getGoodsList() {
-		return goodsList;
-	}
-
-	public void setGoodsList(ArrayList<Goods> goodsList) {
-		this.goodsList = goodsList;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/SPUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/SPUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/SPUtils.java	(revision )
@@ -1,75 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.content.SharedPreferences;
-
-/**
- * @ClassName: SPUtils
- * @Description: SPUtils 这个类主要是用来保存或者获取数据的时候使用
- * @author zxl xl_zh@foxmail.com
- * @date 2015年5月6日 上午9:42:09
- */
-public class SPUtils {
-	public static final String SP_NAME = "config";
-	private static SharedPreferences sp;
-
-	public static void saveBoolean(Context ct, String key, boolean value) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-		sp.edit().putBoolean(key, value).commit();
-	}
-
-	public static boolean getBoolean(Context ct, String key, boolean defValue) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-
-		return sp.getBoolean(key, defValue);
-
-	}
-
-	public static void saveString(Context ct, String key, String value) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-		sp.edit().putString(key, value).commit();
-	}
-
-	public static String getString(Context ct, String key, String defValue) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-
-		return sp.getString(key, defValue);
-	}
-
-	public static void saveInt(Context ct, String key, int value) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-
-		sp.edit().putInt(key, value).commit();
-	}
-
-	public static int getInt(Context ct, String key, int defValue) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-
-		return sp.getInt(key, defValue);
-	}
-
-	public static Long getLong(Context ct, String key, long defValue) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-
-		return sp.getLong(key, defValue);
-	}
-
-	public static void saveLong(Context ct, String key, long defValue) {
-		if (sp == null)
-			sp = ct.getSharedPreferences(SP_NAME, 0);
-
-		sp.edit().putLong(key, defValue).commit();
-	}
-	
-	/**清除数据*/
-	public static void clearData() {
-		sp.edit().clear().commit();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableScrollView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableScrollView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableScrollView.java	(revision )
@@ -1,73 +0,0 @@
-package com.anniu.shandiandaojia.view.pulltorefreshlayout.pullableview;
-
-import android.content.Context;
-import android.graphics.Rect;
-import android.util.AttributeSet;
-import android.widget.ScrollView;
-
-public class PullableScrollView extends ScrollView implements Pullable
-{
-	//TODO 设置下拉刷新、上拉加载更多
-	private boolean enablePullDown = true;
-	private boolean enablePullUp = false;
-
-	public PullableScrollView(Context context)
-	{
-		super(context);
-	}
-
-	public PullableScrollView(Context context, AttributeSet attrs)
-	{
-		super(context, attrs);
-	}
-
-	public PullableScrollView(Context context, AttributeSet attrs, int defStyle)
-	{
-		super(context, attrs, defStyle);
-	}
-
-	@Override
-	public boolean canPullDown()
-	{
-		if(!enablePullDown){
-			return false;
-		}
-		if (getScrollY() == 0)
-			return true;
-		else
-			return false;
-	}
-
-	@Override
-	public boolean canPullUp()
-	{
-		if(!enablePullUp){
-			return false;
-		}
-		if (getScrollY() >= (getChildAt(0).getHeight() - getMeasuredHeight()))
-			return true;
-		else
-			return false;
-	}
-	
-	public boolean isEnablePullDown() {
-		return enablePullDown;
-	}
-
-	public void setEnablePullDown(boolean enablePullDown) {
-		this.enablePullDown = enablePullDown;
-	}
-
-	public boolean isEnablePullUp() {
-		return enablePullUp;
-	}
-
-	public void setEnablePullUp(boolean enablePullUp) {
-		this.enablePullUp = enablePullUp;
-	}
-
-	@Override
-	protected int computeScrollDeltaToGetChildRectOnScreen(Rect rect) {
-		return 0;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/CustomLengthFilter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/CustomLengthFilter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/CustomLengthFilter.java	(revision )
@@ -1,140 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.text.InputFilter.LengthFilter;
-import android.text.Spanned;
-
-public class CustomLengthFilter extends LengthFilter {
-	private int max;// 字符串能输入的最大长度
-    private onFullListener listener;
- 
-    /**
-     * @param max
-     *            字符串能输入的最大长度，半角字符算1，全角字符算2
-     */
-    public CustomLengthFilter(final int max) {
-        super(max);
-        this.max = max;
-    }
- 
-    @Override
-    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
-        int mlength = getLength(dest.subSequence(dstart, dend).toString());// 修改字符串的长度
-        int dlength = getLength(dest.toString());// 已有字符串的长度
-        int slength = getLength(source.subSequence(start, end).toString());// 要增加的字符串的长度
-        int keep = this.max - (dlength - mlength);// 还差多少字符到最大长度
-        if (keep <= 0) {
-            // 已经到达最大长度
-            if (null != listener) {
-                listener.isFull();
-            }
-            return "";
-        } else if (keep >= slength) {
-            // 还没到达最大长度
-            return null;
-        } else {
-            // 超出最大长度
-            int tmp = 0;
-            int index;
-            for (index = start; index <= end; index++) {
-                if (isFullwidthCharacter(source.charAt(index))) {
-                    tmp += 2;
-                } else {
-                    tmp += 1;
-                }
-                if (tmp > keep) {
-                    break;
-                }
-            }
-            if (null != listener) {
-                listener.isFull();
-            }
-            return source.subSequence(start, index);
-        }
-    }
- 
-    public void setOnFullListener(onFullListener listener) {
-        this.listener = listener;
-    }
- 
-    public interface onFullListener {
- 
-        /**
-         * 这个方法会在输入字符串超出极限时被调用
-         */
-        void isFull();
-    }
- 
-    /**
-     * 判断字符串是否为空或空串
-     * 
-     * @param str
-     *            待判断的字符串
-     * @return true：字符串为空或空串
-     */
-    public static boolean isNull(final String str) {
-        if (null == str || "".equals(str)) {
-            return true;
-        } else {
-            return false;
-        }
-    }
- 
-    /**
-     * 获取字符串长度（半角算1、全角算2）
-     * 
-     * @param str
-     *            字符串
-     * @return 字符串长度
-     */
-    public static int getLength(final String str) {
-        if (isNull(str)) {
-            return 0;
-        }
-        int len = str.length();
-        for (int i = 0; i < str.length(); i++) {
-            if (isFullwidthCharacter(str.charAt(i))) {
-                len = len + 1;
-            }
-        }
-        return len;
-    }
- 
-    /**
-     * 获取字符串的全角字符数
-     * 
-     * @param str
-     *            待计算的字符串
-     * @return 字符串的全角字符数
-     */
-    public static int getFwCharNum(final String str) {
-        if (isNull(str)) {
-            return 0;
-        }
-        int num = 0;
-        for (int i = 0; i < str.length(); i++) {
-            if (isFullwidthCharacter(str.charAt(i))) {
-                num++;
-            }
-        }
-        return num;
-    }
- 
-    /**
-     * 判断字符是否为全角字符
-     * 
-     * @param ch
-     *            待判断的字符
-     * @return true：全角； false：半角
-     */
-    public static boolean isFullwidthCharacter(final char ch) {
-        if (ch >= 32 && ch <= 127) {
-            // 基本拉丁字母（即键盘上可见的，空格、数字、字母、符号）
-            return false;
-        } else if (ch >= 65377 && ch <= 65439) {
-            // 日文半角片假名和符号
-            return false;
-        } else {
-            return true;
-        }
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/wxapi/WXPayEntryActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/wxapi/WXPayEntryActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/wxapi/WXPayEntryActivity.java	(revision )
@@ -1,137 +0,0 @@
-package com.anniu.shandiandaojia.wxapi;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.util.Log;
-import android.view.KeyEvent;
-import android.view.View;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.OrderDetailsActivity;
-import com.anniu.shandiandaojia.activity.WaterTicketActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.tencent.mm.sdk.constants.ConstantsAPI;
-import com.tencent.mm.sdk.modelbase.BaseReq;
-import com.tencent.mm.sdk.modelbase.BaseResp;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.IWXAPIEventHandler;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-public class WXPayEntryActivity extends BaseActivity implements
-		IWXAPIEventHandler {
-	private static final String TAG = "WXPayEntryActivity";
-	private IWXAPI api;
-	private PrepayIdInfo info;
-
-	@Override
-	public void onCreate(Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		setContentView(R.layout.pay_result);
-		info = Utils.getPrepayIdInfo();
-		api = WXAPIFactory.createWXAPI(this, info.getAppid());
-		api.handleIntent(getIntent(), this);
-	}
-
-	@Override
-	protected void onNewIntent(Intent intent) {
-		super.onNewIntent(intent);
-		setIntent(intent);
-		api.handleIntent(intent, this);
-	}
-
-	@Override
-	public void onReq(BaseReq req) {
-	}
-
-	@Override
-	public void onResp(BaseResp resp) {
-		Log.d(TAG, "onPayFinish, errCode = " + resp.errCode);
-		if (resp.getType() == ConstantsAPI.COMMAND_PAY_BY_WX) {
-			switch (resp.errCode) {
-			case 0:
-				checkPayState();
-				break;
-			case -1:
-				break;
-			case -2:
-				break;
-			default:
-				break;
-			}
-		}
-	}
-
-	private void checkPayState() {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_CHECKPAY);
-		intent.putExtra(OrderLogic.EXTRA_OUT_TRADE_NO,SPUtils.getString(context, GlobalInfo.KEY_ORDER_NUM, ""));
-		sendAction(intent);
-	}
-
-	@Override
-	public void onClick(View v) {
-		
-	}
-
-	@Override
-	protected void init(Bundle bundle) {
-
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_PREPAY_CHECKPAY_SUCESS://WX支付回调成功事件 
-			int payState = bundle.getInt(OrderLogic.EXTRA_PAYMENT_STATUS);
-			String ordernum = bundle.getString(OrderLogic.EXTRA_ORDER_NUM);
-			boolean isWaterOrder = SPUtils.getBoolean(context, GlobalInfo.KEY_ISWATER, false);
-			Intent intent = new Intent();
-			if (payState == 2) {//2已支付
-				if (isWaterOrder) {
-					intent.setClass(this, WaterTicketActivity.class);
-				} else {
-					intent.setClass(this, OrderDetailsActivity.class);
-				}
-				intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, ordernum);
-				intent.putExtra(OrderDetailsActivity.EXTRA_FROM, 1);
-				startActivity(intent);
-				finish();
-			}
-			break;
-		case Event.GET_PREPAY_CHECKPAY_FAILED://WX支付回调失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_PREPAY_CHECKPAY_SUCESS,
-				Event.GET_PREPAY_CHECKPAY_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			finish();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindWaterTicketReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindWaterTicketReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindWaterTicketReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: FindWaterTicketReq
- * @Description: 获取所有水票
- * @author YY
- * @date 2015年6月29日 下午1:54:30
- */
-public class FindWaterTicketReq extends HttpReq {
-
-	private int userCode;
-	private int shopCode;
-
-	public FindWaterTicketReq(int reqid, int userCode, int shopCode) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-		this.shopCode = shopCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode="+userCode+"&shopcode="+shopCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/UpdateReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/UpdateReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/UpdateReq.java	(revision )
@@ -1,49 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: UpdateReq
- * @Description: 请求更新
- * @author zxl
- * @date 2015年5月19日 下午3:22:41
- */
-public class UpdateReq extends HttpReq {
-	/** 版本号 */
-	private String version_num;
-	/** 手动 2或者自动 1 */
-	private int contol_type;
-
-	public UpdateReq(int reqid, int contol_type, String version_code) {
-		super();
-		this.id = reqid;
-		this.version_num = version_code;
-		this.contol_type = contol_type;
-	}
-
-	public String getVersion_num() {
-		return version_num;
-	}
-
-	public void setVersion_num(String version_num) {
-		this.version_num = version_num;
-	}
-
-	public int getContol_type() {
-		return contol_type;
-	}
-
-	public void setContol_type(int contol_type) {
-		this.contol_type = contol_type;
-	}
-
-	@Override
-	public String getParams() {
-		return "?contol_type=" + contol_type + "&version_num=" + version_num;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/HttpReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/HttpReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/HttpReq.java	(revision )
@@ -1,48 +0,0 @@
-package com.anniu.shandiandaojia.net.bean;
-
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-
-
-public abstract class HttpReq {
-	public int id;
-	public HttpRsp rsp;
-	public OnHttpRsp mOnHttpRsp;
-	/** 请求类型是否为http post */
-	public boolean isHttpPost = false;
-
-	public int getId() {
-		return id;
-	}
-
-	public void setId(int id) {
-		this.id = id;
-	}
-
-	public HttpRsp getRsp() {
-		return rsp;
-	}
-
-	public void setRsp(HttpRsp rsp) {
-		this.rsp = rsp;
-	}
-
-	public boolean isHttpPost() {
-		return isHttpPost;
-	}
-
-	public void setHttpPost(boolean isHttpPost) {
-		this.isHttpPost = isHttpPost;
-	}
-
-	public OnHttpRsp getOnHttpRsp() {
-		return mOnHttpRsp;
-	}
-
-	public void setOnHttpRsp(OnHttpRsp mOnHttpRsp) {
-		this.mOnHttpRsp = mOnHttpRsp;
-	}
-
-	public abstract String getParams();
-
-	public abstract String parseData(String str);
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosAbsSpinner.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosAbsSpinner.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosAbsSpinner.java	(revision )
@@ -1,523 +0,0 @@
-/*
- * Copyright (C) 2006 The Android Open Source Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.anniu.shandiandaojia.view.lee.wheel.widget;
-
-import android.content.Context;
-import android.content.res.TypedArray;
-import android.database.DataSetObserver;
-import android.graphics.Rect;
-import android.os.Parcel;
-import android.os.Parcelable;
-import android.util.AttributeSet;
-import android.util.Log;
-import android.util.SparseArray;
-import android.view.View;
-import android.view.ViewGroup;
-import android.view.animation.Interpolator;
-import android.widget.ArrayAdapter;
-import android.widget.SpinnerAdapter;
-
-import com.anniu.shandiandaojia.R;
-
-/**
- * An abstract base class for spinner widgets. SDK users will probably not need to use this class.
- * 
- * @attr ref android.R.styleable#AbsSpinner_entries
- */
-public abstract class TosAbsSpinner extends TosAdapterView<SpinnerAdapter> {
-
-    SpinnerAdapter mAdapter;
-
-    int mHeightMeasureSpec;
-    int mWidthMeasureSpec;
-    boolean mBlockLayoutRequests;
-    int mSelectionLeftPadding = 0;
-    int mSelectionTopPadding = 0;
-    int mSelectionRightPadding = 0;
-    int mSelectionBottomPadding = 0;
-    Rect mSpinnerPadding = new Rect();
-    View mSelectedView = null;
-    Interpolator mInterpolator;
-
-    RecycleBin mRecycler = new RecycleBin();
-    private DataSetObserver mDataSetObserver;
-
-    protected DataSetObserver getDataSetObserver() {
-        return mDataSetObserver;
-    }
-
-    /** Temporary frame to hold a child View's frame rectangle */
-    private Rect mTouchFrame;
-
-    public TosAbsSpinner(Context context) {
-        super(context);
-        initAbsSpinner();
-    }
-
-    public TosAbsSpinner(Context context, AttributeSet attrs) {
-        this(context, attrs, 0);
-    }
-
-    public TosAbsSpinner(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-        initAbsSpinner();
-
-        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.AbsSpinner, defStyle, 0);
-
-        CharSequence[] entries = a.getTextArray(R.styleable.AbsSpinner_entries);
-        if (entries != null) {
-            ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(context,
-                    android.R.layout.simple_spinner_item, entries);
-            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
-            setAdapter(adapter);
-        }
-
-        a.recycle();
-    }
-
-    /**
-     * Common code for different constructor flavors
-     */
-    private void initAbsSpinner() {
-        setFocusable(true);
-        setWillNotDraw(false);
-    }
-
-    /**
-     * The Adapter is used to provide the data which backs this Spinner. It also provides methods to
-     * transform spinner items based on their position relative to the selected item.
-     * 
-     * @param adapter The SpinnerAdapter to use for this Spinner
-     */
-    @Override
-    public void setAdapter(SpinnerAdapter adapter) {
-        if (null != mAdapter) {
-            mAdapter.unregisterDataSetObserver(mDataSetObserver);
-            resetList();
-        }
-
-        mAdapter = adapter;
-
-        mOldSelectedPosition = INVALID_POSITION;
-        mOldSelectedRowId = INVALID_ROW_ID;
-
-        if (mAdapter != null) {
-            mOldItemCount = mItemCount;
-            mItemCount = mAdapter.getCount();
-            checkFocus();
-
-            mDataSetObserver = new AdapterDataSetObserver();
-            mAdapter.registerDataSetObserver(mDataSetObserver);
-
-            int position = mItemCount > 0 ? 0 : INVALID_POSITION;
-
-            setSelectedPositionInt(position);
-            setNextSelectedPositionInt(position);
-
-            if (mItemCount == 0) {
-                // Nothing selected
-                checkSelectionChanged();
-            }
-
-        } else {
-            checkFocus();
-            resetList();
-            // Nothing selected
-            checkSelectionChanged();
-        }
-
-        requestLayout();
-    }
-
-    /**
-     * Clear out all children from the list
-     */
-    void resetList() {
-        mDataChanged = false;
-        mNeedSync = false;
-
-        removeAllViewsInLayout();
-        mOldSelectedPosition = INVALID_POSITION;
-        mOldSelectedRowId = INVALID_ROW_ID;
-
-        setSelectedPositionInt(INVALID_POSITION);
-        setNextSelectedPositionInt(INVALID_POSITION);
-        invalidate();
-    }
-
-    /**
-     * @see android.view.View#measure(int, int)
-     * 
-     *      Figure out the dimensions of this Spinner. The width comes from the widthMeasureSpec as
-     *      Spinnners can't have their width set to UNSPECIFIED. The height is based on the height
-     *      of the selected item plus padding.
-     */
-    @Override
-    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
-        int widthSize;
-        int heightSize;
-
-        // Delete by Li Hong at 2011/08/05 begin ========================================
-        //
-        // Note: mPaddingLeft, mPaddingTop, mPaddingRight and mPaddingBottom is the
-        // members of View class, they are hide for its subclasses, so we should use
-        // the methods instead of members.
-
-        // mSpinnerPadding.left = mPaddingLeft > mSelectionLeftPadding ? mPaddingLeft
-        // : mSelectionLeftPadding;
-        // mSpinnerPadding.top = mPaddingTop > mSelectionTopPadding ? mPaddingTop
-        // : mSelectionTopPadding;
-        // mSpinnerPadding.right = mPaddingRight > mSelectionRightPadding ? mPaddingRight
-        // : mSelectionRightPadding;
-        // mSpinnerPadding.bottom = mPaddingBottom > mSelectionBottomPadding ? mPaddingBottom
-        // : mSelectionBottomPadding;
-
-        // Delete by Li Hong at 2011/08/05 end ========================================
-
-        // Added by Li Hong at 2011/08/05 begin =======================================
-
-        mSpinnerPadding.left = getPaddingLeft() > mSelectionLeftPadding ? getPaddingLeft() : mSelectionLeftPadding;
-        mSpinnerPadding.top = getPaddingTop() > mSelectionTopPadding ? getPaddingTop() : mSelectionTopPadding;
-        mSpinnerPadding.right = getPaddingRight() > mSelectionRightPadding ? getPaddingRight() : mSelectionRightPadding;
-        mSpinnerPadding.bottom = getPaddingBottom() > mSelectionBottomPadding ? getPaddingBottom()
-                : mSelectionBottomPadding;
-
-        // Added by Li Hong at 2011/08/05 end =========================================
-
-        if (mDataChanged) {
-            handleDataChanged();
-        }
-
-        int preferredHeight = 0;
-        int preferredWidth = 0;
-        boolean needsMeasuring = true;
-
-        int selectedPosition = getSelectedItemPosition();
-        if (selectedPosition >= 0 && mAdapter != null) {
-            // Try looking in the recycler. (Maybe we were measured once already)
-            View view = mRecycler.get(selectedPosition);
-            if (view == null) {
-                // Make a new one
-                view = mAdapter.getView(selectedPosition, null, this);
-            }
-
-            if (view != null) {
-                // Put in recycler for re-measuring and/or layout
-                mRecycler.put(selectedPosition, view);
-            }
-
-            if (view != null) {
-                if (view.getLayoutParams() == null) {
-                    mBlockLayoutRequests = true;
-                    view.setLayoutParams(generateDefaultLayoutParams());
-                    mBlockLayoutRequests = false;
-                }
-                measureChild(view, widthMeasureSpec, heightMeasureSpec);
-
-                preferredHeight = getChildHeight(view) + mSpinnerPadding.top + mSpinnerPadding.bottom;
-                preferredWidth = getChildWidth(view) + mSpinnerPadding.left + mSpinnerPadding.right;
-
-                needsMeasuring = false;
-            }
-        }
-
-        if (needsMeasuring) {
-            // No views -- just use padding
-            preferredHeight = mSpinnerPadding.top + mSpinnerPadding.bottom;
-            if (widthMode == MeasureSpec.UNSPECIFIED) {
-                preferredWidth = mSpinnerPadding.left + mSpinnerPadding.right;
-            }
-        }
-
-        preferredHeight = Math.max(preferredHeight, getSuggestedMinimumHeight());
-        preferredWidth = Math.max(preferredWidth, getSuggestedMinimumWidth());
-
-        heightSize = resolveSize(preferredHeight, heightMeasureSpec);
-        widthSize = resolveSize(preferredWidth, widthMeasureSpec);
-
-        setMeasuredDimension(widthSize, heightSize);
-        mHeightMeasureSpec = heightMeasureSpec;
-        mWidthMeasureSpec = widthMeasureSpec;
-    }
-
-    int getChildHeight(View child) {
-        return child.getMeasuredHeight();
-    }
-
-    int getChildWidth(View child) {
-        return child.getMeasuredWidth();
-    }
-
-    @Override
-    protected ViewGroup.LayoutParams generateDefaultLayoutParams() {
-        return new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-    }
-
-    void recycleAllViews() {
-        int childCount = getChildCount();
-        final TosAbsSpinner.RecycleBin recycleBin = mRecycler;
-
-        // All views go in recycler
-        for (int i = 0; i < childCount; i++) {
-            View v = getChildAt(i);
-            int index = mFirstPosition + i;
-            recycleBin.put(index, v);
-        }
-    }
-
-    @Override
-    void handleDataChanged() {
-        //  -- this is called from both measure and layout.
-        // This is harmless right now, but we don't want to do redundant work if
-        // this gets more complicated
-        super.handleDataChanged();
-    }
-
-    /**
-     * Jump directly to a specific item in the adapter data.
-     */
-    public void setSelection(int position, boolean animate) {
-        // Animate only if requested position is already on screen somewhere
-        boolean shouldAnimate = animate && mFirstPosition <= position
-                && position <= mFirstPosition + getChildCount() - 1;
-        setSelectionInt(position, shouldAnimate);
-
-        // Modified by LiHong at 2012/11/18 begin ========
-        //
-        // NOTE: If called call setSelection(int) method, it will NOT invoke the onItemSelected()
-        // method,
-        // so, we call the checkSelectionChanged method at here.
-        checkSelectionChanged();
-        // Modified by LiHong at 2012/11/18 begin ========
-    }
-
-    @Override
-    public void setSelection(int position) {
-        setNextSelectedPositionInt(position);
-        requestLayout();
-        invalidate();
-
-        // Modified by LiHong at 2012/11/18 begin ========
-        //
-        // NOTE: If called call setSelection(int) method, it will NOT invoke the onItemSelected()
-        // method,
-        // so, we call the checkSelectionChanged method at here.
-        checkSelectionChanged();
-        // Modified by LiHong at 2012/11/18 begin ========
-    }
-
-    /**
-     * Makes the item at the supplied position selected.
-     * 
-     * @param position Position to select
-     * @param animate Should the transition be animated
-     * 
-     */
-    void setSelectionInt(int position, boolean animate) {
-        if (position != mOldSelectedPosition) {
-            mBlockLayoutRequests = true;
-            int delta = position - mSelectedPosition;
-            setNextSelectedPositionInt(position);
-            layout(delta, animate);
-            mBlockLayoutRequests = false;
-        }
-    }
-
-    abstract void layout(int delta, boolean animate);
-
-    @Override
-    public View getSelectedView() {
-        View view = null;
-        int index;
-        if (mItemCount > 0 && mSelectedPosition >= 0) {
-            Log.d("xhc", "getSelectedView "+mSelectedPosition +" "+ mFirstPosition+" "+getChildCount());
-            if(Math.abs(mSelectedPosition-mFirstPosition)>getChildCount() ){
-                index = mSelectedPosition+mItemCount - mFirstPosition;
-                view = getChildAt(index);
-                view.setTag(String.valueOf(index));
-                return view;
-            }
-            index = mSelectedPosition - mFirstPosition;
-            view = getChildAt(index);
-            view.setTag(String.valueOf(index));
-            return view;
-        } else {
-            return null;
-        }
-    }
-
-    /**
-     * Override to prevent spamming ourselves with layout requests as we place views
-     * 
-     * @see android.view.View#requestLayout()
-     */
-    @Override
-    public void requestLayout() {
-        if (!mBlockLayoutRequests) {
-            super.requestLayout();
-        }
-    }
-
-    @Override
-    public SpinnerAdapter getAdapter() {
-        return mAdapter;
-    }
-
-    @Override
-    public int getCount() {
-        return mItemCount;
-    }
-
-    /**
-     * Maps a point to a position in the list.
-     * 
-     * @param x X in local coordinate
-     * @param y Y in local coordinate
-     * @return The position of the item which contains the specified point, or
-     *         {@link #INVALID_POSITION} if the point does not intersect an item.
-     */
-    public int pointToPosition(int x, int y) {
-        Rect frame = mTouchFrame;
-        if (frame == null) {
-            mTouchFrame = new Rect();
-            frame = mTouchFrame;
-        }
-
-        final int count = getChildCount();
-        for (int i = count - 1; i >= 0; i--) {
-            View child = getChildAt(i);
-            if (child.getVisibility() == View.VISIBLE) {
-                child.getHitRect(frame);
-                if (frame.contains(x, y)) {
-                    return mFirstPosition + i;
-                }
-            }
-        }
-        return INVALID_POSITION;
-    }
-
-    static class SavedState extends BaseSavedState {
-        long selectedId;
-        int position;
-
-        /**
-         * Constructor called from {@link TosAbsSpinner#onSaveInstanceState()}
-         */
-        SavedState(Parcelable superState) {
-            super(superState);
-        }
-
-        /**
-         * Constructor called from {@link #CREATOR}
-         */
-        private SavedState(Parcel in) {
-            super(in);
-            selectedId = in.readLong();
-            position = in.readInt();
-        }
-
-        @Override
-        public void writeToParcel(Parcel out, int flags) {
-            super.writeToParcel(out, flags);
-            out.writeLong(selectedId);
-            out.writeInt(position);
-        }
-
-        @Override
-        public String toString() {
-            return "AbsSpinner.SavedState{" + Integer.toHexString(System.identityHashCode(this)) + " selectedId="
-                    + selectedId + " position=" + position + "}";
-        }
-
-        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
-            public SavedState createFromParcel(Parcel in) {
-                return new SavedState(in);
-            }
-
-            public SavedState[] newArray(int size) {
-                return new SavedState[size];
-            }
-        };
-    }
-
-    @Override
-    public Parcelable onSaveInstanceState() {
-        Parcelable superState = super.onSaveInstanceState();
-        SavedState ss = new SavedState(superState);
-        ss.selectedId = getSelectedItemId();
-        if (ss.selectedId >= 0) {
-            ss.position = getSelectedItemPosition();
-        } else {
-            ss.position = INVALID_POSITION;
-        }
-        return ss;
-    }
-
-    @Override
-    public void onRestoreInstanceState(Parcelable state) {
-        SavedState ss = (SavedState) state;
-
-        super.onRestoreInstanceState(ss.getSuperState());
-
-        if (ss.selectedId >= 0) {
-            mDataChanged = true;
-            mNeedSync = true;
-            mSyncRowId = ss.selectedId;
-            mSyncPosition = ss.position;
-            mSyncMode = SYNC_SELECTED_POSITION;
-            requestLayout();
-        }
-    }
-
-    class RecycleBin {
-        private SparseArray<View> mScrapHeap = new SparseArray<View>();
-
-        public void put(int position, View v) {
-            mScrapHeap.put(position, v);
-        }
-
-        View get(int position) {
-            // System.out.print("Looking for " + position);
-            View result = mScrapHeap.get(position);
-            if (result != null) {
-                // System.out.println(" HIT");
-                mScrapHeap.delete(position);
-            } else {
-                // System.out.println(" MISS");
-            }
-            return result;
-        }
-
-        View peek(int position) {
-            // System.out.print("Looking for " + position);
-            return mScrapHeap.get(position);
-        }
-
-        void clear() {
-            final SparseArray<View> scrapHeap = mScrapHeap;
-            final int count = scrapHeap.size();
-            for (int i = 0; i < count; i++) {
-                final View view = scrapHeap.valueAt(i);
-                if (view != null) {
-                    removeDetachedView(view, true);
-                }
-            }
-            scrapHeap.clear();
-        }
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ViewPagerAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ViewPagerAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ViewPagerAdapter.java	(revision )
@@ -1,42 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.support.v4.view.PagerAdapter;
-import android.support.v4.view.ViewPager;
-import android.view.View;
-import android.view.ViewGroup;
-
-import java.util.List;
-
-public class ViewPagerAdapter extends PagerAdapter {
-	private List<View> pages;
-
-	public ViewPagerAdapter(List<View> lists) {
-		this.pages = lists;
-	}
-
-	@Override
-	public void destroyItem(ViewGroup container, int position, Object object) {
-		((ViewPager) container).removeView(pages.get(position));
-	}
-
-	@Override
-	public Object instantiateItem(ViewGroup container, int position) {
-		((ViewPager) container).addView(pages.get(position), 0);
-		return pages.get(position);
-	}
-
-	@Override
-	public int getCount() {
-		return pages.size();
-	}
-
-	@Override
-	public boolean isViewFromObject(View arg0, Object arg1) {
-		return arg0 == arg1;
-	}
-
-	@Override
-	public int getItemPosition(Object object) {
-		return super.getItemPosition(object);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AddAddress.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AddAddress.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AddAddress.java	(revision )
@@ -1,140 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.EditText;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.CustomLengthFilter;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/**
- * @ClassName: AddAddress
- * @Description: 新增地址页面
- * @author YY
- * @date 2015年6月8日 下午5:02:04
- */
-public class AddAddress extends BaseActivity {
-	private TextView titleBarTv;// 标题
-	private EditText et_name;
-	private EditText et_phone;
-	private EditText et_address;
-	private int userCode;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {//点击返回
-			finish();
-		}else if (v.getId()==R.id.bt_save) {
-			String name = et_name.getText().toString().trim();
-			String phone = et_phone.getText().toString().trim();
-			String address = et_address.getText().toString().trim();
-			if (TextUtils.isEmpty(name)) {
-				MyToast.show(this, "姓名不能为空");
-				return;
-			}
-			
-			if (TextUtils.isEmpty(phone)) {
-				MyToast.show(this, "电话号码不能为空");
-				return;
-			}
-			
-			if (CustomLengthFilter.getLength(phone) != 11) {
-				MyToast.show(this, "输入的手机号码长度不对！");
-				return;
-			}
-			
-			if (TextUtils.isEmpty(address)) {
-				MyToast.show(this, "收货地址不能为空");
-				return;
-			}
-			
-			int length = CustomLengthFilter.getLength(name);
-			if (length > 12) {
-				MyToast.show(this, "姓名不能超过6个字符");
-				return;
-			}
-			phone = et_phone.getText().toString().trim();
-			address = et_address.getText().toString().trim();
-			userCode = SPUtils.getInt(AddAddress.this, GlobalInfo.KEY_USERCODE, 0);
-			
-			Intent intent = new Intent(UserLogic.ACTION_POST_PERSON_INSERTADDR);
-			intent.putExtra(UserLogic.EXTRA_USER_CODE, userCode);
-			intent.putExtra(UserLogic.EXTRA_USER_NAME, name);
-			intent.putExtra(UserLogic.EXTRA_PHONE, phone);
-			intent.putExtra(UserLogic.EXTRA_USER_ADDR, address);
-			sendAction(intent);
-			getFindUserloc(userCode);
-			finish();
-		}
-	}
-	
-	/**获取个人中心我的地址*/
-	private void getFindUserloc(int userCode) {
-		Intent intent = new Intent(UserLogic.ACTION_GET_PERSON_FINDUSERLOC);
-		intent.putExtra(UserLogic.EXTRA_USER_CODE, userCode);
-		sendAction(intent);
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_add_address);
-
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.add_address);
-
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-
-		et_name = (EditText) findViewById(R.id.et_name);
-		//et_name.setFilters(new InputFilter[]{new InputFilter.LengthFilter(6)});
-		et_phone = (EditText) findViewById(R.id.et_phone);
-		et_address = (EditText) findViewById(R.id.et_address);
-
-		findViewById(R.id.bt_save).setOnClickListener(this);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.POST_PERSON_INSERTADDR_SUCESS:// 修改用户收货信息--新增成功事件
-			getFindUserloc(userCode);
-			finish();
-			break;
-		case Event.POST_PERSON_INSERTADDR_FAILED:// 修改用户收货信息--新增失败事件
-			MyToast.show(this, notice);
-			break;
-
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,
-				Event.POST_PERSON_INSERTADDR_SUCESS,
-				Event.POST_PERSON_INSERTADDR_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FinduserlocReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FinduserlocReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FinduserlocReq.java	(revision )
@@ -1,39 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  FinduserlocReq
- * @Description: 获取个人中心我的地址
- * @author YY
- * @date 2015年6月8日 上午10:46:38
- */
-public class FinduserlocReq extends HttpReq {
-
-	private int userCode;
-
-	public FinduserlocReq(int reqid, int userCode) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode="+userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/listasgrid/ListAsGridBaseAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/listasgrid/ListAsGridBaseAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/listasgrid/ListAsGridBaseAdapter.java	(revision )
@@ -1,194 +0,0 @@
-package com.anniu.shandiandaojia.view.listasgrid;
-
-import android.content.Context;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.widget.BaseAdapter;
-import android.widget.LinearLayout;
-
-/**
- * Created by shalafi on 6/6/13.
- */
-public abstract class ListAsGridBaseAdapter extends BaseAdapter {
-
-	private class ListItemClickListener implements OnClickListener {
-
-		private int mPosition;
-
-		public ListItemClickListener(int currentPos) {
-			mPosition = currentPos;
-		}
-
-		@Override
-		public void onClick(View v) {
-			onGridItemClicked(v, mPosition);
-		}
-	}
-
-	private int mNumColumns;
-	private int mVideoGroupPadding;
-	private Context mContext;
-	private GridItemClickListener mGridItemClickListener;
-	private int mBackgroundResource = -1;
-
-	public ListAsGridBaseAdapter(Context context) {
-		mContext = context;
-		mNumColumns = 1;
-		mVideoGroupPadding = 0;
-	}
-
-	public void setBackgroundResource(int drawableResId) {
-		mBackgroundResource = drawableResId;
-	}
-
-	public final void setOnGridClickListener(GridItemClickListener listener) {
-		mGridItemClickListener = listener;
-	}
-
-	private final void onGridItemClicked(View v, int position) {
-		if (mGridItemClickListener != null) {
-			mGridItemClickListener.onGridItemClicked(v, position,
-					getItemId(position));
-		}
-	}
-
-	public final int getNumColumns() {
-		return mNumColumns;
-	}
-
-	public final void setNumColumns(int numColumns) {
-		mNumColumns = numColumns;
-		notifyDataSetChanged();
-	}
-	
-	public final int getVideoGroupPadding() {
-		return mVideoGroupPadding;
-	}
-
-	public final void setVideoGroupPadding(int mVideoGroupPadding) {
-		this.mVideoGroupPadding = mVideoGroupPadding;
-		notifyDataSetChanged();
-	}
-
-	@Override
-	public final int getCount() {
-		return (int) Math.ceil(getItemCount() * 1f / getNumColumns());
-	}
-
-	public abstract int getItemCount();
-
-	protected abstract View getItemView(int position, View view,
-			ViewGroup parent);
-
-	@Override
-	public final View getView(int position, View view, ViewGroup viewGroup) {
-		LinearLayout layout;
-		int columnWidth = 0;
-		if (viewGroup != null) {
-			columnWidth = (viewGroup.getWidth()-mVideoGroupPadding) / mNumColumns;
-		} else if (view != null) {
-			columnWidth = (viewGroup.getWidth()-mVideoGroupPadding) / mNumColumns;
-		}
-		// Make it be rows of the number of columns
-		if (view == null) {
-			// This is items view
-			layout = createItemRow(position, viewGroup, columnWidth);
-		} else {
-			layout = (LinearLayout) view;
-			updateItemRow(position, viewGroup, layout, columnWidth);
-		}
-		return layout;
-	}
-
-	@Override
-	public int getViewTypeCount() {
-		// Not necessary for only 1 column
-		if (getNumColumns() == 1)
-			return 1;
-
-		return 2;
-	}
-
-	@Override
-	public int getItemViewType(int position) {
-		// Not necessary for only 1 column
-		if (getNumColumns() == 1)
-			return 0;
-
-		// If we have an odd item count and this is the last row, use the view
-		// type with filler views
-		if (getItemCount() % 2 != 0 && position == getCount() - 1) {
-			return 1;
-		}
-
-		return 0;
-	}
-
-	private LinearLayout createItemRow(int position, ViewGroup viewGroup,
-			int columnWidth) {
-		LinearLayout layout;
-		layout = new LinearLayout(mContext);
-		if (mBackgroundResource > 0) {
-			layout.setBackgroundResource(mBackgroundResource);
-		}
-		int adjustedColumnWidth = columnWidth
-				- (layout.getPaddingLeft() + layout.getPaddingRight())
-				/ mNumColumns;
-		layout.setOrientation(LinearLayout.HORIZONTAL);
-		// Now add the sub views to it
-		for (int i = 0; i < mNumColumns; i++) {
-			int currentPos = position * mNumColumns + i;
-			// Get the new View
-			View insideView;
-			if (currentPos < getItemCount()) {
-				insideView = getItemView(currentPos, null, viewGroup);
-				insideView.setVisibility(View.VISIBLE);
-				View theView = getItemView(currentPos, insideView, viewGroup);
-				theView.setOnClickListener(new ListItemClickListener(currentPos));
-			} else {
-				insideView = new View(mContext);
-				insideView.setVisibility(View.INVISIBLE);
-			}
-			layout.addView(insideView);
-			// Set the width of this column
-			LayoutParams params = insideView.getLayoutParams();
-			params.width = adjustedColumnWidth;
-			insideView.setLayoutParams(params);
-		}
-		return layout;
-	}
-
-	private void updateItemRow(int position, ViewGroup viewGroup,
-			LinearLayout layout, int columnWidth) {
-		int realColumnWidth = columnWidth
-				- (layout.getPaddingLeft() + layout.getPaddingRight())
-				/ mNumColumns;
-		for (int i = 0; i < mNumColumns; i++) {
-			int currentPos = position * mNumColumns + i;
-			View insideView = layout.getChildAt(i);
-			// If there are less views than objects. add a view here
-			if (insideView == null) {
-				insideView = new View(mContext);
-				layout.addView(insideView);
-			}
-			// Set the width of this column
-			LayoutParams params = insideView.getLayoutParams();
-			params.width = realColumnWidth;
-			insideView.setLayoutParams(params);
-
-			if (currentPos < getItemCount()) {
-				insideView.setVisibility(View.VISIBLE);
-				// Populate the view
-				View theView = getItemView(currentPos, insideView, viewGroup);
-				theView.setOnClickListener(new ListItemClickListener(currentPos));
-				if (!theView.equals(insideView)) {
-					// DO NOT CHANGE THE VIEWS
-				}
-			} else {
-				insideView.setVisibility(View.INVISIBLE);
-			}
-		}
-	}
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterFindReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterFindReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterFindReq.java	(revision )
@@ -1,40 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/***
- * 
- * @ClassName: WaterFindReq
- * @Description: 初始化一键送水界面
- * @author YY
- * @date 2015年6月16日 上午11:04:42
- */
-public class WaterFindReq extends HttpReq {
-
-	private int shopCode;
-
-	public WaterFindReq(int reqid,int shopCode) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?shop_code=" + shopCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/HomeCategoryGoodsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/HomeCategoryGoodsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/HomeCategoryGoodsAdapter.java	(revision )
@@ -1,179 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.Paint;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.view.animation.Animation;
-import android.view.animation.AnimationSet;
-import android.view.animation.ScaleAnimation;
-import android.view.animation.TranslateAnimation;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.RegistActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-import com.nostra13.universalimageloader.core.assist.ImageScaleType;
-
-import java.util.ArrayList;
-import java.util.List;
-
-public class HomeCategoryGoodsAdapter extends BaseAdapter {
-	private List<Goods> mList = new ArrayList<Goods>();
-	private ImageLoader mImageLoader;
-	private LayoutInflater mInflater;
-	private DisplayImageOptions options;
-	private Context mContext;
-
-	@SuppressWarnings("deprecation")
-	public HomeCategoryGoodsAdapter(Context context, List<Goods> list) {
-		super();
-		this.mList = list;
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)
-				// 设置图片的解码类型
-				.showStubImage(R.drawable.no_data)
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.imageScaleType(ImageScaleType.IN_SAMPLE_INT)
-				.build();
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_bargain_goods, null);
-			holder.rl_price = (RelativeLayout) convertView.findViewById(R.id.rl_price);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			
-			LayoutParams imgParams = holder.shopImg.getLayoutParams();
-			imgParams.height = App.windowWidth / 3;
-			imgParams.width = App.windowWidth / 3;
-			holder.shopImg.setLayoutParams(imgParams);
-			
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.promotePrice = (TextView) convertView.findViewById(R.id.tv_promote_price);
-			holder.add = (ImageView) convertView.findViewById(R.id.iv_add);
-			holder.add.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					if (Utils.loginState()) {
-						Goods goods = (Goods) v.getTag(R.id.tag_first);
-						
-						sendAddGood2CartAction(goods.getChange_code(),goods.getLimited());
-//						startAnimation((ImageView) v.getTag(R.id.tag_second));
-					} else {
-						mContext.startActivity(new Intent(mContext,RegistActivity.class));
-					}
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		
-		mImageLoader.displayImage(goods.getPictrue_addr(), holder.shopImg, options);
-		holder.goodsName.setText(goods.getGoods_name());
-		int status = goods.getGoods_status();
-		if (status == 1) {// 特价
-			holder.rl_price.setVisibility(View.VISIBLE);
-			holder.goodsPrice.setText("￥" + goods.getGoods_price());
-			holder.promotePrice.setText("￥" + goods.getPromote_price());
-			holder.goodsPrice.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG);
-		} else {
-			holder.rl_price.setVisibility(View.GONE);
-			holder.promotePrice.setText("￥" + goods.getGoods_price());
-		}
-		holder.add.setTag(R.id.tag_first, goods);
-		holder.add.setTag(R.id.tag_second, holder.shopImg);
-		return convertView;
-	}
-
-	static class ViewHolder {
-		ImageView shopImg;
-		TextView goodsName;
-		TextView goodsPrice;
-		TextView promotePrice;
-		ImageView add;
-		RelativeLayout rl_price;
-	}
-	
-	public void addData(ArrayList<Goods> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-
-	public void sendAddGood2CartAction(int changecode,int limited){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(mContext, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 1);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,limited);
-		App.getInstance().sendAction(intent);
-	}
-
-	public void startAnimation(ImageView imageview){
-		int py = App.windowHeight;
-		int px = App.windowWidth;
-		
-		float x = imageview.getX();
-		float y = imageview.getY();
-		Animation msa = new ScaleAnimation(
-			1.0f, 0, 1.0f, 0,
-			Animation.ABSOLUTE, 0.5f,
-			Animation.ABSOLUTE, 0.5f);
-			msa.setDuration(1000);
-			msa.setFillAfter(true);
-		
-		Animation mta = new TranslateAnimation(
-				Animation.ABSOLUTE, x / 2, Animation.ABSOLUTE, (px - x) / 2,
-				Animation.ABSOLUTE, y / 2, Animation.ABSOLUTE, (py - y) / 2);
-		mta.setDuration(1000);
-		AnimationSet mas = new AnimationSet(false);
-		mas.addAnimation(msa);
-		mas.setFillAfter(true);
-		mas.addAnimation(mta);
-		imageview.startAnimation(mas);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/GlobalValue.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/GlobalValue.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/GlobalValue.java	(revision )
@@ -1,31 +0,0 @@
-package com.anniu.shandiandaojia.net;
-
-public class GlobalValue {
-	/** 编码方式 utf-8 */
-	public static String ENCODING = "utf-8";
-	/** 状态码 */
-	public static String KEY_CODE = "errcode";
-	/** 提示信息 */
-	public static String KEY_MSG = "msg";
-	/** 返回结果 */
-	public static String KEY_RESULT = "result";
-	/** 返回状态码 正常 */
-	public static String KEY_CODE_NORMAL = "1001";
-	/** 返回状态码 缺少参数 */
-	public static String KEY_CODE_MISSING_PARAMETERS = "1002";
-	/** 返回状态码 数据格式错误 */
-	public static String KEY_CODE_DATA_FORMATTING_ERROR = "1003";
-	/** 返回状态码 无权限 */
-	public static String KEY_CODE_NO_PERMISSION = "1004";
-	/** 返回状态码 找不到记录 */
-	public static String KEY_CODE_NO_RECORD = "1005";
-	/** 返回状态码 服务器内部错误 */
-	public static String KEY_CODE_INTERNAL_ERROR = "1006";
-	/** 返回状态码 Token错误 */
-	public static String KEY_CODE_TOKEN_ERROR = "1007";
-	/** 返回状态码 请求接口错误 */
-	public static String KEY_CODE_INTERFACE_ERROE = "1008";
-	/** 返回状态码 数据库错误 */
-	public static String KEY_CODE_DATABASE_ERROR = "1009";
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/CommonDialog.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/CommonDialog.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/CommonDialog.java	(revision )
@@ -1,157 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.app.Activity;
-import android.app.AlertDialog;
-import android.content.Context;
-import android.view.Display;
-import android.view.View;
-import android.view.Window;
-import android.widget.Button;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-
-
-/**
-* @ClassName: CommonDialog 
-* @Description: 自定义对话框 
-* @author zxl 
-* @date 2014年10月11日 下午2:49:30
- */
-public class CommonDialog {
-
-    private Context context;
-    private AlertDialog ad;
-    private TextView titleView;
-    private TextView messageView;
-    private LinearLayout buttonLayout;
-    protected Button confirmBtn;
-    protected Button cancelBtn;
-    private LinearLayout cancleLayout;
-
-    public CommonDialog(Context context) {
-        this.context = context;
-        ad = new android.app.AlertDialog.Builder(context).create();
-        ad.show();
-        // 关键在下面的两行,使用window.setContentView,替换整个对话框窗口的布局
-        Window window = ad.getWindow();
-        Display mDisplay = ((Activity) context).getWindowManager().getDefaultDisplay();
-        int W = (int) (mDisplay.getWidth() * 0.8f);
-        int H = (int) (W * 0.9f);
-        window.setContentView(R.layout.commondialog);
-        // window.set
-        window.setLayout(W, H);
-        titleView = (TextView) window.findViewById(R.id.title);
-        // 默认隐藏标题
-        titleView.setVisibility(View.GONE);
-        messageView = (TextView) window.findViewById(R.id.message);
-        buttonLayout = (LinearLayout) window.findViewById(R.id.buttonLayout);
-        confirmBtn = (Button) window.findViewById(R.id.confirmBtn);
-        cancelBtn = (Button) window.findViewById(R.id.cancelBtn);
-        cancleLayout = (LinearLayout) window.findViewById(R.id.cancleLayout);
-    }
-
-    public void setCancel(boolean cancel) {
-        ad.setCancelable(cancel);
-        ad.setCanceledOnTouchOutside(cancel);
-    }
-
-    /**
-     * 设置一个确定按钮
-     * 
-     * @param b
-     */
-    public void setSingleButton(boolean b) {
-        if (b && null != cancleLayout) {
-            cancleLayout.setVisibility(View.GONE);
-        }
-    }
-
-    public void setTitle(String title) {
-        titleView.setVisibility(View.VISIBLE);
-        titleView.setText(title);
-    }
-
-    public void setTitle(int stringId) {
-        titleView.setVisibility(View.VISIBLE);
-        titleView.setText(stringId);
-    }
-
-    public void setMessage(String message) {
-        messageView.setText(message);
-    }
-
-    public void setMessage(int stringId) {
-        messageView.setText(stringId);
-    }
-
-    /**
-     * 设置按钮
-     * 
-     * @param text
-     * @param listener
-     */
-    public void setPositiveButton(String text,
-            final View.OnClickListener listener) {
-        confirmBtn.setText(text);
-        confirmBtn.setOnClickListener(listener);
-        /*
-         * Button button=new Button(context); LinearLayout.LayoutParams
-         * params=new LayoutParams(LayoutParams.WRAP_CONTENT,
-         * LayoutParams.WRAP_CONTENT); button.setLayoutParams(params);
-         * //button.setBackgroundResource(R.drawable.alertdialog_button);
-         * button.setText(text); //button.setTextColor(Color.WHITE);
-         * button.setTextSize(16); button.setOnClickListener(listener);
-         * buttonLayout.addView(button);
-         */
-    }
-
-    public void setCancelBtnTag(int mode) {
-        if (cancelBtn != null) {
-            cancelBtn.setTag(mode);
-        }
-    }
-
-    public void setConfirmBtnTag(int mode) {
-        if (confirmBtn != null) {
-            confirmBtn.setTag(mode);
-        }
-    }
-
-    /**
-     * 取消按钮
-     * 
-     * @param text
-     * @param listener
-     */
-    public void setNegativeButton(String text,
-            final View.OnClickListener listener) {
-        cancelBtn.setText(text);
-        cancelBtn.setOnClickListener(listener);
-        /*
-         * Button button=new Button(context); LinearLayout.LayoutParams
-         * params=new LayoutParams(LayoutParams.WRAP_CONTENT,
-         * LayoutParams.WRAP_CONTENT); button.setLayoutParams(params);
-         * //button.setBackgroundResource(R.drawable.alertdialog_button);
-         * button.setText(text); //button.setTextColor(Color.WHITE);
-         * button.setTextSize(20); button.setOnClickListener(listener);
-         * if(buttonLayout.getChildCount()>0) { params.setMargins(20, 0, 0, 0);
-         * button.setLayoutParams(params); buttonLayout.addView(button, 1);
-         * }else{ button.setLayoutParams(params); buttonLayout.addView(button);
-         * }
-         */
-
-    }
-
-    /**
-     * 关闭对话框
-     */
-    public void dismiss() {
-        ad.dismiss();
-    }
-
-    public void show() {
-        ad.show();
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CategoryGoodsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CategoryGoodsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CategoryGoodsAdapter.java	(revision )
@@ -1,170 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.Paint;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.GoodsDetailActivity;
-import com.anniu.shandiandaojia.activity.RegistActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.listasgrid.ListAsGridBaseAdapter;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.List;
-
-/**
- * @ClassName: BargainGoodsAdapter
- * @Description: 商品分类数据适配器
- * @author zxl
- * @date 2015年6月2日 下午7:40:26
- */
-public class CategoryGoodsAdapter extends ListAsGridBaseAdapter {
-
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private List<Goods> mList;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	public int changecode;
-
-	@SuppressWarnings("deprecation")
-	public CategoryGoodsAdapter(Context context) {
-		super(context);
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)//设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-
-	@Override
-	public Object getItem(int position) {
-		if (mList != null) {
-			return mList.get(position);
-		}
-		return null;
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	public void setItem(List<Goods> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-	
-	@Override
-	public int getItemCount() {
-		if (mList != null) {
-			return mList.size();
-		}
-		return 0;
-	}
-
-	@Override
-	protected View getItemView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_bargain_goods, null);
-			holder.rl_price = (RelativeLayout) convertView.findViewById(R.id.rl_price);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.promotePrice = (TextView) convertView.findViewById(R.id.tv_promote_price);
-			holder.add = (ImageView) convertView.findViewById(R.id.iv_add);
-			holder.add.setOnClickListener(new OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					if (Utils.loginState()) {// 先判断有没有登陆
-						Goods goods = (Goods) v.getTag();
-						sendAddGood2CartAction(goods.getChange_code(),goods.getLimited());
-					}else {
-						mContext.startActivity(new Intent(mContext,RegistActivity.class));
-					}
-				}
-			});
-			
-			holder.shopImg.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					Goods good = (Goods) v.getTag();
-					Intent intent = new Intent(mContext, GoodsDetailActivity.class);
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_CODE, good.getChange_code());
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_NUMBER, good.getGoods_num());
-					mContext.startActivity(intent);
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		mImageLoader.displayImage(goods.getPictrue_addr(), holder.shopImg,options);
-		holder.goodsName.setText(goods.getGoods_name());
-		holder.goodsName.setTextColor(mContext.getResources().getColor(R.color.black));//设置分类页面字体颜色
-		
-		int status = goods.getGoods_status();
-		if (status == 1) {//特价
-			holder.rl_price.setVisibility(View.VISIBLE);
-			holder.goodsPrice.setText("￥"+goods.getGoods_price()+"");
-			holder.promotePrice.setVisibility(View.VISIBLE);
-			holder.promotePrice.setText("￥"+goods.getPromote_price()+"");
-			holder.goodsPrice.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG );
-		}else{
-			holder.rl_price.setVisibility(View.GONE);
-			holder.promotePrice.setText("￥"+goods.getGoods_price()+"");
-		}
-		holder.add.setTag(goods);
-		holder.shopImg.setTag(goods);
-		return convertView;
-	}
-	
-	static class ViewHolder {
-		RelativeLayout rl_price;
-		ImageView shopImg;
-		TextView goodsName;
-		TextView goodsPrice;
-		TextView promotePrice;
-		ImageView add;
-	}
-	
-	
-	/** 添加商品数量 */
-	public void sendAddGood2CartAction(int changecode,int limited){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(mContext, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 1);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED, limited);
-		App.getInstance().sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterSubmitReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterSubmitReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterSubmitReq.java	(revision )
@@ -1,70 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/***
- * @ClassName: WaterSubmitReq
- * @Description: 购买水票
- * @author zxl
- * @date 2015年7月15日 下午2:52:02
- */
-public class WaterSubmitReq extends HttpReq {
-	private int shop_code;
-	private int user_code;
-	private int goods_code;
-	private int payway;
-
-	public WaterSubmitReq(int reqid, int shop_code, int user_code,
-			int goods_code, int payway) {
-		super();
-		this.id = reqid;
-		this.shop_code = shop_code;
-		this.user_code = user_code;
-		this.goods_code = goods_code;
-		this.payway = payway;
-	}
-
-	public int getUser_code() {
-		return user_code;
-	}
-
-	public void setUser_code(int user_code) {
-		this.user_code = user_code;
-	}
-
-	public int getGoods_code() {
-		return goods_code;
-	}
-
-	public void setGoods_code(int goods_code) {
-		this.goods_code = goods_code;
-	}
-
-	public int getPayway() {
-		return payway;
-	}
-
-	public void setPayway(int payway) {
-		this.payway = payway;
-	}
-
-	public int getShop_code() {
-		return shop_code;
-	}
-
-	public void setShop_code(int shop_code) {
-		this.shop_code = shop_code;
-	}
-
-	@Override
-	public String getParams() {
-		return "shop_code=" + shop_code + "&user_code=" + user_code
-				+ "&goods_code=" + goods_code + "&payway=" + payway;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/AppConfig.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/AppConfig.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/AppConfig.java	(revision )
@@ -1,107 +0,0 @@
-package com.anniu.shandiandaojia.app;
-
-import android.content.Context;
-import android.content.SharedPreferences;
-import android.preference.PreferenceManager;
-
-import com.anniu.shandiandaojia.utils.MyLog;
-
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileOutputStream;
-import java.util.Properties;
-
-/**
-* @ClassName: AppConfig 
-* @Description: 应用程序配置类：用于保存用户相关信息及设置 
-* @author zxl
-* @date 2015年7月16日 下午2:08:26
- */
-public class AppConfig {
-	private final static String APP_CONFIG = "config";
-	private Context mContext;
-	private static AppConfig appConfig;
-	public static AppConfig getAppConfig(Context context) {
-		if (appConfig == null) {
-			appConfig = new AppConfig();
-			appConfig.mContext = context;
-		}
-		return appConfig;
-	}
-	
-	/**
-	 * 获取Preference设置
-	 */
-	public static SharedPreferences getSharedPreferences(Context context) {
-		return PreferenceManager.getDefaultSharedPreferences(context);
-	}
-	
-	public String get(String key) {
-		Properties props = get();
-		return (props != null) ? props.getProperty(key) : null;
-	}
-
-	public Properties get() {
-		FileInputStream fis = null;
-		Properties props = new Properties();
-		try {
-			// 读取files目录下的config
-			// fis = activity.openFileInput(APP_CONFIG);
-			// 读取app_config目录下的config
-			File dirConf = mContext.getDir(APP_CONFIG, Context.MODE_PRIVATE);
-			fis = new FileInputStream(dirConf.getPath() + File.separator+ APP_CONFIG);
-			props.load(fis);
-		} catch (Exception e) {
-		} finally {
-			try {
-				fis.close();
-			} catch (Exception e) {
-			}
-		}
-		return props;
-	}
-
-	private void setProps(Properties p) {
-		FileOutputStream fos = null;
-		try {
-			// 把config建在files目录下
-			// fos = activity.openFileOutput(APP_CONFIG, Context.MODE_PRIVATE);
-
-			// 把config建在(自定义)app_config的目录下
-			File dirConf = mContext.getDir(APP_CONFIG, Context.MODE_PRIVATE);
-			String path = dirConf.getAbsolutePath();
-			MyLog.i("App", "path:" + path);
-			File conf = new File(dirConf, APP_CONFIG);
-			fos = new FileOutputStream(conf);
-
-			p.store(fos, null);
-			fos.flush();
-		} catch (Exception e) {
-			e.printStackTrace();
-		} finally {
-			try {
-				fos.close();
-			} catch (Exception e) {
-			}
-		}
-	}
-
-	public void set(Properties ps) {
-		Properties props = get();
-		props.putAll(ps);
-		setProps(props);
-	}
-
-	public void set(String key, String value) {
-		Properties props = get();
-		props.setProperty(key, value);
-		setProps(props);
-	}
-
-	public void remove(String... key) {
-		Properties props = get();
-		for (String k : key)
-			props.remove(k);
-		setProps(props);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableListView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableListView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableListView.java	(revision )
@@ -1,87 +0,0 @@
-package com.anniu.shandiandaojia.view.pulltorefreshlayout.pullableview;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.widget.ListView;
-
-import com.anniu.shandiandaojia.utils.MyLog;
-
-public class PullableListView extends ListView implements Pullable
-{
-	
-	private boolean enablePullDown = true;
-	private boolean enablePullUp = true;
-
-	public PullableListView(Context context)
-	{
-		super(context);
-	}
-
-	public PullableListView(Context context, AttributeSet attrs)
-	{
-		super(context, attrs);
-	}
-
-	public PullableListView(Context context, AttributeSet attrs, int defStyle)
-	{
-		super(context, attrs, defStyle);
-	}
-
-	@Override
-	public boolean canPullDown()
-	{
-		if(!enablePullDown){
-			return false;
-		}
-		if (getCount() == 0)
-		{
-			// 没有item的时候也可以下拉刷新
-			return true;
-		} else if (getFirstVisiblePosition() == 0
-				&& getChildAt(0)!=null && getChildAt(0).getTop() >= 0)
-		{
-			// 滑到ListView的顶部了
-			return true;
-		} else
-			return false;
-	}
-
-	@Override
-	public boolean canPullUp()
-	{
-		if(!enablePullUp){
-			return false;
-		}
-		if (getCount() == 0)
-		{
-			// 没有item的时候也可以上拉加载
-			return true;
-		} else if (getLastVisiblePosition() == (getCount() - 1))
-		{
-			MyLog.i("PullableListView", "getLastVisiblePosition:"+getLastVisiblePosition());
-			// 滑到底部了
-			if (getChildAt(getLastVisiblePosition() - getFirstVisiblePosition()) != null
-					&& getChildAt(
-							getLastVisiblePosition()
-									- getFirstVisiblePosition()).getBottom() <= getMeasuredHeight())
-				return true;
-		}
-		return false;
-	}
-
-	public boolean isEnablePullDown() {
-		return enablePullDown;
-	}
-
-	public void setEnablePullDown(boolean enablePullDown) {
-		this.enablePullDown = enablePullDown;
-	}
-
-	public boolean isEnablePullUp() {
-		return enablePullUp;
-	}
-
-	public void setEnablePullUp(boolean enablePullUp) {
-		this.enablePullUp = enablePullUp;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterTicketActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterTicketActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterTicketActivity.java	(revision )
@@ -1,207 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.DialogInterface;
-import android.content.DialogInterface.OnClickListener;
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.KeyEvent;
-import android.view.View;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ListView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.WaterTicketAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.DialogUtils;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-/**
- * @ClassName:  WaterTicketActivity
- * @Description: 我的水票
- * @author YY
- * @date 2015年5月30日 下午5:20:31
- */
-public class WaterTicketActivity extends BaseActivity implements OnItemClickListener {
-	private TextView titleBarTv;
-	ArrayList<String> groupList = new ArrayList<String>();
-	private ListView listview;
-	private WaterTicketAdapter waterTicketAdapter;
-	private RelativeLayout rl_goumai;
-	public static String EXTRA_CODE = "code";
-	private ArrayList<WaterInfo> waterList = new ArrayList<>();
-	/**状态码*/
-	public static int REQUEST_CODE = 4;
-	public static String TICKET = "WaterTicketInfo";
-	public WaterInfo waterDefault = null;
-	public static String EXTRA_FROM = "from";
-	private int from = 0;//0个人中心，1水票详情支付页面，2一鍵送水订单确认页面
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {//返回
-			if (from == 0) {
-				
-			} else if (from == 1) {
-				startActivity(new Intent(this, MainActivity.class));
-			}else{
-				setTicket(waterDefault);
-			}
-			finish();
-		}else if (v.getId()==R.id.rl_goumai) {//继续购买水票
-			startActivity(new Intent(this,BuyWaterTicket.class));
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_water_ticket);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("我的水票");
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		listview = (ListView) findViewById(R.id.lv_waterticketinfo);
-		listview.setOnItemClickListener(this);
-		rl_goumai = (RelativeLayout) findViewById(R.id.rl_goumai);
-		rl_goumai.setOnClickListener(this);
-		
-		Intent intent = getIntent();
-		from = intent.getExtras().getInt(EXTRA_FROM, 0);
-		
-		if (from == 2) {
-			waterDefault = (WaterInfo) intent.getSerializableExtra(TICKET);
-		}
-		
-		findWaterTicket();
-	}
-
-	@SuppressWarnings("rawtypes")
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_PERSON_FINDTICKETS_SUCESS://获取个人中心我的水票成功事件
-			ArrayList<WaterInfo> waterinfoList = (ArrayList<WaterInfo>) bundle.getSerializable(TicketLogic.EXTRA_VOUCHER_TICKET_LIST);
-			if(from == 1) {
-				setData(waterinfoList);
-				DialogUtils.showTicketDialog(this, "您购买的水票已成功添加您的账户，"+10+"元代金券已经放入您的代金券中，请查收，祝您购物愉快！", new OnClickListener() {
-					
-					@Override
-					public void onClick(DialogInterface dialog, int which) {
-						dialog.dismiss();
-					}
-				});
-			} else {
-				setData(waterinfoList);
-			}
-			break;
-		case Event.GET_PERSON_FINDTICKETS_FAILED://获取个人中心我的水票失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_WATER_SELECTEDTICKET_SUCESS://点击切换水票成功事件
-			WaterInfo waterTicketInfo = (WaterInfo) bundle.getSerializable(TicketLogic.EXTRA_WATER_TICKET_INFO);
-			if (from == 0) {
-				startActivity(new Intent(this, AKeyWaterActivity.class));
-			} else if (from == 1) {
-				startActivity(new Intent(this, AKeyWaterActivity.class));
-			} else {
-				setTicket(waterTicketInfo);
-			}	
-			finish();
-			break;
-		case Event.GET_WATER_SELECTEDTICKET_FAILED://点击切换水票失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	private void setTicket(WaterInfo waterTicketInfo) {
-		Intent inten = new Intent();
-		inten.putExtra(TicketLogic.EXTRA_WATER_TICKET_INFO, waterTicketInfo);
-		setResult(REQUEST_CODE, inten);
-	}
-	
-	@SuppressWarnings({ "unchecked", "rawtypes" })
-	private void setData(ArrayList waterinfoList) {
-		if (waterinfoList != null && waterinfoList.size() > 0) {
-			waterList.clear();
-			waterList.addAll(waterinfoList);
-			if (waterTicketAdapter == null) {
-				waterTicketAdapter = new WaterTicketAdapter(this,waterList);
-				listview.setAdapter(waterTicketAdapter);
-			} else {
-				waterTicketAdapter.notifyDataSetChanged();
-			}
-		} else {
-			MyToast.show(this, "您还没有购买水票！");
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,  Event.GET_PERSON_FINDTICKETS_SUCESS,
-				Event.GET_PERSON_FINDTICKETS_FAILED,
-				Event.GET_WATER_SELECTEDTICKET_SUCESS,
-				Event.GET_WATER_SELECTEDTICKET_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			if (from == 0) {
-				
-			} else if (from == 1) {
-				startActivity(new Intent(this, MainActivity.class));
-			}else{
-				setTicket(waterDefault);
-			}
-			finish();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-	
-	/** 获取所有水票 */
-	private void findWaterTicket() {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_FINDWATERTICKET);
-		intent.putExtra(TicketLogic.EXTRA_USER_CODE,SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(TicketLogic.EXTRA_SHOP_CODE,SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		sendAction(intent);
-	}
-	
-	/**点击切换使用该水券*/
-	protected void getWaterUsetickets(int tic_code) {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_WATER_SELECTEDTICKET);
-		intent.putExtra(TicketLogic.EXTRA_TIC_CODE, tic_code);
-		sendAction(intent);
-	}
-
-	@Override
-	public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
-		WaterInfo info = waterList.get(position);
-		getWaterUsetickets(info.getTic_code());
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MessageCenterActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MessageCenterActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MessageCenterActivity.java	(revision )
@@ -1,83 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.graphics.Color;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.Utils;
-/**
- * 
- * @ClassName:  MessageCenterActivity
- * @Description: 消息中心
- * @author YY
- * @date 2015年5月30日 下午8:18:31
- */
-public class MessageCenterActivity extends BaseActivity {
-
-	private TextView titleBarTv;
-	/**点击活动消息*/
-	private TextView tv_activity_news;
-	/**点击系统消息*/
-	private TextView tv_system_news;
-	private View activity_line;
-	private View system_line;
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {
-			finish();
-		}else if (v.getId()==R.id.tv_activity_news) {
-			tv_activity_news.setTextColor(this.getResources().getColor(R.color.title_color));
-			tv_system_news.setTextColor(Color.BLACK);
-			activity_line.setBackgroundColor(getResources().getColor(R.color.title_color));
-			system_line.setBackgroundColor(getResources().getColor(R.color.white));
-		}else if (v.getId()==R.id.tv_system_news) {
-			tv_system_news.setTextColor(this.getResources().getColor(R.color.title_color));
-			tv_activity_news.setTextColor(Color.BLACK);
-			activity_line.setBackgroundColor(getResources().getColor(R.color.white));
-			system_line.setBackgroundColor(getResources().getColor(R.color.title_color));
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_user_news);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("消息中心");
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		tv_activity_news = (TextView) findViewById(R.id.tv_activity_news);
-		tv_activity_news.setOnClickListener(this);
-		tv_activity_news.setTextColor(this.getResources().getColor(R.color.title_color));
-		tv_system_news = (TextView) findViewById(R.id.tv_system_news);
-		tv_system_news.setOnClickListener(this);
-		activity_line = findViewById(R.id.activity_line);
-		system_line = findViewById(R.id.system_line);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/PrepayIdReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/PrepayIdReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/PrepayIdReq.java	(revision )
@@ -1,46 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @author zxl
- * @ClassName: PrepayIdReq
- * @Description: 获取prepayid请求
- * @date 2015年7月6日 下午2:12:49
- */
-public class PrepayIdReq extends HttpReq {
-    private String body;
-    private String out_trade_no;
-
-    public PrepayIdReq(int id, String ordernum) {
-        super();
-        this.id = id;
-        this.out_trade_no = ordernum;
-    }
-
-    public String getOut_trade_no() {
-        return out_trade_no;
-    }
-
-    public void setOut_trade_no(String out_trade_no) {
-        this.out_trade_no = out_trade_no;
-    }
-
-    public String getBody() {
-        return body;
-    }
-
-    public void setBody(String body) {
-        this.body = body;
-    }
-
-    @Override
-    public String getParams() {
-        return "?out_trade_no=" + out_trade_no;
-    }
-
-    @Override
-    public String parseData(String str) {
-        return null;
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/UpdatePersoninfoReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/UpdatePersoninfoReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/UpdatePersoninfoReq.java	(revision )
@@ -1,77 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  UpdatePersoninfo
- * @Description: 保存个人中心姓名性别的请求
- * @author YY
- * @date 2015年6月5日 上午9:51:04
- */
-public class UpdatePersoninfoReq extends HttpReq {
-	/**用户姓名*/
-	private String userName;
-	/**用户性别*/
-	private int userSex;
-	/**用户ID*/
-	private int userCode;
-	
-	
-
-	public UpdatePersoninfoReq(int reqid,int userCode,String userName, int userSex) {
-		super();
-		this.id=reqid;
-		this.userCode=userCode;
-		this.userName = userName;
-		this.userSex = userSex;
-	}
-	
-	
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-
-
-	public String getUserName() {
-		return userName;
-	}
-
-
-
-	public void setUserName(String userName) {
-		this.userName = userName;
-	}
-
-
-
-	public int getUserSex() {
-		return userSex;
-	}
-
-
-
-	public void setUserSex(int userSex) {
-		this.userSex = userSex;
-	}
-
-
-
-	@Override
-	public String getParams() {
-		return "usercode=" + userCode + "&username=" + userName + "&sex="+ userSex;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/listasgrid/GridItemClickListener.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/listasgrid/GridItemClickListener.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/listasgrid/GridItemClickListener.java	(revision )
@@ -1,9 +0,0 @@
-package com.anniu.shandiandaojia.view.listasgrid;
-
-import android.view.View;
-
-public interface GridItemClickListener {
-
-	void onGridItemClicked(View v, int position, long itemId);
-
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/EditPage.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/EditPage.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/EditPage.java	(revision )
@@ -1,236 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.skyblue;
-
-import static com.mob.tools.utils.R.getIdRes;
-import static com.mob.tools.utils.R.getLayoutRes;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-
-import android.text.Editable;
-import android.text.TextWatcher;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.EditText;
-import android.widget.HorizontalScrollView;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.sharesdk.onekeyshare.EditPageFakeActivity;
-import com.sharesdk.onekeyshare.PicViewer;
-
-/** 执行图文分享的页面，此页面不支持微信平台的分享 */
-public class EditPage extends EditPageFakeActivity implements OnClickListener, TextWatcher {
-	private static final int MAX_TEXT_COUNT = 140;
-
-	// 字数计算器
-	private TextView textCounterTextView;
-	private EditText titleEditText;
-	private EditText textEditText;
-
-	public void onCreate() {
-		if (shareParamMap == null || platforms == null) {
-			finish();
-			return;
-		}
-
-		activity.setContentView(getLayoutRes(activity, "skyblue_editpage"));
-		initView();
-	}
-
-	private void initView() {
-		if(!dialogMode) {
-			RelativeLayout mainRelLayout = (RelativeLayout)findViewByResName("mainRelLayout");
-			RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) mainRelLayout.getLayoutParams();
-			lp.setMargins(0,0,0,0);
-			lp.height = RelativeLayout.LayoutParams.MATCH_PARENT;
-			mainRelLayout.setLayoutParams(lp);
-		}
-		initTitleView();
-		initBodyView();
-		initImageListView();
-	}
-
-	private void initTitleView() {
-		View backImageView = findViewByResName("backImageView");
-		backImageView.setTag("close");
-		backImageView.setOnClickListener(this);
-
-		View okImageView = findViewByResName("okImageView");
-		okImageView.setTag("ok");
-		okImageView.setOnClickListener(this);
-	}
-
-	private void initBodyView() {
-		View closeImageView = findViewByResName("closeImageView");
-		closeImageView.setTag("close");
-		closeImageView.setOnClickListener(this);
-
-		if(shareParamMap.containsKey("title")) {
-			titleEditText = (EditText) findViewByResName("titleEditText");
-			titleEditText.setText(String.valueOf(shareParamMap.get("title")));
-		}
-
-		textCounterTextView = (TextView) findViewByResName("textCounterTextView");
-		textCounterTextView.setText(String.valueOf(MAX_TEXT_COUNT));
-
-		textEditText = (EditText) findViewByResName("textEditText");
-		textEditText.addTextChangedListener(this);
-		textEditText.setText(String.valueOf(shareParamMap.get("text")));
-
-		initAtUserView();
-	}
-
-	private void initAtUserView() {
-		LinearLayout atLayout = (LinearLayout) findViewByResName("atLayout");
-		for(Platform platform : platforms) {
-			String platformName = platform.getName();
-			if (isShowAtUserLayout(platformName)) {
-				View view = LayoutInflater.from(activity).inflate(getLayoutRes(activity, "skyblue_editpage_at_layout"), null);
-				TextView atDescTextView = (TextView) view.findViewById(getIdRes(activity, "atDescTextView"));
-				TextView atTextView = (TextView) view.findViewById(getIdRes(activity, "atTextView"));
-
-				OnClickListener atBtnClickListener = new OnClickListener() {
-					public void onClick(View v) {
-						FollowListPage subPage = new FollowListPage();
-						subPage.setPlatform((Platform) v.getTag());
-						subPage.showForResult(activity, null, EditPage.this);
-					}
-				};
-				atTextView.setTag(platform);
-				atTextView.setOnClickListener(atBtnClickListener);
-				atDescTextView.setTag(platform);
-				atDescTextView.setOnClickListener(atBtnClickListener);
-
-				atTextView.setText(getAtUserButtonText(platformName));
-				atDescTextView.setText(getContext().getString(getStringRes(activity, "list_friends"), getLogoName(platformName)));
-
-				atLayout.addView(view);
-			}
-		}
-
-	}
-
-	private void initImageListView() {
-		final HorizontalScrollView hScrollView = (HorizontalScrollView) findViewByResName("hScrollView");
-		ImageListResultsCallback callback = new ImageListResultsCallback() {
-
-			@Override
-			public void onFinish(ArrayList<ImageInfo> results) {
-				if(results == null)
-					return;
-				LinearLayout layout = (LinearLayout) findViewByResName("imagesLinearLayout");
-				for(ImageInfo imageInfo : results) {
-					if(imageInfo.bitmap == null)
-						continue;
-					layout.addView(makeImageItemView(imageInfo));
-				}
-			}
-		};
-		if(!initImageList(callback)) {
-			hScrollView.setVisibility(View.GONE);
-		}
-
-	}
-
-	private View makeImageItemView(final ImageInfo imageInfo) {
-		final View view = LayoutInflater.from(activity).inflate(getLayoutRes(activity, "skyblue_editpage_inc_image_layout"), null);
-
-		ImageView imageView = (ImageView) view.findViewById(getIdRes(activity, "imageView"));
-		imageView.setImageBitmap(imageInfo.bitmap);
-		imageView.setOnClickListener(new OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				PicViewer pv = new PicViewer();
-				pv.setImageBitmap(imageInfo.bitmap);
-				pv.show(activity, null);
-			}
-		});
-
-		View removeBtn = view.findViewById(getIdRes(activity, "imageRemoveBtn"));
-		removeBtn.setTag(imageInfo);
-		removeBtn.setOnClickListener(new OnClickListener() {
-			@Override
-			public void onClick(View v) {
-				view.setVisibility(View.GONE);
-				removeImage((ImageInfo) v.getTag());
-			}
-		});
-
-		return view;
-	}
-
-	public void onClick(View v) {
-		if(v.getTag() == null)
-			return;
-		String tag = (String) v.getTag();
-		if (tag.equals("close")) {
-			// 取消分享的统计
-			for(Platform plat : platforms) {
-				ShareSDK.logDemoEvent(5, plat);
-			}
-			finish();
-			return;
-		}
-
-		if (tag.equals("ok")) {
-			onShareButtonClick(v);
-			return;
-		}
-	}
-
-	private void onShareButtonClick(View v) {
-		if(shareParamMap.containsKey("title")) {
-			String title = titleEditText.getText().toString().trim();
-			shareParamMap.put("title", title);
-		}
-
-		String text = textEditText.getText().toString().trim();
-		shareParamMap.put("text", text);
-
-		setResultAndFinish();
-	}
-
-	public void beforeTextChanged(CharSequence s, int start, int count,
-			int after) {
-
-	}
-
-	public void onTextChanged(CharSequence s, int start, int before, int count) {
-		int remain = MAX_TEXT_COUNT - textEditText.length();
-		textCounterTextView.setText(String.valueOf(remain));
-		textCounterTextView.setTextColor(remain > 0 ? 0xffcfcfcf : 0xffff0000);
-	}
-
-	public void afterTextChanged(Editable s) {
-
-	}
-
-	public void onResult(HashMap<String, Object> data) {
-		String atText = getJoinSelectedUser(data);
-		if(atText != null) {
-			textEditText.append(atText);
-		}
-	}
-
-	public boolean onFinish() {
-		textCounterTextView = null;
-		textEditText = null;
-		titleEditText = null;
-		return super.onFinish();
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/task/AppUpgradeService.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/task/AppUpgradeService.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/task/AppUpgradeService.java	(revision )
@@ -1,210 +0,0 @@
-package com.anniu.shandiandaojia.task;
-
-import android.app.Notification;
-import android.app.NotificationManager;
-import android.app.PendingIntent;
-import android.app.Service;
-import android.content.Intent;
-import android.content.pm.PackageInfo;
-import android.content.pm.PackageManager;
-import android.net.Uri;
-import android.os.Environment;
-import android.os.Handler;
-import android.os.IBinder;
-import android.os.Message;
-import android.view.View;
-import android.widget.RemoteViews;
-import android.widget.Toast;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.utils.DownloadUtils;
-import com.anniu.shandiandaojia.utils.ToastBasic;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.io.File;
-
-/**
- * app更新
- * @author zxl
- *
- */
-public class AppUpgradeService extends Service {
-
-	public static final int mNotificationId = 100; // 通知唯一id
-	private String mDownloadUrl = null; // app更新下载地址
-	private String apkFileName = "";
-	private NotificationManager mNotificationManager = null; //
-	private Notification mNotification = null; // 通知
-	private PendingIntent mPendingIntent = null; // 延时意图
-
-	private File destDir = null; // apk 存放目录
-	private File destFile = null; // apk 文件地址
-
-	private static final int DOWNLOAD_FAIL = -1; // 下载失败
-	private static final int DOWNLOAD_SUCCESS = 0; // 下载成功
-	private static final int DOWNLOAD_ING = 1;
-	private Handler mHandler;
-
-	@Override
-	public void onCreate() {
-		super.onCreate();
-		mHandler = new Handler() {
-			@Override
-			public void handleMessage(Message msg) {
-				switch (msg.what) {
-				case DOWNLOAD_SUCCESS:
-					ToastBasic.showToast(getApplicationContext(), "新版本下载成功,开始安装。", Toast.LENGTH_LONG);
-					install(destFile);
-					break;
-				case DOWNLOAD_FAIL:
-					ToastBasic.showToast(getApplicationContext(), "新版本下载失败，请稍后再试。", Toast.LENGTH_LONG);
-					mNotificationManager.cancel(mNotificationId);
-					break;
-				case DOWNLOAD_ING:
-					mNotification.contentView.setProgressBar(R.id.app_upgrade_progressbar, 100, msg.arg1, false);
-					mNotification.contentView.setTextViewText(R.id.app_upgrade_progresstext, msg.arg1 + "%"); // 更新进度
-					mNotificationManager.notify(mNotificationId, mNotification); // 刷新通知
-					break;
-				}
-			}
-
-		};
-	}
-
-	private DownloadUtils.DownloadListener downloadListener = new DownloadUtils.DownloadListener() {
-		@Override
-		public void downloading(int progress) {
-			Message msg = mHandler.obtainMessage();
-			msg.what = DOWNLOAD_ING;
-			msg.arg1 = progress;
-			mHandler.sendMessage(msg);
-		}
-
-		@Override
-		public void downloaded() { // 下载完成
-			mNotification.contentView.setViewVisibility(R.id.app_upgrade_progressblock, View.GONE);
-			mNotification.defaults = Notification.DEFAULT_SOUND;
-			mNotification.contentIntent = mPendingIntent;
-			mNotification.contentView.setTextViewText(R.id.app_upgrade_progresstext, "下载完成");
-			mNotificationManager.notify(mNotificationId, mNotification);
-			if (destFile.exists() && destFile.isFile() && checkApkFile(destFile.getPath())) { // 文件存在并apk包文件可以安装
-				Message msg = mHandler.obtainMessage();
-				msg.what = DOWNLOAD_SUCCESS;
-				mHandler.sendMessage(msg);
-			}
-			mNotificationManager.cancel(mNotificationId);
-		}
-	};
-
-	@Override
-	public IBinder onBind(Intent intent) {
-		return null;
-	}
-
-	@Override
-	public void onStart(Intent intent, int startId) {
-		mDownloadUrl = intent.getStringExtra("downloadUrl");
-		apkFileName = intent.getStringExtra("apkFileName");
-		if (Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {
-			destDir = new File(Environment.getExternalStorageDirectory().getPath() + "/");
-			if (destDir.exists()) {
-				File destFile = new File(destDir.getPath() + "/" + apkFileName);
-					showNotification();
-			}
-		} else {
-			super.onStart(intent, startId);
-		}
-
-		super.onStart(intent, startId);
-
-	}
-
-	/**
-	 * 功能描述：显示更新通知 创 建 人: DavikChen 日 期： 2012-12-20 上午11:56:13 修 改 人: 日 期:
-	 */
-	private void showNotification() {
-		mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
-		mNotification = new Notification();
-
-		mNotification.contentView = new RemoteViews(getApplication().getPackageName(), R.layout.upgrade_notification);
-
-		Intent completingIntent = new Intent();
-		completingIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
-		completingIntent.setClass(getApplication().getApplicationContext(), AppUpgradeService.class);
-
-		mPendingIntent = PendingIntent.getActivity(AppUpgradeService.this, R.string.app_name, completingIntent, PendingIntent.FLAG_UPDATE_CURRENT);
-
-		mNotification.icon = R.drawable.ic_launcher;
-		mNotification.tickerText = "下载中";
-		mNotification.contentIntent = mPendingIntent;
-		mNotification.contentView.setProgressBar(R.id.app_upgrade_progressbar, 100, 0, false);
-		mNotification.contentView.setTextViewText(R.id.app_upgrade_progresstext, "0%");
-		mNotificationManager.cancel(mNotificationId);
-		mNotificationManager.notify(mNotificationId, mNotification);
-		new AppUpgradeThread().start();
-	}
-
-	class AppUpgradeThread extends Thread {
-
-		@Override
-		public void run() {
-			if (Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {
-				if (destDir == null) {
-					destDir = new File(Environment.getExternalStorageDirectory().getPath() + "/");
-				}
-				if (destDir.exists() || destDir.mkdirs()) {
-					destFile = new File(destDir.getPath() + "/" + apkFileName);
-						try { // 下载app
-							DownloadUtils.download(mDownloadUrl, destFile, false, downloadListener);
-						} catch (Exception e) {
-							Message msg = mHandler.obtainMessage();
-							msg.what = DOWNLOAD_FAIL;
-							mHandler.sendMessage(msg);
-							e.printStackTrace();
-						}
-				}
-			}
-			stopSelf();
-		}
-	}
-
-	/**
-	 * 检查apk文件完整性
-	 * @param apkFilePath apk存放路径
-	 * @return true:完整 false:不完整
-	 */
-	public boolean checkApkFile(String apkFilePath) {
-		boolean result = false;
-		try {
-			PackageManager pManager = getPackageManager();
-			PackageInfo pInfo = pManager.getPackageArchiveInfo(apkFilePath, PackageManager.GET_ACTIVITIES);
-			if (pInfo == null) {
-				result = false;
-			} else {
-				int apkScard = pInfo.versionCode;
-				if (apkScard >= Integer.parseInt(Utils.getVersion(App.getInstance()).get(Utils.VERSION_CODE))) {
-					result = true;
-				} else {
-					result = false;
-				}
-			}
-		} catch (Exception e) {
-			result = false;
-			e.printStackTrace();
-		}
-		return result;
-	}
-
-	/**
-	 * 跳转到app安装界面
-	 * @param apkFile apk文件存放地址
-	 */
-	public void install(File apkFile) {
-		Uri uri = Uri.fromFile(apkFile);
-		Intent intent = new Intent(Intent.ACTION_VIEW);
-		intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
-		intent.setDataAndType(uri, "application/vnd.android.package-archive");		
-		startActivity(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/EditPageFakeActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/EditPageFakeActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/EditPageFakeActivity.java	(revision )
@@ -1,262 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare;
-
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.io.File;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-
-import android.graphics.Bitmap;
-import android.os.AsyncTask;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.Toast;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.mob.tools.FakeActivity;
-import com.mob.tools.utils.BitmapHelper;
-
-public class EditPageFakeActivity extends FakeActivity {
-
-	protected List<Platform> platforms;
-
-	protected HashMap<String, Object> shareParamMap;
-	// 设置显示模式为Dialog模式
-	protected boolean dialogMode;
-	protected View backgroundView;
-	protected ArrayList<String> toFriendList;
-	private ArrayList<ImageInfo> shareImageList;
-
-	public static class ImageInfo {
-		public String paramName;
-		public String srcValue;
-		public Bitmap bitmap;
-	}
-
-	protected static interface ImageListResultsCallback {
-		void onFinish(ArrayList<ImageInfo> results);
-	}
-
-	public void setShareData(HashMap<String, Object> data) {
-		shareParamMap = data;
-	}
-
-	/** 设置显示模式为Dialog模式 */
-	public void setDialogMode() {
-		dialogMode = true;
-	}
-
-	/**
-	 * @param bgView
-	 */
-	public void setBackgroundView(View bgView) {
-		this.backgroundView = bgView;
-	}
-
-	public void setPlatforms(List<Platform> supportEditPagePlatforms) {
-		this.platforms = supportEditPagePlatforms;
-	}
-
-	public String getLogoName(String platform) {
-		if (platform == null) {
-			return "";
-		}
-
-		int resId = getStringRes(getContext(), platform);
-		return getContext().getString(resId);
-	}
-
-	protected boolean isShowAtUserLayout(String platformName) {
-		return "SinaWeibo".equals(platformName) || "TencentWeibo".equals(platformName)
-				|| "Facebook".equals(platformName) || "Twitter".equals(platformName)
-				|| "FacebookMessenger".equals(platformName);
-	}
-
-	protected String getAtUserButtonText(String platform) {
-		return "FacebookMessenger".equals(platform) ? "To" : "@";
-	}
-
-	protected String getJoinSelectedUser(HashMap<String, Object> data) {
-		if (data != null && data.containsKey("selected")) {
-			@SuppressWarnings("unchecked")
-			ArrayList<String> selected = (ArrayList<String>) data.get("selected");
-			String platform = ((Platform)data.get("platform")).getName();
-			if("FacebookMessenger".equals(platform)) {
-				toFriendList = selected;
-				return null;
-			}
-			StringBuilder sb = new StringBuilder();
-			for (String sel : selected) {
-				sb.append('@').append(sel).append(' ');
-			}
-			return sb.toString();
-		}
-		return null;
-	}
-
-	public boolean haveImage(){
-		String imageUrl = (String) shareParamMap.get("imageUrl");
-		String imagePath = (String) shareParamMap.get("imagePath");
-		Bitmap viewToShare = (Bitmap) shareParamMap.get("viewToShare");
-		String[] imageArray = (String[]) shareParamMap.get("imageArray");
-
-		if(!TextUtils.isEmpty(imagePath) && new File(imagePath).exists()) {
-			return true;
-		} else if(viewToShare != null && !viewToShare.isRecycled()){
-			return true;
-		} else if (!TextUtils.isEmpty(imageUrl)) {
-			return true;
-		} else if(imageArray != null && imageArray.length > 0) {
-			return true;
-		}
-
-		return false;
-	}
-
-	protected boolean initImageList(ImageListResultsCallback callback) {
-		String imageUrl = (String) shareParamMap.get("imageUrl");
-		String imagePath = (String) shareParamMap.get("imagePath");
-		Bitmap viewToShare = (Bitmap) shareParamMap.get("viewToShare");
-		String[] imageArray = (String[]) shareParamMap.get("imageArray");
-
-		shareImageList = new ArrayList<ImageInfo>();
-		if(!TextUtils.isEmpty(imagePath) && new File(imagePath).exists()) {
-			ImageInfo imageInfo = new ImageInfo();
-			imageInfo.paramName = "imagePath";
-			imageInfo.srcValue = imagePath;
-			shareImageList.add(imageInfo);
-			shareParamMap.remove("imagePath");
-		} else if(viewToShare != null && !viewToShare.isRecycled()){
-			ImageInfo imageInfo = new ImageInfo();
-			imageInfo.paramName = "viewToShare";
-			imageInfo.bitmap = viewToShare;
-			shareImageList.add(imageInfo);
-			shareParamMap.remove("viewToShare");
-		} else if (!TextUtils.isEmpty(imageUrl)) {
-			ImageInfo imageInfo = new ImageInfo();
-			imageInfo.paramName = "imageUrl";
-			imageInfo.srcValue = imageUrl;
-			shareImageList.add(imageInfo);
-			shareParamMap.remove("imageUrl");
-		} else if(imageArray != null && imageArray.length > 0) {
-			for(String imageUri : imageArray) {
-				if(TextUtils.isEmpty(imageUri))
-					continue;
-				ImageInfo imageInfo = new ImageInfo();
-				imageInfo.paramName = "imageArray";
-				imageInfo.srcValue = imageUri;
-				shareImageList.add(imageInfo);
-			}
-			shareParamMap.remove("imageArray");
-		}
-
-		if(shareImageList.size() == 0) {
-			return false;
-		}
-
-		new AsyncTask<Object, Void, ImageListResultsCallback>() {
-			@Override
-			protected ImageListResultsCallback doInBackground(Object... objects) {
-				for(ImageInfo imageInfo : shareImageList) {
-					if(imageInfo.bitmap == null) {
-						try{
-							Bitmap bitmap;
-							String uri = imageInfo.srcValue;
-							if(uri.startsWith("http://") || uri.startsWith("https://")) {
-								uri = BitmapHelper.downloadBitmap(activity, uri);
-							}
-							bitmap = BitmapHelper.getBitmap(uri);
-							if(bitmap == null)
-								continue;
-
-							imageInfo.bitmap = bitmap;
-						} catch (Throwable e) {
-							e.printStackTrace();
-						}
-					}
-				}
-				return (ImageListResultsCallback) objects[0];
-			}
-
-			@Override
-			protected void onPostExecute(ImageListResultsCallback callback1) {
-				callback1.onFinish(shareImageList);
-			}
-		}.execute(callback);
-		return true;
-	}
-
-	protected void removeImage(ImageInfo imageInfo) {
-		if(shareImageList == null || imageInfo == null)
-			return;
-		shareImageList.remove(imageInfo);
-	}
-
-	protected void setResultAndFinish() {
-		ArrayList<String> imageArray = new ArrayList<String>();
-		if(shareImageList != null) {
-			for(ImageInfo imageInfo : shareImageList) {
-				if("imagePath".equals(imageInfo.paramName) || "imageUrl".equals(imageInfo.paramName)) {
-					shareParamMap.put(imageInfo.paramName, imageInfo.srcValue);
-				} else if("viewToShare".equals(imageInfo.paramName)) {
-					shareParamMap.put(imageInfo.paramName, imageInfo.bitmap);
-				} else if("imageArray".equals(imageInfo.paramName)) {
-					imageArray.add(imageInfo.srcValue);
-				}
-			}
-			shareImageList.clear();
-			if(imageArray.size() == 0) {
-				shareParamMap.put("imageArray", null);
-			} else {
-				shareParamMap.put("imageArray", imageArray.toArray(new String[imageArray.size()]));
-			}
-		}
-
-		HashMap<Platform, HashMap<String, Object>> editRes = new HashMap<Platform, HashMap<String,Object>>();
-
-		for(Platform platform : platforms) {
-
-			if("FacebookMessenger".equals(platform.getName())) {
-				HashMap<String, Object> param = new HashMap<String, Object>(shareParamMap);
-				if(toFriendList != null && toFriendList.size() > 0) {
-					param.put("address", toFriendList.get(toFriendList.size() - 1));
-				}
-				if(param.get("address") == null) {
-					int resId = getStringRes(activity, "select_a_friend");
-					if (resId > 0) {
-						Toast.makeText(getContext(), activity.getString(resId) + " - " + platform.getName(), Toast.LENGTH_SHORT).show();
-					}
-					return;
-				}
-				editRes.put(platform, param);
-				// a statistics of Sharing
-				ShareSDK.logDemoEvent(3, platform);
-				continue;
-			}
-			// a statistics of Sharing
-			ShareSDK.logDemoEvent(3, platform);
-			editRes.put(platform, shareParamMap);
-		}
-
-		HashMap<String, Object> res = new HashMap<String, Object>();
-		res.put("editRes", editRes);
-		setResult(res);
-		finish();
-	}
-
-	@Override
-	public boolean onFinish() {
-		shareImageList = null;
-		return super.onFinish();
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/PlatformListPage.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/PlatformListPage.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/PlatformListPage.java	(revision )
@@ -1,94 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.skyblue;
-
-import static com.mob.tools.utils.R.getLayoutRes;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.util.List;
-
-import android.os.AsyncTask;
-import android.view.View;
-import android.widget.GridView;
-import android.widget.Toast;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.sharesdk.onekeyshare.PlatformListFakeActivity;
-
-public class PlatformListPage extends PlatformListFakeActivity implements View.OnClickListener {
-	private PlatformGridViewAdapter gridViewAdapter;
-
-	public void onCreate() {
-		super.onCreate();
-		activity.setContentView(getLayoutRes(activity, "skyblue_share_platform_list"));
-
-		initView();
-	}
-
-	private void initView() {
-		View backImageView = findViewByResName("backImageView");
-		backImageView.setTag(android.R.string.cancel);
-		backImageView.setOnClickListener(this);
-
-		View okImageView = findViewByResName("okImageView");
-		okImageView.setTag(android.R.string.ok);
-		okImageView.setOnClickListener(this);
-
-		gridViewAdapter = new PlatformGridViewAdapter(activity);
-		gridViewAdapter.setCustomerLogos(customerLogos);
-
-		GridView gridView = (GridView) findViewByResName("gridView");
-		gridView.setAdapter(gridViewAdapter);
-
-		new AsyncTask<Void, Void, Platform[]>() {
-
-			@Override
-			protected Platform[] doInBackground(Void... params) {
-				return ShareSDK.getPlatformList();
-			}
-
-			@Override
-			protected void onPostExecute(Platform[] platforms) {
-				gridViewAdapter.setData(platforms, hiddenPlatforms);
-			}
-		}.execute();
-	}
-
-	public void onClick(View v) {
-		Object tag = v.getTag();
-		if(tag == null || !(tag instanceof Integer))
-			return;
-
-		switch ((Integer)tag) {
-			case android.R.string.cancel:
-				setCanceled(true);
-				finish();
-				break;
-			case android.R.string.ok:
-				onShareButtonClick(v);
-				break;
-		}
-	}
-
-	private void onShareButtonClick(View v) {
-		if(gridViewAdapter == null || "locked".equals(v.getTag()))
-			return;
-
-		List<Object> checkedPlatforms = gridViewAdapter.getCheckedItems();
-		if(checkedPlatforms.size() == 0){
-			Toast.makeText(activity, getStringRes(activity, "select_one_plat_at_least"), Toast.LENGTH_SHORT).show();
-			return;
-		}
-
-		v.setTag("locked");
-		onShareButtonClick(v, checkedPlatforms);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/Observable.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/Observable.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/Observable.java	(revision )
@@ -1,113 +0,0 @@
-package com.anniu.shandiandaojia.base.event;
-
-import com.anniu.shandiandaojia.utils.MyLog;
-
-import java.util.ArrayList;
-
-
-// 从java.util.Observable拷贝过来的, 修改了一下
-/**
- * 被观察者
- * 
- */
-public class Observable {
-	private final MultiHashMap<Integer, Observer> observers = new MultiHashMap<Integer, Observer>(12);
-
-	public Observable() {
-	}
-
-	/**
-	 * 或取对eventId这个消息监听的数目
-	 * 
-	 * @param eventId
-	 * @return
-	 */
-	public int getListenerCount(int eventId) {
-		ArrayList<Observer> ls = observers.get(eventId);
-		if (ls != null) {
-			return ls.size();
-		}
-		return 0;
-	}
-
-	/**
-	 * 是否有对eventId这个消息的监听
-	 * 
-	 * @param eventId
-	 * @return
-	 */
-	public boolean hasListener(int eventId) {
-		return getListenerCount(eventId) > 0;
-	}
-
-	/**
-	 * 添加一个对eventId消息的监听.
-	 * 
-	 * @param eventId
-	 * @param listener
-	 */
-	synchronized public void addListener(int eventId, Observer listener) {
-		observers.put(eventId, listener);
-	}
-
-	/**
-	 * 清除eventId之前的所有监听, 添加新监听listener
-	 * 
-	 * @param eventId
-	 * @param listener
-	 */
-	synchronized public void setListener(int eventId, Observer listener) {
-		observers.remove(eventId);
-		observers.put(eventId, listener);
-	}
-
-	public int size() {
-		return observers.size();
-	}
-
-	public synchronized void remove(int eventId, Observer observer) {
-		observers.remove(eventId, observer);
-	}
-
-	public synchronized void remove(Observer observer) {
-		observers.removeValue(observer);
-	}
-
-	public synchronized void clear() {
-		observers.clear();
-	}
-
-	/**
-	 * 激发一个广播,通知所有监听者,
-	 * 
-	 * @param sender
-	 * 谁激发的, 可以是null, 由监听者和被监听者协商
-	 * @param eventId
-	 * 事件类型, 标识事件
-	 * @param args
-	 * 自定义的参数
-	 */
-	public void notify(Object sender, int eventId, Object... args) {
-		synchronized (this) {
-			ArrayList<Observer> ls = observers.get(eventId);
-			if (ls != null) {
-				Observer[] arrays = new Observer[ls.size()];
-				ls.toArray(arrays);
-				for (Observer observer : arrays) {
-					if (observer != null) {
-						try {
-                            observer.onNotify(eventId, args);
-						} catch (Exception e) {
-                            MyLog.e(this.getClass().getSimpleName(),
-                                    e.toString());
-						}
-					}
-				}
-			}
-		}
-	}
-
-	public void notify(int eventId, Object... args) {
-		notify(null, eventId, args);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/UpdateLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/UpdateLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/UpdateLogic.java	(revision )
@@ -1,187 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.AppExceptionReq;
-import com.anniu.shandiandaojia.net.bean.entity.UpdateReq;
-import com.anniu.shandiandaojia.service.HttpService;
-
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.List;
-
-/**
- * @ClassName: UpdateLogic
- * @Description: 更新业务类
- * @author zxl
- * @date 2014年10月15日 下午5:16:39
- */
-public class UpdateLogic extends BaseLogic {
-	/** 版本升级 */
-	public static String ACTION_GET_UPDATEINFO = "UpdateLogic.ACTION_GET_UPDATEINFO";
-	/** 提交异常 */
-	public static String ACTION_POST_EXCEPTION = "UpdateLogic.ACTION_POST_EXCEPTION";
-	public static String EXTRA_UPDATE_STRATEGY = "update_strategy";
-	public static String EXTRA_VERSION_CODEE = "version_code";
-	/** 是否存在更新 */
-	public static String KEY_IS_NEW_VERSION = "is_new_version";
-	/** 升级类型 */
-	public static String KEY_UPDATE_MODE = "update_mode";
-	/** 升级提示信息 */
-	public static String KEY_UPDATE_MESSAGE = "update_message";
-	/** 自动升级 */
-	public static int UPDATE_STRATEGY_AUTO = 1;
-	/** 手动升级 */
-	public static int UPDATE_STRATEGY_USER = 2;
-	/** 提示升级 */
-	public static int UPDATE_MODE_OPTIONAL = 1;
-	/** 强制升级 */
-	public static int UPDATE_MODE_FORCE = 2;
-	/** app名称 */
-	public static String KEY_VERSION_NAME = "version_name";
-
-	public static String EXTRA_CONTOL_TYPE = "contol_type";
-	public static String EXTRA_VERSION_NUM = "version_num";
-	public static String EXTRA_VERSION_URL = "version_url";
-	public static String EXTRA_DISCRIPT = "discript";
-	public static String EXTRA_VERSION_CODE = "version_code";
-	
-	public static String EXTRA_ERROR_LOG = "error";
-
-	// 默认是自动升级
-	private int update_mode = 1;
-
-	public UpdateLogic(HttpService service) {
-		super(service);
-		List<String> actions = new ArrayList<String>();
-		actions.add(ACTION_GET_UPDATEINFO);
-		actions.add(ACTION_POST_EXCEPTION);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_GET_UPDATEINFO.equals(action)) {
-			update_mode = intent.getExtras().getInt(KEY_UPDATE_MODE);
-			String version_name = intent.getExtras().getString(KEY_VERSION_NAME);
-			getServerCode(update_mode, version_name);
-		}else if (ACTION_POST_EXCEPTION.equals(action)) {
-			String errorlog = intent.getExtras().getString(EXTRA_ERROR_LOG);
-			postException(errorlog);
-		}
-	}
-
-	private void postException(String errorlog) {
-		AppExceptionReq req = new AppExceptionReq(ReqInfo.REQ_POST_EXCEPTION, errorlog);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							if (!TextUtils.isEmpty(String.valueOf(code))) {
-								bundle.putInt(GlobalValue.KEY_CODE, code);
-							}
-							if (code == 200) {
-								notice(Event.POST_ERROR_LOG_SUCESS, bundle);
-							}else if(code == 0){
-								String error = obj.getString(GlobalValue.KEY_MSG);
-								bundle.putString(BaseLogic.EXTRA_ERROR, error);
-								notice(Event.POST_ERROR_LOG_FAILED, bundle);
-							}else {
-								bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-								notice(Event.POST_ERROR_LOG_FAILED, bundle);
-							}
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_ERROR_LOG_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 版本升级 */
-	private void getServerCode(final int update_mode, String version_name) {
-		UpdateReq req = new UpdateReq(ReqInfo.REQ_GET_VERSION, update_mode, version_name);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							if (!TextUtils.isEmpty(String.valueOf(code))) {
-								bundle.putInt(GlobalValue.KEY_CODE, code);
-							}
-						}
-						
-						if (code == 200) {
-							String	serverData = obj.getString(GlobalValue.KEY_MSG);
-							if (!"null".equals(serverData)) {
-								JSONObject object = obj.getJSONObject(GlobalValue.KEY_MSG);
-								
-								int isNew = object.getInt(KEY_IS_NEW_VERSION);// 1，没有，2有
-								String versionName = object.getString(EXTRA_VERSION_NUM);// 版本号
-								String url = object.getString(EXTRA_VERSION_URL);
-								String description = object.getString(EXTRA_DISCRIPT);
-								
-								bundle.putInt(UpdateLogic.KEY_IS_NEW_VERSION,isNew);
-								bundle.putInt(UpdateLogic.EXTRA_CONTOL_TYPE,update_mode);
-								bundle.putString(UpdateLogic.EXTRA_VERSION_NUM,versionName);
-								bundle.putString(UpdateLogic.EXTRA_VERSION_URL,url);
-								bundle.putString(UpdateLogic.EXTRA_DISCRIPT,description);
-							}
-							bundle.putInt(UpdateLogic.EXTRA_CONTOL_TYPE,update_mode);
-							notice(Event.UPDATE_SUCCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.UPDATE_FAILED, bundle);
-						} else {
-							bundle.putString(GlobalValue.KEY_MSG,"当前已经是最新版本!");
-							notice(Event.UPDATE_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.UPDATE_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ShareCore.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ShareCore.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ShareCore.java	(revision )
@@ -1,141 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare;
-
-import java.io.File;
-import java.io.FileOutputStream;
-import java.util.HashMap;
-
-import android.content.Context;
-import android.content.Intent;
-import android.content.pm.ResolveInfo;
-import android.graphics.Bitmap;
-import android.graphics.Bitmap.CompressFormat;
-import android.text.TextUtils;
-import cn.sharesdk.framework.CustomPlatform;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.Platform.ShareParams;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.mob.tools.utils.R;
-
-/**
- * ShareCore是快捷分享的实际出口，此类使用了反射的方式，配合传递进来的HashMap，
- *构造{@link ShareParams}对象，并执行分享，使快捷分享不再需要考虑目标平台
- */
-public class ShareCore {
-	private ShareContentCustomizeCallback customizeCallback;
-
-	/** 设置用于分享过程中，根据不同平台自定义分享内容的回调 */
-	public void setShareContentCustomizeCallback(ShareContentCustomizeCallback callback) {
-		customizeCallback = callback;
-	}
-
-	/**
-	 * 向指定平台分享内容
-	 * <p>
-	 * <b>注意：</b><br>
-	 * 参数data的键值需要严格按照{@link ShareParams}不同子类具体字段来命名，
-	 *否则无法反射此字段，也无法设置其值。
-	 */
-	public boolean share(Platform plat, HashMap<String, Object> data) {
-		if (plat == null || data == null) {
-			return false;
-		}
-
-		try {
-			String imagePath = (String) data.get("imagePath");
-			Bitmap viewToShare = (Bitmap) data.get("viewToShare");
-			if (TextUtils.isEmpty(imagePath) && viewToShare != null && !viewToShare.isRecycled()) {
-				String path = R.getCachePath(plat.getContext(), "screenshot");
-				File ss = new File(path, String.valueOf(System.currentTimeMillis()) + ".jpg");
-				FileOutputStream fos = new FileOutputStream(ss);
-				viewToShare.compress(CompressFormat.JPEG, 100, fos);
-				fos.flush();
-				fos.close();
-				data.put("imagePath", ss.getAbsolutePath());
-			}
-		} catch (Throwable t) {
-			t.printStackTrace();
-			return false;
-		}
-
-		ShareParams sp = new ShareParams(data);
-		if (customizeCallback != null) {
-			customizeCallback.onShare(plat, sp);
-		}
-
-		plat.share(sp);
-		return true;
-	}
-
-	/** 判断指定平台是否使用客户端分享 */
-	public static boolean isUseClientToShare(String platform) {
-		if ("Wechat".equals(platform) || "WechatMoments".equals(platform)
-				|| "WechatFavorite".equals(platform) || "ShortMessage".equals(platform)
-				|| "Email".equals(platform) || "GooglePlus".equals(platform)
-				|| "QQ".equals(platform) || "Pinterest".equals(platform)
-				|| "Instagram".equals(platform) || "Yixin".equals(platform)
-				|| "YixinMoments".equals(platform) || "QZone".equals(platform)
-				|| "Mingdao".equals(platform) || "Line".equals(platform)
-				|| "KakaoStory".equals(platform) || "KakaoTalk".equals(platform)
-				|| "Bluetooth".equals(platform) || "WhatsApp".equals(platform)
-				|| "BaiduTieba".equals(platform) || "Laiwang".equals(platform)
-				|| "LaiwangMoments".equals(platform)
-				) {
-			return true;
-		} else if ("Evernote".equals(platform)) {
-			Platform plat = ShareSDK.getPlatform(platform);
-			if ("true".equals(plat.getDevinfo("ShareByAppClient"))) {
-				return true;
-			}
-		} else if ("SinaWeibo".equals(platform)) {
-			Platform plat = ShareSDK.getPlatform(platform);
-			if ("true".equals(plat.getDevinfo("ShareByAppClient"))) {
-				Intent test = new Intent(Intent.ACTION_SEND);
-				test.setPackage("com.sina.weibo");
-				test.setType("image/*");
-				ResolveInfo ri = plat.getContext().getPackageManager().resolveActivity(test, 0);
-				return (ri != null);
-			}
-		}
-
-		return false;
-	}
-
-	/** 判断指定平台是否可以用来授权 */
-	public static boolean canAuthorize(Context context, String platform) {
-		return !("WechatMoments".equals(platform)
-				|| "WechatFavorite".equals(platform) || "ShortMessage".equals(platform)
-				|| "Email".equals(platform)
-				|| "Pinterest".equals(platform) || "Yixin".equals(platform)
-				|| "YixinMoments".equals(platform) || "Line".equals(platform)
-				|| "Bluetooth".equals(platform) || "WhatsApp".equals(platform)
-				|| "BaiduTieba".equals(platform)) || "Laiwang".equals(platform)
-				|| "LaiwangMoments".equals(platform);
-	}
-
-
-	/** 判断指定平台是否可以用来获取用户资料 */
-	public static boolean canGetUserInfo(Context context, String platform) {
-		return !("WechatMoments".equals(platform)
-				|| "WechatFavorite".equals(platform) || "ShortMessage".equals(platform)
-				|| "Email".equals(platform)
-				|| "Pinterest".equals(platform) || "Yixin".equals(platform)
-				|| "YixinMoments".equals(platform) || "Line".equals(platform)
-				|| "Bluetooth".equals(platform) || "WhatsApp".equals(platform)
-				|| "Pocket".equals(platform) || "BaiduTieba".equals(platform)
-				|| "Laiwang".equals(platform) || "LaiwangMoments".equals(platform));
-	}
-
-	/** 判断是否直接分享 */
-	public static boolean isDirectShare(Platform platform) {
-		return platform instanceof CustomPlatform || isUseClientToShare(platform.getName());
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/HttpClient.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/HttpClient.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/HttpClient.java	(revision )
@@ -1,246 +0,0 @@
-package com.anniu.shandiandaojia.net;
-
-import android.content.Context;
-import android.text.TextUtils;
-
-import com.anniu.shandiandaojia.base.ActivityMgr;
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.utils.MyLog;
-import com.anniu.shandiandaojia.utils.NetworkUtils;
-
-import java.io.ByteArrayOutputStream;
-import java.io.DataInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
-import java.io.UnsupportedEncodingException;
-import java.net.HttpURLConnection;
-import java.net.InetSocketAddress;
-import java.net.MalformedURLException;
-import java.net.SocketTimeoutException;
-import java.net.URL;
-import java.net.URLDecoder;
-import java.net.UnknownHostException;
-
-public class HttpClient {
-	public String TAG = "HttpClient";
-	private static int HTTP_TIMEOUT = 15 * 1000;
-
-	public void sendReq(HttpReq req) {
-		String url = UrlInfo.getUrl(req.id);
-		String params =  req.getParams();
-		HttpRsp rsp = new HttpRsp();
-		if (!TextUtils.isEmpty(params)) {
-			url += params;
-		}
-		MyLog.i(TAG, url);
-		HttpURLConnection conn = null;
-		InputStream is = null;
-		DataInputStream dis = null;
-
-		try {
-			URL urlPath = new URL(url);
-			Context context = ActivityMgr.getContext();
-			int systemConnection = NetworkUtils.getNetworkState(context);
-			conn = getURLConnection(urlPath, systemConnection);
-			conn.setDoInput(true);
-			conn.setUseCaches(false);
-			conn.setInstanceFollowRedirects(true);
-			// 设置连接主机超时（单位：毫秒）
-			conn.setConnectTimeout(HTTP_TIMEOUT);
-			// 设置从主机读取数据超时（单位：毫秒）
-			conn.setReadTimeout(HTTP_TIMEOUT);
-			conn.setRequestProperty("Accept", "*/*");
-			conn.setRequestProperty("Content-Type",
-					"application/x-www-form-urlencoded");
-			conn.setRequestMethod("GET");
-			int responseCode = conn.getResponseCode();
-			rsp.code = responseCode;
-			
-			MyLog.i(TAG, "httpGet() requestId = " + req.id
-					+ " , responseCode = " + responseCode);
-			
-			if (HttpURLConnection.HTTP_OK == responseCode) {
-				is = conn.getInputStream();
-				dis = new DataInputStream(is);
-				byte[] responseData = getData(dis);
-				rsp.data = responseData;
-				
-				MyLog.i(TAG, "httpGet() requestId = " + req.id
-						+ ", responseData: "+ new String(responseData, "utf-8"));
-
-				req.parseData(new String(responseData, "UTF-8"));
-			}
-		} catch (SocketTimeoutException e) {
-			MyLog.i(TAG, e.toString());
-			rsp.code = HttpRsp.CODE_TIMEOUT;
-		} catch (UnknownHostException e) {
-			MyLog.i(TAG, e.toString());
-			rsp.code = HttpRsp.CODE_UNKNOW_HOST;
-		} catch (IOException e) {
-			MyLog.i(TAG, e.toString());
-			rsp.code = HttpRsp.CODE_NET_ERROR;
-		} finally {
-			req.getOnHttpRsp().onHttpRsp(rsp);
-
-			try {
-				if (dis != null) {
-					dis.close();
-				}
-				if (is != null) {
-					is.close();
-				}
-				if (conn != null) {
-					conn.disconnect();
-				}
-			} catch (Exception e) {
-			} finally {
-				dis = null;
-				is = null;
-				conn = null;
-			}
-		}
-	}
-
-	public void sendPost(HttpReq req) {
-		String url = UrlInfo.getUrl(req.id);
-		String params = null;
-		try {
-			params = URLDecoder.decode(req.getParams(), "utf-8");
-		} catch (UnsupportedEncodingException e1) {
-			e1.printStackTrace();
-		}
-		MyLog.i(TAG, " requestId = " + req.id + " , url = " + url + "\n"
-				+ " params = " + " params = " + params);
-		HttpRsp rsp = new HttpRsp();
-
-		HttpURLConnection conn = null;
-		InputStream is = null;
-		DataInputStream dis = null;
-
-		OutputStream os = null;
-		int responseCode = 0;
-		try {
-			URL urlPath = new URL(url);
-			conn = (HttpURLConnection) urlPath.openConnection();
-			conn.setDoOutput(true);
-			conn.setDoInput(true);
-			conn.setRequestMethod("POST");
-			conn.setUseCaches(false);
-			conn.setInstanceFollowRedirects(true);
-			// 设置连接主机超时（单位：毫秒）
-			conn.setConnectTimeout(60 * 1000);
-			conn.setRequestProperty("Content-Type",
-					"application/x-www-form-urlencoded");
-			conn.setRequestProperty("Accept", "*/*");
-			conn.setRequestProperty("Connection", "keep-alive");
-			conn.setRequestProperty("User-Agent",
-					"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;SV1)");
-
-			byte[] bytes = params.getBytes();
-			if (bytes != null && bytes.length > 0) {
-				conn.setRequestProperty("Content-Length",
-						String.valueOf(bytes.length));
-			}
-
-			conn.connect();
-			if (bytes != null) {
-				os = conn.getOutputStream();
-				os.write(bytes);
-				os.flush();
-			}
-
-			responseCode = conn.getResponseCode();
-			rsp.code = responseCode;
-
-			MyLog.i(TAG, "httpPost() requestId = " + req.id
-					+ " , responseCode = " + responseCode);
-			if (HttpURLConnection.HTTP_OK == responseCode) {
-				is = conn.getInputStream();
-				dis = new DataInputStream(is);
-				byte[] responseData = getData(dis);
-
-				rsp.data = responseData;
-
-				MyLog.i(TAG, "httpPost() requestId = " + req.id
-						+ ", responseData: "
-						+ new String(responseData, "utf-8"));
-
-				req.parseData(new String(responseData, "UTF-8"));
-			}
-		} catch (SocketTimeoutException e) {
-			MyLog.i(TAG, e.toString());
-			rsp.code = HttpRsp.CODE_TIMEOUT;
-		} catch (UnknownHostException e) {
-			MyLog.i(TAG, e.toString());
-			rsp.code = HttpRsp.CODE_UNKNOW_HOST;
-		} catch (IOException e) {
-			MyLog.i(TAG, e.toString());
-			rsp.code = HttpRsp.CODE_NET_ERROR;
-		} finally {
-			req.getOnHttpRsp().onHttpRsp(rsp);
-
-			try {
-				if (dis != null) {
-					dis.close();
-				}
-				if (is != null) {
-					is.close();
-				}
-				if (conn != null) {
-					conn.disconnect();
-				}
-				if (os != null) {
-					os.close();
-				}
-			} catch (Exception e) {
-			} finally {
-				dis = null;
-				is = null;
-				conn = null;
-				os = null;
-			}
-		}
-	}
-
-	/**
-	 * 从流中获取未知长度的数据
-	 * 
-	 * @param is
-	 *            输入流
-	 * 
-	 * @return 返回对到从流中读取的数据
-	 * @throws IOException
-	 * 
-	 * @throws Exception
-	 */
-	private byte[] getData(DataInputStream is) throws IOException {
-		int dataLength = 0;
-		byte[] buffer = new byte[4096];
-		ByteArrayOutputStream bos = new ByteArrayOutputStream(buffer.length);
-		int size = 0;
-		while ((size = is.read(buffer)) != -1) {
-			bos.write(buffer, 0, size);
-			dataLength += size;
-		}
-		MyLog.i("getData", "read " + String.valueOf(dataLength) + " byte");
-		return bos.toByteArray();
-	}
-
-	@SuppressWarnings("deprecation")
-	public final static HttpURLConnection getURLConnection(URL url,
-			int systemConnection) throws MalformedURLException, IOException {
-		String proxyHost = android.net.Proxy.getDefaultHost();
-		if (NetworkUtils.TYPE_MOBILE_CTWAP == systemConnection
-				&& proxyHost != null) {
-			java.net.Proxy p = new java.net.Proxy(java.net.Proxy.Type.HTTP,
-					new InetSocketAddress(android.net.Proxy.getDefaultHost(),
-							android.net.Proxy.getDefaultPort()));
-			return (HttpURLConnection) url.openConnection(p);
-		} else {
-			return (HttpURLConnection) url.openConnection();
-		}
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyExpandableListView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyExpandableListView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyExpandableListView.java	(revision )
@@ -1,26 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.widget.ExpandableListView;
-
-public class MyExpandableListView extends ExpandableListView {
-
-	public MyExpandableListView(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-	}
-
-	public MyExpandableListView(Context context, AttributeSet attrs) {
-		super(context, attrs);
-	}
-
-	public MyExpandableListView(Context context) {
-		super(context);
-	}
-	@Override 
-	protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { 
-	    int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);  
-	     
-	    super.onMeasure(widthMeasureSpec, expandSpec); 
-	} 
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/PullToRefreshLayout.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/PullToRefreshLayout.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/PullToRefreshLayout.java	(revision )
@@ -1,655 +0,0 @@
-package com.anniu.shandiandaojia.view.pulltorefreshlayout;
-
-import android.content.Context;
-import android.os.Handler;
-import android.os.Message;
-import android.util.AttributeSet;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.ViewGroup;
-import android.view.animation.AnimationUtils;
-import android.view.animation.LinearInterpolator;
-import android.view.animation.RotateAnimation;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.utils.MyLog;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.pullableview.Pullable;
-
-import java.util.Timer;
-import java.util.TimerTask;
-
-/**
- * 自定义的布局，用来管理三个子控件，其中一个是下拉头，一个是包含内容的pullableView（可以是实现Pullable接口的的任何View），
- * 还有一个上拉头，更多详解见博客http://blog.csdn.net/zhongkejingwang/article/details/38868463
- * 
- * @author 陈靖
- */
-public class PullToRefreshLayout extends RelativeLayout
-{
-	public static final String TAG = "PullToRefreshLayout";
-	// 初始状态
-	public static final int INIT = 0;
-	// 释放刷新
-	public static final int RELEASE_TO_REFRESH = 1;
-	// 正在刷新
-	public static final int REFRESHING = 2;
-	// 释放加载
-	public static final int RELEASE_TO_LOAD = 3;
-	// 正在加载
-	public static final int LOADING = 4;
-	// 操作完毕
-	public static final int DONE = 5;
-	
-	// 当前状态
-	private int state = INIT;
-	// 刷新回调接口
-	private OnRefreshListener mListener;
-	// 刷新成功
-	public static final int SUCCEED = 0;
-	// 刷新失败
-	public static final int FAIL = 1;
-	// 没有更多数据
-	public static final int NOMORE = 3;
-	// 按下Y坐标，上一个事件点Y坐标
-	private float downY, lastY;
-
-	// 下拉的距离。注意：pullDownY和pullUpY不可能同时不为0
-	public float pullDownY = 0;
-	// 上拉的距离
-	private float pullUpY = 0;
-
-	// 释放刷新的距离
-	private float refreshDist = 200;
-	// 释放加载的距离
-	private float loadmoreDist = 200;
-	
-	private int lazySpace = 0;
-
-	private MyTimer timer;
-	// 回滚速度
-	public float MOVE_SPEED = 8;
-	// 第一次执行布局
-	private boolean isLayout = false;
-	// 在刷新过程中滑动操作
-	private boolean isTouch = false;
-	// 手指滑动距离与下拉头的滑动距离比，中间会随正切函数变化
-	private float radio = 2;
-
-	// 下拉箭头的转180°动画
-	private RotateAnimation rotateAnimation;
-	// 均匀旋转动画
-	private RotateAnimation refreshingAnimation;
-
-	// 下拉头
-	private View refreshView;
-	// 下拉的箭头
-	private View pullView;
-	// 正在刷新的图标
-	private View refreshingView;
-	// 刷新结果图标
-	private View refreshStateImageView;
-	// 刷新结果：成功或失败
-	private TextView refreshStateTextView;
-
-	// 上拉头
-	private View loadmoreView;
-	// 上拉的箭头
-	private View pullUpView;
-	// 正在加载的图标
-	private View loadingView;
-	// 加载结果图标
-	private View loadStateImageView;
-	// 加载结果：成功或失败
-	private TextView loadStateTextView;
-
-	// 实现了Pullable接口的View
-	private View pullableView;
-	// 过滤多点触碰
-	private int mEvents;
-	// 这两个变量用来控制pull的方向，如果不加控制，当情况满足可上拉又可下拉时没法下拉
-	private boolean canPullDown = true;
-	private boolean canPullUp = true;
-	
-	public static final int PULL_FINISH_FINISH = 0;
-	public static final int PULL_FINISH_FAIL = 1;
-	public static final int PULL_FINISH_NOMORE = 2;
-
-	/**
-	 * 执行自动回滚的handler
-	 */
-	Handler updateHandler = new Handler()
-	{
-
-		@Override
-		public void handleMessage(Message msg)
-		{
-			// 回弹速度随下拉距离moveDeltaY增大而增大
-			MOVE_SPEED = (float) (8 + 5 * Math.tan(Math.PI / 2
-					/ getMeasuredHeight() * (pullDownY + Math.abs(pullUpY))));
-			if (!isTouch)
-			{
-				// 正在刷新，且没有往上推的话则悬停，显示"正在刷新..."
-				if (state == REFRESHING && pullDownY <= refreshDist)
-				{
-					pullDownY = refreshDist;
-					timer.cancel();
-				} else if (state == LOADING && -pullUpY <= loadmoreDist)
-				{
-					pullUpY = -loadmoreDist;
-					timer.cancel();
-				}
-
-			}
-			if (pullDownY > 0)
-				pullDownY -= MOVE_SPEED;
-			else if (pullUpY < 0)
-				pullUpY += MOVE_SPEED;
-			if (pullDownY < 0)
-			{
-				// 已完成回弹
-				pullDownY = 0;
-				pullView.clearAnimation();
-				// 隐藏下拉头时有可能还在刷新，只有当前状态不是正在刷新时才改变状态
-				if (state != REFRESHING && state != LOADING)
-					changeState(INIT);
-				timer.cancel();
-				requestLayout();
-			}
-			if (pullUpY > 0)
-			{
-				// 已完成回弹
-				pullUpY = 0;
-				pullUpView.clearAnimation();
-				// 隐藏下拉头时有可能还在刷新，只有当前状态不是正在刷新时才改变状态
-				if (state != REFRESHING && state != LOADING)
-					changeState(INIT);
-				timer.cancel();
-			}
-			// 刷新布局,会自动调用onLayout
-			requestLayout();
-		}
-
-	};
-
-	public void setOnRefreshListener(OnRefreshListener listener)
-	{
-		mListener = listener;
-	}
-
-	public PullToRefreshLayout(Context context)
-	{
-		super(context);
-		initView(context);
-	}
-
-	public PullToRefreshLayout(Context context, AttributeSet attrs)
-	{
-		super(context, attrs);
-		initView(context);
-	}
-
-	public PullToRefreshLayout(Context context, AttributeSet attrs, int defStyle)
-	{
-		super(context, attrs, defStyle);
-		initView(context);
-	}
-
-	private void initView(Context context)
-	{
-		timer = new MyTimer(updateHandler);
-		rotateAnimation = (RotateAnimation) AnimationUtils.loadAnimation(
-				context, R.anim.reverse_anim);
-		refreshingAnimation = (RotateAnimation) AnimationUtils.loadAnimation(
-				context, R.anim.rotating);
-		// 添加匀速转动动画
-		LinearInterpolator lir = new LinearInterpolator();
-		rotateAnimation.setInterpolator(lir);
-		refreshingAnimation.setInterpolator(lir);
-	}
-
-	private void hide()
-	{
-		timer.schedule(5);
-	}
-
-	/**
-	 * 完成刷新操作，显示刷新结果。注意：刷新完成后一定要调用这个方法
-	 */
-	/**
-	 * @param refreshResult
-	 *            PullToRefreshLayout.SUCCEED代表成功，PullToRefreshLayout.FAIL代表失败
-	 */
-	public void refreshFinish(int refreshResult)
-	{
-		refreshingView.clearAnimation();
-		refreshingView.setVisibility(View.GONE);
-		switch (refreshResult)
-		{
-		case SUCCEED:
-			// 刷新成功
-			refreshStateImageView.setVisibility(View.VISIBLE);
-			refreshStateTextView.setText(R.string.refresh_succeed);
-			refreshStateImageView
-					.setBackgroundResource(R.drawable.refresh_succeed);
-			break;
-		case FAIL:
-		default:
-			// 刷新失败
-			refreshStateImageView.setVisibility(View.VISIBLE);
-			refreshStateTextView.setText(R.string.refresh_fail);
-			refreshStateImageView
-					.setBackgroundResource(R.drawable.refresh_failed);
-			break;
-		}
-		if (pullDownY > 0)
-		{
-			// 刷新结果停留1秒
-			new Handler()
-			{
-				@Override
-				public void handleMessage(Message msg)
-				{
-					changeState(DONE);
-					hide();
-				}
-			}.sendEmptyMessageDelayed(0, 500);
-		} else
-		{
-			changeState(DONE);
-			hide();
-		}
-	}
-
-	/**
-	 * 加载完毕，显示加载结果。注意：加载完成后一定要调用这个方法
-	 * 
-	 * @param refreshResult
-	 *            PullToRefreshLayout.SUCCEED代表成功，PullToRefreshLayout.FAIL代表失败
-	 */
-	public void loadmoreFinish(int refreshResult)
-	{
-		loadingView.clearAnimation();
-		loadingView.setVisibility(View.GONE);
-		switch (refreshResult)
-		{
-		case SUCCEED:
-			// 加载成功
-			loadStateImageView.setVisibility(View.VISIBLE);
-			loadStateTextView.setText(R.string.load_succeed);
-			loadStateImageView.setBackgroundResource(R.drawable.load_succeed);
-			break;
-		case NOMORE:
-			// 加载失败
-			loadStateImageView.setVisibility(View.VISIBLE);
-			loadStateTextView.setText(R.string.load_nomore);
-			loadStateImageView.setBackgroundResource(R.drawable.load_failed);
-			break;
-		case FAIL:
-		default:
-			// 加载失败
-			loadStateImageView.setVisibility(View.VISIBLE);
-			loadStateTextView.setText(R.string.load_fail);
-			loadStateImageView.setBackgroundResource(R.drawable.load_failed);
-			break;
-		}
-		if (pullUpY < 0)
-		{
-			// 刷新结果停留1秒
-			new Handler()
-			{
-				@Override
-				public void handleMessage(Message msg)
-				{
-					changeState(DONE);
-					hide();
-				}
-			}.sendEmptyMessageDelayed(0, 20);
-		} else
-		{
-			changeState(DONE);
-			hide();
-		}
-	}
-
-	private void changeState(int to)
-	{
-		state = to;
-		switch (state)
-		{
-		case INIT:
-			// 下拉布局初始状态
-			refreshStateImageView.setVisibility(View.GONE);
-			refreshStateTextView.setText(R.string.pull_to_refresh);
-			pullView.clearAnimation();
-			pullView.setVisibility(View.VISIBLE);
-			// 上拉布局初始状态
-			loadStateImageView.setVisibility(View.GONE);
-			loadStateTextView.setText(R.string.pullup_to_load);
-			pullUpView.clearAnimation();
-			pullUpView.setVisibility(View.VISIBLE);
-			break;
-		case RELEASE_TO_REFRESH:
-			// 释放刷新状态
-			refreshStateTextView.setText(R.string.release_to_refresh);
-			pullView.startAnimation(rotateAnimation);
-			break;
-		case REFRESHING:
-			// 正在刷新状态
-			pullView.clearAnimation();
-			refreshingView.setVisibility(View.VISIBLE);
-			pullView.setVisibility(View.INVISIBLE);
-			refreshingView.startAnimation(refreshingAnimation);
-			refreshStateTextView.setText(R.string.refreshing);
-			break;
-		case RELEASE_TO_LOAD:
-			// 释放加载状态
-			loadStateTextView.setText(R.string.release_to_load);
-			pullUpView.startAnimation(rotateAnimation);
-			break;
-		case LOADING:
-			// 正在加载状态
-			pullUpView.clearAnimation();
-			loadingView.setVisibility(View.VISIBLE);
-			pullUpView.setVisibility(View.INVISIBLE);
-			loadingView.startAnimation(refreshingAnimation);
-			loadStateTextView.setText(R.string.loading);
-			break;
-		case DONE:
-			// 刷新或加载完毕，啥都不做
-			break;
-		}
-	}
-
-	/**
-	 * 不限制上拉或下拉
-	 */
-	private void releasePull()
-	{
-		canPullDown = true;
-		canPullUp = true;
-	}
-
-	/*
-	 * （非 Javadoc）由父控件决定是否分发事件，防止事件冲突
-	 * 
-	 * @see android.view.ViewGroup#dispatchTouchEvent(android.view.MotionEvent)
-	 */
-	@Override
-	public boolean dispatchTouchEvent(MotionEvent ev)
-	{
-		MyLog.i("Touch", "PullToRefreshLayout:"+ev.getActionMasked());
-		switch (ev.getActionMasked())
-		{
-		case MotionEvent.ACTION_DOWN:
-			downY = ev.getY();
-			lastY = downY;
-			timer.cancel();
-			mEvents = 0;
-			releasePull();
-			break;
-		case MotionEvent.ACTION_POINTER_DOWN:
-		case MotionEvent.ACTION_POINTER_UP:
-			// 过滤多点触碰
-			mEvents = -1;
-			break;
-		case MotionEvent.ACTION_MOVE:
-			if (mEvents == 0)
-			{
-//				if (pullDownY > lazySpace|| (((Pullable) pullableView).canPullDown()&& canPullDown && state != LOADING))
-					if (pullDownY > lazySpace|| (( (Pullable) pullableView).canPullDown()&& canPullDown && state != LOADING))
-				{
-					// 可以下拉，正在加载时不能下拉
-					// 对实际滑动距离做缩小，造成用力拉的感觉
-					pullDownY = pullDownY + (ev.getY() - lastY) / radio;
-					if (pullDownY < 0)
-					{
-						pullDownY = 0;
-						canPullDown = false;
-						canPullUp = true;
-					}
-					if (pullDownY > getMeasuredHeight())
-						pullDownY = getMeasuredHeight();
-					if (state == REFRESHING)
-					{
-						// 正在刷新的时候触摸移动
-						isTouch = true;
-					}
-				} else if (pullUpY < 0
-						|| (((Pullable) pullableView).canPullUp() && canPullUp && state != REFRESHING))
-				{
-					// 可以上拉，正在刷新时不能上拉
-					pullUpY = pullUpY + (ev.getY() - lastY) / radio;
-					if (pullUpY > 0)
-					{
-						pullUpY = 0;
-						canPullDown = true;
-						canPullUp = false;
-					}
-					if (pullUpY < -getMeasuredHeight())
-						pullUpY = -getMeasuredHeight();
-					if (state == LOADING)
-					{
-						// 正在加载的时候触摸移动
-						isTouch = true;
-					}
-				} else
-					releasePull();
-			} else
-				mEvents = 0;
-			lastY = ev.getY();
-			// 根据下拉距离改变比例
-			radio = (float) (2 + 2 * Math.tan(Math.PI / 2 / getMeasuredHeight()
-					* (pullDownY + Math.abs(pullUpY))));
-			requestLayout();
-			if (pullDownY > 0)
-			{
-				if (pullDownY <= refreshDist
-						&& (state == RELEASE_TO_REFRESH || state == DONE))
-				{
-					// 如果下拉距离没达到刷新的距离且当前状态是释放刷新，改变状态为下拉刷新
-					changeState(INIT);
-				}
-				if (pullDownY >= refreshDist && state == INIT)
-				{
-					// 如果下拉距离达到刷新的距离且当前状态是初始状态刷新，改变状态为释放刷新
-					changeState(RELEASE_TO_REFRESH);
-				}
-			} else if (pullUpY < 0)
-			{
-				// 下面是判断上拉加载的，同上，注意pullUpY是负值
-				if (-pullUpY <= loadmoreDist
-						&& (state == RELEASE_TO_LOAD || state == DONE))
-				{
-					changeState(INIT);
-				}
-				// 上拉操作
-				if (-pullUpY >= loadmoreDist && state == INIT)
-				{
-					changeState(RELEASE_TO_LOAD);
-				}
-
-			}
-			// 因为刷新和加载操作不能同时进行，所以pullDownY和pullUpY不会同时不为0，因此这里用(pullDownY +
-			// Math.abs(pullUpY))就可以不对当前状态作区分了
-			if ((pullDownY + Math.abs(pullUpY)) > 8)
-			{
-				// 防止下拉过程中误触发长按事件和点击事件
-				ev.setAction(MotionEvent.ACTION_CANCEL);
-			}
-			break;
-		case MotionEvent.ACTION_UP:
-			if (pullDownY > refreshDist || -pullUpY > loadmoreDist)
-				// 正在刷新时往下拉（正在加载时往上拉），释放后下拉头（上拉头）不隐藏
-				isTouch = false;
-			if (state == RELEASE_TO_REFRESH)
-			{
-				changeState(REFRESHING);
-				// 刷新操作
-				if (mListener != null)
-					mListener.onRefresh(this, typecode);
-			} else if (state == RELEASE_TO_LOAD)
-			{
-				changeState(LOADING);
-				// 加载操作
-				if (mListener != null)
-					mListener.onLoadMore(this, typecode);
-			}
-			hide();
-		default:
-			break;
-		}
-		// 事件分发交给父类
-		super.dispatchTouchEvent(ev);
-		return true;
-	}
-
-	private void initView()
-	{
-		// 初始化下拉布局
-		pullView = refreshView.findViewById(R.id.pull_icon);
-		refreshStateTextView = (TextView) refreshView
-				.findViewById(R.id.state_tv);
-		refreshingView = refreshView.findViewById(R.id.refreshing_icon);
-		refreshStateImageView = refreshView.findViewById(R.id.state_iv);
-		// 初始化上拉布局
-		pullUpView = loadmoreView.findViewById(R.id.pullup_icon);
-		loadStateTextView = (TextView) loadmoreView
-				.findViewById(R.id.loadstate_tv);
-		loadingView = loadmoreView.findViewById(R.id.loading_icon);
-		loadStateImageView = loadmoreView.findViewById(R.id.loadstate_iv);
-	}
-
-	@Override
-	protected void onLayout(boolean changed, int l, int t, int r, int b)
-	{
-		if (!isLayout)
-		{
-			// 这里是第一次进来的时候做一些初始化
-			refreshView = getChildAt(0);
-			pullableView = getChildAt(1);
-			loadmoreView = getChildAt(2);
-			isLayout = true;
-			initView();
-			refreshDist = ((ViewGroup) refreshView).getChildAt(0)
-					.getMeasuredHeight();
-			loadmoreDist = ((ViewGroup) loadmoreView).getChildAt(0)
-					.getMeasuredHeight();
-		}
-		// 改变子控件的布局，这里直接用(pullDownY + pullUpY)作为偏移量，这样就可以不对当前状态作区分
-		refreshView.layout(0,
-				(int) (pullDownY + pullUpY) - refreshView.getMeasuredHeight(),
-				refreshView.getMeasuredWidth(), (int) (pullDownY + pullUpY));
-		pullableView.layout(0, (int) (pullDownY + pullUpY),
-				pullableView.getMeasuredWidth(), (int) (pullDownY + pullUpY)
-						+ pullableView.getMeasuredHeight());
-		loadmoreView.layout(0,
-				(int) (pullDownY + pullUpY) + pullableView.getMeasuredHeight(),
-				loadmoreView.getMeasuredWidth(),
-				(int) (pullDownY + pullUpY) + pullableView.getMeasuredHeight()
-						+ loadmoreView.getMeasuredHeight());
-	}
-	
-	public int getCurState(){
-		return state;
-	}
-	
-	public void completePull(int finishType){
-		try {
-			if(finishType == PULL_FINISH_FAIL){
-				loadmoreFinish(PullToRefreshLayout.FAIL);
-			}else if(finishType == PULL_FINISH_NOMORE){
-				loadmoreFinish(PullToRefreshLayout.NOMORE);
-			}else{
-				if(getCurState() == PullToRefreshLayout.LOADING){
-					loadmoreFinish(PullToRefreshLayout.SUCCEED);
-				}else if(getCurState() == PullToRefreshLayout.REFRESHING){
-					refreshFinish(PullToRefreshLayout.SUCCEED);
-				}
-			}
-		}catch (Exception e) {
-			MyLog.e(TAG, e==null ? e.getMessage() : "");
-		}
-	}
-
-	class MyTimer
-	{
-		private Handler handler;
-		private Timer timer;
-		private MyTask mTask;
-
-		public MyTimer(Handler handler)
-		{
-			this.handler = handler;
-			timer = new Timer();
-		}
-
-		public void schedule(long period)
-		{
-			if (mTask != null)
-			{
-				mTask.cancel();
-				mTask = null;
-			}
-			mTask = new MyTask(handler);
-			timer.schedule(mTask, 0, period);
-		}
-
-		public void cancel()
-		{
-			if (mTask != null)
-			{
-				mTask.cancel();
-				mTask = null;
-			}
-		}
-
-		class MyTask extends TimerTask
-		{
-			private Handler handler;
-
-			public MyTask(Handler handler)
-			{
-				this.handler = handler;
-			}
-
-			@Override
-			public void run()
-			{
-				handler.obtainMessage().sendToTarget();
-			}
-
-		}
-	}
-
-	/**
-	 * 刷新加载回调接口
-	 * 
-	 * @author chenjing
-	 * 
-	 */
-	public interface OnRefreshListener
-	{
-		/**
-		 * 刷新操作
-		 */
-		void onRefresh(PullToRefreshLayout pullToRefreshLayout, int typeCode);
-
-		/**
-		 * 加载操作
-		 */
-		void onLoadMore(PullToRefreshLayout pullToRefreshLayout, int typeCode);
-	}
-
-	private int typecode;
-
-	public int getTypecode() {
-		return typecode;
-	}
-
-	public void setTypecode(int typecode) {
-		this.typecode = typecode;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/BaseLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/BaseLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/BaseLogic.java	(revision )
@@ -1,33 +0,0 @@
-package com.anniu.shandiandaojia.base;
-
-import android.content.Context;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-import com.anniu.shandiandaojia.net.bean.SocketReq;
-import com.anniu.shandiandaojia.service.HttpService;
-import com.anniu.shandiandaojia.service.HttpService.ActionListener;
-import com.google.gson.Gson;
-
-public abstract class BaseLogic implements ActionListener {
-	public static String EXTRA_ERROR = "extra_error";
-	protected HttpService mService;
-	protected Context mContext;
-	protected Gson gson = new Gson();
-	protected BaseLogic(HttpService service) {
-		mService = service;
-		mContext = service.getApplicationContext();
-	}
-
-	protected void sendHttpReq(HttpReq req) {
-		mService.sendHttpReq(req);
-	}
-
-	protected void sendSocketReq(SocketReq req) {
-		mService.sendSocketReq(req);
-	}
-
-	protected void notice(int eventId, Bundle bundle) {
-		mService.sendBroadCast(eventId, bundle);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterSelectedticketReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterSelectedticketReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterSelectedticketReq.java	(revision )
@@ -1,32 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: WaterSelectedticketReq
- * @Description: 切换水票
- * @author YY
- * @date 2015年7月1日 下午4:10:08
- */
-public class WaterSelectedticketReq extends HttpReq {
-
-	private int ticCode;
-
-	public WaterSelectedticketReq(int reqid, int ticCode) {
-		super();
-		this.id = reqid;
-		this.ticCode = ticCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?tic_code=" + ticCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TicketBuyWaterReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TicketBuyWaterReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TicketBuyWaterReq.java	(revision )
@@ -1,49 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: TicketBuyWaterReq
- * @Description: 用水票购买水
- * @author YY
- * @date 2015年6月29日 下午3:45:51
- */
-public class TicketBuyWaterReq extends HttpReq {
-	private int shopCode;
-	private int userCode;
-	private int goodsCode;
-	private int ticCode;
-	private String memo;
-	private String startTime;
-	private String endTime;
-	private int number;
-
-	public TicketBuyWaterReq(int reqid, int shopCode, int userCode,
-			int goodsCode, int ticCode, String memo, String startTime,
-			String endTime, int number) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-		this.userCode = userCode;
-		this.goodsCode = goodsCode;
-		this.ticCode = ticCode;
-		this.memo = memo;
-		this.startTime = startTime;
-		this.endTime = endTime;
-		this.number = number;
-	}
-
-	@Override
-	public String getParams() {
-		return "shop_code=" + shopCode + "&user_code=" + userCode
-				+ "&goods_code=" + goodsCode + "&tic_code=" + ticCode
-				+ "&starttime=" + startTime + "&endtime=" + endTime
-				+ "&number=" + number + "&memo=" + memo;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Goods.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Goods.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Goods.java	(revision )
@@ -1,145 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/***
- * @author zxl
- * @ClassName: BargainGoods
- * @Description: 商品
- * @date 2015年6月2日 下午2:04:07
- */
-public class Goods implements Serializable {
-    private static final long serialVersionUID = -2057837002126813502L;
-    /**
-     * 原价
-     */
-    private double goods_price;
-    /**
-     * 商品唯一码
-     */
-    private int change_code;
-    /**
-     * 商品名称
-     */
-    private String goods_name;
-    /**
-     * 商品库存
-     */
-    private int stock_num;
-    /**
-     * 特价
-     */
-    private double promote_price;
-    /**
-     * 商品地址
-     */
-    private String pictrue_addr;
-    /**
-     * 商品分类编号
-     */
-    private int goodstype_code;
-    /**
-     * 商品分类名称
-     */
-    private String goodstype_name;
-    /**
-     * 购物车中该商品数量
-     */
-    private int goods_num;
-    /**
-     * 商品状态 1为特价 0为原价
-     */
-    private int goods_status;
-    /**
-     * 商品限购 0为不限购 大于0为限购
-     */
-    private int limited;
-
-    public int getLimited() {
-        return limited;
-    }
-
-    public void setLimited(int limited) {
-        this.limited = limited;
-    }
-
-    public int getGoods_status() {
-        return goods_status;
-    }
-
-    public void setGoods_status(int goods_status) {
-        this.goods_status = goods_status;
-    }
-
-    public int getGoods_num() {
-        return goods_num;
-    }
-
-    public void setGoods_num(int goods_num) {
-        this.goods_num = goods_num;
-    }
-
-    public int getGoodstype_code() {
-        return goodstype_code;
-    }
-
-    public void setGoodstype_code(int goodstype_code) {
-        this.goodstype_code = goodstype_code;
-    }
-
-    public String getGoodstype_name() {
-        return goodstype_name;
-    }
-
-    public void setGoodstype_name(String goodstype_name) {
-        this.goodstype_name = goodstype_name;
-    }
-
-    public double getGoods_price() {
-        return goods_price;
-    }
-
-    public void setGoods_price(double goods_price) {
-        this.goods_price = goods_price;
-    }
-
-    public int getChange_code() {
-        return change_code;
-    }
-
-    public void setChange_code(int change_code) {
-        this.change_code = change_code;
-    }
-
-    public String getGoods_name() {
-        return goods_name;
-    }
-
-    public void setGoods_name(String goods_name) {
-        this.goods_name = goods_name;
-    }
-
-    public int getStock_num() {
-        return stock_num;
-    }
-
-    public void setStock_num(int stock_num) {
-        this.stock_num = stock_num;
-    }
-
-    public double getPromote_price() {
-        return promote_price;
-    }
-
-    public void setPromote_price(double promote_price) {
-        this.promote_price = promote_price;
-    }
-
-    public String getPictrue_addr() {
-        return pictrue_addr;
-    }
-
-    public void setPictrue_addr(String pictrue_addr) {
-        this.pictrue_addr = pictrue_addr;
-    }
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/OnekeyShare.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/OnekeyShare.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/OnekeyShare.java	(revision )
@@ -1,601 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare;
-
-import static com.mob.tools.utils.BitmapHelper.captureView;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.io.File;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.Map.Entry;
-
-import android.app.NotificationManager;
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.os.Handler.Callback;
-import android.os.Message;
-import android.text.TextUtils;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.Toast;
-import cn.sharesdk.framework.CustomPlatform;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.PlatformActionListener;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.mob.tools.utils.UIHandler;
-
-/**
- * 快捷分享的入口
- * <p>
- * 通过不同的setter设置参数，然后调用{@link #show(Context)}方法启动快捷分享
- */
-public class OnekeyShare implements PlatformActionListener, Callback {
-	private static final int MSG_TOAST = 1;
-	private static final int MSG_ACTION_CCALLBACK = 2;
-	private static final int MSG_CANCEL_NOTIFY = 3;
-
-	private HashMap<String, Object> shareParamsMap;
-	private ArrayList<CustomerLogo> customers;
-	private boolean silent;
-	private PlatformActionListener callback;
-	private ShareContentCustomizeCallback customizeCallback;
-	private boolean dialogMode = false;
-	private boolean disableSSO;
-	private HashMap<String, String> hiddenPlatforms;
-	private View bgView;
-	private OnekeyShareTheme theme;
-
-	private Context context;
-	private PlatformListFakeActivity.OnShareButtonClickListener onShareButtonClickListener;
-
-	public OnekeyShare() {
-		shareParamsMap = new HashMap<String, Object>();
-		customers = new ArrayList<CustomerLogo>();
-		callback = this;
-		hiddenPlatforms = new HashMap<String, String>();
-	}
-
-	public void show(Context context) {
-		ShareSDK.initSDK(context);
-		this.context = context;
-
-		// 打开分享菜单的统计
-		ShareSDK.logDemoEvent(1, null);
-
-		// 显示方式是由platform和silent两个字段控制的
-		// 如果platform设置了，则无须显示九宫格，否则都会显示；
-		// 如果silent为true，表示不进入编辑页面，否则会进入。
-		// 本类只判断platform，因为九宫格显示以后，事件交给PlatformGridView控制
-		// 当platform和silent都为true，则直接进入分享；
-		// 当platform设置了，但是silent为false，则判断是否是“使用客户端分享”的平台，
-		// 若为“使用客户端分享”的平台，则直接分享，否则进入编辑页面
-		if (shareParamsMap.containsKey("platform")) {
-			String name = String.valueOf(shareParamsMap.get("platform"));
-			Platform platform = ShareSDK.getPlatform(name);
-
-			if (silent
-					|| ShareCore.isUseClientToShare(name)
-					|| platform instanceof CustomPlatform
-					) {
-				HashMap<Platform, HashMap<String, Object>> shareData
-						= new HashMap<Platform, HashMap<String,Object>>();
-				shareData.put(ShareSDK.getPlatform(name), shareParamsMap);
-				share(shareData);
-				return;
-			}
-		}
-
-		PlatformListFakeActivity platformListFakeActivity;
-		try {
-			if(OnekeyShareTheme.SKYBLUE == theme){
-				platformListFakeActivity = (PlatformListFakeActivity) Class.forName("com.sharesdk.onekeyshare.theme.skyblue.PlatformListPage").newInstance();
-			}else{
-				platformListFakeActivity = (PlatformListFakeActivity) Class.forName("com.sharesdk.onekeyshare.theme.classic.PlatformListPage").newInstance();
-			}
-		} catch (Exception e) {
-			e.printStackTrace();
-			return;
-		}
-
-		platformListFakeActivity.setDialogMode(dialogMode);
-		platformListFakeActivity.setShareParamsMap(shareParamsMap);
-		platformListFakeActivity.setSilent(silent);
-		platformListFakeActivity.setCustomerLogos(customers);
-		platformListFakeActivity.setBackgroundView(bgView);
-		platformListFakeActivity.setHiddenPlatforms(hiddenPlatforms);
-		platformListFakeActivity.setOnShareButtonClickListener(onShareButtonClickListener);
-		platformListFakeActivity.setThemeShareCallback(new ThemeShareCallback() {
-
-			@Override
-			public void doShare(HashMap<Platform, HashMap<String, Object>> shareData) {
-				share(shareData);
-			}
-		});
-		if (shareParamsMap.containsKey("platform")) {
-			String name = String.valueOf(shareParamsMap.get("platform"));
-			Platform platform = ShareSDK.getPlatform(name);
-			platformListFakeActivity.showEditPage(context, platform);
-			return;
-		}
-		platformListFakeActivity.show(context, null);
-	}
-
-	public void setTheme(OnekeyShareTheme theme) {
-		this.theme = theme;
-	}
-
-	/** address是接收人地址，仅在信息和邮件使用，否则可以不提供 */
-	public void setAddress(String address) {
-		shareParamsMap.put("address", address);
-	}
-
-	/**
-	 * title标题，在印象笔记、邮箱、信息、微信（包括好友、朋友圈和收藏）、
-	 * 易信（包括好友、朋友圈）、人人网和QQ空间使用，否则可以不提供
-	 */
-	public void setTitle(String title) {
-		shareParamsMap.put("title", title);
-	}
-
-	/** titleUrl是标题的网络链接，仅在人人网和QQ空间使用，否则可以不提供 */
-	public void setTitleUrl(String titleUrl) {
-		shareParamsMap.put("titleUrl", titleUrl);
-	}
-
-	/** text是分享文本，所有平台都需要这个字段 */
-	public void setText(String text) {
-		shareParamsMap.put("text", text);
-	}
-
-	/** 获取text字段的值 */
-	public String getText() {
-		return shareParamsMap.containsKey("text") ? String.valueOf(shareParamsMap.get("text")) : null;
-	}
-
-	/** imagePath是本地的图片路径，除Linked-In外的所有平台都支持这个字段 */
-	public void setImagePath(String imagePath) {
-		if(!TextUtils.isEmpty(imagePath))
-			shareParamsMap.put("imagePath", imagePath);
-	}
-
-	/** imageUrl是图片的网络路径，新浪微博、人人网、QQ空间和Linked-In支持此字段 */
-	public void setImageUrl(String imageUrl) {
-		if (!TextUtils.isEmpty(imageUrl))
-			shareParamsMap.put("imageUrl", imageUrl);
-	}
-
-	/** url在微信（包括好友、朋友圈收藏）和易信（包括好友和朋友圈）中使用，否则可以不提供 */
- 	public void setUrl(String url) {
-		shareParamsMap.put("url", url);
-	}
-
-	/** filePath是待分享应用程序的本地路劲，仅在微信（易信）好友和Dropbox中使用，否则可以不提供 */
-	public void setFilePath(String filePath) {
-		shareParamsMap.put("filePath", filePath);
-	}
-
-	/** comment是我对这条分享的评论，仅在人人网和QQ空间使用，否则可以不提供 */
-	public void setComment(String comment) {
-		shareParamsMap.put("comment", comment);
-	}
-
-	/** site是分享此内容的网站名称，仅在QQ空间使用，否则可以不提供 */
-	public void setSite(String site) {
-		shareParamsMap.put("site", site);
-	}
-
-	/** siteUrl是分享此内容的网站地址，仅在QQ空间使用，否则可以不提供 */
-	public void setSiteUrl(String siteUrl) {
-		shareParamsMap.put("siteUrl", siteUrl);
-	}
-
-	/** foursquare分享时的地方名 */
-	public void setVenueName(String venueName) {
-		shareParamsMap.put("venueName", venueName);
-	}
-
-	/** foursquare分享时的地方描述 */
-	public void setVenueDescription(String venueDescription) {
-		shareParamsMap.put("venueDescription", venueDescription);
-	}
-
-	/** 分享地纬度，新浪微博、腾讯微博和foursquare支持此字段 */
-	public void setLatitude(float latitude) {
-		shareParamsMap.put("latitude", latitude);
-	}
-
-	/** 分享地经度，新浪微博、腾讯微博和foursquare支持此字段 */
-	public void setLongitude(float longitude) {
-		shareParamsMap.put("longitude", longitude);
-	}
-
-	/** 是否直接分享 */
-	public void setSilent(boolean silent) {
-		this.silent = silent;
-	}
-
-	/** 设置编辑页的初始化选中平台 */
-	public void setPlatform(String platform) {
-		shareParamsMap.put("platform", platform);
-	}
-
-	/** 设置KakaoTalk的应用下载地址 */
-	public void setInstallUrl(String installurl) {
-		shareParamsMap.put("installurl", installurl);
-	}
-
-	/** 设置KakaoTalk的应用打开地址 */
-	public void setExecuteUrl(String executeurl) {
-		shareParamsMap.put("executeurl", executeurl);
-	}
-
-	/** 设置微信分享的音乐的地址 */
-	public void setMusicUrl(String musicUrl) {
-		shareParamsMap.put("musicUrl", musicUrl);
-	}
-
-	/** 设置自定义的外部回调 */
-	public void setCallback(PlatformActionListener callback) {
-		this.callback = callback;
-	}
-
-	/** 返回操作回调 */
-	public PlatformActionListener getCallback() {
-		return callback;
-	}
-
-	/** 设置用于分享过程中，根据不同平台自定义分享内容的回调 */
-	public void setShareContentCustomizeCallback(ShareContentCustomizeCallback callback) {
-		customizeCallback = callback;
-	}
-
-	/** 返回自定义分享内容的回调 */
-	public ShareContentCustomizeCallback getShareContentCustomizeCallback() {
-		return customizeCallback;
-	}
-
-	/** 设置自己图标和点击事件，可以重复调用添加多次 */
-	public void setCustomerLogo(Bitmap enableLogo,Bitmap disableLogo, String label, OnClickListener ocListener) {
-		CustomerLogo cl = new CustomerLogo();
-		cl.label = label;
-		cl.enableLogo = enableLogo;
-		cl.disableLogo = disableLogo;
-		cl.listener = ocListener;
-		customers.add(cl);
-	}
-
-	/** 设置一个总开关，用于在分享前若需要授权，则禁用sso功能 */
- 	public void disableSSOWhenAuthorize() {
-		disableSSO = true;
-	}
-
-	/** 设置编辑页面的显示模式为Dialog模式 */
-	public void setDialogMode() {
-		dialogMode = true;
-		shareParamsMap.put("dialogMode", dialogMode);
-	}
-
-	/** 添加一个隐藏的platform */
-	public void addHiddenPlatform(String platform) {
-		hiddenPlatforms.put(platform, platform);
-	}
-
-	/** 设置一个将被截图分享的View , surfaceView是截不了图片的*/
-	public void setViewToShare(View viewToShare) {
-		try {
-			Bitmap bm = captureView(viewToShare, viewToShare.getWidth(), viewToShare.getHeight());
-			shareParamsMap.put("viewToShare", bm);
-		} catch (Throwable e) {
-			e.printStackTrace();
-		}
-	}
-
-	/** 腾讯微博分享多张图片 */
-	public void setImageArray(String[] imageArray) {
-		shareParamsMap.put("imageArray", imageArray);
-	}
-
-	public void setEditPageBackground(View bgView) {
-		this.bgView = bgView;
-	}
-
-	public void setOnShareButtonClickListener(PlatformListFakeActivity.OnShareButtonClickListener onShareButtonClickListener) {
-		this.onShareButtonClickListener = onShareButtonClickListener;
-	}
-
-	/** 循环执行分享 */
-	public void share(HashMap<Platform, HashMap<String, Object>> shareData) {
-		boolean started = false;
-		for (Entry<Platform, HashMap<String, Object>> ent : shareData.entrySet()) {
-			Platform plat = ent.getKey();
-			plat.SSOSetting(disableSSO);
-			String name = plat.getName();
-
-//			boolean isGooglePlus = "GooglePlus".equals(name);
-//			if (isGooglePlus && !plat.isValid()) {
-//				Message msg = new Message();
-//				msg.what = MSG_TOAST;
-//				int resId = getStringRes(context, "google_plus_client_inavailable");
-//				msg.obj = context.getString(resId);
-//				UIHandler.sendMessage(msg, this);
-//				continue;
-//			}
-
-			boolean isKakaoTalk = "KakaoTalk".equals(name);
-			if (isKakaoTalk && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "kakaotalk_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			boolean isKakaoStory = "KakaoStory".equals(name);
-			if (isKakaoStory && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "kakaostory_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			boolean isLine = "Line".equals(name);
-			if (isLine && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "line_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			boolean isWhatsApp = "WhatsApp".equals(name);
-			if (isWhatsApp && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "whatsapp_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			boolean isPinterest = "Pinterest".equals(name);
-			if (isPinterest && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "pinterest_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			if ("Instagram".equals(name) && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "instagram_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			boolean isLaiwang = "Laiwang".equals(name);
-			boolean isLaiwangMoments = "LaiwangMoments".equals(name);
-			if(isLaiwang || isLaiwangMoments){
-				if (!plat.isClientValid()) {
-					Message msg = new Message();
-					msg.what = MSG_TOAST;
-					int resId = getStringRes(context, "laiwang_client_inavailable");
-					msg.obj = context.getString(resId);
-					UIHandler.sendMessage(msg, this);
-					continue;
-				}
-			}
-
-			boolean isYixin = "YixinMoments".equals(name) || "Yixin".equals(name);
-			if (isYixin && !plat.isClientValid()) {
-				Message msg = new Message();
-				msg.what = MSG_TOAST;
-				int resId = getStringRes(context, "yixin_client_inavailable");
-				msg.obj = context.getString(resId);
-				UIHandler.sendMessage(msg, this);
-				continue;
-			}
-
-			HashMap<String, Object> data = ent.getValue();
-			int shareType = Platform.SHARE_TEXT;
-			String imagePath = String.valueOf(data.get("imagePath"));
-			if (imagePath != null && (new File(imagePath)).exists()) {
-				shareType = Platform.SHARE_IMAGE;
-				if (imagePath.endsWith(".gif")) {
-					shareType = Platform.SHARE_EMOJI;
-				} else if (data.containsKey("url") && !TextUtils.isEmpty(data.get("url").toString())) {
-					shareType = Platform.SHARE_WEBPAGE;
-					if (data.containsKey("musicUrl") && !TextUtils.isEmpty(data.get("musicUrl").toString())) {
-						shareType = Platform.SHARE_MUSIC;
-					}
-				}
-			} else {
-				Bitmap viewToShare = (Bitmap) data.get("viewToShare");
-				if (viewToShare != null && !viewToShare.isRecycled()) {
-					shareType = Platform.SHARE_IMAGE;
-					if (data.containsKey("url") && !TextUtils.isEmpty(data.get("url").toString())) {
-						shareType = Platform.SHARE_WEBPAGE;
-						if (data.containsKey("musicUrl") && !TextUtils.isEmpty(data.get("musicUrl").toString())) {
-							shareType = Platform.SHARE_MUSIC;
-						}
-					}
-				} else {
-					Object imageUrl = data.get("imageUrl");
-					if (imageUrl != null && !TextUtils.isEmpty(String.valueOf(imageUrl))) {
-						shareType = Platform.SHARE_IMAGE;
-						if (String.valueOf(imageUrl).endsWith(".gif")) {
-							shareType = Platform.SHARE_EMOJI;
-						} else if (data.containsKey("url") && !TextUtils.isEmpty(data.get("url").toString())) {
-							shareType = Platform.SHARE_WEBPAGE;
-							if (data.containsKey("musicUrl") && !TextUtils.isEmpty(data.get("musicUrl").toString())) {
-								shareType = Platform.SHARE_MUSIC;
-							}
-						}
-					}
-				}
-			}
-			data.put("shareType", shareType);
-
-			if (!started) {
-				started = true;
-//				if (this == callback) {
-					int resId = getStringRes(context, "sharing");
-					if (resId > 0) {
-						showNotification(context.getString(resId));
-					}
-//				}
-			}
-			plat.setPlatformActionListener(callback);
-			ShareCore shareCore = new ShareCore();
-			shareCore.setShareContentCustomizeCallback(customizeCallback);
-			shareCore.share(plat, data);
-		}
-	}
-
-	public void onComplete(Platform platform, int action,
-			HashMap<String, Object> res) {
-		Message msg = new Message();
-		msg.what = MSG_ACTION_CCALLBACK;
-		msg.arg1 = 1;
-		msg.arg2 = action;
-		msg.obj = platform;
-		UIHandler.sendMessage(msg, this);
-	}
-
-	public void onError(Platform platform, int action, Throwable t) {
-		t.printStackTrace();
-
-		Message msg = new Message();
-		msg.what = MSG_ACTION_CCALLBACK;
-		msg.arg1 = 2;
-		msg.arg2 = action;
-		msg.obj = t;
-		UIHandler.sendMessage(msg, this);
-
-		// 分享失败的统计
-		ShareSDK.logDemoEvent(4, platform);
-	}
-
-	public void onCancel(Platform platform, int action) {
-		Message msg = new Message();
-		msg.what = MSG_ACTION_CCALLBACK;
-		msg.arg1 = 3;
-		msg.arg2 = action;
-		msg.obj = platform;
-		UIHandler.sendMessage(msg, this);
-	}
-
-	public boolean handleMessage(Message msg) {
-		switch(msg.what) {
-			case MSG_TOAST: {
-				String text = String.valueOf(msg.obj);
-				Toast.makeText(context, text, Toast.LENGTH_SHORT).show();
-			}
-			break;
-			case MSG_ACTION_CCALLBACK: {
-				switch (msg.arg1) {
-					case 1: {
-						// 成功
-						int resId = getStringRes(context, "share_completed");
-						if (resId > 0) {
-							showNotification(context.getString(resId));
-						}
-					}
-					break;
-					case 2: {
-						// 失败
-						String expName = msg.obj.getClass().getSimpleName();
-						if ("WechatClientNotExistException".equals(expName)
-								|| "WechatTimelineNotSupportedException".equals(expName)
-								|| "WechatFavoriteNotSupportedException".equals(expName)) {
-							int resId = getStringRes(context, "wechat_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						} else if ("GooglePlusClientNotExistException".equals(expName)) {
-							int resId = getStringRes(context, "google_plus_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						} else if ("QQClientNotExistException".equals(expName)) {
-							int resId = getStringRes(context, "qq_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						} else if ("YixinClientNotExistException".equals(expName)
-								|| "YixinTimelineNotSupportedException".equals(expName)) {
-							int resId = getStringRes(context, "yixin_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						} else if ("KakaoTalkClientNotExistException".equals(expName)) {
-							int resId = getStringRes(context, "kakaotalk_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						}else if ("KakaoStoryClientNotExistException".equals(expName)) {
-							int resId = getStringRes(context, "kakaostory_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						}else if("WhatsAppClientNotExistException".equals(expName)){
-							int resId = getStringRes(context, "whatsapp_client_inavailable");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						}else {
-							int resId = getStringRes(context, "share_failed");
-							if (resId > 0) {
-								showNotification(context.getString(resId));
-							}
-						}
-					}
-					break;
-					case 3: {
-						// 取消
-						int resId = getStringRes(context, "share_canceled");
-						if (resId > 0) {
-							showNotification(context.getString(resId));
-						}
-					}
-					break;
-				}
-			}
-			break;
-			case MSG_CANCEL_NOTIFY: {
-				NotificationManager nm = (NotificationManager) msg.obj;
-				if (nm != null) {
-					nm.cancel(msg.arg1);
-				}
-			}
-			break;
-		}
-		return false;
-	}
-
-	// 在状态栏提示分享操作
-	private void showNotification(String text) {
-		Toast.makeText(context, text, Toast.LENGTH_SHORT).show();
-	}
-
-	/** 是否支持QQ,QZone授权登录后发微博 */
-	public void setShareFromQQAuthSupport(boolean shareFromQQLogin)
-	{
-		shareParamsMap.put("isShareTencentWeibo", shareFromQQLogin);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/fragment/MyFragment.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/fragment/MyFragment.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/fragment/MyFragment.java	(revision )
@@ -1,95 +0,0 @@
-package com.anniu.shandiandaojia.fragment;
-
-import android.annotation.SuppressLint;
-import android.os.Bundle;
-import android.support.v4.app.Fragment;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.RelativeLayout;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.GoodsCategoryActivity;
-import com.anniu.shandiandaojia.adapter.CategoryGoodsAdapter1;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.PullToRefreshLayout;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.pullableview.PullableGridView;
-import com.nostra13.universalimageloader.core.listener.PauseOnScrollListener;
-
-import java.util.ArrayList;
-import java.util.List;
-
-@SuppressLint("ValidFragment")
-public class MyFragment extends Fragment {
-	private static final String ARG_POSITION = "position";
-	private static final String ARG_TYPECODE = "typecode";
-	/** 商品类别id */
-	private int goodstypecode;
-	private int position;
-	public PullableGridView gridview;
-	private PullToRefreshLayout pullToRefreshLayout;
-	private CategoryGoodsAdapter1 adapter;
-	private List<Goods> goodsList = new ArrayList<Goods>();
-	private GoodsCategoryActivity listener;
-	public int tempLoadType = 1;
-	private RelativeLayout loading;
-
-	public static MyFragment newInstance(int position,int code) {
-		MyFragment f = new MyFragment();
-		Bundle b = new Bundle();
-		b.putInt(ARG_POSITION, position);
-		b.putInt(ARG_TYPECODE, code);
-		f.setArguments(b);
-		return f;
-	}
-
-	@Override
-	public void onCreate(Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		position = getArguments().getInt(ARG_POSITION);
-		goodstypecode = getArguments().getInt(ARG_TYPECODE);
-	}
-
-	@Override
-	public View onCreateView(LayoutInflater inflater, ViewGroup container,
-			Bundle savedInstanceState) {
-		View view = inflater.inflate(R.layout.fragment_goods_list, null);
-		loading = (RelativeLayout) view.findViewById(R.id.rl_loading);
-		loading.setVisibility(View.VISIBLE);
-		pullToRefreshLayout = (PullToRefreshLayout) view.findViewById(R.id.refresh_view);
-		gridview = (PullableGridView) view.findViewById(R.id.gridview);
-		if (listener != null ) {
-			pullToRefreshLayout.setOnRefreshListener(listener);
-			pullToRefreshLayout.setTypecode(goodstypecode);
-		}
-		adapter = new CategoryGoodsAdapter1(getActivity());
-		gridview.setAdapter(adapter);
-		gridview.setOnScrollListener(new PauseOnScrollListener(adapter.mImageLoader, false, true));
-		setDatas(goodsList,GoodsCategoryActivity.LOAD_TYPE_REFRESH);
-		return view;
-	}
-
-	public void setDatas(List<Goods> dataList ,int loadtype) {
-		tempLoadType = loadtype;
-		if (adapter != null && dataList != null) {
-			adapter.setItem(dataList);
-		}
-	}
-	
-	public void setListener(GoodsCategoryActivity listener,int typecode) {
-        this.listener = listener;
-        listener.onRefresh(pullToRefreshLayout, typecode);
-    }
-
-	public void stopRefresh() {
-		if (pullToRefreshLayout != null) {
-			loading.setVisibility(View.GONE);
-			pullToRefreshLayout.completePull(PullToRefreshLayout.PULL_FINISH_FINISH);
-		}
-	}
-	public void stopLoadMore() {
-		if (pullToRefreshLayout != null) {
-			pullToRefreshLayout.completePull(PullToRefreshLayout.PULL_FINISH_NOMORE);
-		}
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderFindcouponReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderFindcouponReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderFindcouponReq.java	(revision )
@@ -1,34 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: OrderFindcouponReq
- * @Description: 获取可用的优惠券
- * @author YY
- * @date 2015年7月2日 上午10:22:08
- */
-public class OrderFindcouponReq extends HttpReq {
-
-	private int userCode;
-	private String totalMoney;
-
-	public OrderFindcouponReq(int reqid, int userCode, String totalMoney) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-		this.totalMoney = totalMoney;
-	}
-
-	@Override
-	public String getParams() {
-		return "?user_code=" + userCode + "&totalmoney=" + totalMoney;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/Utils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/Utils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/Utils.java	(revision )
@@ -1,126 +0,0 @@
-package com.anniu.shandiandaojia.view.lee.wheel;
-
-import android.content.Context;
-import android.content.Intent;
-import android.content.pm.PackageManager;
-import android.content.pm.ResolveInfo;
-import android.util.TypedValue;
-import android.view.View;
-import android.view.inputmethod.InputMethodManager;
-
-import java.security.MessageDigest;
-import java.util.List;
-
-public class Utils {
-    
-    /**
-     * Hides the input method.
-     * 
-     * @param context context
-     * @param view The currently focused view
-     * @return success or not.
-     */
-    public static boolean hideInputMethod(Context context, View view) {
-        if (context == null || view == null) {
-            return false;
-        }
-
-        InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
-        if (imm != null) {
-            return imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
-        }
-
-        return false;
-    }
-
-    /**
-     * Show the input method.
-     * 
-     * @param context context
-     * @param view The currently focused view, which would like to receive soft keyboard input
-     * @return success or not.
-     */
-    public static boolean showInputMethod(Context context, View view) {
-        if (context == null || view == null) {
-            return false;
-        }
-
-        InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
-        if (imm != null) {
-            return imm.showSoftInput(view, 0);
-        }
-
-        return false;
-    }
-
-    public static float pixelToDp(Context context, float val) {
-        float density = context.getResources().getDisplayMetrics().density;
-        return val * density;
-    }
-    
-    public static int dipToPx(Context context, int dipValue) {
-        return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dipValue, context
-                .getResources().getDisplayMetrics());
-    }
-    
-    public static String getHashedFileName(String url) {   
-        if (url == null || url.endsWith("/" )) {
-            return null ;
-        }
-
-        String suffix = getSuffix(url);
-        StringBuilder sb = null;
-        
-        try {
-            MessageDigest digest = MessageDigest. getInstance("MD5");
-            byte[] dstbytes = digest.digest(url.getBytes("UTF-8")); // GMaFroid uses UTF-16LE
-            sb = new StringBuilder();
-            for (int i = 0; i < dstbytes.length; i++) {
-                sb.append(Integer. toHexString(dstbytes[i] & 0xff));
-            }
-        }
-        catch (Exception e) {
-            e.printStackTrace();
-        }
-
-        if (null != sb && null != suffix) {
-            return sb.toString() + "." + suffix;
-        }
-       
-        return null;
-    }
-    
-    private static String getSuffix(String fileName) {
-        int dot_point = fileName.lastIndexOf( ".");
-        int sl_point = fileName.lastIndexOf( "/");
-        if (dot_point < sl_point) {
-            return "" ;
-        }
-        
-        if (dot_point != -1) {
-            return fileName.substring(dot_point + 1);
-        }
-        
-        return null;
-    }
-    
-    /**
-     * Indicates whether the specified action can be used as an intent. This
-     * method queries the package manager for installed packages that can
-     * respond to an intent with the specified action. If no suitable package is
-     * found, this method returns false.
-     *
-     * @param context The application's environment.
-     * @param intent The Intent action to check for availability.
-     *
-     * @return True if an Intent with the specified action can be sent and
-     *         responded to, false otherwise.
-     */
-    public static boolean isIntentAvailable(Context context, Intent intent) {
-        final PackageManager packageManager = context.getPackageManager();
-
-        List<ResolveInfo> list = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
-
-        return list.size() > 0;
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/BalanceActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/BalanceActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/BalanceActivity.java	(revision )
@@ -1,646 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.os.Handler;
-import android.os.Message;
-import android.text.TextUtils;
-import android.view.KeyEvent;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.Button;
-import android.widget.ImageView;
-import android.widget.RadioButton;
-import android.widget.RadioGroup;
-import android.widget.RadioGroup.OnCheckedChangeListener;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.alipay.sdk.app.PayTask;
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.BalanceGoodsAdapter;
-import com.anniu.shandiandaojia.alipay.PayResult;
-import com.anniu.shandiandaojia.alipay.SignUtils;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.MyAddress;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.db.jsondb.UserInfo;
-import com.anniu.shandiandaojia.db.jsondb.VoucherTicket;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.MyListView;
-import com.anniu.shandiandaojia.view.lee.wheel.WheelViewTimeActivity;
-import com.tencent.mm.sdk.constants.Build;
-import com.tencent.mm.sdk.modelpay.PayReq;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-import java.io.UnsupportedEncodingException;
-import java.math.BigDecimal;
-import java.net.URLEncoder;
-import java.text.SimpleDateFormat;
-import java.util.ArrayList;
-import java.util.Date;
-import java.util.List;
-import java.util.Locale;
-import java.util.Random;
-
-/**
-* @ClassName: BalanceActivity 
-* @Description: 结算页面 
-* @author zxl 
-* @date 2015年6月10日 下午12:08:57
- */
-public class BalanceActivity extends BaseActivity {
-	private TextView titleBarTv, name, phone, address, totalMoney, sendMoney,
-			coupon, payMoney, tvRemark, sendTime, selectCoupon;
-	private RelativeLayout rl_contacts, rl_send_time, rl_remark, rl_coupon,loadingView,errorView;
-	private RadioButton rb_hdfk, rb_wxzf;
-	private String rev_name, user_tel, user_addr, time, content, mTotalMoney;
-	private ImageView leftTitle;
-	private MyListView goodsList;
-	private Button bt_commit;
-	private String start_time = "08:00";
-	private String end_time = "09:00";
-	
-	private List<Goods> cartList = new ArrayList<Goods>();
-	private BalanceGoodsAdapter goodsAdapter;
-	private RadioGroup rg_group;
-	private VoucherTicket voucherTicket;
-	public static String CODE = "code";
-	private int shopCode,userCode;
-	private int pay_way = 4;
-	private BigDecimal bdtotalmoney;
-	
-	final IWXAPI msgApi = WXAPIFactory.createWXAPI(this, null);
-	private PayReq req;
-	private boolean isPaySupported;
-    private PrepayIdInfo prepayInfo;
-	private String mVoucherCode = "";
-	private OrderInfo orderInfo;
-	private boolean isCommit = true ;
-	private boolean canBeUseCupon = true;
-	
-    private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_balance);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.balance_title);
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-	
-	/**初始化界面显示*/
-	private void initView() {
-		//初始化控件
-		name = (TextView) findViewById(R.id.tv_name);
-		phone = (TextView) findViewById(R.id.tv_phone);
-		address = (TextView) findViewById(R.id.tv_address);
-		
-		totalMoney = (TextView) findViewById(R.id.tv_total_money);
-		sendMoney = (TextView) findViewById(R.id.tv_send_money);
-		coupon = (TextView) findViewById(R.id.tv_couponmoney);
-		payMoney = (TextView) findViewById(R.id.pay_money);
-		
-		goodsList = (MyListView) findViewById(R.id.lv_goods_list);
-		bt_commit = (Button) findViewById(R.id.bt_commit);
-		rl_contacts = (RelativeLayout) findViewById(R.id.rl_contacts);
-		
-		rb_hdfk = (RadioButton) findViewById(R.id.rb_xjzf);
-		rb_wxzf = (RadioButton) findViewById(R.id.rb_wxzf);
-		tvRemark = (TextView) findViewById(R.id.tv_remark);
-		
-		rl_send_time = (RelativeLayout) findViewById(R.id.rl_send_time);
-		sendTime = (TextView) findViewById(R.id.tv_send_time);
-		rl_remark = (RelativeLayout) findViewById(R.id.rl_remark);
-		
-		rl_remark.setOnClickListener(this);
-		
-		selectCoupon = (TextView) findViewById(R.id.tv_select_coupon);
-		rl_coupon = (RelativeLayout) findViewById(R.id.rl_coupon);
-		rl_coupon.setOnClickListener(this);
-		
-		//HH
-		int time = Integer.parseInt(Utils.getCurrentTimeHHmmStr(Utils.getCurrentSystemTime()));
-		sendTime.setText((time) + ":00" + " - " + (time + 1) + ":00");
-		
-		start_time = time + ":00";
-		end_time = (time + 1) + ":00";
-		//给控件设置监听事件
-		rl_contacts.setOnClickListener(this);
-		bt_commit.setOnClickListener(this);
-		rl_send_time.setOnClickListener(this);
-		
-		rb_hdfk.setOnClickListener(this);
-		rb_wxzf.setOnClickListener(this);
-		
-		rg_group = (RadioGroup) findViewById(R.id.rg_group);
-		rg_group.setOnCheckedChangeListener(new OnCheckedChangeListener() {
-			
-			
-
-			@Override
-			public void onCheckedChanged(RadioGroup group, int checkedId) {
-				if (checkedId==R.id.rb_xjzf) {
-					pay_way = 4;
-					MyToast.show(BalanceActivity.this, "您选择现金支付");
-				}else if (checkedId==R.id.rb_wxzf) {
-					pay_way = 2;
-					isPaySupported = msgApi.getWXAppSupportAPI() >= Build.PAY_SUPPORTED_SDK_INT;
-					if (isPaySupported) {
-						MyToast.show(BalanceActivity.this, "您选择微信支付");
-					} else {					
-						MyToast.show(BalanceActivity.this, "您手机未安装微信或者当前版本不支持微信支付！");
-					}
-				}
-			}
-		});
-		
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		
-		shopCode = SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0);
-		userCode = SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0);
-		getOrderDetailsAction();
-	}
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		Intent intent = null;
-		switch (v.getId()) {
-		case R.id.title_bar_left://关闭
-			startActivity(new Intent(this, ShoppingCartActivity.class));
-			finish();
-			break;
-		case R.id.rl_contacts://点击跳转到修改多个地址界面
-			intent = new Intent();
-			intent.setClass(this, AddressListActivity.class);
-			startActivityForResult(intent, AddressListActivity.REQUESTCODE);
-			break;
-		case R.id.rl_send_time://点击修改送货时间
-			intent = new Intent();
-			String currTime = sendTime.getText().toString().trim();
-			intent.putExtra(WheelViewTimeActivity.EXTRA_CURRENT_TIME,currTime);
-			intent.setClass(this, WheelViewTimeActivity.class);
-			startActivityForResult(intent,WheelViewTimeActivity.REQUESTCODE);
-			break;
-		case R.id.bt_commit://提交订单
-			String nameText = name.getText().toString();
-			if (TextUtils.isEmpty(nameText)) {
-				MyToast.show(this, "请填写收货人信息！");
-				return;
-			}
-			
-			if (isCommit) {
-				loadingView.setVisibility(View.VISIBLE);
-				isCommit = !isCommit;
-				if (orderInfo == null) {
-					//HH
-					int time = Integer.parseInt(Utils.getCurrentTimeHHmmStr(Utils.getCurrentSystemTime()));
-					start_time = time + ":00";
-					end_time = (time + 1) + ":00";
-					
-					if (pay_way == 2) {
-						if (isPaySupported) {
-							String remark = tvRemark.getText().toString().trim();
-							String couponCode = mVoucherCode;
-							postOrderInsertorder(remark, start_time, end_time, pay_way, couponCode);
-						} else {
-							isCommit = !isCommit;
-							MyToast.show(BalanceActivity.this,"您手机未安装微信或者当前版本不支持微信支付！");
-						}
-					} else if (pay_way == 4) {
-						String remark = tvRemark.getText().toString().trim();
-						String couponCode = mVoucherCode;
-						postOrderInsertorder(remark, start_time, end_time, pay_way, couponCode);
-					}
-				} else {
-					isCommit = !isCommit;
-					callPay();
-				}
-			}
-			break;
-		case R.id.rl_remark://点击填写备注
-			intent = new Intent(this,RemarkActivity.class);
-			intent.putExtra(RemarkActivity.CONTENT, content);
-			startActivityForResult(intent, RemarkActivity.REQUESTCODE);
-			break;
-		case R.id.rl_coupon://点击触发代金券
-			if (canBeUseCupon){
-				intent = new Intent();
-				intent.setClass(this, VouchersActivity.class);
-				intent.putExtra(CODE, 6);
-				intent.putExtra(TicketLogic.EXTRA_TOTALMONEY, mTotalMoney);
-				startActivityForResult(intent, VouchersActivity.REQUESTCODE);
-			}
-			break;
-		default:
-			break;
-		}
-	}
-
-	@SuppressWarnings({ "unchecked", "rawtypes" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_ACKORDER_SUCESS://结算页数据初始化成功事件
-			hideErrorLocal();
-			loadingView.setVisibility(View.GONE);
-			UserInfo userInfo = (UserInfo) bundle.getSerializable(OrderLogic.EXTRA_USER_LIST);
-			if (userInfo != null) {
-				name.setText(userInfo.getRev_name());
-				phone.setText(userInfo.getUser_tel());
-				address.setText(userInfo.getUser_addr());
-			}
-			
-			mTotalMoney = bundle.getString(OrderLogic.EXTRA_TOTALMONEY);
-			bdtotalmoney = new BigDecimal(mTotalMoney);
-			bdtotalmoney = bdtotalmoney.setScale(2, BigDecimal.ROUND_DOWN);
-			totalMoney.setText("￥" + bdtotalmoney);
-			sendMoney.setText("￥" + 0.0);
-			coupon.setText("-￥" + 0.0);
-			payMoney.setText("总计：￥" + bdtotalmoney);
-			content = tvRemark.getText().toString().trim();
-			
-			ArrayList<Goods> goodslist = (ArrayList<Goods>) bundle.getSerializable(OrderLogic.EXTRA_CAR_GOODS_LIST);
-			canBeUseCupon = canBeUse(goodslist);
-			if (!canBeUseCupon){
-				selectCoupon.setText("特价商品不可使用代金券");
-				selectCoupon.setTextColor(getResources().getColor(R.color.red));
-			}
-			if (goodslist != null) {
-				cartList.clear();
-				cartList.addAll(goodslist);
-				if (goodsAdapter == null) {
-					goodsAdapter = new BalanceGoodsAdapter(this, cartList);
-					goodsList.setAdapter(goodsAdapter);
-				} else {
-					goodsAdapter.notifyDataSetChanged();
-				}
-			}
-			break;
-		case Event.GET_ACKORDER_FAILED:// 结算页数据初始化失败事件
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_ORDER_INSERTORDER_SUCESS://普通订单提交成功事件
-			isCommit = !isCommit;
-			orderInfo = (OrderInfo) bundle.getSerializable(OrderLogic.EXTRA_ORDER_INFO_LIST);
-			SPUtils.saveString(context, GlobalInfo.KEY_ORDER_NUM, orderInfo.getOrder_num());
-			callPay();
-			break;
-		case Event.POST_ORDER_INSERTORDER_FAILED://普通订单提交失败事件 
-			MyToast.show(this, notice);
-		case Event.GET_PREPAY_ID_SUCESS://WX支付获取prepayid成功事件 
-			loadingView.setVisibility(View.GONE);
-			SPUtils.saveBoolean(context, GlobalInfo.KEY_ISWATER, false);
-			prepayInfo = (PrepayIdInfo) bundle.getSerializable(OrderLogic.EXTRA_PREPAY_ID);
-			req = new PayReq();
-			msgApi.registerApp(prepayInfo.getAppid());
-			genPayReq();
-			sendPayReq();
-			break;
-		case Event.GET_PREPAY_ID_FAILED://WX支付获取prepayid失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	/**
-	 * @param goodslist
-	 * @return 判断是否可以触发优惠券
-	 */
-	private boolean canBeUse(ArrayList<Goods> goodslist) {
-		if (goodslist != null && goodslist.size() > 0){
-			for (int i = 0; i < goodslist.size(); i++) {
-				if (goodslist.get(i).getLimited() >0){
-					return false;
-				}
-			}
-			return true;
-		}else{
-			return false;
-		}
-	}
-
-	private void callPay() {
-		int way = orderInfo.getPayment_way();
-		if (way == 1) {// 支付宝支付
-			AlipayPay();
-		} else if (way == 2) {// 微信支付
-			getWXPrepayidAction();
-		} else if (way == 3) {// 百度钱包支付
-
-		} else {// 货到付款
-			loadingView.setVisibility(View.GONE);
-			Intent intent = new Intent();
-			intent.setClass(this, OrderDetailsActivity.class);
-			intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, SPUtils.getString(context, GlobalInfo.KEY_ORDER_NUM, ""));
-			intent.putExtra(OrderDetailsActivity.EXTRA_FROM, 1);
-			startActivity(intent);
-			finish();
-		}
-	}
-
-	
-	@Override
-	protected void onActivityResult(int requestCode, int resultCode, Intent data) {
-		super.onActivityResult(requestCode, resultCode, data);
-		if (requestCode == AddressListActivity.REQUESTCODE) {
-			MyAddress addr = (MyAddress) data.getSerializableExtra(GlobalInfo.KEY_LOC_INFO);
-			if (addr != null) {
-				rev_name = addr.getRev_name();
-				user_tel = addr.getUser_tel();
-				user_addr = addr.getUser_addr();
-
-				name.setText(rev_name);
-				phone.setText(user_tel);
-				address.setText(user_addr);
-			}
-		} else if (requestCode == WheelViewTimeActivity.REQUESTCODE) {
-			time = data.getStringExtra(GlobalInfo.KEY_TIME);
-			String[] splitTime = time.split("-");
-			start_time = splitTime[0];
-			end_time = splitTime[1];
-			sendTime.setText(start_time + "-" + end_time);
-		} else if (requestCode == RemarkActivity.REQUESTCODE) {
-			String text = data.getStringExtra(GlobalInfo.KEY_CONTENT);
-			content = text;
-			tvRemark.setText(text);
-		} else if (requestCode == VouchersActivity.REQUESTCODE) {// 选中的优惠券
-			boolean flag = data.getExtras().getBoolean(VouchersActivity.ISHASVOUCHER);
-			if (!flag) {
-				totalMoney.setText("￥" + bdtotalmoney);
-				sendMoney.setText("￥" + 0.0);
-				coupon.setText("-￥" + 0.0);
-				payMoney.setText("总计：￥" + bdtotalmoney);
-			} else {
-				voucherTicket = (VoucherTicket) data.getSerializableExtra(TicketLogic.EXTRA_COUPON);
-				mVoucherCode = voucherTicket.getCoupon_code() + "";
-				selectCoupon.setText("￥" + voucherTicket.getPrice());
-				coupon.setText("-￥" + voucherTicket.getPrice());
-				Double paymoneyDouble = Double.parseDouble(mTotalMoney) - voucherTicket.getPrice();
-				BigDecimal paymoney = new BigDecimal(paymoneyDouble);
-				paymoney = paymoney.setScale(2, BigDecimal.ROUND_DOWN);
-				payMoney.setText("总计：￥" + paymoney);
-			}
-		}
-	}
-	
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,
-				Event.GET_ACKORDER_SUCESS,Event.GET_ACKORDER_FAILED,
-				Event.POST_ORDER_INSERTORDER_SUCESS,Event.POST_ORDER_INSERTORDER_FAILED,
-				Event.GET_PREPAY_ID_SUCESS,Event.GET_PREPAY_ID_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	/**发送请求，获取订单页数据*/
-	private void getOrderDetailsAction() {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_ACKORDER_STATUS);
-		intent.putExtra(OrderLogic.EXTRA_SHOP_CODE, shopCode);
-		intent.putExtra(OrderLogic.EXTRA_USER_CODE, userCode);
-		sendAction(intent);
-	}
-	
-	/** 获取微信的prepayid */
-	private void getWXPrepayidAction() {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_PREPAYID);
-		intent.putExtra(OrderLogic.EXTRA_OUT_TRADE_NO,SPUtils.getString(context, GlobalInfo.KEY_ORDER_NUM, ""));
-		sendAction(intent);
-	}
-
-	/** 普通订单支付 */
-	private void postOrderInsertorder(String remark, String startTime, String endTime, int payWay,
-			String couponCode) {
-		Intent intent = new Intent(OrderLogic.ACTION_POST_ORDER_INSERTORDER);
-		intent.putExtra(OrderLogic.EXTRA_SHOP_CODE, shopCode);
-		intent.putExtra(OrderLogic.EXTRA_USER_CODE, userCode);
-		intent.putExtra(OrderLogic.EXTRA_REMARK, remark);
-		intent.putExtra(OrderLogic.EXTRA_STARTTIME, startTime);
-		intent.putExtra(OrderLogic.EXTRA_ENDTIME, endTime);
-		intent.putExtra(OrderLogic.EXTRA_PAY_WAY, payWay);
-		intent.putExtra(OrderLogic.EXTRA_COUPON_CODE, couponCode);
-		sendAction(intent);
-	}
-		
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			startActivity(new Intent(this, ShoppingCartActivity.class));
-			finish();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-	
-	//微信支付--------------------------------------------------------------------------------
-	private void sendPayReq() {
-		msgApi.registerApp(prepayInfo.getAppid());
-		msgApi.sendReq(req);
-	}
-
-	private void genPayReq() {
-		req.appId = prepayInfo.getAppid();
-		req.partnerId = prepayInfo.getPartnerid();
-		req.prepayId = prepayInfo.getPrepayid();
-		req.packageValue = "Sign=WXPay";
-		req.nonceStr = prepayInfo.getNoncestr();
-		req.timeStamp = prepayInfo.getTimestamp();
-		req.sign = prepayInfo.getSign();
-	}
-	//微信支付--------------------------------------------------------------------------------
-	
-	//支付宝支付---------------------------------------------------------
-	//商户PID
-	public static final String PARTNER = "2088011325918143";
-	//商户收款账号
-	public static final String SELLER = "btfl@buttonad.com";
-	//商户私钥，pkcs8格式
-	public static final String RSA_PRIVATE = "MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBANX23iQrRAeE/LYJU7JJiJRUzXQAYD2ktMw104viJX2Jt43aLYA40PRwwChbRQHDOhWDVzw7vLQbAIEqh75L1CkpQA0PUUXS/Ac0FOGVsxVf/iXw3u6VGVpd6bMb/cWHNI1gsfuIOew3DiBC7FQ3po17q/5WErr3RF746tdudVORAgMBAAECgYBjzR+2zTuRKlXZ7yXMDoKXdarThe1eM3plmmHPaK/GC7vDfdYlbdsBeaoX6OKaPN7V9Ap3vQF7HPEyTo08lRAjO//PFCwQRL45LsPiWQ7Wrdvi5Yy91qWGJYLIwv5mDCR3lPIIeFTCHZEvX6zo1bi+/dJyIaToM5PvHFuN+saiAQJBAPvUl1Kp9XJcbmtKc8NpHJAGpehSMeW8Y7beb1AsfFwjGSnhRlpA5dBRGAhxefaVaVmYpEForrbJjA89kC3CNmECQQDZgcb8iHVpPJX0L9OSctd3uFEMf0amz0s57MVgacsegItB3Uyr0qHwKVCcQhYAPDA/ChCgk59LrOOkgZ6HassxAkAAqTIseV23ix6PEYb0QFZe2mWdEnonDDOGy1anczZwV3c9cOXqXrk7rrrNat7TEtlP7uKfeVLcD/NaJuM1+4iBAkAfBkff1YcJz76D6h5/kSnyxbOp2K23NXJBfOhabDywyR0T9ADvsUev/fSllTeWKP+ovkLI5MWgAbUmzeZS4oTBAkEAvwJh8d9EcJs6a65eiYWlPMp/pNuT80UQhFWi0eZmADUpt0OXvl8jefF7QdUSApKAIynimU3GL8BqRG/+0wIVMw==";
-	//支付宝公钥
-	public static final String RSA_PUBLIC = "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCnxj/9qwVfgoUh/y2W89L6BkRAFljhNhgPdyPuBV64bfQNN1PjbCzkIM6qRdKBoLPXmKKMiFYnkd6rAoprih3/PrQEB/VsW8OoM8fxn67UDYuyBTqA23MML9q1+ilIZwBC2AQ2UBVOrFXfFl75p6/B5KsiNG9zpgmLCUYuLkxpLQIDAQAB";
-	private static final int SDK_PAY_FLAG = 1;
-	
-	private Handler mHandler = new Handler() {
-		public void handleMessage(Message msg) {
-			switch (msg.what) {
-			case SDK_PAY_FLAG: {
-				PayResult payResult = new PayResult((String) msg.obj);
-				// 支付宝返回此次支付结果及加签，建议对支付宝签名信息拿签约时支付宝提供的公钥做验签
-				String resultInfo = payResult.getResult();
-				String resultStatus = payResult.getResultStatus();
-				// 判断resultStatus 为“9000”则代表支付成功，具体状态码代表含义可参考接口文档
-				if (TextUtils.equals(resultStatus, "9000")) {
-					Intent intent = new Intent(BalanceActivity.this, OrderDetailsActivity.class);
-					intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, SPUtils.getString(context, GlobalInfo.KEY_ORDER_NUM, ""));
-					startActivity(intent);
-					finish();
-				} else {
-					// 判断resultStatus 为非“9000”则代表可能支付失败
-					// “8000”代表支付结果因为支付渠道原因或者系统原因还在等待支付结果确认，最终交易是否成功以服务端异步通知为准（小概率状态）
-					if (TextUtils.equals(resultStatus, "8000")) {
-						MyToast.show(BalanceActivity.this, "支付结果确认中");
-					} else {
-						// 其他值就可以判断为支付失败，包括用户主动取消支付，或者系统返回的错误
-						MyToast.show(BalanceActivity.this, "支付失败");
-					}
-				}
-				break;
-			}
-			default:
-				break;
-			}
-		};
-	};
-		
-	/*** call alipay sdk pay. 调用SDK支付 **/
-	public void AlipayPay() {
-		// 订单
-		String orderInfo = getOrderInfo("测试的商品", "该测试商品的详细描述", "0.01");
-		// 对订单做RSA 签名
-		String sign = sign(orderInfo);
-		try {
-			// 仅需对sign 做URL编码
-			sign = URLEncoder.encode(sign, "UTF-8");
-		} catch (UnsupportedEncodingException e) {
-			e.printStackTrace();
-		}
-		// 完整的符合支付宝参数规范的订单信息
-		final String payInfo = orderInfo + "&sign=\"" + sign + "\"&"+ getSignType();
-		// 必须异步调用
-		Thread payThread = new Thread(new Runnable() {
-			
-			@Override
-			public void run() {
-				PayTask alipay = new PayTask(BalanceActivity.this);
-				// 调用支付接口，获取支付结果
-				String result = alipay.pay(payInfo);
-
-				Message msg = new Message();
-				msg.what = SDK_PAY_FLAG;
-				msg.obj = result;
-				mHandler.sendMessage(msg);
-			}
-		});
-		payThread.start();
-	}
-		
-	/*** create the order info. 创建订单信息**/
-	public String getOrderInfo(String subject, String body, String price) {
-		// 签约合作者身份ID
-		String orderInfo = "partner=" + "\"" + PARTNER + "\"";
-		// 签约卖家支付宝账号
-		orderInfo += "&seller_id=" + "\"" + SELLER + "\"";
-		// 商户网站唯一订单号
-		orderInfo += "&out_trade_no=" + "\"" + getOutTradeNo() + "\"";
-		// 商品名称
-		orderInfo += "&subject=" + "\"" + subject + "\"";
-		// 商品详情
-		orderInfo += "&body=" + "\"" + body + "\"";
-		// 商品金额
-		orderInfo += "&total_fee=" + "\"" + price + "\"";
-		// 服务器异步通知页面路径
-		orderInfo += "&notify_url=" + "\"" + "http://notify.msp.hk/notify.htm"+ "\"";
-		// 服务接口名称， 固定值
-		orderInfo += "&service=\"mobile.securitypay.pay\"";
-		// 支付类型， 固定值
-		orderInfo += "&payment_type=\"1\"";
-		// 参数编码， 固定值
-		orderInfo += "&_input_charset=\"utf-8\"";
-		// 设置未付款交易的超时时间
-		// 默认30分钟，一旦超时，该笔交易就会自动被关闭。
-		// 取值范围：1m～15d。
-		// m-分钟，h-小时，d-天，1c-当天（无论交易何时创建，都在0点关闭）。
-		// 该参数数值不接受小数点，如1.5h，可转换为90m。
-		orderInfo += "&it_b_pay=\"30m\"";
-		// extern_token为经过快登授权获取到的alipay_open_id,带上此参数用户将使用授权的账户进行支付
-		// orderInfo += "&extern_token=" + "\"" + extern_token + "\"";
-		// 支付宝处理完请求后，当前页面跳转到商户指定页面的路径，可空
-		orderInfo += "&return_url=\"m.alipay.com\"";
-		// 调用银行卡支付，需配置此参数，参与签名， 固定值 （需要签约《无线银行卡快捷支付》才能使用）
-		// orderInfo += "&paymethod=\"expressGateway\"";
-		return orderInfo;
-	}
-		
-	/*** get the out_trade_no for an order. 生成商户订单号，该值在商户端应保持唯一（可自定义格式规范）**/
-	public String getOutTradeNo() {
-		SimpleDateFormat format = new SimpleDateFormat("MMddHHmmss",Locale.getDefault());
-		Date date = new Date();
-		String key = format.format(date);
-
-		Random r = new Random();
-		key = key + r.nextInt();
-		key = key.substring(0, 15);
-		return key;
-	}
-	
-	/**
-	 * sign the order info. 对订单信息进行签名
-	 * @param content 待签名订单信息
-	 */
-	public String sign(String content) {
-		return SignUtils.sign(content, RSA_PRIVATE);
-	}
-
-	
-	/*** get the sign type we use. 获取签名方式 **/
-	public String getSignType() {
-		return "sign_type=\"RSA\"";
-	}
-	//支付宝支付---------------------------------------------------------
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ShoppingCartGoodsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ShoppingCartGoodsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ShoppingCartGoodsAdapter.java	(revision )
@@ -1,165 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.view.AddAndSubView;
-import com.anniu.shandiandaojia.view.MyDialog;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-
-/**
-* @ClassName: ShoppingCartGoodsAdapter 
-* @Description: 购物车页面商品列表适配器 
-* @author zxl 
-* @date 2015年6月9日 下午3:46:39
- */
-public class ShoppingCartGoodsAdapter extends BaseAdapter {
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private ArrayList<Goods> mList;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-
-	@SuppressWarnings("deprecation")
-	public ShoppingCartGoodsAdapter(Context context, ArrayList<Goods> goods) {
-		super();
-		this.mContext = context;
-		this.mList = goods;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_shopping_cart_goods, null);
-			holder.img = (ImageView) convertView.findViewById(R.id.iv_img);
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.line = (View) convertView.findViewById(R.id.line);
-			holder.addSub = (AddAndSubView) convertView.findViewById(R.id.addSub);
-			holder.goodsDelete = (TextView) convertView.findViewById(R.id.tv_goods_delete);
-			holder.addSub.setButtonLayoutParm(27, 27);
-			
-			holder.goodsDelete.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					showAlertDialog((Integer) v.getTag());
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		
-		double goods_price = goods.getGoods_price();
-		BigDecimal bdgoods_price = new BigDecimal(goods_price);
-		bdgoods_price = bdgoods_price.setScale(2, BigDecimal.ROUND_DOWN);
-		
-		mImageLoader.displayImage(goods.getPictrue_addr(), holder.img, options);
-		holder.goodsName.setText(goods.getGoods_name());
-		holder.goodsPrice.setText("￥"+bdgoods_price);
-		holder.addSub.setNum(goods.getGoods_num());
-		holder.addSub.setLimited(goods.getLimited());
-		holder.addSub.setChangecode(goods.getChange_code());
-		holder.goodsDelete.setTag(goods.getChange_code());
-		
-		if (position == mList.size() - 1) {
-			holder.line.setVisibility(View.GONE);
-		} else {
-			holder.line.setVisibility(View.VISIBLE);
-		}
-		return convertView;
-	}
-
-	class ViewHolder {
-		ImageView img;
-		TextView goodsName;
-		TextView goodsPrice;
-		AddAndSubView addSub;
-		TextView goodsDelete;
-		View line;
-	}
-
-	public void addData(ArrayList<Goods> goodsList) {
-		mList = goodsList;
-		notifyDataSetChanged();
-	}
-	
-	/** 刪除购物车中某一条纪录*/
-	private void sendDeleteAction(int changecode){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_GET_DELETE_CART_GOOD);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE,SPUtils.getInt(mContext, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE,changecode);
-		App.getInstance().sendAction(intent);
-	}
-	
-	/**
-	 * 提示框
-	 */
-	public void showAlertDialog(final int changecode) {
-		MyDialog.Builder builder = new MyDialog.Builder(mContext);
-		builder.setTitle("提示");
-		builder.setMessage("您真的要刪除该商品！");
-		builder.setConfirmButton("确定", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-				sendDeleteAction(changecode);
-			}
-		});
-		builder.setCancelButton("取消", new android.content.DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-			}
-		});
-		builder.create().show();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/AppExceptionReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/AppExceptionReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/AppExceptionReq.java	(revision )
@@ -1,30 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: AppExceptionReq
- * @Description: app异常接口
- * @author zxl
- * @date 2015年7月24日 下午2:52:21
- */
-public class AppExceptionReq extends HttpReq {
-
-	private String crash;
-
-	public AppExceptionReq(int id, String crash) {
-		super();
-		this.crash = crash;
-		this.id = id;
-	}
-
-	@Override
-	public String getParams() {
-		return "crash=" + crash;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/WheelViewTimeActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/WheelViewTimeActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/WheelViewTimeActivity.java	(revision )
@@ -1,202 +0,0 @@
-package com.anniu.shandiandaojia.view.lee.wheel;
-
-import android.app.Activity;
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.Display;
-import android.view.Gravity;
-import android.view.KeyEvent;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.Window;
-import android.view.WindowManager;
-import android.view.WindowManager.LayoutParams;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.view.lee.wheel.widget.TosAdapterView;
-import com.anniu.shandiandaojia.view.lee.wheel.widget.TosGallery;
-import com.anniu.shandiandaojia.view.lee.wheel.widget.WheelView;
-/**
- * 
- * @ClassName:  WheelViewTimeActivity
- * @Description: 时间弹窗
- * @author YY
- * @date 2015年6月18日 下午6:38:04
- */
-public class WheelViewTimeActivity extends Activity implements OnClickListener {
-	/**定义一个时间段数组*/
-	private String[] timeArray = { "00:00 - 01:00", "01:00 - 02:00",
-			"02:00 - 03:00", "03:00 - 04:00", "04:00 - 05:00",
-			"05:00 - 06:000", "06:00 - 07:00", "07:00 - 08:00",
-			"08:00 - 09:00", "09:00 - 10:00", "10:00 - 11:00", "11:00 - 12:00",
-			"12:00 - 13:00", "13:00 - 14:00", "14:00 - 15:00", "15:00 - 16:00",
-			"16:00 - 17:00", "17:00 - 18:00", "18:00 - 19:00", "19:00 - 20:00",
-			"20:00 - 21:00", "21:00 - 22:00", "22:00 - 23:00", "23:00 - 00:00" };
-
-    private WheelView mTimes = null;
-    public static String EXTRA_CURRENT_TIME = "current_time";
-    private NumberAdapter hourAdapter;
-    /**选择的时间*/
-    private String time = "08:00 - 09:00";
-    /**点击取消选择*/
-    private TextView tv_cancel;
-    /**点击确定选择时间*/
-	private TextView tv_compelet;
-	public static int REQUESTCODE = 2;
-	private int num = 0;
-
-	@Override
-	public void onClick(View v) {
-		if (com.anniu.shandiandaojia.utils.Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.tv_cancel://取消选择时间
-			setDefaultTime();
-			break;
-		case R.id.tv_compelet://确认选择时间
-			setDefaultTime();
-			break;
-		default:
-			break;
-		}
-	}
-
-	private void setDefaultTime() {
-		Intent intent1 = new Intent();
-		intent1.putExtra(GlobalInfo.KEY_TIME, time);
-		setResult(REQUESTCODE, intent1);
-		finish();
-	}
-
-    @Override
-    protected void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        showTime();
-    }
-
-	@SuppressWarnings("deprecation")
-	private void showTime() {
-		requestWindowFeature(Window.FEATURE_NO_TITLE);
-        setContentView(R.layout.wheel_time);
-        WindowManager m = getWindowManager();    
-        Display d = m.getDefaultDisplay();  //为获取屏幕宽、高    
-        LayoutParams p = getWindow().getAttributes();  //获取对话框当前的参数值    
-        p.width = (int) (d.getWidth() * 1);    //宽度设置为屏幕的0.8   
-        getWindow().setAttributes(p);
-        
-        Intent intent = getIntent();
-        String currentTime = intent.getStringExtra(EXTRA_CURRENT_TIME);
-		for (int i = 0; i < timeArray.length; i++) {
-			if (timeArray[i].equals(currentTime)) {
-				num = i;
-				break;
-			}
-		}
-        
-        mTimes = (WheelView) findViewById(R.id.wheel1);
-        tv_cancel = (TextView) findViewById(R.id.tv_cancel);
-        tv_cancel.setOnClickListener(this);
-        tv_compelet = (TextView) findViewById(R.id.tv_compelet);
-        tv_compelet.setOnClickListener(this);
-        mTimes.setScrollCycle(true);
-        
-        hourAdapter = new NumberAdapter(timeArray);
-        mTimes.setAdapter(hourAdapter);
-        mTimes.setSelection(num, true);
-        ((WheelTextView)mTimes.getSelectedView()).setTextSize(30);
-        mTimes.setOnItemSelectedListener(mListener);
-        mTimes.setUnselectedAlpha(0.5f);
-        time = timeArray[mTimes.getSelectedItemPosition()];
-	}
-    
-    protected void getTime() {
-    	int selectedItemPosition = mTimes.getSelectedItemPosition();
-    	time = timeArray[selectedItemPosition];
-	}
-    
-	private TosAdapterView.OnItemSelectedListener mListener = new TosAdapterView.OnItemSelectedListener() {
-		@Override
-		public void onItemSelected(TosAdapterView<?> parent, View view,
-				int position, long id) {
-			((WheelTextView) view).setTextSize(30);
-
-			int index = Integer.parseInt(view.getTag().toString());
-			int count = parent.getChildCount();
-			if (index < count - 1) {
-				((WheelTextView) parent.getChildAt(index + 1)).setTextSize(25);
-			}
-			if (index > 0) {
-				((WheelTextView) parent.getChildAt(index - 1)).setTextSize(25);
-			}
-			getTime();
-		}
-
-		@Override
-		public void onNothingSelected(TosAdapterView<?> parent) {
-
-		}
-	};
-
-
-	private class NumberAdapter extends BaseAdapter {
-        int mHeight = 50;
-        String[] mData = null;
-
-        public NumberAdapter(String[] data) {
-            mHeight = (int) Utils.dipToPx(WheelViewTimeActivity.this, mHeight);
-            this.mData = data;
-        }
-
-        @Override
-        public int getCount() {
-            return (null != mData) ? mData.length : 0;
-        }
-
-        @Override
-        public View getItem(int arg0) {
-            return getView(arg0, null, null);
-        }
-
-        @Override
-        public long getItemId(int arg0) {
-            return arg0;
-        }
-        
-        
-        @Override
-        public View getView(int position, View convertView, ViewGroup parent) {
-            WheelTextView textView = null;
-
-            if (null == convertView) {
-                convertView = new WheelTextView(WheelViewTimeActivity.this);
-                convertView.setLayoutParams(new TosGallery.LayoutParams(-1, mHeight));
-                textView = (WheelTextView) convertView;
-                textView.setTextSize(25);
-                textView.setGravity(Gravity.CENTER);
-            }
-            
-            
-            String text = mData[position];
-            if (null == textView) {
-                textView = (WheelTextView) convertView;
-            }
-            
-            textView.setText(text);
-            return convertView;
-        }
-    }
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			setDefaultTime();
-			return true;
-		}
-		return false;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/UserLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/UserLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/UserLogic.java	(revision )
@@ -1,779 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.HotWords;
-import com.anniu.shandiandaojia.db.jsondb.MyAddress;
-import com.anniu.shandiandaojia.db.jsondb.UserInfo;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.CheckOutVetifyCodeReq;
-import com.anniu.shandiandaojia.net.bean.entity.ComplainorderReq;
-import com.anniu.shandiandaojia.net.bean.entity.DeleteaddrReq;
-import com.anniu.shandiandaojia.net.bean.entity.EditAddrReq;
-import com.anniu.shandiandaojia.net.bean.entity.FindpersonbyidReq;
-import com.anniu.shandiandaojia.net.bean.entity.FinduserlocReq;
-import com.anniu.shandiandaojia.net.bean.entity.IndexSearchhotsReq;
-import com.anniu.shandiandaojia.net.bean.entity.InsertAddrGetReq;
-import com.anniu.shandiandaojia.net.bean.entity.InsertAddrReq;
-import com.anniu.shandiandaojia.net.bean.entity.SubmitadviceReq;
-import com.anniu.shandiandaojia.net.bean.entity.UpdatePersoninfoReq;
-import com.anniu.shandiandaojia.net.bean.entity.VerityCodeReq;
-import com.anniu.shandiandaojia.service.HttpService;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-
-/**
- * 
- * @ClassName: UserLogic
- * @Description: 用户Logic类
- * @author YY
- * @date 2015年6月3日 下午3:37:15
- */
-public class UserLogic extends BaseLogic {
-
-	/** 获取验证码 */
-	public static String ACTION_POST_VERFICATION_CODE = "UserLogic.ACTION_POST_VERFICATION_CODE";
-	/** 登出 */
-	public static String ACTION_LOGINOUT = "UserLogic.ACTION_LOGINOUT";
-	/** 校验验证码 并登陆*/
-	public static String ACTION_POST_CHECK_OUT_VERFICATION_CODE = "UserLogic.ACTION_POST_CHECK_OUT_VERFICATION_CODE";
-	/** 获取个人中心详情 */
-	public static String ACTION_GET_PERSON_SETTING= "UserLogic.ACTION_GET_PERSON_SETTING";
-	/** 保存个人中心姓名性别 */
-	public static String ACTION_POST_PERSON_NAME_SEX= "UserLogic.ACTION_POST_PERSON_NAME_SEX";
-	/** 获取个人中心我的地址*/
-	public static String ACTION_GET_PERSON_FINDUSERLOC = "UserLogic.ACTION_GET_PERSON_FINDUSERLOC";
-	/** 修改收货信息--修改*/
-	public static String ACTION_POST_PERSON_EDITADDR = "UserLogic.ACTION_POST_PERSON_EDITADDR";
-	/** 修改收货信息--新增*/
-	public static String ACTION_POST_PERSON_INSERTADDR = "UserLogic.ACTION_POST_PERSON_INSERTADDR";
-	/** 修改收货信息--修改默认收货地址*/
-	public static String ACTION_GET_PERSON_INSERTADDR = "UserLogic.ACTION_GET_PERSON_INSERTADDR";
-	/** 修改收货信息--删除*/
-	public static String ACTION_POST_PERSON_DELETEADDR = "UserLogic.ACTION_POST_PERSON_DELETEADDR";
-	/** 意见反馈*/
-	public static String ACTION_POST_SUBMITADVICE = "UserLogic.ACTION_POST_SUBMITADVICE";
-	/** 投诉商铺*/
-	public static String ACTION_POST_COMPLAINORDER = "UserLogic.ACTION_POST_COMPLAINORDER";
-	/**进入搜索界面*/
-	public static String ACTION_GET_INDEX_SEARCHHOTS = "UserLogic.ACTION_GET_INDEX_SEARCHHOTS";
-	/** 用户ID */
-	public static String EXTRA_USER_CODE = "user_code";
-	/** 用户性别 */
-	public static String EXTRA_USER_SEX = "user_sex";
-	/** 注册手机号码 */
-	public static String EXTRA_PHONE = "user_tel";
-	/** 验证码 */
-	public static String EXTRA_VERTIFYCODE = "vertify_code";
-	/** 返回的提示 */
-	public static String EXTRA_NOTICE = "notice";
-	/** 用户名称 */
-	public static String EXTRA_USER_NAME = "user_name";
-	/** 用户名称 */
-	public static String EXTRA_NICK_NAME = "nick_name";
-	/**用户地址ID*/
-	public static String EXTRA_USER_LOC_CODE = "user_loc_code";
-	/**用户地址*/
-	public static String EXTRA_USER_ADDR = "user_addr";
-	/**用户反馈意见*/
-	public static String EXTRA_SUBMITADVICE = "submitadvice";
-	/**商铺编号*/
-	public static String EXTRA_SHOP_CODE = "shop_code";
-	/**订单编号*/
-	public static String EXTRA_ORDER_NUM = "order_num";
-	public static String EXTRA_DATA = "user_data";
-	/**用户是否购买过水票*/
-	public static String EXTRA_FLAG = "flag";
-	/**用户信息*/
-	public static String EXTRA_USER = "user";
-	public static String EXTRA_MYADDRESS_STATES_LIST = "myaddress_states_list";
-	/**热词集合*/
-	public static String EXTRA_SEARCHHOTS_LIST = "searchhots_list";
-	public static String EXTRA_SENDINFO = "sendInfo";
-	public static String EXTRA_WATER = "water";
-	public static String EXTRA_RESULT = "result";
-	public static String EXTRA_ISSUCCESS = "issuccess";
-	
-	public UserLogic(HttpService service) {
-		super(service);
-		ArrayList<String> actions = new ArrayList<String>();
-		actions.add(ACTION_POST_VERFICATION_CODE);
-		actions.add(ACTION_POST_CHECK_OUT_VERFICATION_CODE);
-		actions.add(ACTION_GET_PERSON_SETTING);
-		actions.add(ACTION_POST_PERSON_NAME_SEX);
-		actions.add(ACTION_GET_PERSON_FINDUSERLOC);
-		actions.add(ACTION_POST_PERSON_EDITADDR);
-		actions.add(ACTION_POST_PERSON_INSERTADDR);
-		actions.add(ACTION_GET_PERSON_INSERTADDR);
-		actions.add(ACTION_POST_PERSON_DELETEADDR);
-		actions.add(ACTION_POST_SUBMITADVICE);
-		actions.add(ACTION_POST_COMPLAINORDER);
-		actions.add(ACTION_GET_INDEX_SEARCHHOTS);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_POST_VERFICATION_CODE.equals(action)) {
-			String phone = intent.getExtras().getString(EXTRA_PHONE);
-			postVerficationCode(phone);
-		}else if (ACTION_POST_CHECK_OUT_VERFICATION_CODE.equals(action)) {
-			String phone = intent.getStringExtra(EXTRA_PHONE);
-			String verficationCode = intent.getStringExtra(EXTRA_VERTIFYCODE);
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			postCheckOutVerfyCode(phone,verficationCode,shopCode);
-		}else if (ACTION_GET_PERSON_SETTING.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			getfindpersonbyid(userCode);
-		}else if (ACTION_POST_PERSON_NAME_SEX.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			String userName = intent.getStringExtra(EXTRA_NICK_NAME);
-			int userSex = intent.getIntExtra(EXTRA_USER_SEX, 1);
-			postupdatepersoninfo(userCode,userName,userSex);
-		}else if (ACTION_GET_PERSON_FINDUSERLOC.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			getfinduserloc(userCode);
-		}else if (ACTION_POST_PERSON_EDITADDR.equals(action)) {
-			int userLocCode = intent.getIntExtra(UserLogic.EXTRA_USER_LOC_CODE,0);
-			String userName = intent.getStringExtra(UserLogic.EXTRA_USER_NAME);
-			String userPhone = intent.getStringExtra(UserLogic.EXTRA_PHONE);
-			String userAddr = intent.getStringExtra(UserLogic.EXTRA_USER_ADDR);
-			posteditAddr(userLocCode,userName,userPhone,userAddr);
-		}else if (ACTION_POST_PERSON_INSERTADDR.equals(action)) {
-			int userCode = intent.getIntExtra(UserLogic.EXTRA_USER_CODE,0);
-			String userName = intent.getStringExtra(UserLogic.EXTRA_USER_NAME);
-			String userPhone = intent.getStringExtra(UserLogic.EXTRA_PHONE);
-			String userAddr = intent.getStringExtra(UserLogic.EXTRA_USER_ADDR);
-			postinsertAddr(userCode,userName,userPhone,userAddr);
-		}else if (ACTION_GET_PERSON_INSERTADDR.equals(action)) {
-			int userCode = intent.getIntExtra(UserLogic.EXTRA_USER_CODE,0);
-			int userLocCode = intent.getIntExtra(UserLogic.EXTRA_USER_LOC_CODE,0);
-			getinsertAddr(userCode,userLocCode);
-		}else if (ACTION_POST_PERSON_DELETEADDR.equals(action)) {
-			int userLocCode = intent.getIntExtra(UserLogic.EXTRA_USER_LOC_CODE,0);
-			postdeleteaddr(userLocCode);
-		}else if (ACTION_POST_SUBMITADVICE.equals(action)) {
-			int userCode = intent.getIntExtra(UserLogic.EXTRA_USER_CODE,0);
-			String content = intent.getStringExtra(UserLogic.EXTRA_SUBMITADVICE);
-			postsubmitadvice(userCode,content);
-		}else if (ACTION_POST_COMPLAINORDER.equals(action)) {
-			String orderNum = intent.getStringExtra(GlobalInfo.KEY_ORDER_NUM);
-			int userCode = intent.getIntExtra(UserLogic.EXTRA_USER_CODE,0);
-			int shopCode = intent.getIntExtra(UserLogic.EXTRA_SHOP_CODE, 0);
-			String content = intent.getStringExtra(UserLogic.EXTRA_SUBMITADVICE);
-			postComplainorder(orderNum,userCode,shopCode,content);
-		}else if (ACTION_GET_INDEX_SEARCHHOTS.equals(action)) {
-			getIndexSearchhots();
-		}
-	}
-	
-	/**获取搜索界面热词*/
-	private void getIndexSearchhots() {
-		IndexSearchhotsReq req = new IndexSearchhotsReq(ReqInfo.REQ_GET_INDEX_SEARCHHOTS);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONArray jsonArray = obj.getJSONArray(GlobalValue.KEY_MSG);
-								ArrayList<HotWords> searchhotslist = new ArrayList<HotWords>();
-								HotWords searchhots = null;
-								for (int i = 0; i < jsonArray.length(); i++) {
-									JSONObject searchhonsObj = (JSONObject) jsonArray.get(i);
-									searchhots = gson.fromJson(searchhonsObj.toString(), HotWords.class);
-									searchhotslist.add(searchhots);
-								}
-								bundle.putSerializable(EXTRA_SEARCHHOTS_LIST, searchhotslist);
-							}
-							notice(Event.GET_INDEX_SEARCHHOTS_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_INDEX_SEARCHHOTS_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_INDEX_SEARCHHOTS_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_INDEX_SEARCHHOTS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**投诉商铺*/
-	private void postComplainorder(String orderNum,int userCode, int shopCode, String content) {
-		ComplainorderReq req = new ComplainorderReq(ReqInfo.REQ_POST_COMPLAINORDER, orderNum,userCode, shopCode, content);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_COMPLAINORDER_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_COMPLAINORDER_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_COMPLAINORDER_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_COMPLAINORDER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**用户意见反馈*/
-	private void postsubmitadvice(int userCode, String content) {
-		SubmitadviceReq req = new SubmitadviceReq(ReqInfo.REQ_POST_SUBMITADVICE, userCode, content);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_SUBMITADVICE_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_SUBMITADVICE_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_SUBMITADVICE_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_SUBMITADVICE_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**删除用户收货信息*/
-	private void postdeleteaddr(int userLocCode) {
-		DeleteaddrReq req = new DeleteaddrReq(ReqInfo.REQ_POST_DELETEADDR, userLocCode);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_PERSON_DELETEADDR_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_PERSON_DELETEADDR_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_PERSON_DELETEADDR_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_PERSON_DELETEADDR_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**修改默认的收货地址*/
-	private void getinsertAddr(int userCode, int userLocCode) {
-		InsertAddrGetReq req = new InsertAddrGetReq(ReqInfo.REQ_GET_PERSON_EDITDEFAULT_ADDR, userCode, userLocCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.GET_PERSON_EDITDEFAULT_ADDR_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PERSON_EDITDEFAULT_ADDR_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_PERSON_EDITDEFAULT_ADDR_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PERSON_EDITDEFAULT_ADDR_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**新增用户收货地址*/
-	private void postinsertAddr(int userCode, String userName,String userPhone, String userAddr) {
-		InsertAddrReq req = new InsertAddrReq(ReqInfo.REQ_POST_PERSON_INSERTADDR, userCode, userName, userPhone, userAddr);
-		req.isHttpPost = true ;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_PERSON_INSERTADDR_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_PERSON_INSERTADDR_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_PERSON_INSERTADDR_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_PERSON_INSERTADDR_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**修改用户收货地址--修改*/
-	private void posteditAddr(int userLocCode, String userName,String userPhone, String userAddr) {
-		EditAddrReq req = new EditAddrReq(ReqInfo.REQ_POST_PERSON_EDITADDR, userLocCode, userName, userPhone, userAddr);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_PERSON_EDITADDR_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_PERSON_EDITADDR_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_PERSON_EDITADDR_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_PERSON_EDITADDR_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取个人中心我的地址*/
-	private void getfinduserloc(int userCode) {
-		FinduserlocReq req = new FinduserlocReq(ReqInfo.REQ_GET_PERSON_FINDUSERLOC, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code=obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code==200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONArray jsonArray = obj.getJSONArray(GlobalValue.KEY_MSG);
-								ArrayList<MyAddress> myAddresses = new ArrayList<MyAddress>();
-								MyAddress myAddress = null;
-								for (int i = 0; i < jsonArray.length(); i++) {
-									JSONObject object = (JSONObject) jsonArray.get(i);
-									myAddress = gson.fromJson(object.toString(), MyAddress.class);
-									myAddresses.add(myAddress);
-								}
-								bundle.putSerializable(EXTRA_MYADDRESS_STATES_LIST, myAddresses);
-							}
-							notice(Event.GET_PERSON_FINDUSERLOC_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PERSON_FINDUSERLOC_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.GET_PERSON_FINDUSERLOC_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PERSON_FINDUSERLOC_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**保存个人中心姓名性别*/
-	private void postupdatepersoninfo(int userCode, String userName,int userSex) {
-		UpdatePersoninfoReq req = new UpdatePersoninfoReq(ReqInfo.REQ_POST_PERSON_NAME_SEX, userCode, userName, userSex);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.POST_PERSON_NAME_SEX_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_PERSON_NAME_SEX_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "服务器正忙，请稍后重试！");
-							notice(Event.POST_PERSON_NAME_SEX_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_PERSON_NAME_SEX_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取个人中心详情*/
-	private void getfindpersonbyid(int userCode) {
-		FindpersonbyidReq req = new FindpersonbyidReq(ReqInfo.REQ_GET_PERSON_SETTING, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject jsonObject = new JSONObject(str);
-						if (jsonObject.has(GlobalValue.KEY_CODE)) {
-							code = jsonObject.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							notice(Event.GET_PERSON_SETTING_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = jsonObject.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PERSON_SETTING_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后重试！");
-							notice(Event.GET_PERSON_SETTING_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PERSON_SETTING_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**校验验证码并登录
-	 * @param shopCode */
-	private void postCheckOutVerfyCode(String phone,String verficationCode, int shopCode) {
-		CheckOutVetifyCodeReq req = new CheckOutVetifyCodeReq(ReqInfo.REQ_POST_CHECK_OUT_VERFICATION_CODE, phone, verficationCode,shopCode);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code==HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject!=null&&jsonObject.has(EXTRA_SENDINFO)) {
-									// 购物车信息
-									String sendInfo = jsonObject.getString(EXTRA_SENDINFO);
-									if (!sendInfo.equals("null")) {
-										JSONArray sendInfoArray = jsonObject.getJSONArray(EXTRA_SENDINFO);
-										if (sendInfoArray != null&& sendInfoArray.length() > 0) {
-											ArrayList<BottomStatusBar> bottomStatusBaeList = new ArrayList<BottomStatusBar>();
-											JSONObject bottomStatusBarObj = (JSONObject) sendInfoArray.get(0);
-											BottomStatusBar bottomStatusBar = gson.fromJson(bottomStatusBarObj.toString(),BottomStatusBar.class);
-											bottomStatusBaeList.add(bottomStatusBar);
-											bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST,bottomStatusBaeList);
-										}
-									}else{
-										bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST,null);
-									}
-								}
-								
-								if (jsonObject.has(EXTRA_USER)) {
-									JSONObject userObject = jsonObject.getJSONObject(EXTRA_USER);
-									UserInfo userInfo = gson.fromJson(userObject.toString(), UserInfo.class);
-									SPUtils.saveString(mContext,GlobalInfo.KEY_NICK_NAME,userInfo.getNick_name());
-									SPUtils.saveString(mContext,GlobalInfo.KEY_USER_NAME,userInfo.getUser_name());
-									SPUtils.saveString(mContext,GlobalInfo.KEY_USER_SEX,userInfo.getSex());
-									SPUtils.saveInt(mContext,GlobalInfo.KEY_USERCODE,userInfo.getUser_code());
-									SPUtils.saveString(mContext,GlobalInfo.KEY_USER_TEL,userInfo.getUser_tel());
-									SPUtils.saveString(mContext,GlobalInfo.KEY_REGISTER_TIME,userInfo.getRegister_time());
-									SPUtils.saveBoolean(mContext, GlobalInfo.KEY_ISLOGIN, true);
-								}
-								if (jsonObject.has(EXTRA_WATER)) {
-									JSONObject waterObject = jsonObject.getJSONObject(EXTRA_WATER);
-									int flag = waterObject.getInt(EXTRA_FLAG);
-									bundle.putInt(EXTRA_FLAG, flag);
-								}
-							}
-							notice(Event.POST_CHECK_OUT_VERFICATION_SUCCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_CHECK_OUT_VERFICATION_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"输入验证码有误，请重新输入！");
-							notice(Event.POST_CHECK_OUT_VERFICATION_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_CHECK_OUT_VERFICATION_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取验证码*/
-	private void postVerficationCode(String phone) {
-		VerityCodeReq req = new VerityCodeReq(ReqInfo.REQ_POST_VERFICATION_CODE, phone);
-		req.setOnHttpRsp(new OnHttpRsp() {
-
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (null != msg) {
-									if (msg.has(EXTRA_RESULT)) {
-										String notice = msg.getString(EXTRA_RESULT);
-										bundle.putString(EXTRA_RESULT, notice);
-									}
-									if (msg.has(EXTRA_ISSUCCESS)) {
-										String isSuccess = msg.getString(EXTRA_ISSUCCESS);
-										bundle.putString(EXTRA_ISSUCCESS, isSuccess);
-									}
-								}
-							}
-							notice(Event.POST_SEND_VERFICATION_SUCCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_SEND_VERFICATION_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"获取验证码失败，请稍后重试");
-							notice(Event.POST_SEND_VERFICATION_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_SEND_VERFICATION_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindallOrdersReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindallOrdersReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindallOrdersReq.java	(revision )
@@ -1,40 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: FindallOrdersReq
- * @Description: 获取用户订单请求
- * @author YY
- * @date 2015年6月5日 下午1:03:42
- */
-public class FindallOrdersReq extends HttpReq {
-
-	private int userCode;
-
-	public FindallOrdersReq(int reqid, int userCode) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GoodsDetailActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GoodsDetailActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GoodsDetailActivity.java	(revision )
@@ -1,499 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.Paint;
-import android.graphics.drawable.BitmapDrawable;
-import android.os.Bundle;
-import android.view.Gravity;
-import android.view.KeyEvent;
-import android.view.View;
-import android.view.View.MeasureSpec;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.view.ViewGroup.MarginLayoutParams;
-import android.view.WindowManager;
-import android.widget.GridView;
-import android.widget.ImageView;
-import android.widget.ListAdapter;
-import android.widget.ListView;
-import android.widget.PopupWindow;
-import android.widget.PopupWindow.OnDismissListener;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.CartListAdapter;
-import com.anniu.shandiandaojia.adapter.GoodsLoveAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.AddAndSubView;
-import com.anniu.shandiandaojia.view.KeyboardLayout;
-import com.anniu.shandiandaojia.view.KeyboardLayout.onKybdsChangeListener;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.ArrayList;
-
-/**
-* @ClassName: GoodsDetailActivity 
-* @Description: 商品详情页面 
-* @author zxl 
-* @date 2015年6月3日 下午5:35:05
- */
-public class GoodsDetailActivity extends BaseActivity {
-	private TextView titleBarTv,goodsName,promotePrice,goodsPrice,cartNum,cartPrice,cartNotice;
-	private ImageView leftTitle,goodsImg;
-	private AddAndSubView addSub;
-	private Goods goodsDetails = null;
-	private GridView gridview;
-	private ArrayList<Goods> goodsLove = new ArrayList<Goods>();
-	private GoodsLoveAdapter goodsLoveAdapter;
-	
-	/** 购物车商品列表*/
-	private PopupWindow carPopupWindow;  
-	private CartListAdapter cartListAdapter;
-	private ArrayList<Goods> cartList = new ArrayList<Goods>();
-	
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	private RelativeLayout loadingView,errorView;
-	private int changecode;
-	private int goods_num;
-	private int limited;
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_goods_details);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.goods_details);
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-	private ListView goodsList;
-
-	private void initView() {
-		Intent intent = getIntent();
-		changecode = intent.getExtras().getInt(GoodsLogic.EXTRA_GOODS_CODE);
-		goods_num = intent.getExtras().getInt(GoodsLogic.EXTRA_GOODS_NUMBER);
-		limited = intent.getExtras().getInt(GoodsLogic.EXTRA_LIMITED);
-		sendGoodsDetailsAction();
-		
-		KeyboardLayout viewKL = (KeyboardLayout) findViewById(R.id.kl);
-		viewKL.setOnkbdStateListener(new onKybdsChangeListener() {
-			
-			@Override
-			public void onKeyBoardStateChange(int state) {
-				switch (state) {
-				case KeyboardLayout.KEYBOARD_STATE_HIDE:
-					goods_num = addSub.getNum();
-					sendAddGood2CartAction3();
-					break;
-				default:
-					break;
-				}
-			}
-		});
-		
-		addSub = (AddAndSubView) findViewById(R.id.addSub);
-		addSub.setChangecode(changecode);
-		addSub.setNum(goods_num);
-		addSub.setLimited(limited);
-		addSub.setButtonLayoutParm(35, 35);
-		addSub.setViewsLayoutParm(120, 35);
-		addSub.setGravity(Gravity.RIGHT);
-		
-		goodsImg = (ImageView) findViewById(R.id.iv_goods_img);
-		goodsName = (TextView) findViewById(R.id.tv_goods_name);
-		promotePrice = (TextView) findViewById(R.id.tv_promote_price);
-		goodsPrice = (TextView) findViewById(R.id.tv_price);
-		gridview = (GridView) findViewById(R.id.gridview);
-		
-		findViewById(R.id.iv_cart).setOnClickListener(this);
-		cartNum = (TextView) findViewById(R.id.tv_cart_num);
-		cartPrice = (TextView) findViewById(R.id.cart_price);
-		cartNotice = (TextView) findViewById(R.id.tv_notice);	
-		findViewById(R.id.rl_notice).setOnClickListener(this);	
-		
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		
-		initImageloader();
-	}
-
-	@SuppressWarnings("deprecation")
-	private void initImageloader() {
-		mImageLoader = App.initImageLoader(this);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)
-				// 设置图片的解码类型
-				// .showStubImage(R.drawable.activity)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (Utils.isIMMShow(v)) {
-			Utils.hidiInputMethodManager(v);
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left://关闭
-			finish();
-			break;
-		case R.id.iv_cart://购物车图标
-			if (Utils.loginState()) {//判断是否登录过
-				sendGetCartGoodsListAction();
-			}else {
-				startActivity(new Intent(this,RegistActivity.class));
-				finish();
-			}
-			break;
-		case R.id.rl_notice://去购物车
-			if (Utils.loginState()) {
-				startActivity(new Intent(this, ShoppingCartActivity.class));
-			}else {
-				startActivity(new Intent(this,RegistActivity.class));
-			}
-			finish();
-			break;
-
-		default:
-			break;
-		}
-	}
-
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		return super.onKeyDown(keyCode, event);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_GOODS_DETAILS_SUCCESS:
-			hideErrorLocal();
-			loadingView.setVisibility(View.GONE);
-			setGoodsInfo(bundle);
-			cartNotice(bundle);
-			setGoodsLove(bundle);
-			break;
-		case Event.GET_GOODS_DETAILS_FAILED:
-			MyToast.show(this, notice);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS://添加或删除/修改商品数量成功事件 
-			cartNotice(bundle);
-			notifyPop(bundle);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED://添加或删除/修改商品数量失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_CART_LIST_GOODS_DETAILS_SUCESS://获取商品详情页购物车商品列表成功事件 
-			showCartPopWindow(bundle);
-			break;
-		case Event.GET_CART_LIST_GOODS_DETAILS_FAILED://获取商品详情页购物车商品列表失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_DELETE_CART_GOOD_SUCESS://删除购物车一条商品成功事件 
-			cartNotice(bundle);
-			notifyPopDete(bundle);
-			break;
-		case Event.GET_DELETE_CART_GOOD_FAILED://删除购物车一条商品失败事件 
-			MyToast.show(this, notice);
-			break;
-			
-		default:
-			break;
-		}
-	}
-	
-	/** 点击加减判断是否减到0*/
-	private void notifyPop(Bundle bundle) {
-		int operation = bundle.getInt(ShoppingCartLogic.EXTRA_OPERATION);
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		int number = bundle.getInt(ShoppingCartLogic.EXTRA_NUM);
-		
-		if (operation == 2) {
-			Goods goods = null;
-			for (int i = 0; i < cartList.size(); i++) {
-				goods = cartList.get(i);
-				if (goods.getChange_code() == changecode) {
-					break;
-				}
-			}
-			int num = goods.getGoods_num();
-			if (--num <= 0 ) {
-				cartList.remove(goods);
-				cartListAdapter.notifyDataSetChanged();
-				setListViewHeightBasedOnChildren(goodsList);
-				if (cartList.size() <= 0) {
-					carPopupWindow.dismiss();
-				}
-			}else{
-				goods.setGoods_num(num--);
-			}
-		}else if (operation == 3) {
-			if (number == 0) {
-				Goods goods = null;
-				for (int i = 0; i < cartList.size(); i++) {
-					goods = cartList.get(i);
-					if (goods.getChange_code() == changecode) {
-						break;
-					}
-				}
-				cartList.remove(goods);
-				cartListAdapter.notifyDataSetChanged();
-				setListViewHeightBasedOnChildren(goodsList);
-			}
-		}
-	}
-	
-	/** 刪除*/
-	private void notifyPopDete(Bundle bundle) {
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		Goods goods = null;
-		for (int i = 0; i < cartList.size(); i++) {
-			goods = cartList.get(i);
-			if (goods.getChange_code() == changecode) {
-				break;
-			}
-		}
-		cartList.remove(goods);
-		cartListAdapter.notifyDataSetChanged();
-		setListViewHeightBasedOnChildren(goodsList);
-	}
-	
-	/** 显示购物车商品view*/
-	@SuppressWarnings({ "rawtypes", "null", "unchecked", "deprecation" })
-	private void showCartPopWindow(Bundle bundle) {
-		ArrayList<Goods> list = (ArrayList<Goods>) bundle.getSerializable(ShoppingCartLogic.EXTRA_CARTGOODLIST);
-		if (list == null && list.size() == 0) {
-			MyToast.show(this, "购物车没有商品！");
-			return;
-		}
-		cartList.clear();
-		cartList.addAll(list);
-		
-		View view = getLayoutInflater().inflate(R.layout.popupwindow_goods_list, null,false);
-		goodsList = (ListView) view.findViewById(R.id.listview);
-		cartListAdapter = new CartListAdapter(this, cartList);
-		goodsList.setAdapter(cartListAdapter);
-		setListViewHeightBasedOnChildren(goodsList);
-		
-		carPopupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);//App.windowHeight * 2 / 5
-		WindowManager.LayoutParams params = getWindow().getAttributes();
-		params.alpha = 0.7f;
-		getWindow().setAttributes(params);
-		
-		carPopupWindow.setBackgroundDrawable(new BitmapDrawable());
-		carPopupWindow.setAnimationStyle(R.style.style_ppwcart);
-		carPopupWindow.setOutsideTouchable(true);
-		carPopupWindow.setFocusable(true);
-		carPopupWindow.setOnDismissListener(new OnDismissListener() {
-			@Override
-			public void onDismiss() {
-				WindowManager.LayoutParams params = getWindow().getAttributes();
-				params.alpha = 1f;
-				getWindow().setAttributes(params);
-			}
-		});
-		carPopupWindow.update();
-		carPopupWindow.showAtLocation(findViewById(R.id.layout_cart), Gravity.BOTTOM, 0, Utils.dip2px(this, 50));
-	}
-	
-
-	/** 关联购买*/
-	@SuppressWarnings({ "unchecked", "rawtypes" })
-	private void setGoodsLove(Bundle bundle) {
-		ArrayList<Goods> goodsList = (ArrayList<Goods>) bundle.getSerializable(GoodsLogic.EXTRA_GOODSLOVE);
-		if (goodsList != null && goodsList.size() > 0){
-			goodsLove.clear();
-			goodsLove.addAll(goodsList);
-			if (goodsLoveAdapter == null ) {
-				goodsLoveAdapter = new GoodsLoveAdapter(this, goodsLove);
-				gridview.setAdapter(goodsLoveAdapter);
-			}else{
-				goodsLoveAdapter.addData(goodsLove);
-			}
-		}else{
-			MyToast.show(context,"无关联购买商品！");
-		}
-	}
-	
-	/** 购物车提示*/
-	@SuppressWarnings("rawtypes")
-	private void cartNotice(Bundle bundle) {
-		ArrayList<BottomStatusBar> bottomstatusbar = (ArrayList<BottomStatusBar>) bundle.getSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST);
-		int limited = bundle.getInt(ShoppingCartLogic.KEY_OVERLIMITED);
-		if (limited == 1){
-			MyToast.show(this,"该商品已经超过限购数量！");
-			return;
-		}
-
-		BottomStatusBar bsb = (BottomStatusBar) bottomstatusbar.get(0);
-		if (bsb.getCount() > 0 ) {
-			cartNum.setVisibility(View.VISIBLE);
-		}else{
-			cartNum.setVisibility(View.GONE);
-		}
-		
-		String number = "";
-		if (bsb.getCount() > 99) {
-			number = "99+";
-		} else {
-			number = bsb.getCount() + "";
-		}
-		cartNum.setText(number);
-		
-		double amount = bsb.getAmount();
-		cartPrice.setText(amount > 0 ? "￥"+amount:"￥0");
-		String text = "";
-		if (amount == 0) {
-			text = "差"+bsb.getFree_send_price()+"元免费配送";
-		}else if (0 < amount && amount < bsb.getFree_send_price()) {
-			double sub = Utils.sub(bsb.getFree_send_price(), amount);
-			text = "差" + sub + "元免费配送";
-		}else{
-			text = "选好了";
-		}
-		cartNotice.setText(text);
-	}
-
-	/** 初始化商品信息*/
-	private void setGoodsInfo(Bundle bundle) {
-		goodsDetails  = (Goods) bundle.getSerializable(GoodsLogic.EXTRA_GOODINFO);
-		mImageLoader.displayImage(goodsDetails.getPictrue_addr(), goodsImg,options);
-		goodsName.setText(goodsDetails.getGoods_name());
-		
-		int status = goodsDetails.getGoods_status();
-		if (status == 1) {//特价
-			goodsPrice.setVisibility(View.VISIBLE);
-			goodsPrice.setText("￥"+goodsDetails.getGoods_price()+"");
-			goodsPrice.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG );
-			promotePrice.setText("￥"+goodsDetails.getPromote_price()+"");
-		}else{
-			goodsPrice.setVisibility(View.GONE);
-			promotePrice.setText("￥"+goodsDetails.getGoods_price()+"");
-		}
-		addSub.setNum(goodsDetails.getGoods_num());
-	}
-	
-	/** 商品详情页面*/
-	private void sendGoodsDetailsAction() {
-		Intent intent = new Intent(GoodsLogic.ACTION_GET_GOODS_DETAILS);
-		intent.putExtra(GoodsLogic.EXTRA_GOODS_CODE, changecode);
-		intent.putExtra(GoodsLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-	
-	/** 手动输入商品数量*/
-	public void sendAddGood2CartAction3(){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, goods_num);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 3);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,goodsDetails.getLimited());
-		sendAction(intent);
-	}
-	
-	/** 获取购物车商品列表*/
-	private void sendGetCartGoodsListAction() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_GETCARTLISTGOODSDETAILS);
-		intent.putExtra(ShoppingCartLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_GOODS_DETAILS_SUCCESS,Event.GET_GOODS_DETAILS_FAILED,
-				Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS,Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED,
-				Event.GET_CART_LIST_GOODS_DETAILS_SUCESS,Event.GET_CART_LIST_GOODS_DETAILS_FAILED,
-				Event.GET_DELETE_CART_GOOD_SUCESS,Event.GET_DELETE_CART_GOOD_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	public void setListViewHeightBasedOnChildren(ListView listView) {
-		ListAdapter listAdapter = listView.getAdapter();
-		if (listAdapter == null) {
-			return;
-		}
-		int totalHeight = 0;
-		for (int i = 0; i < listAdapter.getCount(); i++) {
-			View listItem = listAdapter.getView(i, null, listView);
-			listItem.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
-			totalHeight += listItem.getMeasuredHeight();
-		}
-		
-		int h = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-		
-		if (h > App.windowHeight - Utils.dip2px(context, 180)) {
-			h = App.windowHeight - Utils.dip2px(context, 180);
-		} else {
-			h = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-		}
-		ViewGroup.LayoutParams params = listView.getLayoutParams();
-		params.height = h;
-		((MarginLayoutParams) params).setMargins(10, 10, 10, 10);
-		listView.setLayoutParams(params);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/ShoppingCartLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/ShoppingCartLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/ShoppingCartLogic.java	(revision )
@@ -1,509 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.CartGoodsListReq;
-import com.anniu.shandiandaojia.net.bean.entity.GoodDeleteReq;
-import com.anniu.shandiandaojia.net.bean.entity.InOrOutCartReq;
-import com.anniu.shandiandaojia.net.bean.entity.ShoppingCartInfoReq;
-import com.anniu.shandiandaojia.service.HttpService;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.List;
-
-/**
-* @ClassName: ShoppingCartLogic 
-* @Description: 购物车逻辑类
-* @author zxl 
-* @date 2015年6月8日 上午11:38:47
- */
-public class ShoppingCartLogic extends BaseLogic {
-
-	/** 添加或删除/修改商品数量*/
-	public static String ACTION_INSERTORUPDATECARTGOODNUM = "ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM";
-	/** 获取首页购物车商品列表*/
-	public static String ACTION_GETCARTLIST = "ShoppingCartLogic.ACTION_GETCARTLIST";
-	/** 获取商品详情页购物车商品列表*/
-	public static String ACTION_GETCARTLISTGOODSDETAILS = "ShoppingCartLogic.ACTION_GETCARTLISTGOODSDETAILS";
-	/** 获取购物车页信息*/
-	public static String ACTION_GET_SHOPPING_CART_INFO = "ShoppingCartLogic.ACTION_GET_SHOPPING_CART_INFO";
-	/** 删除一条购物车中的商品*/
-	public static String ACTION_GET_DELETE_CART_GOOD = "ShoppingCartLogic.ACTION_GET_DELETE_CART_GOOD";
-	/** 分类页购物车商品列表*/
-	public static String ACTION_GETCATEGORYCARTLIST = "ShoppingCartLogic.ACTION_GETCATEGORYCARTLIST";
-	
-	/** 用户id*/
-	public static String EXTRA_CHANGECODE = "changcode";
-	/** 商店商品*/
-	public static String EXTRA_USER_CODE = "usercode";
-	/** 1=添加一个，2=减一个 3=根据可选参数num修改数量*/
-	public static String EXTRA_OPERATION = "operation";
-	/** operation为3的时候 给num值 其他时候 num为kong*/
-	public static String EXTRA_NUM = "num";
-	/** shopcode*/
-	public static String EXTRA_SHOPCODE = "shopcode";
-
-	public static String EXTRA_SENDINFO = "sendInfo";
-	public static String EXTRA_CARTGOODLIST = "cartGoodList";
-	public static String EXTRA_CARTINFO = "cartInfo";
-	public static String EXTRA_CARTGOODSLIST = "cartGoodsList";
-	public static String EXTRA_LIMITED = "limited";
-	/** 限购 */
-	public static String KEY_OVERLIMITED = "overlimited";
-	
-	public ShoppingCartLogic(HttpService service) {
-		super(service);
-		List<String> actions = new ArrayList<String>();
-		actions.add(ACTION_INSERTORUPDATECARTGOODNUM);
-		actions.add(ACTION_GETCARTLIST);
-		actions.add(ACTION_GETCARTLISTGOODSDETAILS);
-		actions.add(ACTION_GET_SHOPPING_CART_INFO);
-		actions.add(ACTION_GET_DELETE_CART_GOOD);
-		actions.add(ACTION_GETCATEGORYCARTLIST);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_INSERTORUPDATECARTGOODNUM.equals(action)) {
-			int changcode = intent.getExtras().getInt(EXTRA_CHANGECODE);
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
-			int num = intent.getExtras().getInt(EXTRA_NUM);
-			int operation = intent.getExtras().getInt(EXTRA_OPERATION);
-			int limited = intent.getExtras().getInt(EXTRA_LIMITED);
-			insertOrUpdateCartgoodNum(changcode, usercode ,num ,operation,limited);
- 		}else if (ACTION_GETCARTLIST.equals(action)) {
- 			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
- 			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
- 			getCartList(usercode,shopcode);
-		}else if (ACTION_GETCARTLISTGOODSDETAILS.equals(action)) {
- 			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
- 			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
- 			getCartListDetails(usercode,shopcode);
-		} else if (ACTION_GET_SHOPPING_CART_INFO.equals(action)) {
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
-			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
-			getShoppingCartInfo(usercode, shopcode);
-		} else if (ACTION_GET_DELETE_CART_GOOD.equals(action)) {
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
-			int changecode = intent.getExtras().getInt(EXTRA_CHANGECODE);
-			getShoppingCartDelete(usercode, changecode);
-		}else if (ACTION_GETCATEGORYCARTLIST.equals(action)) {
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
- 			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
- 			getCategoryCartList(usercode,shopcode);
-		}
-	}
-
-	private void getCategoryCartList(int usercode, int shopcode) {
-		CartGoodsListReq req = new CartGoodsListReq(ReqInfo.REQ_GET_CARTLIST, usercode, shopcode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_CARTGOODLIST)) {
-									JSONArray array = msg.getJSONArray(EXTRA_CARTGOODLIST);
-									if (array != null && array.length() > 0 ) {
-										Goods good = null;
-										JSONObject goodObj = null;
-										ArrayList<Goods> goodsList = new ArrayList<Goods>();
-										for (int i = 0; i < array.length(); i++) {
-											goodObj = (JSONObject) array.get(i);
-											good = gson.fromJson(goodObj.toString(), Goods.class);
-											goodsList.add(good);
-										}
-										bundle.putSerializable(EXTRA_CARTGOODLIST,goodsList);
-									}
-								}
-							}
-							notice(Event.GET_CATEGORY_CART_LIST_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_CATEGORY_CART_LIST_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_CATEGORY_CART_LIST_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_CATEGORY_CART_LIST_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 刪除购物车中一条商品**/
-	private void getShoppingCartDelete(int usercode, final int changecode) {
-		GoodDeleteReq req = new GoodDeleteReq(ReqInfo.REQ_GET_DELETECARTGOOD, usercode, changecode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_CHANGECODE, changecode);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_SENDINFO)) {
-									JSONArray array = msg.getJSONArray(EXTRA_SENDINFO);
-									if (array != null && array.length() > 0 ) {
-										JSONObject sendObj = null ;
-										BottomStatusBar bar = null;
-										ArrayList<BottomStatusBar> barList = new ArrayList<BottomStatusBar>();
-										for (int i = 0; i < array.length(); i++) {
-											sendObj = (JSONObject) array.get(0);
-											bar = gson.fromJson(sendObj.toString(), BottomStatusBar.class);
-											barList.add(bar);
-										}
-										bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST, barList);
-									}
-								}
-							}
-							notice(Event.GET_DELETE_CART_GOOD_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_DELETE_CART_GOOD_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_DELETE_CART_GOOD_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_DELETE_CART_GOOD_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 获取购物车页面信息**/
-	private void getShoppingCartInfo(int usercode, int shopcode) {
-		ShoppingCartInfoReq req = new ShoppingCartInfoReq(ReqInfo.REQ_GET_CARTINFO, usercode, shopcode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_CARTINFO)) {
-									JSONArray array = msg.getJSONArray(EXTRA_CARTINFO);
-									if (array != null && array.length() > 0 ) {
-										JSONObject obj1 = (JSONObject) array.get(0);
-										JSONObject obj2 = (JSONObject) array.get(1);
-										if (obj1 != null && obj1.has(EXTRA_CARTGOODSLIST) ) {
-											String text = obj1.getString(EXTRA_CARTGOODSLIST);
-											if (!"null".equals(text)) {
-												JSONArray goodsArray = obj1.getJSONArray(EXTRA_CARTGOODSLIST);
-												if ( goodsArray != null && goodsArray.length() > 0 ) {
-													ArrayList<Goods> goodsList = new ArrayList<Goods>();
-													JSONObject o = null ;
-													Goods good = null;
-													for (int i = 0; i < goodsArray.length(); i++) {
-														o  = (JSONObject) goodsArray.get(i);
-														good = gson.fromJson(o.toString(), Goods.class);
-														goodsList.add(good);
-													}
-													bundle.putSerializable(EXTRA_CARTGOODLIST, goodsList);
-												}
-											}
-										}
-										
-										if (obj2 != null && obj2.has(EXTRA_SENDINFO)) {
-											JSONArray sendArray = obj2.getJSONArray(EXTRA_SENDINFO);
-											if (sendArray != null && sendArray.length() > 0) {
-												ArrayList<BottomStatusBar> barsList = new ArrayList<BottomStatusBar>();
-												JSONObject o = null;
-												BottomStatusBar bar = null;
-												for (int i = 0; i < sendArray.length(); i++) {
-													o = (JSONObject) sendArray.get(i);
-													bar = gson.fromJson(o.toString(),BottomStatusBar.class);
-													barsList.add(bar);
-												}
-												bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST,barsList);
-											}
-										}
-									}
-								}
-							}
-							notice(Event.GET_CART_INFO_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_CART_INFO_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_CART_INFO_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_CART_INFO_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取商品详情页购物车商品列表**/
-	private void getCartListDetails(int usercode, int shopcode) {
-		CartGoodsListReq req = new CartGoodsListReq(ReqInfo.REQ_GET_CARTLIST, usercode, shopcode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_CARTGOODLIST)) {
-									JSONArray array = msg.getJSONArray(EXTRA_CARTGOODLIST);
-									if (array != null && array.length() > 0 ) {
-										Goods good = null;
-										JSONObject goodObj = null;
-										ArrayList<Goods> goodsList = new ArrayList<Goods>();
-										for (int i = 0; i < array.length(); i++) {
-											goodObj = (JSONObject) array.get(i);
-											good = gson.fromJson(goodObj.toString(), Goods.class);
-											goodsList.add(good);
-										}
-										bundle.putSerializable(EXTRA_CARTGOODLIST, goodsList);
-									}
-								}
-							}
-							notice(Event.GET_CART_LIST_GOODS_DETAILS_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_CART_LIST_GOODS_DETAILS_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_CART_LIST_GOODS_DETAILS_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_CART_LIST_GOODS_DETAILS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 获取购物车商品列表*/
-	private void getCartList(int usercode, int shopcode) {
-		CartGoodsListReq req = new CartGoodsListReq(ReqInfo.REQ_GET_CARTLIST, usercode, shopcode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_CARTGOODLIST)) {
-									JSONArray array = msg.getJSONArray(EXTRA_CARTGOODLIST);
-									if (array != null && array.length() > 0 ) {
-										Goods good = null;
-										JSONObject goodObj = null;
-										ArrayList<Goods> goodsList = new ArrayList<Goods>();
-										for (int i = 0; i < array.length(); i++) {
-											goodObj = (JSONObject) array.get(i);
-											good = gson.fromJson(goodObj.toString(), Goods.class);
-											goodsList.add(good);
-										}
-										bundle.putSerializable(EXTRA_CARTGOODLIST,goodsList);
-									}
-								}
-							}
-							notice(Event.GET_CART_LIST_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_CART_LIST_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_CART_LIST_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_CART_LIST_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 商品详情*/
-	private void insertOrUpdateCartgoodNum(final int changcode, int usercode,final int num,final int operation,int limited) {
-		InOrOutCartReq req = new InOrOutCartReq(ReqInfo.REQ_GET_INSERT_OR_UPDATE_CART_GOOD_NUM, changcode, usercode, num, operation,limited);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_CHANGECODE, changcode);
-							bundle.putInt(EXTRA_OPERATION, operation);
-							bundle.putInt(EXTRA_NUM, num);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_SENDINFO)) {
-									JSONArray array = msg.getJSONArray(EXTRA_SENDINFO);
-									if (array != null && array.length() > 0 ) {
-										JSONObject sendInfo = null ;
-										BottomStatusBar bsb = null ;
-										ArrayList<BottomStatusBar> list = new ArrayList<BottomStatusBar>();
-										for (int i = 0; i < array.length(); i++) {
-											sendInfo = (JSONObject) array.get(i);
-											bsb = gson.fromJson(sendInfo.toString(), BottomStatusBar.class);
-											list.add(bsb);
-										}
-										bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST,list);
-									}
-								}
-								if (msg.has(KEY_OVERLIMITED)){
-									int limited = msg.getInt(KEY_OVERLIMITED);
-									bundle.putInt(KEY_OVERLIMITED,limited);
-								}
-							}
-							notice(Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/PushMessage.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/PushMessage.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/PushMessage.java	(revision )
@@ -1,196 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import android.text.TextUtils;
-
-import com.anniu.shandiandaojia.app.App;
-import com.lidroid.xutils.DbUtils;
-import com.lidroid.xutils.db.annotation.Column;
-import com.lidroid.xutils.db.annotation.Id;
-import com.lidroid.xutils.db.sqlite.Selector;
-import com.lidroid.xutils.exception.DbException;
-
-import java.io.Serializable;
-import java.util.Date;
-import java.util.List;
-import java.util.Map;
-
-/**
- * 消息推送
- * @author user
- *
- */
-public class PushMessage implements Serializable {
-	
-	private static final DbUtils db = App.getInstance().getDbUtils();
-
-	public static final int IS_LOOK_NO = 0;
-	public static final int IS_LOOK_YES = 1;
-	
-	public static final int HREF_TYPE_RECEIVE = 0; // 待接收
-	public static final int HREF_TYPE_CANCELED = 1; // 已取消
-	
-	private static final long serialVersionUID = -7998294000720531294L;
-	@Id
-	@Column(column = "id")
-	private int id;				// 消息ID(自增) 
-	
-	@Column(column = "content")
-	private String content;		//	内容
-	
-	@Column(column = "href_type")
-	private int hrefType;		// 跳转类型
-	
-	@Column(column = "href_target")
-	private String hrefTarget;	// 跳转目标
-	
-	@Column(column = "is_look")
-	private int isLook;			// 是否查看 0:未查看，1：已查看
-	
-	@Column(column = "receive_date")
-	private Date receiveDate;	// 接收日期
-	
-	/**
-	 * 根据条件查询List 按接收时间降序排列
-	 * @param pageIndex
-	 * @param pageSize
-	 * @param params
-	 * @return
-	 */
-	public static List<PushMessage> getListOrderByReceiveTime(int pageIndex,int pageSize,Map<String,Object> params){
-		List<PushMessage> pushMessageList = null;
-		Selector sql = Selector.from(PushMessage.class).where("id", ">", "0");
-		if(params != null) {
-			if(!TextUtils.isEmpty(params.get("id").toString())){
-				sql.and("id","=",params.get("id"));
-			}
-			if(!TextUtils.isEmpty(params.get("content").toString())){
-				sql.and("content","=",params.get("content"));
-			}
-			if(!TextUtils.isEmpty(params.get("hrefType").toString())){
-				sql.and("href_type","=",params.get("hrefType"));
-			}
-			if(!TextUtils.isEmpty(params.get("hrefTarget").toString())){
-				sql.and("href_target","=",params.get("hrefTarget"));
-			}
-			if(!TextUtils.isEmpty(params.get("isLook").toString())){
-				sql.and("is_look","=",params.get("isLook"));
-			}
-			if(!TextUtils.isEmpty(params.get("receiveDate").toString())){
-				sql.and("receive_date","=",params.get("receiveDate"));
-			}
-		}
-		sql.orderBy("receive_date",true);
-		if(pageSize > 0) {
-			sql.offset(pageIndex).limit(pageSize);
-		}
-		try {
-			pushMessageList = db.findAll(sql);
-		} catch (DbException e) {
-			e.printStackTrace();
-		}
-		return pushMessageList;
-	}
-	
-	/**
-	 * 查询未读消息数
-	 * @return
-	 */
-	public static long getUnReadMessageCount() {
-		long count = 0;
-		try {
-			count = db.count(Selector.from(PushMessage.class).where("is_look", "=", IS_LOOK_NO));
-		} catch (DbException e) {
-			e.printStackTrace();
-		}
-		return count;
-	}
-	
-	/**
-	 * 保存或修改单条记录
-	 * @param pushMessage
-	 */
-	public static void saveOrUpdate(PushMessage pushMessage) {
-		if(pushMessage != null) {
-			try {
-				db.saveOrUpdate(pushMessage);
-			} catch (DbException e) {
-				e.printStackTrace();
-			}
-		}
-	}
-	
-	/**
-	 * 删除
-	 * @param pushMessage
-	 */
-	public static void delete(List<PushMessage> pushMessage) {
-		if(pushMessage != null && pushMessage.size() > 0) {
-			try {
-				db.deleteAll(pushMessage);
-			} catch (DbException e) {
-				e.printStackTrace();
-			}
-		}
-	}
-	
-	@Override
-	public String toString() {
-		StringBuilder result = new StringBuilder();
-		result.append("PushMessage[");
-		result.append("content=").append(content);
-		result.append(",hrefType=").append(hrefType);
-		result.append(",hrefTarget=").append(hrefTarget);
-		result.append(",isLook=").append(isLook);
-		result.append(",receiveDate=").append(receiveDate);
-		result.append("]");
-		return result.toString();
-	}
-
-	public String getContent() {
-		return content;
-	}
-
-	public void setContent(String content) {
-		this.content = content;
-	}
-
-	public int getHrefType() {
-		return hrefType;
-	}
-
-	public void setHrefType(int hrefType) {
-		this.hrefType = hrefType;
-	}
-
-	public String getHrefTarget() {
-		return hrefTarget;
-	}
-
-	public void setHrefTarget(String hrefTarget) {
-		this.hrefTarget = hrefTarget;
-	}
-
-	public int getIsLook() {
-		return isLook;
-	}
-
-	public void setIsLook(int isLook) {
-		this.isLook = isLook;
-	}
-
-	public Date getReceiveDate() {
-		return receiveDate;
-	}
-
-	public void setReceiveDate(Date receiveDate) {
-		this.receiveDate = receiveDate;
-	}
-
-	public int getId() {
-		return id;
-	}
-
-	public void setId(int id) {
-		this.id = id;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ShopListAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ShopListAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ShopListAdapter.java	(revision )
@@ -1,114 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.ShopInfo;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.ArrayList;
-
-/**
- * @ClassName: ShopListAdapter
- * @Description: 商铺列表
- * @author zxl
- * @date 2015年6月1日 下午3:08:11
- */
-public class ShopListAdapter extends BaseAdapter {
-
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private ArrayList<ShopInfo> mList;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	public int changecode;
-
-	@SuppressWarnings("deprecation")
-	public ShopListAdapter(Context context, ArrayList<ShopInfo> shopsList) {
-		super();
-		this.mContext = context;
-		this.mList = shopsList;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				.showStubImage(R.drawable.no_title_bg)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_title_bg) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_title_bg) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		ShopInfo shopInfo = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_shop_list, null);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			holder.shopName = (TextView) convertView.findViewById(R.id.tv_shop_name);
-			holder.businessHours = (TextView) convertView.findViewById(R.id.tv_business_hours);
-			holder.shopAddress = (TextView) convertView.findViewById(R.id.tv_shop_address);
-			holder.shopDes = (TextView) convertView.findViewById(R.id.tv_shop_des);
-			holder.shopClose = (ImageView) convertView.findViewById(R.id.iv_shop_close);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		mImageLoader.displayImage(shopInfo.getPictrue_addr(), holder.shopImg, options);
-		holder.shopName.setText(shopInfo.getShop_name());
-		holder.businessHours.setText("(" + shopInfo.getStartbus_time() + "—"+ shopInfo.getEndbus_time() + ")");
-		holder.shopAddress.setText(shopInfo.getShop_addr()+"("+shopInfo.getDistance()+"米)");
-		holder.shopDes.setText(shopInfo.getFree_send_price() + "元起送/平均"+ shopInfo.getDelivery_time() + "分钟"+"/"+shopInfo.getDistance()+"米");
-		int status = shopInfo.getStatus();
-		// 1：正常营业 0：闭店
-		if (status == 1) {
-			holder.shopClose.setVisibility(View.GONE);
-		} else {
-			holder.shopClose.setVisibility(View.VISIBLE);
-		}
-		
-		return convertView;
-	}
-
-	class ViewHolder {
-		ImageView shopImg;
-		TextView shopName;
-		TextView businessHours;
-		TextView shopAddress;
-		TextView shopDes;
-		ImageView shopClose;
-	}
-
-	public void addData(ArrayList<ShopInfo> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TicketReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TicketReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TicketReq.java	(revision )
@@ -1,40 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: TicketReq
- * @Description: 获取票的请求
- * @author YY
- * @date 2015年6月15日 下午3:46:47
- */
-public class TicketReq extends HttpReq {
-
-	private int userCode;
-
-	public TicketReq(int reqid, int userCode) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/NetworkUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/NetworkUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/NetworkUtils.java	(revision )
@@ -1,89 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
-
-import com.anniu.shandiandaojia.app.App;
-
-import org.apache.http.HttpHost;
-
-/**
- * 手机网络监听工具类
- * 
- * @author davikchen
- */
-public class NetworkUtils {
-	public static int TYPE_NO = 0;
-	public static int TYPE_MOBILE_CMNET = 1;
-	public static int TYPE_MOBILE_CMWAP = 2;
-	public static int TYPE_WIFI = 3;
-	public static int TYPE_MOBILE_CTWAP = 4; // 移动梦网代理
-
-	private static NetworkInfo ni = null;
-
-	private final static String LOG = "NetworkUtils";
-
-	/**
-	 * 获取当前手机连接的网络类型
-	 * 
-	 * @param context
-	 *            上下文
-	 * @return TYPE_MOBILE_CMNET： net网络 TYPE_MOBILE_CMWAP: cmwap uniwap 3gwap 网络
-	 *         TYPE_WIFI：wifi网络 TYPE_MOBILE_CTWAP：移动梦网
-	 */
-	public static int getNetworkState(Context context) {
-		try {
-			// Context context = ActivityMgr.getContext();
-			ConnectivityManager cm = (ConnectivityManager) context
-					.getSystemService(Context.CONNECTIVITY_SERVICE);
-			// 获得当前网络信息
-			ni = cm.getActiveNetworkInfo();
-			if (ni != null && ni.isAvailable()) {
-				int currentNetWork = ni.getType();
-				// 手机网络
-				if (currentNetWork == ConnectivityManager.TYPE_MOBILE) {
-					if (ni.getExtraInfo() != null
-							&& ni.getExtraInfo().equals("cmwap")) {
-						return TYPE_MOBILE_CMWAP;
-					} else if (ni.getExtraInfo() != null
-							&& ni.getExtraInfo().equals("uniwap")) {
-						return TYPE_MOBILE_CMWAP;
-					} else if (ni.getExtraInfo() != null
-							&& ni.getExtraInfo().equals("3gwap")) {
-						return TYPE_MOBILE_CMWAP;
-					} else if (ni.getExtraInfo() != null
-							&& ni.getExtraInfo().contains("ctwap")) {
-						return TYPE_MOBILE_CTWAP;
-					} else {
-						return TYPE_MOBILE_CMNET;
-					}
-					// wifi 网络
-				} else if (currentNetWork == ConnectivityManager.TYPE_WIFI) {
-					return TYPE_WIFI;
-				}
-			}
-		} catch (Exception e) {
-			e.printStackTrace();
-		}
-		return TYPE_NO;
-	}
-
-	/**
-	 * 获得代理对象
-	 * 
-	 * @return 代理对象
-	 */
-	public static HttpHost getHttpHostProxy() {
-		int netType = getNetworkState(App.getInstance());
-		HttpHost proxy = null;
-		if (netType == TYPE_MOBILE_CTWAP) { // 移动梦网
-			proxy = new HttpHost("10.0.0.200", 80);
-		} else { // cmwap uniwap 3gwap
-			proxy = new HttpHost("10.0.0.172", 80);
-		}
-
-		return proxy;
-	}
-	 
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TabCategoryGoodsReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TabCategoryGoodsReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/TabCategoryGoodsReq.java	(revision )
@@ -1,86 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: TabCategoryGoodsReq
- * @Description: 分类页请求
- * @author zxl
- * @date 2015年6月11日 下午4:16:04
- */
-public class TabCategoryGoodsReq extends HttpReq {
-
-	/** 用户id */
-	private int usercode;
-	/** 商店id */
-	private int shopcode;
-	/** 第一页 默认1 */
-	private int pagenum;
-	/** 每页显示多少 默认20 */
-	private int pagesize;
-	/** 商品类别 */
-	private int goodstypecode;
-
-	public TabCategoryGoodsReq(int reqId, int usercode, int shopcode,
-			int goodstypecode, int pagenum, int pagesize) {
-		super();
-		this.id = reqId;
-		this.usercode = usercode;
-		this.shopcode = shopcode;
-		this.goodstypecode = goodstypecode;
-		this.pagenum = pagenum;
-		this.pagesize = pagesize;
-	}
-
-	public int getGoodstypecode() {
-		return goodstypecode;
-	}
-
-	public void setGoodstypecode(int goodstypecode) {
-		this.goodstypecode = goodstypecode;
-	}
-
-	public int getPagenum() {
-		return pagenum;
-	}
-
-	public void setPagenum(int pagenum) {
-		this.pagenum = pagenum;
-	}
-
-	public int getPagesize() {
-		return pagesize;
-	}
-
-	public void setPagesize(int pagesize) {
-		this.pagesize = pagesize;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	public int getShopcode() {
-		return shopcode;
-	}
-
-	public void setShopcode(int shopcode) {
-		this.shopcode = shopcode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + usercode + "&shopcode=" + shopcode + "&pagenum="
-				+ pagenum + "&pagesize=" + pagesize + "&goodstypecode="
-				+ goodstypecode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/task/DownApkAsyncTask.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/task/DownApkAsyncTask.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/task/DownApkAsyncTask.java	(revision )
@@ -1,342 +0,0 @@
-package com.anniu.shandiandaojia.task;
-
-import android.app.Notification;
-import android.app.NotificationManager;
-import android.content.Context;
-import android.content.Intent;
-import android.net.Uri;
-import android.os.AsyncTask;
-import android.os.Environment;
-import android.widget.Toast;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyLog;
-import com.anniu.shandiandaojia.utils.NetUtils;
-
-import org.apache.http.client.ClientProtocolException;
-
-import java.io.File;
-import java.io.FileNotFoundException;
-import java.io.FileOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.HttpURLConnection;
-import java.net.URL;
-import java.util.UUID;
-import java.util.regex.Matcher;
-import java.util.regex.Pattern;
-
-/**
- * @ClassName: DownApkAsyncTask
- * @Description: 下载apk的任务
- * @author zxl
- * @date 2014年11月10日 下午2:46:43
- */
-public class DownApkAsyncTask extends AsyncTask<Object, Integer, Boolean> {
-	private String TAG = "DownApkAsyncTask";
-	private NotificationManager nm;
-	private Notification notification;
-	private int notificationId = 1234;
-	private String downUrl;
-	private Context context;
-	private int progress;
-
-	private String mSavePath;
-	/** 是否取消更新 */
-	private String apkName = "news.apk";
-	private boolean cancelUpdate = false;
-	private final String CMWAP_PROXY = "10.0.0.172";
-
-	public DownApkAsyncTask() {
-		super();
-	}
-
-	@Override
-	protected Boolean doInBackground(Object... params) {
-		nm = (NotificationManager) params[0];
-		notification = (Notification) params[1];
-		notificationId = (Integer) params[2];
-		downUrl = (String) params[3];
-		context = (Context) params[4];
-
-		return downapk1();
-	}
-
-	@Override
-	protected void onPostExecute(Boolean result) {
-		super.onPostExecute(result);
-		if (result) {
-			Toast.makeText(context, "下载完成", Toast.LENGTH_LONG).show();
-			autoInstall();
-		} else {
-			Toast.makeText(context, "下载失败", Toast.LENGTH_LONG).show();
-		}
-		nm.cancel(notificationId);
-	}
-
-	@Override
-	protected void onProgressUpdate(Integer... values) {
-		// super.onProgressUpdate(values);
-		int value = values[0];
-		MyLog.e("DownApkAsyncTask", "onProgressUpdate value= " + value);
-		notification.contentView.setProgressBar(R.id.pbDownload, 100, value,false);
-		if (value != 100) {
-			notification.contentView.setTextViewText(R.id.tvProcess, "已下载"
-					+ value + "%");
-		} else {
-			notification.contentView.setTextViewText(R.id.tvProcess, " 下载完成");
-		}
-
-		nm.notify(notificationId, notification);
-	}
-
-	private boolean downapk1() {
-		MyLog.e(TAG, "DoanApkAsyncTask, downUrl=" + downUrl);
-		if (downUrl == null) {
-			return false;
-		}
-		int systemConnection = NetUtils.checkNetwork(context);
-		if (systemConnection == GlobalInfo.OPTION_NET_NO) {
-			return false;
-		}
-		URL urlPath = null;
-		HttpURLConnection conn = null;
-		InputStream inputStream = null;
-		try {
-
-			String service = null;
-
-			if (systemConnection == GlobalInfo.OPTION_NET_CMWAP_PROXY) {
-
-				service = getServiceUrl(downUrl);
-
-				this.downUrl = this.downUrl.replace(service, CMWAP_PROXY);
-			}
-
-			urlPath = new URL(this.downUrl);
-
-			conn = (HttpURLConnection) urlPath.openConnection();
-
-			conn.setConnectTimeout(15 * 1000);
-
-			conn.setReadTimeout(15 * 1000);
-
-			if (systemConnection == GlobalInfo.OPTION_NET_CMWAP_PROXY)
-				conn.setRequestProperty("X-Online-Host", service);
-
-			conn.setRequestMethod("GET");
-
-			conn.setRequestProperty(
-					"Accept",
-					"image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/x-shockwave-flash, application/xaml+xml, application/vnd.ms-xpsdocument, application/x-ms-xbap, application/x-ms-application, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*");
-
-			conn.setRequestProperty("Accept-Language", "zh-CN");
-
-			conn.setRequestProperty("Referer", downUrl);
-
-			conn.setRequestProperty("Charset", "UTF-8");
-
-			conn.setRequestProperty(
-					"User-Agent",
-					"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)");
-
-			conn.setRequestProperty("Connection", "Keep-Alive");
-
-			conn.connect();
-
-			int responseCode = conn.getResponseCode();
-			MyLog.e(TAG, "DoanApkAsyncTask, responseCode=" + responseCode);
-
-			if (HttpURLConnection.HTTP_OK != responseCode) {
-				return false;
-			}
-			int length = conn.getContentLength();
-			// int length = 950272;
-			inputStream = conn.getInputStream();
-			this.apkName = getFileName1(conn);
-			MyLog.e("DownApkAsyncTask", "fileSize=" + length);
-			return writeFile(inputStream, length);
-
-		} catch (ClientProtocolException e) {
-			MyLog.e(TAG, "DoanApkAsyncTask, e:" + e.toString());
-			return false;
-		} catch (IOException e) {
-			MyLog.e(TAG, "DoanApkAsyncTask, e:" + e.toString());
-			return false;
-		} finally {
-			if (null != inputStream) {
-				try {
-					inputStream.close();
-				} catch (Exception e) {
-					MyLog.e(TAG, e.toString());
-				}
-			}
-
-			if (null != conn) {
-				try {
-					conn.disconnect();
-				} catch (Exception e) {
-					MyLog.e(TAG, e.toString());
-				}
-			}
-		}
-	}
-
-	/**
-	 * 保存到目录中。
-	 * 
-	 * @param inputStream
-	 * @param length
-	 */
-	private boolean writeFile(InputStream inputStream, int length) {
-		MyLog.e("DownApkAsyncTask2", "writeFile...");
-		if (null == inputStream) {
-			return false;
-		}
-		File file = null;
-		File apkFile = null;
-		// FileOutputStream fos = null;
-		FileOutputStream threadfile = null;
-		try {
-			String sdpath = Environment.getExternalStorageDirectory() + "/";
-			/** 下载保存路径 */
-			mSavePath = sdpath + "download";
-			file = new File(mSavePath);
-			// 判断文件目录是否存在
-			if (!file.exists()) {
-				file.mkdir();
-			}
-			apkFile = new File(mSavePath, apkName);
-			if (apkFile.exists()) {
-				apkFile.delete();
-			}
-			byte buf[] = new byte[1024];
-			int numread = 0;
-			threadfile = new FileOutputStream(apkFile);
-			// threadfile.seek(numread); //threadfile = new
-			// FileOutputStream(apkFile);//new RandomAccessFile(apkFile, "rwd");
-			int count = 0;
-			progress = 0;
-			// 写入到文件中
-			do {
-				// 缓存
-				numread = inputStream.read(buf);
-				MyLog.e("DownApkAsyncTask", "numread=" + numread);
-				if (numread == -1) {
-					break;
-				}
-				// 写入文件
-				threadfile.write(buf, 0, numread);
-				// count += numread;
-				count = count + numread;
-				MyLog.e("DownApkAsyncTask", "count=" + count);
-				// 计算进度条位置
-				int progress_temp = (int) (((float) count / length) * 100);
-				if (progress != progress_temp) {
-					progress = progress_temp;
-					MyLog.e("DownApkAsyncTask", "progress=" + progress);
-					// publishProgress(progress);
-					onProgressUpdate(progress);
-				}
-
-			} while (!cancelUpdate);// 点击取消就停止下载.
-			return true;
-		} catch (FileNotFoundException e) {
-			MyLog.e(TAG, e.toString());
-			return false;
-		} catch (IOException e) {
-			MyLog.e(TAG, e.toString());
-			return false;
-		} finally {
-			if (null != threadfile) {
-				try {
-					threadfile.close();
-				} catch (Exception e) {
-					MyLog.e(TAG, e.toString());
-				}
-			}
-		}
-	}
-
-	/**
-	 * 下载完之后自动安装
-	 */
-	private void autoInstall() {
-		File f = new File(mSavePath, apkName);
-		if (!f.exists()) {
-			return;
-		}
-		Intent intent = new Intent();
-
-		intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
-
-		intent.setAction(android.content.Intent.ACTION_VIEW);
-
-		/* 调用getMIMEType()来取得MimeType */
-
-		String type = "application/vnd.android.package-archive";
-
-		/* 设置intent的file与MimeType */
-
-		intent.setDataAndType(Uri.fromFile(f), type);
-
-		context.startActivity(intent);
-
-	}
-
-	/**
-	 * 解析文件名称
-	 * 
-	 * @param conn
-	 *            网络连接对象
-	 */
-	private String getFileName1(HttpURLConnection conn) {
-
-		String filename = this.downUrl
-				.substring(this.downUrl.lastIndexOf('/') + 1);
-
-		// 如果获取不到文件名称
-		if (filename == null || "".equals(filename.trim())) {
-
-			for (int i = 0;; i++) {
-
-				String mine = conn.getHeaderField(i);
-
-				if (mine == null)
-					break;
-
-				if ("content-disposition".equals(conn.getHeaderFieldKey(i)
-						.toLowerCase())) {
-
-					Matcher m = Pattern.compile(".*filename=(.*)").matcher(
-							mine.toLowerCase());
-
-					if (m.find())
-						return m.group(1);
-
-				}
-			}
-
-			// 默认取一个文件名
-			filename = UUID.randomUUID() + ".tmp";
-		}
-		return filename;
-	}
-
-	private String getServiceUrl(String downloadUrl) {
-
-		String startStr = "http://";
-		String endStr = "com";
-
-		int beginIndex = downloadUrl.indexOf(startStr);
-
-		beginIndex = beginIndex + startStr.length();
-
-		int endIndex = downloadUrl.indexOf(endStr);
-
-		endIndex = endIndex + endStr.length();
-
-		return downloadUrl.substring(beginIndex, endIndex);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MD5.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MD5.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MD5.java	(revision )
@@ -1,28 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import java.security.MessageDigest;
-
-public class MD5 {
-
-	private MD5() {}
-	
-	public final static String getMessageDigest(byte[] buffer) {
-		char hexDigits[] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f' };
-		try {
-			MessageDigest mdTemp = MessageDigest.getInstance("MD5");
-			mdTemp.update(buffer);
-			byte[] md = mdTemp.digest();
-			int j = md.length;
-			char str[] = new char[j * 2];
-			int k = 0;
-			for (int i = 0; i < j; i++) {
-				byte byte0 = md[i];
-				str[k++] = hexDigits[byte0 >>> 4 & 0xf];
-				str[k++] = hexDigits[byte0 & 0xf];
-			}
-			return new String(str);
-		} catch (Exception e) {
-			return null;
-		}
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/NetUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/NetUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/NetUtils.java	(revision )
@@ -1,255 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
-import android.net.NetworkInfo.State;
-import android.telephony.TelephonyManager;
-
-/**
- * @ClassName: NetUtils
- * @Description: 网络工具类
- * @author zxl
- * @date 2014年10月16日 下午4:18:11
- */
-public class NetUtils {
-	private static String TAG = "Net";
-
-	/** wifi连接或读取超时单位毫秒 */
-	private static final int CONNECTION_WIFI_TIMEOUT = 10000;// 10秒超时
-	/** net连接或读取超时单位毫秒 */
-	private static final int CONNECTION_NET_TIMEOUT = 15000;// 15秒超时
-	/** wap连接或读取超时单位毫秒 */
-	private static final int CONNECTION_WAP_TIMEOUT = 20000;// 20秒超时
-
-	public static final String NETWORK_TYPE_2G = "2g";// 提交到服务器的网络类型：2g
-	public static final String NETWORK_TYPE_3G = "3g";// 提交到服务器的网络类型：3g
-	public static final String NETWORK_TYPE_WIFI = "wifi";// 提交到服务器的网络类型：wifi
-	public static final String NETWORK_TYPE_NO = "no_net";// 提交到服务器的网络类型：无网
-
-	public static final int SUMMARY_TYPE_WIFI = 1;// WIFI
-	public static final int SUMMARY_TYPE_MOBILE = 2;// MOBILE
-	public static final int SUMMARY_TYPE_OTHER = 0;// 其它
-
-	public static boolean CheckNetwork(Context context) {
-		boolean flag = false;
-
-		try {
-
-			ConnectivityManager cwjManager = (ConnectivityManager) context
-					.getSystemService(Context.CONNECTIVITY_SERVICE);
-			if (cwjManager.getActiveNetworkInfo() != null)
-				flag = cwjManager.getActiveNetworkInfo().isAvailable();
-
-		} catch (Exception e) {
-			MyLog.i("NetUtils", e.toString());
-		}
-
-		return flag;
-	}
-
-	/**
-	 * 检测网络
-	 */
-	public static int checkNetwork(Context context) {
-		// 获取当前网络
-		ConnectivityManager cm = (ConnectivityManager) context
-				.getSystemService(Context.CONNECTIVITY_SERVICE);
-
-		NetworkInfo netInfo = cm.getActiveNetworkInfo();
-
-		int systemConnection = GlobalInfo.OPTION_NET_NO;
-
-		// 没有可用网络
-		if (netInfo == null || !netInfo.isAvailable()) {
-			// isCheckNetwork = false;
-			systemConnection = GlobalInfo.OPTION_NET_NO;
-			return systemConnection;
-		} else {
-
-			String typeName = netInfo.getTypeName();
-			if (typeName.equalsIgnoreCase("WIFI")) {
-
-				systemConnection = GlobalInfo.OPTION_NET_WIFI;
-				return systemConnection;
-			}
-			TelephonyManager phoneMgr = Utils.getTelephonyMgr(context);
-			if (phoneMgr == null) {
-				systemConnection = GlobalInfo.OPTION_NET_NO;
-				return systemConnection;
-			}
-			int networkType = phoneMgr.getNetworkType();
-			String extraInfo = netInfo.getExtraInfo();
-			// Log.v("", "networkType = "+networkType);
-			// 2G网络
-			if (networkType == TelephonyManager.NETWORK_TYPE_GPRS
-					|| networkType == TelephonyManager.NETWORK_TYPE_EDGE
-					|| networkType == TelephonyManager.NETWORK_TYPE_CDMA) {
-
-				// Utility.systemConnection = Utility.OPTION_NET_HTTP;
-
-				if (null != extraInfo && !"".equals(extraInfo)) {
-
-					if ("3gwap".equalsIgnoreCase(extraInfo)
-							|| "cmwap".equalsIgnoreCase(extraInfo)
-							|| "ctwap".equalsIgnoreCase(extraInfo)
-							|| "uniwap".equalsIgnoreCase(extraInfo)) {
-
-						systemConnection = GlobalInfo.OPTION_NET_CMWAP_PROXY;
-
-					} else {
-
-						systemConnection = GlobalInfo.OPTION_NET_HTTP;
-					}
-				} else {
-
-					systemConnection = GlobalInfo.OPTION_NET_HTTP;
-				}
-
-				// 3G网络
-			} else if (networkType == TelephonyManager.NETWORK_TYPE_UMTS
-					|| networkType == TelephonyManager.NETWORK_TYPE_HSDPA
-					|| networkType == TelephonyManager.NETWORK_TYPE_EVDO_0
-					|| networkType == TelephonyManager.NETWORK_TYPE_EVDO_A) {
-
-				systemConnection = GlobalInfo.OPTION_NET_HTTP;
-
-				// 其它
-			} else {
-
-				systemConnection = GlobalInfo.OPTION_NET_HTTP;
-			}
-
-			return systemConnection;
-		}
-	}
-
-	/**
-	 * 返回网络类型，wifi/3g/2g/no_net
-	 * 
-	 * @param context
-	 * @return
-	 */
-	public static String getNetworkType(Context context) {
-		if (null == context) {
-			return NETWORK_TYPE_NO;
-		}
-		ConnectivityManager connectivityManager = null;
-		try {
-			connectivityManager = (ConnectivityManager) context
-					.getSystemService(Context.CONNECTIVITY_SERVICE);
-		} catch (Exception e) {
-			MyLog.i(TAG, e.toString());
-		}
-		if (null == connectivityManager) {
-			return NETWORK_TYPE_NO;
-		}
-		if (!isNetworkAvailable(connectivityManager)) {
-			return NETWORK_TYPE_NO;
-		}
-		int sum_type = getSummaryType(connectivityManager);
-		if (sum_type == SUMMARY_TYPE_WIFI) {
-			return NETWORK_TYPE_WIFI;
-		} else if (sum_type == SUMMARY_TYPE_MOBILE) {
-			final TelephonyManager telephonyManager = (TelephonyManager) context
-					.getSystemService(Context.TELEPHONY_SERVICE);
-			final int type = telephonyManager.getNetworkType();
-			if (TelephonyManager.NETWORK_TYPE_CDMA == type
-					|| TelephonyManager.NETWORK_TYPE_GPRS == type
-					|| TelephonyManager.NETWORK_TYPE_EDGE == type) {
-				return NETWORK_TYPE_2G;
-			} else {
-				return NETWORK_TYPE_3G;
-			}
-		}
-		return "";
-	}
-
-	/**
-	 * 判断是否有网络（遍历NetworkInfo）
-	 */
-	private static boolean isNetworkAvailable(
-			ConnectivityManager connectivityManager) {
-
-		NetworkInfo[] networkInfos = null;
-		try {
-			networkInfos = connectivityManager.getAllNetworkInfo();
-		} catch (Throwable e) {
-			MyLog.i(TAG, e.toString());
-		}
-		if (networkInfos != null) {
-			final int length = networkInfos.length;
-			for (int i = 0; i < length; i++) {
-				boolean connected = false;
-				try {
-					connected = networkInfos[i].getState() == NetworkInfo.State.CONNECTED;
-				} catch (Throwable e) {
-					MyLog.i(TAG, e.toString());
-				}
-				if (connected) {
-					return true;
-				}
-			}
-		}
-
-		return false;
-	}
-
-	/**
-	 * 判断是“手机网络”还是“无线网络”
-	 */
-	private static int getSummaryType(ConnectivityManager connectivityManager) {
-
-		int result = SUMMARY_TYPE_OTHER;
-
-		// mobile
-		State mobile = null;
-		try {
-			mobile = connectivityManager.getNetworkInfo(
-					ConnectivityManager.TYPE_MOBILE).getState();
-		} catch (Throwable e) {
-			MyLog.i("NetUtils", e.toString());
-		}
-		// wifi
-		State wifi = null;
-		try {
-			wifi = connectivityManager.getNetworkInfo(
-					ConnectivityManager.TYPE_WIFI).getState();
-		} catch (Throwable e) {
-			MyLog.i("NetUtils", e.toString());
-		}
-
-		if (wifi == NetworkInfo.State.CONNECTED
-				|| wifi == NetworkInfo.State.CONNECTING) {
-			// wifi
-			result = SUMMARY_TYPE_WIFI;
-		} else if (mobile == NetworkInfo.State.CONNECTED
-				|| mobile == NetworkInfo.State.CONNECTING) {
-			// mobile
-			result = SUMMARY_TYPE_MOBILE;
-		}
-
-		return result;
-	}
-
-	/**
-	 * 根据连接类型返回超时时间
-	 * 
-	 * @param netType
-	 * @return
-	 */
-	public static int getConnectionTimeout(int netType) {
-		switch (netType) {
-		case GlobalInfo.OPTION_NET_WIFI:
-			return CONNECTION_WIFI_TIMEOUT;
-		case GlobalInfo.OPTION_NET_HTTP:
-			return CONNECTION_NET_TIMEOUT;
-		case GlobalInfo.OPTION_NET_CMWAP_PROXY:
-			return CONNECTION_WAP_TIMEOUT;
-
-		default:
-			return CONNECTION_NET_TIMEOUT;
-		}
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MyToast.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MyToast.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MyToast.java	(revision )
@@ -1,26 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.widget.Toast;
-/**
- * 
- * @ClassName:  MyToast
- * @Description: 自定义的toast工具类，只展示一个toast，不重复展示
- * @author YY
- * @date 2015年5月29日 下午6:10:29
- */
-public class MyToast {
-	private static Toast mToast;
-
-	public static void show(Context mContext, String text) {
-
-		if (mToast != null){
-			mToast.setText(text);
-		}
-		else{
-			mToast = Toast.makeText(mContext, text, Toast.LENGTH_SHORT);
-		}
-
-		mToast.show();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/OrderListAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/OrderListAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/OrderListAdapter.java	(revision )
@@ -1,293 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.drawable.BitmapDrawable;
-import android.view.Gravity;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.WindowManager.LayoutParams;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ArrayAdapter;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.ListView;
-import android.widget.PopupWindow;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.MyOrderActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.ArrayList;
-/**
- * @ClassName:  OrderListAdapter
- * @Description: 我的订单查询适配器
- * @author YY
- * @date 2015年6月3日 下午3:10:05
- */
-public class OrderListAdapter extends BaseAdapter {
-	private Context context;
-	private ArrayList<OrderInfo> mlist;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	private PopupWindow popupWindow;// 弹窗
-	private String times[] = {"确认收货时间", "10分钟", "20分钟", "30分钟", "40分钟", "50分钟" ,"60分钟","70分钟","80分钟","90分钟"};
-	private String cause[] = {"您确定取消该订单", "个人信息填写错误", "选错商品", "长时间未配送", "其他", "返回" };
-	private String receivingtime;
-	private String cancelCanse;
-	
-	@SuppressWarnings("deprecation")
-	public OrderListAdapter(Context context, ArrayList<OrderInfo> list) {
-		super();
-		this.context = context;
-		this.mlist = list;
-		mImageLoader = App.initImageLoader(context);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)
-				// 设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-
-	}
-
-	@Override
-	public int getCount() {
-		return mlist.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mlist.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder;
-		OrderInfo orderInfo = mlist.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = LayoutInflater.from(context).inflate(R.layout.item_order_status, null);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			holder.shopName = (TextView) convertView.findViewById(R.id.tv_shop_name);
-			holder.totalPrice = (TextView) convertView.findViewById(R.id.tv_total_price);
-			holder.orderTime = (TextView) convertView.findViewById(R.id.tv_time);
-			holder.orderStatus = (TextView) convertView.findViewById(R.id.tv_order_status);
-			holder.confirmation = (TextView) convertView.findViewById(R.id.tv_confirmation);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		
-		mImageLoader.displayImage(orderInfo.getPictrue_addr(), holder.shopImg, options);
-		holder.shopName.setText(orderInfo.getShop_name());
-		holder.totalPrice.setText(orderInfo.getPaymoney()+"元");
-		String time = Utils.getTimeFormatStr3(Long.parseLong(orderInfo.getOrder_time()));//将事件转换为年月日格式
-		holder.orderTime.setText(time);
-		
-		int status = orderInfo.getOrder_status();
-		String textConfirm = "";
-		String textState = "";
-		if (status == 1) {
-			holder.confirmation.setVisibility(View.VISIBLE);
-			textConfirm = "取消订单";
-			textState = "待发货";
-			holder.confirmation.setTextColor(context.getResources().getColor(R.color.line_color));
-			holder.confirmation.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.goods_receipt_cancel));
-			holder.confirmation.setTag(orderInfo.getOrder_num());
-			holder.confirmation.setOnClickListener(new OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					String num = (String) v.getTag();
-					/**取消原因弹窗*/
-					showCansePopuWindows(num); 
-				}
-			});
-		} else if (status == 2) {
-			holder.confirmation.setVisibility(View.VISIBLE);
-			holder.confirmation.setTextColor(context.getResources().getColor(R.color.title_color));
-			holder.confirmation.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.goods_receipt_default));
-			textConfirm = "确认收货";
-			textState = "配送中";
-			holder.confirmation.setTag(orderInfo.getOrder_num());
-			holder.confirmation.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					String num = (String) v.getTag();
-					/**确定时间弹窗*/
-					showTimePopuWindows(num); 
-				}
-			});
-		} else if (status == 3) {
-			holder.confirmation.setVisibility(View.GONE);
-			textConfirm = "";
-			textState = "已完成";
-		} else if (status == 4) {
-			holder.confirmation.setVisibility(View.GONE);
-			textConfirm = "";
-			textState = "已取消";
-		}else if (status == 5) {
-			holder.confirmation.setVisibility(View.GONE);
-			textConfirm = "";
-			textState = "已取消";
-		}else{
-			holder.confirmation.setVisibility(View.VISIBLE);
-			holder.confirmation.setTextColor(context.getResources().getColor(R.color.title_color));
-			holder.confirmation.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.goods_receipt_default));
-			textConfirm = "去支付";
-			textState = "待支付";
-			holder.confirmation.setTag(orderInfo);
-			holder.confirmation.setOnClickListener(new OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					OrderInfo order = (OrderInfo) v.getTag();
-					getWXPrepayidAction(order.getOrder_num());
-				}
-			});
-		}
-		holder.confirmation.setText(textConfirm);
-		holder.orderStatus.setText(textState);	
-		
-		return convertView;
-	}
-
-	/**取消订单弹窗
-	 * @param order_num */
-	@SuppressWarnings("deprecation")
-	protected void showCansePopuWindows(final String order_num) {
-		MyOrderActivity activity = (MyOrderActivity) context;
-		View view = activity.getLayoutInflater().inflate(R.layout.group_list, null,true);
-		ListView lsitview = (ListView) view.findViewById(R.id.lv_list);
-		
-		lsitview.setAdapter(new ArrayAdapter<String>(context,R.layout.item_group, R.id.tv_text, cause));
-		lsitview.setOnItemClickListener(new OnItemClickListener() {
-			@Override
-			public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-				// 关闭popupWindow
-				if (cause[position].equals("您确定取消该订单")) {
-					MyToast.show(context, "请选择取消订单原因！");
-					return;
-				}
-				if (cause[position].equals("返回")) {
-					popupWindow.dismiss();
-					popupWindow = null;
-				}else {
-					cancelCanse = cause[position];
-					/**点击发送取消订单的请求*/
-					cancelSendAction(order_num);
-					popupWindow.dismiss();
-					popupWindow = null;
-				}
-			}
-		});
-		view.setFocusableInTouchMode(true);
-		popupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setFocusable(true);
-		popupWindow.setAnimationStyle(R.style.style_ppw);
-		popupWindow.setOutsideTouchable(true);
-		popupWindow.update();
-		popupWindow.showAtLocation(view, Gravity.CENTER | Gravity.CENTER, 0,0);
-	}
-
-	/**
-	 订单状态只有当显示未收货时，才显示确认收货按钮
-	 */
-	static class ViewHolder {
-		/**超市图片*/
-		ImageView shopImg;
-		/**超市名称*/
-		TextView shopName;
-		/**付款金额*/
-		TextView totalPrice;
-		/**订单时间*/
-		TextView orderTime;
-		/**订单状态*/
-		TextView orderStatus;
-		/**确认收货*/
-		TextView confirmation;
-	}
-	
-	
-	public void addData(ArrayList<OrderInfo> list){
-		mlist = list;
-		notifyDataSetChanged();
-	}
-	
-	/**确认收货时间弹窗*/
-	@SuppressWarnings("deprecation")
-	private void showTimePopuWindows(final String order_num) {
-		MyOrderActivity activity = (MyOrderActivity) context;
-		View view = activity.getLayoutInflater().inflate(R.layout.group_list, null);
-		ListView lsitview = (ListView) view.findViewById(R.id.lv_list);
-		lsitview.setAdapter(new ArrayAdapter<String>(context,R.layout.item_group, R.id.tv_text, times));
-		//监听
-		lsitview.setOnItemClickListener(new OnItemClickListener() {
-			@Override
-			public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
-				// 关闭popupWindow
-				if (times[arg2].equals("确认收货时间")) {
-					MyToast.show(context, "请选择收货时间！");
-					return;
-				}
-				receivingtime = times[arg2];
-				popupWindow.dismiss();
-				popupWindow = null;
-				/**点击发送确认订单的请求*/
-				completeSendAction(order_num);
-			}
-		});
-		view.setFocusableInTouchMode(true);
-		popupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setFocusable(true);
-		popupWindow.setAnimationStyle(R.style.style_ppw);
-		popupWindow.setOutsideTouchable(true);
-		popupWindow.update();
-		popupWindow.showAtLocation(view, Gravity.CENTER | Gravity.CENTER, 0,0);
-	}
-	
-	/**点击发送确认订单的请求*/
-	private void completeSendAction(String order_num) {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_CONFIRM_ORDER);
-		intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, order_num);
-		intent.putExtra(OrderLogic.EXTRA_RECEIVING, receivingtime);
-		App.getInstance().sendAction(intent);
-	}
-	
-	/**点击发送取消订单的请求*/
-	private void cancelSendAction(String order_num) {
-		Intent intent = new Intent(OrderLogic.ACTION_POST_CANCEL_ORDER);
-		intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, order_num);
-		intent.putExtra(OrderLogic.EXTRA_CANCELCANSE, cancelCanse);
-		App.getInstance().sendAction(intent);
-	}
-
-
-	/** 获取微信的prepayid */
-	private void getWXPrepayidAction(String ordernum ) {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_PREPAYID_ORDERDETAIL_ADAPTER);
-		intent.putExtra(OrderLogic.EXTRA_OUT_TRADE_NO,ordernum);
-		App.getInstance().sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ShoppingCartActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ShoppingCartActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ShoppingCartActivity.java	(revision )
@@ -1,331 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.ListView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.ShoppingCartGoodsAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.MyDialog;
-
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-
-/**
- * @ClassName: ShoppingCartActivity
- * @Description: 购物车页面
- * @author zxl
- * @date 2015年6月9日 下午2:10:30
- */
-public class ShoppingCartActivity extends BaseActivity {
-	public static String EXTRA_STATE = "shopState";
-	private TextView titleBarTv, cartPrice, cartNotice;
-	private ArrayList<Goods> goodsList = new ArrayList<Goods>();
-	private ShoppingCartGoodsAdapter shoppingCartGoodsAdapter;
-	private RelativeLayout loadingView, errorView, empty;
-	private LinearLayout initData;
-	private ImageView leftTitle;
-	private ListView listview;
-	private int state = 0;
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_shopping_cart);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.shopping_cart);
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		state = SPUtils.getInt(context, GlobalInfo.KEY_SHOPSTATE, 0);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-
-	private void initView() {
-		listview = (ListView) findViewById(R.id.listview);
-		findViewById(R.id.iv_cart).setVisibility(View.INVISIBLE);
-		cartNotice = (TextView) findViewById(R.id.tv_notice);
-		cartPrice = (TextView) findViewById(R.id.cart_price);
-		findViewById(R.id.rl_notice).setOnClickListener(this);	
-		
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		initData = (LinearLayout) findViewById(R.id.ll_init_data);
-		empty = (RelativeLayout) findViewById(R.id.rl_empty);
-		
-		sendGetShoppingInfoAction();
-	}
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (Utils.isIMMShow(v)) {
-			Utils.hidiInputMethodManager(v);
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left:// 返回
-			finish();
-			break;
-		case R.id.rl_notice:// 去结算
-			String cartText = cartNotice.getText().toString();
-			if ("去结算".equals(cartText)) {
-				if (state == 1) {
-					startActivity(new Intent(this, BalanceActivity.class));
-					finish();
-				} else {
-					MyToast.show(this, "当前商店闭店中，请更换店铺购买！");
-				}
-			} else {
-				showAlertDialog();
-			}
-			break;
-
-		default:
-			break;
-		}
-	}
-	
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_CART_INFO_SUCESS://获取购物车页面信息成功事件 
-			loadingView.setVisibility(View.GONE);
-			hideErrorLocal();
-			cartNotice(bundle);
-			goodsListInit(bundle);
-			break;
-		case Event.GET_CART_INFO_FAILED://获取购物车页面信息失败事件 
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_DELETE_CART_GOOD_SUCESS://删除购物车一条商品成功事件 
-			loadingView.setVisibility(View.GONE);
-			cartNotice(bundle);
-			notifyPopDete(bundle);
-			break;
-		case Event.GET_DELETE_CART_GOOD_FAILED://删除购物车一条商品失败事件 
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS://添加或删除/修改商品数量成功事件 
-			cartNotice(bundle);
-			notifyPop(bundle);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED://添加或删除/修改商品数量失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	/** 点击加减判断是否减到0*/
-	private void notifyPop(Bundle bundle) {
-		int operation = bundle.getInt(ShoppingCartLogic.EXTRA_OPERATION);
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		int number = bundle.getInt(ShoppingCartLogic.EXTRA_NUM);
-		
-		if (operation == 2) {
-			Goods goods = null;
-			for (int i = 0; i < goodsList.size(); i++) {
-				goods = goodsList.get(i);
-				if (goods.getChange_code() == changecode) {
-					break;
-				}
-			}
-			int num = goods.getGoods_num();
-			if (--num <= 0) {
-				goodsList.remove(goods);
-				shoppingCartGoodsAdapter.notifyDataSetChanged();
-			} else {
-				goods.setGoods_num(num--);
-			}
-		} else if (operation == 3) {
-			if (number == 0) {
-				Goods goods = null;
-				for (int i = 0; i < goodsList.size(); i++) {
-					goods = goodsList.get(i);
-					if (goods.getChange_code() == changecode) {
-						break;
-					}
-				}
-				goodsList.remove(goods);
-				shoppingCartGoodsAdapter.notifyDataSetChanged();
-			}
-		}
-		
-		if (goodsList.size() <= 0) {
-			initData.setVisibility(View.GONE);
-			empty.setVisibility(View.VISIBLE);
-		}
-	}
-
-	/** 刪除*/
-	private void notifyPopDete(Bundle bundle) {
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		Goods goods = null;
-		for (int i = 0; i < goodsList.size(); i++) {
-			goods = goodsList.get(i);
-			if (goods.getChange_code() == changecode) {
-				break;
-			}
-		}
-		goodsList.remove(goods);
-		shoppingCartGoodsAdapter.notifyDataSetChanged();
-		if (goodsList.size() <= 0) {
-			initData.setVisibility(View.GONE);
-			empty.setVisibility(View.VISIBLE);
-		}
-	}
-
-	/** 商品列表数据展示*/
-	@SuppressWarnings({ "unchecked", "rawtypes" })
-	private void goodsListInit(Bundle bundle) {
-		ArrayList<Goods> list = (ArrayList<Goods>) bundle.getSerializable(ShoppingCartLogic.EXTRA_CARTGOODLIST);
-		if (list != null && list.size() > 0) {
-			goodsList.clear();
-			goodsList = list;
-			if (shoppingCartGoodsAdapter == null) {
-				shoppingCartGoodsAdapter = new ShoppingCartGoodsAdapter(this, goodsList);
-				listview.setAdapter(shoppingCartGoodsAdapter);
-			}else{
-				shoppingCartGoodsAdapter.addData(goodsList);
-			}
-		} else {
-			initData.setVisibility(View.GONE);
-			empty.setVisibility(View.VISIBLE);
-		}
-	}
-
-
-	/** 购物车提示 */
-	@SuppressWarnings("rawtypes")
-	private void cartNotice(Bundle bundle) {
-		ArrayList<BottomStatusBar> bottomstatusbar = (ArrayList<BottomStatusBar>) bundle.getSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST);
-		int limited = bundle.getInt(ShoppingCartLogic.KEY_OVERLIMITED);
-		if (limited == 1){
-			MyToast.show(this,"该商品已经超过限购数量！");
-			return;
-		}
-
-		BottomStatusBar bsb = (BottomStatusBar) bottomstatusbar.get(0);
-		double amount = bsb.getAmount();
-		BigDecimal bdmoney = new BigDecimal(amount);
-		bdmoney = bdmoney.setScale(2, BigDecimal.ROUND_DOWN);
-		cartPrice.setText(amount > 0 ? "￥" + bdmoney : "￥0.00");
-		String text = "";
-		if (0 <= amount && amount < bsb.getFree_send_price()) {
-			double sub = Utils.sub(bsb.getFree_send_price(), amount);
-			text = "差" + sub + "元免费配送";
-		} else {
-			text = "去结算";
-		}
-		cartNotice.setText(text);
-	}
-	
-	/*** 提示框 */
-	public void showAlertDialog() {
-		MyDialog.Builder builder = new MyDialog.Builder(this);
-		String shopinfo = SPUtils.getString(context, GlobalInfo.KEY_SHOPINFO, "");
-		JSONObject shopJson ;
-		String shopName = "";
-		double freeSendPrice = 0;
-		try {
-			shopJson = new JSONObject(shopinfo);
-			shopName = shopJson.getString(GlobalInfo.KEY_SHOPNAME);
-			freeSendPrice = shopJson.getDouble("free_send_price");
-		} catch (JSONException e) {
-			e.printStackTrace();
-		}
-		builder.setTitle(shopName);
-		builder.setMessage("商铺最低起送价为"+freeSendPrice+"元！");
-		builder.setConfirmButton("继续购物", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				//跳回到首页
-				ShoppingCartActivity.this.startActivity(new Intent(ShoppingCartActivity.this,MainActivity.class));
-				dialog.dismiss();
-				finish();
-			}
-		});
-		builder.create().show();
-	}
-
-	
-	/** 获取购物车页面信息 */
-	private void sendGetShoppingInfoAction() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_GET_SHOPPING_CART_INFO);
-		intent.putExtra(ShoppingCartLogic.EXTRA_SHOPCODE,SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE,SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,Event.GET_CART_INFO_SUCESS,Event.GET_CART_INFO_FAILED,
-				Event.GET_DELETE_CART_GOOD_SUCESS,Event.GET_DELETE_CART_GOOD_FAILED,
-				Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS,Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/UseWaterTicket.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/UseWaterTicket.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/UseWaterTicket.java	(revision )
@@ -1,65 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/**
- * @ClassName: UseWaterTicket
- * @Description: 记录用户的水劵信息
- * @author YY
- * @date 2015年6月17日 下午6:49:11
- */
-public class UseWaterTicket implements Serializable {
-
-	private static final long serialVersionUID = -747925102567320303L;
-	/***/
-	private String rev_name;
-	/**数量*/
-	private int numbers;
-	/**地址*/
-	private String user_addr;
-	/**用户ID*/
-	private int user_code;
-	/**用户电话*/
-	private String user_tel;
-
-	public String getNick_name() {
-		return rev_name;
-	}
-
-	public void setNick_name(String rev_name) {
-		this.rev_name = rev_name;
-	}
-
-	public int getNumbers() {
-		return numbers;
-	}
-
-	public void setNumbers(int numbers) {
-		this.numbers = numbers;
-	}
-
-	public String getUser_addr() {
-		return user_addr;
-	}
-
-	public void setUser_addr(String user_addr) {
-		this.user_addr = user_addr;
-	}
-
-	public int getUser_code() {
-		return user_code;
-	}
-
-	public void setUser_code(int user_code) {
-		this.user_code = user_code;
-	}
-
-	public String getUser_tel() {
-		return user_tel;
-	}
-
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CartGoodsListReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CartGoodsListReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CartGoodsListReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: CartGoodsListReq
- * @Description: 获取购物车商品列表
- * @author zxl
- * @date 2015年6月8日 下午8:35:09
- */
-public class CartGoodsListReq extends HttpReq {
-
-	/** 页数 */
-	private int usercode;
-	/** 每页大小 */
-	private int shopcode;
-
-	public CartGoodsListReq(int reqId, int usercode, int shopcode) {
-		super();
-		this.id = reqId;
-		this.usercode = usercode;
-		this.shopcode = shopcode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	public int getShopcode() {
-		return shopcode;
-	}
-
-	public void setShopcode(int shopcode) {
-		this.shopcode = shopcode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + usercode + "&shopcode=" + shopcode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Banner.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Banner.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/Banner.java	(revision )
@@ -1,75 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/***
- * @ClassName: Banner
- * @Description: 首页banner
- * @author zxl
- * @date 2015年6月2日 下午1:57:43
- */
-public class Banner implements Serializable {
-
-	private static final long serialVersionUID = 2507650635958172766L;
-	/** url跳转 bunndr url */
-	private String banner_url;
-	/** banner_code */
-	private int banner_code;
-	/** goodstype_code */
-	private int goodstype_code;
-	/** type_name */
-	private String type_name;
-	/** banner_name */
-	private String banner_name;
-	/** banner图片 pic_url */
-	private String pic_url;
-
-	public int getGoodstype_code() {
-		return goodstype_code;
-	}
-
-	public void setGoodstype_code(int goodstype_code) {
-		this.goodstype_code = goodstype_code;
-	}
-
-	public String getType_name() {
-		return type_name;
-	}
-
-	public void setType_name(String type_name) {
-		this.type_name = type_name;
-	}
-
-	public String getBanner_name() {
-		return banner_name;
-	}
-
-	public void setBanner_name(String banner_name) {
-		this.banner_name = banner_name;
-	}
-
-	public String getPic_url() {
-		return pic_url;
-	}
-
-	public void setPic_url(String pic_url) {
-		this.pic_url = pic_url;
-	}
-
-	public String getBanner_url() {
-		return banner_url;
-	}
-
-	public void setBanner_url(String banner_url) {
-		this.banner_url = banner_url;
-	}
-
-	public int getBanner_code() {
-		return banner_code;
-	}
-
-	public void setBanner_code(int banner_code) {
-		this.banner_code = banner_code;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/IndexSearchhotsReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/IndexSearchhotsReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/IndexSearchhotsReq.java	(revision )
@@ -1,28 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  IndexSearchhotsReq
- * @Description: 获取搜索页面热词
- * @author YY
- * @date 2015年6月25日 下午5:14:36
- */
-public class IndexSearchhotsReq extends HttpReq {
-	
-	public IndexSearchhotsReq(int reqid){
-		super();
-		this.id = reqid;
-	}
-
-	@Override
-	public String getParams() {
-		return "";
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BargainGoodsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BargainGoodsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BargainGoodsAdapter.java	(revision )
@@ -1,155 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.Paint;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.RegistActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.ArrayList;
-
-/**
- * @ClassName: BargainGoodsAdapter
- * @Description: 特价商品
- * @author zxl
- * @date 2015年6月2日 下午7:40:26
- */
-public class BargainGoodsAdapter extends BaseAdapter {
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private ArrayList<Goods> mList;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	public int changecode;
-
-	@SuppressWarnings("deprecation")
-	public BargainGoodsAdapter(Context context, ArrayList<Goods> goods) {
-		super();
-		this.mContext = context;
-		this.mList = goods;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)
-				// 设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_bargain_goods, null);
-			holder.rl_price = (RelativeLayout) convertView.findViewById(R.id.rl_price);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			
-			LayoutParams imgParams = holder.shopImg.getLayoutParams();
-			imgParams.height = App.windowWidth / 3;
-			imgParams.width = App.windowWidth / 3;
-			holder.shopImg.setLayoutParams(imgParams);
-			
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.promotePrice = (TextView) convertView.findViewById(R.id.tv_promote_price);
-			holder.add = (ImageView) convertView.findViewById(R.id.iv_add);
-			holder.add.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					if (Utils.loginState()) {
-						Goods good = (Goods) v.getTag();
-						sendAddGood2CartAction(good.getChange_code(),good.getLimited());
-					} else {
-						mContext.startActivity(new Intent(mContext,RegistActivity.class));
-					}
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		mImageLoader.displayImage(goods.getPictrue_addr(), holder.shopImg, options);
-		holder.goodsName.setText(goods.getGoods_name());
-		
-		int status = goods.getGoods_status();
-		if (status == 1) {//特价
-			holder.rl_price.setVisibility(View.VISIBLE);
-			holder.goodsPrice.setText("￥"+goods.getGoods_price());
-			holder.promotePrice.setVisibility(View.VISIBLE);
-			holder.promotePrice.setText("￥"+goods.getPromote_price());
-			holder.goodsPrice.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG );
-		}else{
-			holder.rl_price.setVisibility(View.GONE);
-			holder.goodsPrice.setText("￥"+goods.getGoods_price());
-			holder.promotePrice.setVisibility(View.INVISIBLE);
-		}
-		holder.add.setTag(goods);
-		return convertView;
-	}
-
-	class ViewHolder {
-		RelativeLayout rl_price;
-		ImageView shopImg;
-		TextView goodsName;
-		TextView goodsPrice;
-		TextView promotePrice;
-		ImageView add;
-	}
-
-	public void addData(ArrayList<Goods> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-	
-	public void sendAddGood2CartAction(int changecode,int limited){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(mContext, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 1);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,limited);
-		App.getInstance().sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MyOrderActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MyOrderActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MyOrderActivity.java	(revision )
@@ -1,192 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.FrameLayout;
-import android.widget.ListView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.OrderListAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.tencent.mm.sdk.constants.Build;
-import com.tencent.mm.sdk.modelpay.PayReq;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-import java.util.ArrayList;
-
-/**
- * @ClassName: MyOrderActivity
- * @Description: 我的订单展示界面
- * @author YY
- * @date 2015年6月3日 下午3:12:40
- */
-public class MyOrderActivity extends BaseActivity implements OnItemClickListener {
-	private TextView titleBarTv,gohome;// 界面标题
-	private ListView listview;// listview展示数据的
-	private OrderListAdapter orderListAdapter;
-	private ArrayList<OrderInfo> orders = new ArrayList<OrderInfo>();
-	private FrameLayout emptyLayout;
-
-	final IWXAPI msgApi = WXAPIFactory.createWXAPI(this, null);
-	private PayReq req;
-	private PrepayIdInfo prepayInfo;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left:
-			finish();
-			break;
-		case R.id.go_home://先去逛逛，跳转到主页
-			startActivity(new Intent(this,MainActivity.class));
-			finish();
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void onCreate(Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		findAllOrders();
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_myorder);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("我的订单");
-
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		emptyLayout = (FrameLayout) findViewById(R.id.fr_layout);
-		gohome = (TextView) findViewById(R.id.go_home);
-		gohome.setOnClickListener(this);
-		
-		listview = (ListView)findViewById(R.id.listview_order);
-		listview.setOnItemClickListener(this);
-	}
-
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_USER_ALLORDERS_SUCESS://获取用户订单成功事件 
-			ArrayList<OrderInfo> orderList = (ArrayList<OrderInfo>) bundle.getSerializable(OrderLogic.EXTRA_ORDER_STATES_LIST);
-			if (orderList == null) {// 没有订单
-				emptyLayout.setVisibility(View.VISIBLE);
-				listview.setVisibility(View.GONE);
-			} else {
-				emptyLayout.setVisibility(View.GONE);
-				listview.setVisibility(View.VISIBLE);
-				orders.clear();
-				orders.addAll(orderList);
-				if (null == orderListAdapter) {
-					orderListAdapter = new OrderListAdapter(this, orders);
-					listview.setAdapter(orderListAdapter);
-				} else {
-					orderListAdapter.notifyDataSetChanged();
-				}
-			}
-			break;
-		case Event.GET_USER_ALLORDERS_FAILED://获取用户订单失败事件
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_CANCEL_ORDER_SUCESS://取消订单成功事件
-			findAllOrders();
-			break;
-		case Event.POST_CANCEL_ORDER_FAILED://取消订单失败事件
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_CONFIRM_ORDER_SUCESS://确认订单成功事件
-			findAllOrders();
-			break;
-		case Event.GET_CONFIRM_ORDER_FAILED://确认订单失败事件
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_PREPAY_ID_DETAIL_ADAPTER_SUCESS://WX支付详情页面获取prepayid成功事件
-			prepayInfo = (PrepayIdInfo) bundle.getSerializable(OrderLogic.EXTRA_PREPAY_ID);
-			req = new PayReq();
-			msgApi.registerApp(prepayInfo.getAppid());
-			boolean isPaySupported = msgApi.getWXAppSupportAPI() >= Build.PAY_SUPPORTED_SDK_INT;
-			if (isPaySupported) {
-				genPayReq();
-				sendPayReq();
-			} else {
-				MyToast.show(this, "您手机未安装微信或者当前版本不支持微信支付！");
-			}
-			break;
-		case Event.GET_PREPAY_ID_DETAIL_ADAPTER_FAILED://WX支付详情页面获取prepayid失败事件
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	private void genPayReq() {
-		req.appId = prepayInfo.getAppid();
-		req.partnerId = prepayInfo.getPartnerid();
-		req.prepayId = prepayInfo.getPrepayid();
-		req.packageValue = "Sign=WXPay";
-		req.nonceStr = prepayInfo.getNoncestr();
-		req.timeStamp = prepayInfo.getTimestamp();
-		req.sign = prepayInfo.getSign();
-	}
-
-	private void sendPayReq() {
-		msgApi.registerApp(prepayInfo.getAppid());
-		msgApi.sendReq(req);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_USER_ALLORDERS_SUCESS,
-				Event.GET_USER_ALLORDERS_FAILED, Event.POST_CANCEL_ORDER_SUCESS,
-				Event.POST_CANCEL_ORDER_FAILED, Event.GET_CONFIRM_ORDER_SUCESS,
-				Event.GET_CONFIRM_ORDER_FAILED,Event.GET_PREPAY_ID_DETAIL_ADAPTER_SUCESS,
-				Event.GET_PREPAY_ID_DETAIL_ADAPTER_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-	/** 根据用户ID查询所有订单 */
-	private void findAllOrders() {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_USER_ORDER);
-		intent.putExtra(OrderLogic.EXTRA_USER_CODE, SPUtils.getInt(MyOrderActivity.this,GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	@Override
-	public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-		/**根据订单编号获取订单详细信息*/
-		Intent intent = new Intent(this, OrderDetailsActivity.class);
-		intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, ((OrderInfo) orders.get(position)).getOrder_num());
-		intent.putExtra(OrderDetailsActivity.EXTRA_FROM, 0);
-		startActivity(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/BuyWaterTicket.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/BuyWaterTicket.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/BuyWaterTicket.java	(revision )
@@ -1,158 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ListView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.BuyWaterTicketAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-/**
- * @ClassName:  BuyWaterTicket
- * @Description: 水票列表
- * @author YY
- * @date 2015年6月16日 下午12:06:04
- */
-public class BuyWaterTicket extends BaseActivity implements OnItemClickListener {
-	private TextView titleBarTv;//标题
-	private ListView lv_waterticket;
-	private BuyWaterTicketAdapter buyWaterTicketAdapter;
-	private ArrayList<WaterInfo> waterInfos = new ArrayList<WaterInfo>();
-	private RelativeLayout loadingView, errorView;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left://点击返回
-			finish();
-			break;
-		default:
-			break;
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_buy_water_ticket);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.buy_water_ticket);
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-
-	private void initView() {
-		lv_waterticket = (ListView) findViewById(R.id.lv_waterticket);
-		lv_waterticket.setOnItemClickListener(this);
-		
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		getWaterList();
-	}
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-	
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_WATER_FIND_SUCESS://初始化一键送水界面成功事件 
-			loadingView.setVisibility(View.GONE);
-			hideErrorLocal();
-			ArrayList<WaterInfo> waterlist = (ArrayList<WaterInfo>) bundle.getSerializable(TicketLogic.EXTRA_WATER_LIST);
-			if (waterlist != null && waterlist.size() > 0) {
-				waterInfos.clear();
-				waterInfos.addAll(waterlist);
-				buyWaterTicketAdapter = new BuyWaterTicketAdapter(waterInfos,this);
-				lv_waterticket.setAdapter(buyWaterTicketAdapter);
-			} else {
-				MyToast.show(context, "该超市没有水票！");
-			}
-			break;
-		case Event.GET_WATER_FIND_FAILED://初始化一键送水界面失败事件 
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_WATER_FIND_SUCESS,
-				Event.GET_WATER_FIND_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	/** 点击单个条目可以查看水票详情 */
-	@Override
-	public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-		WaterInfo waterInfo = (WaterInfo) waterInfos.get(position);
-		Intent intent = new Intent(this, WaterTicketDetailActivity.class);
-		intent.putExtra(WaterTicketDetailActivity.EXTRA_GOODSCODE, waterInfo.getGoods_code());
-		startActivity(intent);
-	}
-	
-	/** 购买水票列表界面 */
-	private void getWaterList() {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_WATER_FIND);
-		intent.putExtra(TicketLogic.EXTRA_SHOP_CODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InsertAddrGetReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InsertAddrGetReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InsertAddrGetReq.java	(revision )
@@ -1,45 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-public class InsertAddrGetReq extends HttpReq {
-	
-	private int userCode;
-	private int userLocCode;
-	
-	
-
-	public InsertAddrGetReq(int reqid,int userCode, int userLocCode) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-		this.userLocCode = userLocCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	public int getUserLocCode() {
-		return userLocCode;
-	}
-
-	public void setUserLocCode(int userLocCode) {
-		this.userLocCode = userLocCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?user_loc_code=" + userLocCode + "&usercode=" + userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/WheelTextView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/WheelTextView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/WheelTextView.java	(revision )
@@ -1,41 +0,0 @@
-
-package com.anniu.shandiandaojia.view.lee.wheel;
-
-import android.content.Context;
-import android.content.res.Resources;
-import android.util.AttributeSet;
-import android.util.TypedValue;
-import android.widget.TextView;
-
-public class WheelTextView extends TextView {
-
-    public WheelTextView(Context context) {
-        super(context);
-    }
-
-    public WheelTextView(Context context, AttributeSet attrs) {
-        super(context, attrs);
-    }
-
-    @Override
-    public void setTextSize(float size) {
-        Context c = getContext();
-        Resources r;
-
-        if (c == null)
-            r = Resources.getSystem();
-        else
-            r = c.getResources();
-        float rawSize = TypedValue.applyDimension(
-                TypedValue.COMPLEX_UNIT_SP, size, r.getDisplayMetrics());
-        if (rawSize != getPaint().getTextSize()) {
-            getPaint().setTextSize(rawSize);
-
-            if (getLayout() != null) {
-                invalidate();
-            }
-        }
-
-    }
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IcsLinearLayout.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IcsLinearLayout.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IcsLinearLayout.java	(revision )
@@ -1,182 +0,0 @@
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.drawable.Drawable;
-import android.view.View;
-import android.widget.LinearLayout;
-
-/**
- * A simple extension of a regular linear layout that supports the divider API
- * of Android 4.0+. The dividers are added adjacent to the children by changing
- * their layout params. If you need to rely on the margins which fall in the
- * same orientation as the layout you should wrap the child in a simple
- * {@link android.widget.FrameLayout} so it can receive the margin.
- */
-class IcsLinearLayout extends LinearLayout {
-    private static final int[] LL = new int[] {
-        /* 0 */ android.R.attr.divider,
-        /* 1 */ android.R.attr.showDividers,
-        /* 2 */ android.R.attr.dividerPadding,
-    };
-    private static final int LL_DIVIDER = 0;
-    private static final int LL_SHOW_DIVIDER = 1;
-    private static final int LL_DIVIDER_PADDING = 2;
-
-    private Drawable mDivider;
-    private int mDividerWidth;
-    private int mDividerHeight;
-    private int mShowDividers;
-    private int mDividerPadding;
-
-
-    public IcsLinearLayout(Context context, int themeAttr) {
-        super(context);
-
-        TypedArray a = context.obtainStyledAttributes(null, LL, themeAttr, 0);
-        setDividerDrawable(a.getDrawable(IcsLinearLayout.LL_DIVIDER));
-        mDividerPadding = a.getDimensionPixelSize(LL_DIVIDER_PADDING, 0);
-        mShowDividers = a.getInteger(LL_SHOW_DIVIDER, SHOW_DIVIDER_NONE);
-        a.recycle();
-    }
-
-    public void setDividerDrawable(Drawable divider) {
-        if (divider == mDivider) {
-            return;
-        }
-        mDivider = divider;
-        if (divider != null) {
-            mDividerWidth = divider.getIntrinsicWidth();
-            mDividerHeight = divider.getIntrinsicHeight();
-        } else {
-            mDividerWidth = 0;
-            mDividerHeight = 0;
-        }
-        setWillNotDraw(divider == null);
-        requestLayout();
-    }
-
-    @Override
-    protected void measureChildWithMargins(View child, int parentWidthMeasureSpec, int widthUsed, int parentHeightMeasureSpec, int heightUsed) {
-        final int index = indexOfChild(child);
-        final int orientation = getOrientation();
-        final LayoutParams params = (LayoutParams) child.getLayoutParams();
-        if (hasDividerBeforeChildAt(index)) {
-            if (orientation == VERTICAL) {
-                //Account for the divider by pushing everything up
-                params.topMargin = mDividerHeight;
-            } else {
-                //Account for the divider by pushing everything left
-                params.leftMargin = mDividerWidth;
-            }
-        }
-
-        final int count = getChildCount();
-        if (index == count - 1) {
-            if (hasDividerBeforeChildAt(count)) {
-                if (orientation == VERTICAL) {
-                    params.bottomMargin = mDividerHeight;
-                } else {
-                    params.rightMargin = mDividerWidth;
-                }
-            }
-        }
-        super.measureChildWithMargins(child, parentWidthMeasureSpec, widthUsed, parentHeightMeasureSpec, heightUsed);
-    }
-
-    @Override
-    protected void onDraw(Canvas canvas) {
-        if (mDivider != null) {
-            if (getOrientation() == VERTICAL) {
-                drawDividersVertical(canvas);
-            } else {
-                drawDividersHorizontal(canvas);
-            }
-        }
-        super.onDraw(canvas);
-    }
-
-    private void drawDividersVertical(Canvas canvas) {
-        final int count = getChildCount();
-        for (int i = 0; i < count; i++) {
-            final View child = getChildAt(i);
-
-            if (child != null && child.getVisibility() != GONE) {
-                if (hasDividerBeforeChildAt(i)) {
-                    final android.widget.LinearLayout.LayoutParams lp = (android.widget.LinearLayout.LayoutParams) child.getLayoutParams();
-                    final int top = child.getTop() - lp.topMargin/* - mDividerHeight*/;
-                    drawHorizontalDivider(canvas, top);
-                }
-            }
-        }
-
-        if (hasDividerBeforeChildAt(count)) {
-            final View child = getChildAt(count - 1);
-            int bottom = 0;
-            if (child == null) {
-                bottom = getHeight() - getPaddingBottom() - mDividerHeight;
-            } else {
-                //final LayoutParams lp = (LayoutParams) child.getLayoutParams();
-                bottom = child.getBottom()/* + lp.bottomMargin*/;
-            }
-            drawHorizontalDivider(canvas, bottom);
-        }
-    }
-
-    private void drawDividersHorizontal(Canvas canvas) {
-        final int count = getChildCount();
-        for (int i = 0; i < count; i++) {
-            final View child = getChildAt(i);
-
-            if (child != null && child.getVisibility() != GONE) {
-                if (hasDividerBeforeChildAt(i)) {
-                    final android.widget.LinearLayout.LayoutParams lp = (android.widget.LinearLayout.LayoutParams) child.getLayoutParams();
-                    final int left = child.getLeft() - lp.leftMargin/* - mDividerWidth*/;
-                    drawVerticalDivider(canvas, left);
-                }
-            }
-        }
-
-        if (hasDividerBeforeChildAt(count)) {
-            final View child = getChildAt(count - 1);
-            int right = 0;
-            if (child == null) {
-                right = getWidth() - getPaddingRight() - mDividerWidth;
-            } else {
-                //final LayoutParams lp = (LayoutParams) child.getLayoutParams();
-                right = child.getRight()/* + lp.rightMargin*/;
-            }
-            drawVerticalDivider(canvas, right);
-        }
-    }
-
-    private void drawHorizontalDivider(Canvas canvas, int top) {
-        mDivider.setBounds(getPaddingLeft() + mDividerPadding, top,
-                getWidth() - getPaddingRight() - mDividerPadding, top + mDividerHeight);
-        mDivider.draw(canvas);
-    }
-
-    private void drawVerticalDivider(Canvas canvas, int left) {
-        mDivider.setBounds(left, getPaddingTop() + mDividerPadding,
-                left + mDividerWidth, getHeight() - getPaddingBottom() - mDividerPadding);
-        mDivider.draw(canvas);
-    }
-
-    private boolean hasDividerBeforeChildAt(int childIndex) {
-        if (childIndex == 0 || childIndex == getChildCount()) {
-          return false;
-        }
-        if ((mShowDividers & SHOW_DIVIDER_MIDDLE) != 0) {
-            boolean hasVisibleViewBefore = false;
-            for (int i = childIndex - 1; i >= 0; i--) {
-                if (getChildAt(i).getVisibility() != GONE) {
-                    hasVisibleViewBefore = true;
-                    break;
-                }
-            }
-            return hasVisibleViewBefore;
-        }
-        return false;
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CheckOutVetifyCodeReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CheckOutVetifyCodeReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CheckOutVetifyCodeReq.java	(revision )
@@ -1,62 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: CheckOutVetifyCodeReq
- * @Description: 校验验证码
- * @author YY
- * @date 2015年6月3日 下午6:00:39
- */
-public class CheckOutVetifyCodeReq extends HttpReq {
-	/** 电话号码 */
-	private String user_tel;
-	/** 验证码 */
-	private String vertifyCode;
-	
-	private int shopCode;
-
-	public CheckOutVetifyCodeReq(int Reqid, String user_tel, String vertifyCode,int shopCode) {
-		super();
-		this.id = Reqid;
-		this.user_tel = user_tel;
-		this.vertifyCode = vertifyCode;
-		this.shopCode = shopCode;
-	}
-
-	public String getUser_tel() {
-		return user_tel;
-	}
-
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-
-	public String getVertifyCode() {
-		return vertifyCode;
-	}
-
-	public void setVertifyCode(String vertifyCode) {
-		this.vertifyCode = vertifyCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "moblie=" + user_tel + "&moblie_code=" + vertifyCode+"&shopcode="+shopCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InOrOutCartReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InOrOutCartReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InOrOutCartReq.java	(revision )
@@ -1,85 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: GoodsDetailsReq
- * @Description: 商品详情请求
- * @author zxl
- * @date 2015年6月3日 下午8:06:15
- */
-public class InOrOutCartReq extends HttpReq {
-
-	/** 商店商品标识id */
-	private int changecode;
-	/** 如果用户登录，那么传用户id */
-	private int usercode;
-	/** 1=添加一个，2=减一个 3=根据可选参数num修改数量 */
-	private int num;
-	/** operation为3的时候 给num值 其他时候 num为kong */
-	private int operation;
-	/** 商品限购 0为不限购 大于0为限购 */
-	private int limited;
-
-	public InOrOutCartReq(int reqId, int changcode, int usercode, int num,
-			int operation,int limited) {
-		super();
-		this.id = reqId;
-		this.changecode = changcode;
-		this.usercode = usercode;
-		this.num = num;
-		this.operation = operation;
-		this.limited = limited;
-	}
-
-	public int getLimited() {
-		return limited;
-	}
-
-	public void setLimited(int limited) {
-		this.limited = limited;
-	}
-
-	public int getNum() {
-		return num;
-	}
-
-	public void setNum(int num) {
-		this.num = num;
-	}
-
-	public int getOperation() {
-		return operation;
-	}
-
-	public void setOperation(int operation) {
-		this.operation = operation;
-	}
-
-	public int getChangcode() {
-		return changecode;
-	}
-
-	public void setChangcode(int changcode) {
-		this.changecode = changcode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?changecode=" + changecode + "&usercode=" + usercode + "&num="
-				+ num + "&operation=" + operation+"&limited="+limited;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/CustomerLogo.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/CustomerLogo.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/CustomerLogo.java	(revision )
@@ -1,20 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare;
-
-import android.graphics.Bitmap;
-import android.view.View.OnClickListener;
-
-/** 九宫格自定义的图标对象 */
-public class CustomerLogo {
-	public String label;
-	public Bitmap enableLogo;
-	public Bitmap disableLogo;
-	public OnClickListener listener;
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/DialogUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/DialogUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/DialogUtils.java	(revision )
@@ -1,113 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.app.Activity;
-import android.content.DialogInterface;
-import android.os.Handler;
-import android.os.Message;
-import android.view.View;
-import android.widget.Toast;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.view.CommonDialog;
-
-/**
-* @ClassName: DialogUtils 
-* @Description: 对话框工具类
-* @author zxl 
-* @date 2014年10月11日 下午2:45:22
- */
-public class DialogUtils {
-
-    private static Activity mActivity = null;
-
-    public static void init() {
-
-    }
-
-    /**
-     * handler处理
-     */
-    public static Handler handler = new Handler() {
-
-        public void handleMessage(Message msg) {
-
-            switch (msg.what) {
-                case 0:
-                    Toast netToast = Toast.makeText(mActivity,
-                            String.valueOf(msg.obj), Toast.LENGTH_SHORT);
-                    netToast.setText(String.valueOf(msg.obj));
-                    // Util.toastCancel(Utility.netToast);
-                    netToast.show();
-                    break;
-                case 1:
-                    showCustomeDialog(mActivity, String.valueOf(msg.obj));
-            }
-            super.handleMessage(msg);
-        }
-    };
-
-    /**
-     * 提示信息
-     * 
-     * @param activity
-     * @param message
-     */
-    public static void showInfo(Activity activity, String message) {
-
-        if (null == activity || activity.isFinishing()) {
-            return;
-        }
-        mActivity = activity;
-        Message msg = new Message();
-        msg.what = 0;
-        msg.obj = message;
-        handler.sendMessage(msg);
-    }
-
-    /**
-     * 提示后台服务信息
-     */
-    public static void showServiceInfo(Activity activity, String message) {
-        if (null == activity || activity.isFinishing()) {
-            return;
-        }
-        mActivity = activity;
-        Message msg = new Message();
-        msg.what = 1;
-        msg.obj = message;
-        handler.sendMessage(msg);
-
-    }
-
-    public static void showCustomeDialog(Activity activity, String message) {
-        showCustomeDialog(activity, message, null);
-    }
-
-    public static void showCustomeDialog(Activity activity, String message,
-            DialogInterface.OnClickListener listener) {
-        final CommonDialog dialog = new CommonDialog(activity);
-        dialog.setSingleButton(true);
-        dialog.setTitle(activity.getString(R.string.dialog_title_notice));
-        dialog.setMessage(message);
-        dialog.setPositiveButton("确定", new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                dialog.dismiss();
-            }
-        });
-    }
-    
-    public static void showTicketDialog(Activity activity, String message,
-    		DialogInterface.OnClickListener listener) {
-    	final CommonDialog dialog = new CommonDialog(activity);
-    	dialog.setSingleButton(true);
-    	dialog.setTitle("支付成功");
-    	dialog.setMessage(message);
-    	dialog.setPositiveButton("知道了", new View.OnClickListener() {
-    		@Override
-    		public void onClick(View v) {
-    			dialog.dismiss();
-    		}
-    	});
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/receiver/AppRegister.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/receiver/AppRegister.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/receiver/AppRegister.java	(revision )
@@ -1,22 +0,0 @@
-package com.anniu.shandiandaojia.receiver;
-
-import android.content.BroadcastReceiver;
-import android.content.Context;
-import android.content.Intent;
-
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-public class AppRegister extends BroadcastReceiver {
-
-	private PrepayIdInfo info;
-
-	@Override
-	public void onReceive(Context context, Intent intent) {
-		final IWXAPI api = WXAPIFactory.createWXAPI(context, null);
-		info = Utils.getPrepayIdInfo();
-		api.registerApp(info.getAppid());
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FAQActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FAQActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FAQActivity.java	(revision )
@@ -1,80 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.annotation.SuppressLint;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/**
- * @ClassName: FAQActivity
- * @Description: 常见问题
- * @author YY
- * @date 2015年5月30日 下午7:18:48
- */
-@SuppressLint("SetJavaScriptEnabled")
-public class FAQActivity extends BaseActivity {
-
-	private TextView titleBarTv;// 界面标题
-//	private WebView web_view;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId() == R.id.title_bar_left) {
-			finish();
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_question);
-
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("常见问题");
-
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-
-//		web_view = (WebView) findViewById(R.id.web_view);
-//		// 加载本地资源
-//		// web_view.loadUrl("file:///android_asset/example.html");
-//		// 加载网络资源
-//		web_view.loadUrl("http://baidu.com");
-//
-//		// 启用支持javascript
-//		WebSettings settings = web_view.getSettings();
-//		settings.setJavaScriptEnabled(true);
-//		web_view.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
-//
-//		web_view.setWebViewClient(new WebViewClient() {
-//			@Override
-//			public boolean shouldOverrideUrlLoading(WebView view, String url) {
-//				view.loadUrl(url);
-//				return true;
-//			}
-//		});
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/CommonUtil.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/CommonUtil.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/CommonUtil.java	(revision )
@@ -1,352 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.content.pm.PackageInfo;
-import android.content.pm.PackageManager;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
-import android.telephony.TelephonyManager;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.ListView;
-
-import java.io.ByteArrayOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.math.BigDecimal;
-import java.net.HttpURLConnection;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-
-public class CommonUtil {
-
-	/**
-	 * 获取手机串号
-	 * 
-	 * @param context
-	 * @return
-	 */
-	public static String getIMSI(Context context) {
-		Object objTemp = context.getSystemService(Context.TELEPHONY_SERVICE);
-		TelephonyManager phoneMgr;
-		String imsi = "";
-		if (objTemp != null && objTemp instanceof TelephonyManager) {
-			phoneMgr = (TelephonyManager) objTemp;
-			imsi = phoneMgr.getSubscriberId();
-		}
-		return imsi;
-	}
-
-	/**
-	 * 读取位图
-	 * 
-	 * @param context
-	 * @param resId
-	 * @return
-	 */
-	public static Bitmap ReadBitmap(Context context, int resId) {
-		BitmapFactory.Options opt = new BitmapFactory.Options();
-		opt.inPreferredConfig = Bitmap.Config.RGB_565;
-		opt.inPurgeable = true;
-		opt.inInputShareable = true;
-		// 获取资源图片
-		InputStream is = context.getResources().openRawResource(resId);
-		return BitmapFactory.decodeStream(is, null, opt);
-	}
-
-	/**
-	 * 获取网络连接状态
-	 * 
-	 * @param context
-	 * @return
-	 */
-	public static boolean isNetworkConnected(Context context) {
-		NetworkInfo networkInfo = ((ConnectivityManager) context
-				.getSystemService(Context.CONNECTIVITY_SERVICE))
-				.getActiveNetworkInfo();
-		return networkInfo != null && networkInfo.isConnected();
-	}
-
-	/**
-	 * 秒数转换成时间
-	 * 
-	 * @param time
-	 * @return
-	 */
-	public static String secToTime(int time) {
-		String timeStr = null;
-		int hour = 0;
-		int minute = 0;
-		int second = 0;
-		if (time <= 0)
-			return "00:00";
-		else {
-			minute = time / 60;
-			if (minute < 60) {
-				second = time % 60;
-				timeStr = unitFormat(minute) + ":" + unitFormat(second);
-			} else {
-				hour = minute / 60;
-				if (hour > 99)
-					return "99:59:59";
-				minute = minute % 60;
-				second = time - hour * 3600 - minute * 60;
-				timeStr = unitFormat(hour) + ":" + unitFormat(minute) + ":"
-						+ unitFormat(second);
-			}
-		}
-		return timeStr;
-	}
-
-	private static String unitFormat(int i) {
-		String retStr = null;
-		if (i >= 0 && i < 10)
-			retStr = "0" + Integer.toString(i);
-		else
-			retStr = "" + i;
-		return retStr;
-	}
-
-	public static boolean isInstalled(Context context, String packageName) {
-		final PackageManager packageManager = context.getPackageManager();
-		// 获取所有已安装程序的包信息
-		List<PackageInfo> pinfo = packageManager.getInstalledPackages(0);
-		for (int i = 0; i < pinfo.size(); i++) {
-			if (pinfo.get(i).packageName.equalsIgnoreCase(packageName))
-				return true;
-		}
-		return false;
-	}
-
-	public static byte[] getImage(String urlstr) {
-		byte[] data = null;
-		try {
-			URL url = new URL(urlstr);
-			HttpURLConnection conn = (HttpURLConnection) url.openConnection();
-			conn.setRequestMethod("GET");
-			conn.setReadTimeout(5000);
-
-			InputStream input = conn.getInputStream();// 到这可以直接BitmapFactory.decodeFile也行。
-														// 返回bitmap
-
-			ByteArrayOutputStream output = new ByteArrayOutputStream();
-			byte[] buffer = new byte[1024];
-			int len = 0;
-			while ((len = input.read(buffer)) != -1) {
-				output.write(buffer, 0, len);
-			}
-
-			input.close();
-			data = output.toByteArray();
-			System.out.println("下载完毕！");
-		} catch (MalformedURLException e) {
-			e.printStackTrace();
-		} catch (IOException e) {
-			e.printStackTrace();
-		}
-		return data;
-	}
-
-	/**
-	 * 从URL中获取参数
-	 * 
-	 * @param url
-	 * @param name
-	 * @return
-	 */
-	public static String getParamFormUrl(String url, String name) {
-		String str = null;
-		Map<String, String> paramMap = new HashMap<String, String>();
-		if (!"".equals(url)) {// 如果URL不是空字符串
-			url = url.substring(url.indexOf('?') + 1);
-			String paramaters[] = url.split("&");
-			for (String param : paramaters) {
-				String values[] = param.split("=");
-				paramMap.put(values[0], values[1]);
-			}
-		}
-		if (paramMap.containsKey(name)) {
-			str = paramMap.get(name);
-		}
-
-		return str;
-	}
-
-	public static int getImageHeight(int width, int width_rate, int height_rate) {
-		int height = 0;
-		height = (int) (Double.parseDouble(width + "") * (height_rate / width_rate));
-		return height;
-	}
-	
-	public static int getImageHeight(int width, double rate) {
-		int height = 0;
-		height = (int) (Double.parseDouble(width + "") * rate);
-		return height;
-	}
-	
-	
-	public static long getDiffSeconds(long lastTime){
-		long curTime = Utils.getCurrentSystemTime();
-		long diff = (curTime-lastTime);
-		return diff;
-	}
-	
-	/**
-	 * 获取listview 的item视图
-	 * @param pos
-	 * @param listView
-	 * @return
-	 */
-	public static View getViewByPosition(int pos, ListView listView) {
-		final int firstListItemPosition = listView.getFirstVisiblePosition();
-		final int lastListItemPosition = firstListItemPosition + listView.getChildCount() - 1;
-		
-		if (pos < firstListItemPosition || pos > lastListItemPosition ) {
-		    return listView.getAdapter().getView(pos, null, listView);
-		} else {
-		    final int childIndex = pos - firstListItemPosition;
-		    return listView.getChildAt(childIndex);
-		}
-	}
-	
-	/**
-	 * 字节转成KB或MB
-	 * @param bytes
-	 * @return
-	 */
-	public static String bytes2kb(long bytes) {  
-        BigDecimal filesize = new BigDecimal(bytes);  
-        BigDecimal megabyte = new BigDecimal(1024 * 1024);  
-        float returnValue = filesize.divide(megabyte, 2, BigDecimal.ROUND_UP)  
-                .floatValue();  
-        if (returnValue > 1)  
-            return (returnValue + "MB");  
-        BigDecimal kilobyte = new BigDecimal(1024);  
-        returnValue = filesize.divide(kilobyte, 2, BigDecimal.ROUND_UP)  
-                .floatValue();  
-        return (returnValue + "KB");  
-    }
-	
-
-	public static String getMd5(byte[] buffer) throws NoSuchAlgorithmException{
-	    String s  = null;
-	    char hexDigist[] = {'0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'};
-	    MessageDigest md = MessageDigest.getInstance("MD5");
-	    md.update(buffer);
-	    byte[] datas = md.digest();
-	    char[] str = new char[2*16];
-	    int k = 0;
-	    for(int i=0;i<16;i++){
-	      byte b   = datas[i];
-	      str[k++] = hexDigist[b>>>4 & 0xf];
-	      str[k++] = hexDigist[b & 0xf];
-	    }
-	    s = new String(str);
-	    return s;
-	  }
-
-	
-	/**
-	 * 32位Md5加密
-	 * @param str
-	 * @return
-	 */
-    public static String MD5(String str)  
-    {  
-        MessageDigest md5 = null;  
-        try  {  
-            md5 = MessageDigest.getInstance("MD5"); 
-        }catch(Exception e) {  
-            e.printStackTrace();  
-            return "";  
-        }  
-          
-        char[] charArray = str.toCharArray();  
-        byte[] byteArray = new byte[charArray.length];  
-          
-        for(int i = 0; i < charArray.length; i++) {  
-            byteArray[i] = (byte)charArray[i];  
-        }  
-        byte[] md5Bytes = md5.digest(byteArray);  
-          
-        StringBuffer hexValue = new StringBuffer();  
-        for( int i = 0; i < md5Bytes.length; i++) {  
-            int val = (md5Bytes[i])&0xff;  
-            if(val < 16) {  
-                hexValue.append("0");  
-            }  
-            hexValue.append(Integer.toHexString(val));  
-        }  
-        return hexValue.toString();  
-    }
-    
-
-	public static String getDeviceInfo(Context context) {
-	    try{
-	      org.json.JSONObject json = new org.json.JSONObject();
-	      android.telephony.TelephonyManager tm = (android.telephony.TelephonyManager) context
-	          .getSystemService(Context.TELEPHONY_SERVICE);
-	
-	      String device_id = tm.getDeviceId();
-	
-	      android.net.wifi.WifiManager wifi = (android.net.wifi.WifiManager) context.getSystemService(Context.WIFI_SERVICE);
-	
-	      String mac = wifi.getConnectionInfo().getMacAddress();
-	      json.put("mac", mac);
-	
-	      if( TextUtils.isEmpty(device_id) ){
-	        device_id = mac;
-	      }
-	
-	      if( TextUtils.isEmpty(device_id) ){
-	        device_id = android.provider.Settings.Secure.getString(context.getContentResolver(),android.provider.Settings.Secure.ANDROID_ID);
-	      }
-	
-	      json.put("device_id", device_id);
-	
-	      return json.toString();
-	    }catch(Exception e){
-	      e.printStackTrace();
-	    }
-	  return null;
-	}
-	
-	public static boolean is3G(Context context) {   
-        ConnectivityManager cm = (ConnectivityManager) context   
-                .getSystemService(Context.CONNECTIVITY_SERVICE);   
-        NetworkInfo networkINfo = cm.getActiveNetworkInfo();   
-        if (networkINfo != null   
-                && networkINfo.getType() == ConnectivityManager.TYPE_MOBILE) {   
-            return true;   
-        }   
-        return false;   
-    }
-	
-	public static boolean isWifi(Context context) {   
-        ConnectivityManager cm = (ConnectivityManager) context   
-                .getSystemService(Context.CONNECTIVITY_SERVICE);   
-        NetworkInfo networkINfo = cm.getActiveNetworkInfo();
-        if (networkINfo != null && networkINfo.getType() == ConnectivityManager.TYPE_WIFI) {   
-            return true;   
-        }
-        return false;   
-    }
-	
-	public static String getNetType(Context context){
-        String type = "unknown";
-        if (CommonUtil.isWifi(context)){
-            type = "wifi";
-        }
-        else {
-            
-        }
-        return type;
-    }
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/EditPage.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/EditPage.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/EditPage.java	(revision )
@@ -1,722 +0,0 @@
-/*
- * Offical Website:http://www.mob.com
- * Support QQ: 4006852216
- * Offical Wechat Account:ShareSDK   (We will inform you our updated news at the first time by Wechat, if we release a new version. If you get any problem, you can also contact us with Wechat, we will reply you within 24 hours.)
- *
- * Copyright (c) 2013 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.classic;
-
-import static com.mob.tools.utils.BitmapHelper.blur;
-import static com.mob.tools.utils.BitmapHelper.captureView;
-import static com.mob.tools.utils.R.dipToPx;
-import static com.mob.tools.utils.R.getBitmapRes;
-import static com.mob.tools.utils.R.getScreenWidth;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-
-import android.app.Activity;
-import android.content.Context;
-import android.content.res.Configuration;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.graphics.Typeface;
-import android.graphics.drawable.BitmapDrawable;
-import android.graphics.drawable.ColorDrawable;
-import android.graphics.drawable.Drawable;
-import android.graphics.drawable.LayerDrawable;
-import android.os.Handler.Callback;
-import android.os.Message;
-import android.text.Editable;
-import android.text.TextWatcher;
-import android.util.TypedValue;
-import android.view.Gravity;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.Window;
-import android.view.WindowManager;
-import android.view.inputmethod.InputMethodManager;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.FrameLayout;
-import android.widget.HorizontalScrollView;
-import android.widget.ImageView;
-import android.widget.ImageView.ScaleType;
-import android.widget.LinearLayout;
-import android.widget.LinearLayout.LayoutParams;
-import android.widget.ProgressBar;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-import android.widget.Toast;
-import cn.sharesdk.framework.CustomPlatform;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.ShareSDK;
-import cn.sharesdk.framework.TitleLayout;
-
-import com.mob.tools.utils.UIHandler;
-import com.sharesdk.onekeyshare.PicViewer;
-import com.sharesdk.onekeyshare.ShareCore;
-
-/**
- * Photo-text Sharing will be handling in this page
- * <p>
- * note:
- * wechat, yixin, qzone, etc. are shared in their clients, not in this page
- */
-public class EditPage extends com.sharesdk.onekeyshare.EditPageFakeActivity implements OnClickListener, TextWatcher {
-	private static final int MAX_TEXT_COUNT = 140;
-	private static final int DIM_COLOR = 0x7f323232;
-	private RelativeLayout rlPage;
-	private TitleLayout llTitle;
-	private LinearLayout llBody;
-	private RelativeLayout rlThumb;
-	// share content editor
-	private EditText etContent;
-	// Words counter
-	private TextView tvCounter;
-	// the pin
-	private ImageView ivPin;
-	// the image info of share image
-	private ImageInfo imgInfo;
-	// shared image container
-	private ImageView ivImage;
-	private ProgressBar progressBar;
-	private Bitmap image;
-	private LinearLayout llPlat;
-//	private LinearLayout llAt;
-	private View[] views;
-	private Drawable background;
-
-	private Platform[] platformList;
-
-	public void setActivity(Activity activity) {
-		super.setActivity(activity);
-		Window win = activity.getWindow();
-		int orientation = activity.getResources().getConfiguration().orientation;
-		if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
-			win.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN
-					| WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
-		} else {
-			win.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE
-					| WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
-		}
-	}
-
-	public void onCreate() {
-		if (shareParamMap == null || platforms == null || platforms.size() < 1) {
-			finish();
-			return;
-		}
-
-		genBackground();
-		activity.setContentView(getPageView());
-		onTextChanged(etContent.getText(), 0, etContent.length(), 0);
-		showThumb();
-
-		// requests platform list and remove platforms share in their clients
-		new Thread(){
-			public void run() {
-				try {
-					platformList = ShareSDK.getPlatformList();
-					if (platformList == null) {
-						return;
-					}
-
-					ArrayList<Platform> list = new ArrayList<Platform>();
-					for (Platform plat : platformList) {
-						String name = plat.getName();
-						if ((plat instanceof CustomPlatform)
-								|| ShareCore.isUseClientToShare(name)) {
-							continue;
-						}
-						list.add(plat);
-					}
-					platformList = new Platform[list.size()];
-					for (int i = 0; i < platformList.length; i++) {
-						platformList[i] = list.get(i);
-					}
-
-					UIHandler.sendEmptyMessage(1, new Callback() {
-						public boolean handleMessage(Message msg) {
-							afterPlatformListGot();
-							return false;
-						}
-					});
-				} catch (Throwable t) {
-					t.printStackTrace();
-				}
-			}
-		}.start();
-	}
-
-	private RelativeLayout getPageView() {
-		rlPage = new RelativeLayout(getContext());
-		rlPage.setBackgroundDrawable(background);
-		if (dialogMode) {
-			RelativeLayout rlDialog = new RelativeLayout(getContext());
-			rlDialog.setBackgroundColor(0xc0323232);
-			int dp_8 = dipToPx(getContext(), 8);
-			int width = getScreenWidth(getContext()) - dp_8 * 2;
-			RelativeLayout.LayoutParams lpDialog = new RelativeLayout.LayoutParams(
-					width, LayoutParams.WRAP_CONTENT);
-			lpDialog.topMargin = dp_8;
-			lpDialog.bottomMargin = dp_8;
-			lpDialog.addRule(RelativeLayout.CENTER_IN_PARENT);
-			rlDialog.setLayoutParams(lpDialog);
-			rlPage.addView(rlDialog);
-
-			rlDialog.addView(getPageTitle());
-			rlDialog.addView(getPageBody());
-			rlDialog.addView(getImagePin());
-		} else {
-			rlPage.addView(getPageTitle());
-			rlPage.addView(getPageBody());
-			rlPage.addView(getImagePin());
-		}
-		return rlPage;
-	}
-
-	// title bar
-	private TitleLayout getPageTitle() {
-		llTitle = new TitleLayout(getContext());
-		llTitle.setId(1);
-//		int resId = getBitmapRes(activity, "title_back");
-//		if (resId > 0) {
-//			llTitle.setBackgroundResource(resId);
-//		}
-		llTitle.getBtnBack().setOnClickListener(this);
-		int resId = getStringRes(activity, "multi_share");
-		if (resId > 0) {
-			llTitle.getTvTitle().setText(resId);
-		}
-		llTitle.getBtnRight().setVisibility(View.VISIBLE);
-		resId = getStringRes(activity, "share");
-		if (resId > 0) {
-			llTitle.getBtnRight().setText(resId);
-		}
-		llTitle.getBtnRight().setOnClickListener(this);
-		RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
-		lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
-		lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
-		llTitle.setLayoutParams(lp);
-
-		return llTitle;
-	}
-
-	// page body
-	private LinearLayout getPageBody() {
-		llBody = new LinearLayout(getContext());
-		llBody.setId(2);
-		int resId = getBitmapRes(activity, "edittext_back");
-		if (resId > 0) {
-			llBody.setBackgroundResource(resId);
-		}
-		llBody.setOrientation(LinearLayout.VERTICAL);
-		RelativeLayout.LayoutParams lpBody = new RelativeLayout.LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpBody.addRule(RelativeLayout.ALIGN_LEFT, llTitle.getId());
-		lpBody.addRule(RelativeLayout.BELOW, llTitle.getId());
-		lpBody.addRule(RelativeLayout.ALIGN_RIGHT, llTitle.getId());
-		if (!dialogMode) {
-			lpBody.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
-		}
-		int dp_3 = dipToPx(getContext(), 3);
-		lpBody.setMargins(dp_3, dp_3, dp_3, dp_3);
-		llBody.setLayoutParams(lpBody);
-
-		llBody.addView(getMainBody());
-		llBody.addView(getSep());
-		llBody.addView(getPlatformList());
-
-		return llBody;
-	}
-
-	private LinearLayout getMainBody() {
-		LinearLayout llMainBody = new LinearLayout(getContext());
-		llMainBody.setOrientation(LinearLayout.VERTICAL);
-		LayoutParams lpMain = new LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		lpMain.weight = 1;
-		int dp_4 = dipToPx(getContext(), 4);
-		lpMain.setMargins(dp_4, dp_4, dp_4, dp_4);
-		llMainBody.setLayoutParams(lpMain);
-
-		LinearLayout llContent = new LinearLayout(getContext());
-		LayoutParams lpContent = new LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		lpContent.weight = 1;
-		llMainBody.addView(llContent, lpContent);
-
-		// share content editor
-		etContent = new EditText(getContext());
-		etContent.setGravity(Gravity.LEFT | Gravity.TOP);
-		etContent.setBackgroundDrawable(null);
-		etContent.setText(String.valueOf(shareParamMap.get("text")));
-		etContent.addTextChangedListener(this);
-		LayoutParams lpEt = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpEt.weight = 1;
-		etContent.setLayoutParams(lpEt);
-		llContent.addView(etContent);
-
-		llContent.addView(getThumbView());
-		llMainBody.addView(getBodyBottom());
-
-		return llMainBody;
-	}
-
-	// shared image container
-	private RelativeLayout getThumbView() {
-		rlThumb = new RelativeLayout(getContext());
-		rlThumb.setId(1);
-		int dp_82 = dipToPx(getContext(), 82);
-		int dp_98 = dipToPx(getContext(), 98);
-		LayoutParams lpThumb
-				= new LayoutParams(dp_82, dp_98);
-		rlThumb.setLayoutParams(lpThumb);
-
-		ivImage = new ImageView(getContext());
-		int resId = getBitmapRes(activity, "btn_back_nor");
-		if (resId > 0) {
-			ivImage.setBackgroundResource(resId);
-		}
-		ivImage.setScaleType(ScaleType.CENTER_INSIDE);
-		ivImage.setImageBitmap(image);
-
-		int dp_4 = dipToPx(getContext(), 4);
-		ivImage.setPadding(dp_4, dp_4, dp_4, dp_4);
-		int dp_74 = dipToPx(getContext(), 74);
-		RelativeLayout.LayoutParams lpImage
-				= new RelativeLayout.LayoutParams(dp_74, dp_74);
-		int dp_16 = dipToPx(getContext(), 16);
-		int dp_8 = dipToPx(getContext(), 8);
-		lpImage.setMargins(0, dp_16, dp_8, 0);
-		ivImage.setLayoutParams(lpImage);
-		ivImage.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				if (image != null && !image.isRecycled()) {
-					PicViewer pv = new PicViewer();
-					pv.setImageBitmap(image);
-					pv.show(activity, null);
-				}
-			}
-		});
-		rlThumb.addView(ivImage);
-
-		int dp_24 = dipToPx(getContext(), 24);
-		progressBar = new ProgressBar(getContext());
-		progressBar.setPadding(dp_24, dp_24, dp_24, dp_24);
-		RelativeLayout.LayoutParams pb
-			= new RelativeLayout.LayoutParams(dp_74, dp_74);
-		pb.setMargins(0, dp_16, dp_8, 0);
-		progressBar.setLayoutParams(pb);
-		rlThumb.addView(progressBar);
-
-		Button btn = new Button(getContext());
-		btn.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				// remove the photo to share
-				rlThumb.setVisibility(View.GONE);
-				ivPin.setVisibility(View.GONE);
-				removeImage(imgInfo);
-			}
-		});
-		resId = getBitmapRes(activity, "img_cancel");
-		if (resId > 0) {
-			btn.setBackgroundResource(resId);
-		}
-		int dp_20 = dipToPx(getContext(), 20);
-		RelativeLayout.LayoutParams lpBtn
-				= new RelativeLayout.LayoutParams(dp_20, dp_20);
-		lpBtn.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
-		lpBtn.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
-		btn.setLayoutParams(lpBtn);
-		rlThumb.addView(btn);
-
-		if(!haveImage()){
-			rlThumb.setVisibility(View.GONE);
-		}
-		return rlThumb;
-	}
-
-	private void showThumb() {
-		initImageList(new ImageListResultsCallback() {
-			@Override
-			public void onFinish(ArrayList<ImageInfo> results) {
-				if(results == null || results.size() == 0)
-					return;
-				imgInfo = results.get(0);
-				image = imgInfo.bitmap;
-				rlThumb.setVisibility(View.VISIBLE);
-				ivPin.setVisibility(View.VISIBLE);
-				progressBar.setVisibility(View.GONE);
-				ivImage.setImageBitmap(image);
-			}
-		});
-	}
-
-	private LinearLayout getBodyBottom() {
-		LinearLayout llBottom = new LinearLayout(getContext());
-		llBottom.setLayoutParams(new LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
-
-		LinearLayout line = getAtLine(platforms.get(0).getName());
-		if (line != null) {
-			llBottom.addView(line);
-		}
-
-		// Words counter
-		tvCounter = new TextView(getContext());
-		tvCounter.setText(String.valueOf(MAX_TEXT_COUNT));
-		tvCounter.setTextColor(0xffcfcfcf);
-		tvCounter.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-		tvCounter.setTypeface(Typeface.DEFAULT_BOLD);
-		LayoutParams lpCounter = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpCounter.gravity = Gravity.CENTER_VERTICAL;
-		tvCounter.setLayoutParams(lpCounter);
-		llBottom.addView(tvCounter);
-
-		return llBottom;
-	}
-
-	// if platform selected form platform gridview is SinaWeibo,
-	// TencentWeibo, Facebook, or Twitter, there will be a button
-	// in the left-bottom of the page, which provides At-friends function
-	private LinearLayout getAtLine(String platform) {
-		if (!isShowAtUserLayout(platform)) {
-			return null;
-		}
-		LinearLayout llAt = new LinearLayout(getContext());
-		LayoutParams lpAt = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpAt.rightMargin = dipToPx(getContext(), 4);
-		lpAt.gravity = Gravity.LEFT | Gravity.BOTTOM;
-		lpAt.weight = 1;
-		llAt.setLayoutParams(lpAt);
-		llAt.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				FollowListPage subPage = new FollowListPage();
-				subPage.setPlatform(platforms.get(0));
-				subPage.showForResult(activity, null, EditPage.this);
-			}
-		});
-
-		TextView tvAt = new TextView(getContext());
-		int resId = getBitmapRes(activity, "btn_back_nor");
-		if (resId > 0) {
-			tvAt.setBackgroundResource(resId);
-		}
-		int dp_32 = dipToPx(getContext(), 32);
-		tvAt.setLayoutParams(new LayoutParams(dp_32, dp_32));
-		tvAt.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-		tvAt.setText(getAtUserButtonText(platform));
-		int dp_2 = dipToPx(getContext(), 2);
-		tvAt.setPadding(0, 0, 0, dp_2);
-		tvAt.setTypeface(Typeface.DEFAULT_BOLD);
-		tvAt.setTextColor(0xff000000);
-		tvAt.setGravity(Gravity.CENTER);
-		llAt.addView(tvAt);
-
-		TextView tvName = new TextView(getContext());
-		tvName.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-		tvName.setTextColor(0xff000000);
-		resId = getStringRes(activity, "list_friends");
-		String text = getContext().getString(resId, getName(platform));
-		tvName.setText(text);
-		LayoutParams lpName = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpName.gravity = Gravity.CENTER_VERTICAL;
-		tvName.setLayoutParams(lpName);
-		llAt.addView(tvName);
-
-		return llAt;
-	}
-
-	private View getSep() {
-		View vSep = new View(getContext());
-		vSep.setBackgroundColor(0xff000000);
-		int dp_1 = dipToPx(getContext(), 1);
-		LayoutParams lpSep = new LayoutParams(
-				LayoutParams.MATCH_PARENT, dp_1);
-		vSep.setLayoutParams(lpSep);
-		return vSep;
-	}
-
-	// platform logos
-	private LinearLayout getPlatformList() {
-		LinearLayout llToolBar = new LinearLayout(getContext());
-		LayoutParams lpTb = new LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		llToolBar.setLayoutParams(lpTb);
-
-		TextView tvShareTo = new TextView(getContext());
-		int resId = getStringRes(activity, "share_to");
-		if (resId > 0) {
-			tvShareTo.setText(resId);
-		}
-		tvShareTo.setTextColor(0xffcfcfcf);
-		tvShareTo.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-		int dp_9 = dipToPx(getContext(), 9);
-		LayoutParams lpShareTo = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpShareTo.gravity = Gravity.CENTER_VERTICAL;
-		lpShareTo.setMargins(dp_9, 0, 0, 0);
-		tvShareTo.setLayoutParams(lpShareTo);
-		llToolBar.addView(tvShareTo);
-
-		HorizontalScrollView sv = new HorizontalScrollView(getContext());
-		sv.setHorizontalScrollBarEnabled(false);
-		sv.setHorizontalFadingEdgeEnabled(false);
-		LayoutParams lpSv = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpSv.setMargins(dp_9, dp_9, dp_9, dp_9);
-		sv.setLayoutParams(lpSv);
-		llToolBar.addView(sv);
-
-		llPlat = new LinearLayout(getContext());
-		llPlat.setLayoutParams(new HorizontalScrollView.LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
-		sv.addView(llPlat);
-
-		return llToolBar;
-	}
-
-	// the pin
-	private ImageView getImagePin() {
-		ivPin = new ImageView(getContext());
-		int resId = getBitmapRes(activity, "pin");
-		if (resId > 0) {
-			ivPin.setImageResource(resId);
-		}
-		int dp_80 = dipToPx(getContext(), 80);
-		int dp_36 = dipToPx(getContext(), 36);
-		RelativeLayout.LayoutParams lp
-				= new RelativeLayout.LayoutParams(dp_80, dp_36);
-		lp.topMargin = dipToPx(getContext(), 6);
-		lp.addRule(RelativeLayout.ALIGN_TOP, llBody.getId());
-		lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
-		ivPin.setLayoutParams(lp);
-		ivPin.setVisibility(View.GONE);
-
-		return ivPin;
-	}
-
-	private void genBackground() {
-		background = new ColorDrawable(DIM_COLOR);
-		if (backgroundView != null) {
-			try {
-				Bitmap bgBm = captureView(backgroundView, backgroundView.getWidth(), backgroundView.getHeight());
-				bgBm = blur(bgBm, 20, 8);
-				BitmapDrawable blurBm = new BitmapDrawable(activity.getResources(), bgBm);
-				background = new LayerDrawable(new Drawable[] {blurBm, background});
-			} catch (Throwable e) {
-				e.printStackTrace();
-			}
-		}
-	}
-
-	private String getName(String platform) {
-		if (platform == null) {
-			return "";
-		}
-
-		int resId = getStringRes(getContext(), platform.toLowerCase());
-		return getContext().getString(resId);
-	}
-
-	public void onClick(View v) {
-		if (v.equals(llTitle.getBtnBack())) {
-			Platform plat = null;
-			for (int i = 0; i < views.length; i++) {
-				if (views[i].getVisibility() == View.INVISIBLE) {
-					plat = platformList[i];
-					break;
-				}
-			}
-
-			// a statistics of Cancel-sharing
-			if (plat != null) {
-				ShareSDK.logDemoEvent(5, plat);
-			}
-			finish();
-			return;
-		}
-
-		if (v.equals(llTitle.getBtnRight())) {
-			String text = etContent.getText().toString();
-			shareParamMap.put("text", text);
-
-			platforms.clear();
-			for (int i = 0; i < views.length; i++) {
-				if (views[i].getVisibility() != View.VISIBLE) {
-					platforms.add(platformList[i]);
-				}
-			}
-
-			if (platforms.size() > 0) {
-				setResultAndFinish();
-			} else {
-				int resId = getStringRes(activity, "select_one_plat_at_least");
-				if (resId > 0) {
-					Toast.makeText(getContext(), resId, Toast.LENGTH_SHORT).show();
-				}
-			}
-			return;
-		}
-
-		if (v instanceof FrameLayout) {
-			((FrameLayout) v).getChildAt(1).performClick();
-			return;
-		}
-
-		if (v.getVisibility() == View.INVISIBLE) {
-			v.setVisibility(View.VISIBLE);
-		} else {
-			v.setVisibility(View.INVISIBLE);
-		}
-	}
-
-	/** display platform list */
-	public void afterPlatformListGot() {
-		int size = platformList == null ? 0 : platformList.length;
-		views = new View[size];
-
-		final int dp_24 = dipToPx(getContext(), 24);
-		LayoutParams lpItem = new LayoutParams(dp_24, dp_24);
-		final int dp_9 = dipToPx(getContext(), 9);
-		lpItem.setMargins(0, 0, dp_9, 0);
-		FrameLayout.LayoutParams lpMask = new FrameLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
-		lpMask.gravity = Gravity.LEFT | Gravity.TOP;
-		int selection = 0;
-		for (int i = 0; i < size; i++) {
-			FrameLayout fl = new FrameLayout(getContext());
-			fl.setLayoutParams(lpItem);
-			if (i >= size - 1) {
-				fl.setLayoutParams(new LayoutParams(dp_24, dp_24));
-			}
-			llPlat.addView(fl);
-			fl.setOnClickListener(this);
-
-			ImageView iv = new ImageView(getContext());
-			iv.setScaleType(ScaleType.CENTER_INSIDE);
-			iv.setImageBitmap(getPlatLogo(platformList[i]));
-			iv.setLayoutParams(new FrameLayout.LayoutParams(
-					LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
-			fl.addView(iv);
-
-			views[i] = new View(getContext());
-			views[i].setBackgroundColor(0xcfffffff);
-			views[i].setOnClickListener(this);
-			String platformName = platformList[i].getName();
-			for(Platform plat : platforms) {
-				if(platformName.equals(plat.getName())) {
-					views[i].setVisibility(View.INVISIBLE);
-					selection = i;
-				}
-			}
-			views[i].setLayoutParams(lpMask);
-			fl.addView(views[i]);
-		}
-
-		final int postSel = selection;
-		UIHandler.sendEmptyMessageDelayed(0, 333, new Callback() {
-			public boolean handleMessage(Message msg) {
-				HorizontalScrollView hsv = (HorizontalScrollView)llPlat.getParent();
-				hsv.scrollTo(postSel * (dp_24 + dp_9), 0);
-				return false;
-			}
-		});
-	}
-
-	private Bitmap getPlatLogo(Platform plat) {
-		if (plat == null) {
-			return null;
-		}
-
-		String name = plat.getName();
-		if (name == null) {
-			return null;
-		}
-
-		String resName = "logo_" + plat.getName();
-		int resId = getBitmapRes(activity, resName.toLowerCase());
-		if(resId > 0) {
-			return BitmapFactory.decodeResource(activity.getResources(), resId);
-		}
-		return null;
-	}
-
-	public void beforeTextChanged(CharSequence s, int start, int count,
-			int after) {
-
-	}
-
-	public void onTextChanged(CharSequence s, int start, int before, int count) {
-		int remain = MAX_TEXT_COUNT - etContent.length();
-		tvCounter.setText(String.valueOf(remain));
-		tvCounter.setTextColor(remain > 0 ? 0xffcfcfcf : 0xffff0000);
-	}
-
-	public void afterTextChanged(Editable s) {
-
-	}
-
-	public void onResult(HashMap<String, Object> data) {
-		String atText = getJoinSelectedUser(data);
-		if(atText != null) {
-			etContent.append(atText);
-		}
-	}
-
-	private void hideSoftInput() {
-		try {
-			InputMethodManager imm = (InputMethodManager) activity.getSystemService(
-					Context.INPUT_METHOD_SERVICE);
-			imm.hideSoftInputFromWindow(etContent.getWindowToken(), 0);
-		} catch (Throwable t) {
-			t.printStackTrace();
-		}
-	}
-
-	public boolean onFinish() {
-		hideSoftInput();
-		return super.onFinish();
-	}
-
-	public void onConfigurationChanged(Configuration newConfig) {
-		int orientation = activity.getResources().getConfiguration().orientation;
-		if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
-			hideSoftInput();
-			Window win = activity.getWindow();
-			win.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN
-					| WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
-			rlPage.setBackgroundColor(DIM_COLOR);
-			rlPage.postDelayed(new Runnable() {
-				public void run() {
-					genBackground();
-					rlPage.setBackgroundDrawable(background);
-				}
-			}, 1000);
-		} else {
-			hideSoftInput();
-			Window win = activity.getWindow();
-			win.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE
-					| WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
-			rlPage.setBackgroundColor(DIM_COLOR);
-			rlPage.postDelayed(new Runnable() {
-				public void run() {
-					genBackground();
-					rlPage.setBackgroundDrawable(background);
-				}
-			}, 1000);
-		}
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/VerityCodeReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/VerityCodeReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/VerityCodeReq.java	(revision )
@@ -1,38 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  VerityCodeReq
- * @Description: 发送验证码
- * @author YY
- * @date 2015年6月3日 下午4:11:57
- */
-public class VerityCodeReq extends HttpReq {
-	private String user_tel;
-	
-	public VerityCodeReq(int reqid, String user_tel) {
-		super();
-		this.id = reqid;
-		this.user_tel = user_tel;
-	}
-	
-	public String getUser_tel() {
-		return user_tel;
-	}
-
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-
-	@Override
-	public String getParams() {
-		return "?moblie=" + user_tel;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ThemeShareCallback.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ThemeShareCallback.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ThemeShareCallback.java	(revision )
@@ -1,17 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare;
-
-import java.util.HashMap;
-
-import cn.sharesdk.framework.Platform;
-
-public interface ThemeShareCallback {
-	public void doShare(HashMap<Platform, HashMap<String, Object>> shareData);
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/HotsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/HotsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/HotsAdapter.java	(revision )
@@ -1,68 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.HotWords;
-
-import java.util.ArrayList;
-/**
- * 
- * @ClassName:  HotsAdapter
- * @Description: 展示热词
- * @author YY
- * @date 2015年7月3日 上午10:18:05
- */
-public class HotsAdapter extends BaseAdapter {
-	
-	private ArrayList<HotWords> mList;
-	private Context mContext;
-	private LayoutInflater mInflater;
-	
-	public HotsAdapter(ArrayList<HotWords> list,Context context){
-		super();
-		this.mList = list;
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		HotWords searchhots = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.searchhots, null);
-			holder.tv_hots = (TextView) convertView.findViewById(R.id.tv_hots);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		holder.tv_hots.setText(searchhots.getName());
-		
-		return convertView;
-	}
-
-	static class ViewHolder{
-		TextView tv_hots;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/BottomStatusBar.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/BottomStatusBar.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/BottomStatusBar.java	(revision )
@@ -1,65 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/***
- * @ClassName: BottomStatusBar
- * @Description: 底部状态栏
- * @author zxl
- * @date 2015年6月2日 下午2:18:42
- */
-public class BottomStatusBar implements Serializable {
-	
-	private static final long serialVersionUID = -1271759838712168711L;
-	/** 总价 */
-	private double amount;
-	/** 免费配送价 */
-	private double free_send_price;
-	/** 商品数量 */
-	private int count;
-	/** 起送价 */
-	private double send_out_price;
-	/** 运费 */
-	private double send_price;
-
-	public double getAmount() {
-		return amount;
-	}
-
-	public void setAmount(double amount) {
-		this.amount = amount;
-	}
-
-	public double getFree_send_price() {
-		return free_send_price;
-	}
-
-	public void setFree_send_price(double free_send_price) {
-		this.free_send_price = free_send_price;
-	}
-
-	public int getCount() {
-		return count;
-	}
-
-	public void setCount(int count) {
-		this.count = count;
-	}
-
-	public double getSend_out_price() {
-		return send_out_price;
-	}
-
-	public void setSend_out_price(double send_out_price) {
-		this.send_out_price = send_out_price;
-	}
-
-	public double getSend_price() {
-		return send_price;
-	}
-
-	public void setSend_price(double send_price) {
-		this.send_price = send_price;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/PlatformGridView.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/PlatformGridView.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/PlatformGridView.java	(revision )
@@ -1,490 +0,0 @@
-/*
- * Offical Website:http://www.mob.com
- * Support QQ: 4006852216
- * Offical Wechat Account:ShareSDK   (We will inform you our updated news at the first time by Wechat, if we release a new version. If you get any problem, you can also contact us with Wechat, we will reply you within 24 hours.)
- *
- * Copyright (c) 2013 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.classic;
-
-import static com.mob.tools.utils.R.getBitmapRes;
-
-import java.lang.reflect.Method;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.HashMap;
-import java.util.List;
-
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.os.Build;
-import android.os.Handler.Callback;
-import android.os.Message;
-import android.util.AttributeSet;
-import android.util.TypedValue;
-import android.view.Gravity;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.ImageView;
-import android.widget.ImageView.ScaleType;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.mob.tools.gui.ViewPagerAdapter;
-import com.mob.tools.gui.ViewPagerClassic;
-import com.mob.tools.utils.UIHandler;
-import com.sharesdk.onekeyshare.CustomerLogo;
-
-/** platform logo list gridview */
-public class PlatformGridView extends LinearLayout implements OnClickListener, Callback {
-	private static final int MIN_CLICK_INTERVAL = 1000;
-	private static final int MSG_PLATFORM_LIST_GOT = 1;
-	// grids in each line
-	private int LINE_PER_PAGE;
-	// lines in each page
-	private int COLUMN_PER_LINE;
-	// grids in each page
-	private int PAGE_SIZE;
-	// grids container
-	private ViewPagerClassic pager;
-	// indicators
-	private ImageView[] points;
-	private Bitmap grayPoint;
-	private Bitmap bluePoint;
-	// Determine whether don't jump editpage and share directly
-	private boolean silent;
-	// platforms
-	private Platform[] platformList;
-	// data to share
-	private HashMap<String, Object> reqData;
-	private PlatformListPage parent;
-	private ArrayList<CustomerLogo> customers;
-	private HashMap<String, String> hiddenPlatforms;
-	private View bgView;
-	private long lastClickTime;
-
-	public PlatformGridView(Context context) {
-		super(context);
-		init(context);
-	}
-
-	public PlatformGridView(Context context, AttributeSet attrs) {
-		super(context, attrs);
-		init(context);
-	}
-
-	private void init(final Context context) {
-		calPageSize();
-		setOrientation(VERTICAL);
-
-		pager = new ViewPagerClassic(context);
-		disableOverScrollMode(pager);
-		pager.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
-		addView(pager);
-
-		// in order to have a better UI effect, opening a thread request the list of platforms
-		new Thread() {
-			public void run() {
-				try {
-					platformList = ShareSDK.getPlatformList();
-					if (platformList == null) {
-						platformList = new Platform[0];
-					}
-					UIHandler.sendEmptyMessage(MSG_PLATFORM_LIST_GOT, PlatformGridView.this);
-				} catch (Throwable t) {
-					t.printStackTrace();
-				}
-			}
-		}.start();
-	}
-
-	//TODO 修改分享的样式
-	private void calPageSize() {
-		float scrW = com.mob.tools.utils.R.getScreenWidth(getContext());
-		float scrH = com.mob.tools.utils.R.getScreenHeight(getContext());
-		float whR = scrW / scrH;
-		if (whR < 0.63) {
-			COLUMN_PER_LINE = 2;//3
-			LINE_PER_PAGE = 2;//3
-		} else if (whR < 0.75) {
-			COLUMN_PER_LINE = 2;//3
-			LINE_PER_PAGE = 2;
-		} else {
-			LINE_PER_PAGE = 2;//1
-			if (whR >= 1.75) {
-				COLUMN_PER_LINE = 2;//1
-			} else if (whR >= 1.5) {
-				COLUMN_PER_LINE = 2;//5
-			} else if (whR >= 1.3) {
-				COLUMN_PER_LINE = 2;//4
-			} else {
-				COLUMN_PER_LINE = 2;//3
-			}
-		}
-		PAGE_SIZE = COLUMN_PER_LINE * LINE_PER_PAGE;
-	}
-
-	public boolean handleMessage(Message msg) {
-		switch (msg.what) {
-			case MSG_PLATFORM_LIST_GOT: {
-				afterPlatformListGot();
-			}
-			break;
-		}
-		return false;
-	}
-
-	// initializes the girdview of platforms
-	public void afterPlatformListGot() {
-		PlatformAdapter adapter = new PlatformAdapter(this);
-		pager.setAdapter(adapter);
-		int pageCount = 0;
-		if (platformList != null) {
-			int cusSize = customers == null ? 0 : customers.size();
-			int platSize = platformList == null ? 0 : platformList.length;
-			int hideSize = hiddenPlatforms == null ? 0 : hiddenPlatforms.size();
-			platSize = platSize-hideSize;
-			int size = platSize + cusSize;
-			pageCount = size / PAGE_SIZE;
-			if (size % PAGE_SIZE > 0) {
-				pageCount++;
-			}
-		}
-		points = new ImageView[pageCount];
-		if (points.length <= 0) {
-			return;
-		}
-
-		Context context = getContext();
-		LinearLayout llPoints = new LinearLayout(context);
-		// if the total number of pages exceeds 1, we set the page indicators
-		llPoints.setVisibility(pageCount > 1 ? View.VISIBLE: View.GONE);
-		LayoutParams lpLl = new LayoutParams(
-				LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		lpLl.gravity = Gravity.CENTER_HORIZONTAL;
-		llPoints.setLayoutParams(lpLl);
-		addView(llPoints);
-
-		int dp_5 = com.mob.tools.utils.R.dipToPx(context, 5);
-		int resId = getBitmapRes(getContext(), "light_blue_point");
-		if (resId > 0) {
-			grayPoint = BitmapFactory.decodeResource(getResources(), resId);
-		}
-		resId = getBitmapRes(getContext(), "blue_point");
-		if (resId > 0) {
-			bluePoint = BitmapFactory.decodeResource(getResources(), resId);
-		}
-		for (int i = 0; i < pageCount; i++) {
-			points[i] = new ImageView(context);
-			points[i].setScaleType(ScaleType.CENTER_INSIDE);
-			points[i].setImageBitmap(grayPoint);
-			LayoutParams lpIv = new LayoutParams(dp_5, dp_5);
-			lpIv.setMargins(dp_5, dp_5, dp_5, 0);
-			points[i].setLayoutParams(lpIv);
-			llPoints.addView(points[i]);
-		}
-		int curPage = pager.getCurrentScreen();
-		points[curPage].setImageBitmap(bluePoint);
-	}
-
-	/** after the screen rotates, this method will be called to refresh the list of gridviews */
-	public void onConfigurationChanged() {
-		int curFirst = pager.getCurrentScreen() * PAGE_SIZE;
-		calPageSize();
-		int newPage = curFirst / PAGE_SIZE;
-
-		removeViewAt(1);
-		afterPlatformListGot();
-
-		pager.setCurrentScreen(newPage);
-	}
-
-	public void setData(HashMap<String, Object> data, boolean silent) {
-		reqData = data;
-		this.silent = silent;
-	}
-
-	public void setHiddenPlatforms(HashMap<String, String> hiddenPlatforms) {
-		this.hiddenPlatforms = hiddenPlatforms;
-	}
-
-	/** Set the Click event of the custom icon */
-	public void setCustomerLogos(ArrayList<CustomerLogo> customers) {
-		this.customers = customers;
-	}
-
-	public void setEditPageBackground(View bgView) {
-		this.bgView = bgView;
-	}
-
-	/** Sets the callback page sharing operations */
-	public void setParent(PlatformListPage parent) {
-		this.parent = parent;
-	}
-
-	public void onClick(View v) {
-		long time = System.currentTimeMillis();
-		if (time - lastClickTime < MIN_CLICK_INTERVAL) {
-			return;
-		}
-		lastClickTime = time;
-
-		ArrayList<Object> platforms = new ArrayList<Object>(1);
-		platforms.add(v.getTag());
-		parent.onPlatformIconClick(v, platforms);
-	}
-
-	// Disable the flashing effect when viewpages sliding to left/right edge
-	private void disableOverScrollMode(View view) {
-		if (Build.VERSION.SDK_INT < 9) {
-			return;
-		}
-		try {
-			Method m = View.class.getMethod("setOverScrollMode",
-					new Class[] { Integer.TYPE });
-			m.setAccessible(true);
-			m.invoke(view, new Object[] { Integer.valueOf(2) });
-		} catch (Throwable t) {
-			t.printStackTrace();
-		}
-	}
-
-	/** gridview adapter */
-	private static class PlatformAdapter extends ViewPagerAdapter {
-		private GridView[] girds;
-		private List<Object> logos;
-		private OnClickListener callback;
-		private int lines;
-		private PlatformGridView platformGridView;
-
-		public PlatformAdapter(PlatformGridView platformGridView) {
-			this.platformGridView = platformGridView;
-			logos = new ArrayList<Object>();
-			Platform[] platforms = platformGridView.platformList;
-			HashMap<String, String> hiddenPlatforms = platformGridView.hiddenPlatforms;
-			if (platforms != null) {
-				if (hiddenPlatforms != null && hiddenPlatforms.size() > 0) {
-					ArrayList<Platform> ps = new ArrayList<Platform>();
-					for (Platform p : platforms) {
-						if (hiddenPlatforms.containsKey(p.getName())) {
-							continue;
-						}
-						ps.add(p);
-					}
-
-					platforms = new Platform[ps.size()];
-					for (int i = 0; i < platforms.length; i++) {
-						platforms[i] = ps.get(i);
-					}
-				}
-
-				logos.addAll(Arrays.asList(platforms));
-			}
-			ArrayList<CustomerLogo> customers = platformGridView.customers;
-			if (customers != null) {
-				logos.addAll(customers);
-			}
-			this.callback = platformGridView;
-			girds = null;
-
-			if (logos != null) {
-				int size = logos.size();
-				int PAGE_SIZE = platformGridView.PAGE_SIZE;
-				int pageCount = size / PAGE_SIZE;
-				if (size % PAGE_SIZE > 0) {
-					pageCount++;
-				}
-				girds = new GridView[pageCount];
-			}
-		}
-
-		public int getCount() {
-			return girds == null ? 0 : girds.length;
-		}
-
-		public View getView(int position, ViewGroup parent) {
-			if (girds[position] == null) {
-				int pageSize = platformGridView.PAGE_SIZE;
-				int curSize = pageSize * position;
-				int listSize = logos == null ? 0 : logos.size();
-				if (curSize + pageSize > listSize) {
-					pageSize = listSize - curSize;
-				}
-				Object[] gridBean = new Object[pageSize];
-				for (int i = 0; i < pageSize; i++) {
-					gridBean[i] = logos.get(curSize + i);
-				}
-
-				if (position == 0) {
-					int COLUMN_PER_LINE = platformGridView.COLUMN_PER_LINE;
-					lines = gridBean.length / COLUMN_PER_LINE;
-					if (gridBean.length % COLUMN_PER_LINE > 0) {
-						lines++;
-					}
-				}
-				girds[position] = new GridView(this);
-				girds[position].setData(lines, gridBean);
-			}
-
-			return girds[position];
-		}
-
-		/** This method will be called after sliding the gridview */
-		public void onScreenChange(int currentScreen, int lastScreen) {
-			ImageView[] points = platformGridView.points;
-			for (int i = 0; i < points.length; i++) {
-				points[i].setImageBitmap(platformGridView.grayPoint);
-			}
-
-			points[currentScreen].setImageBitmap(platformGridView.bluePoint);
-		}
-
-	}
-
-	/** a simple gridview */
-	private static class GridView extends LinearLayout {
-		private Object[] beans;
-		private OnClickListener callback;
-		private int lines;
-		private PlatformAdapter platformAdapter;
-
-		public GridView(PlatformAdapter platformAdapter) {
-			super(platformAdapter.platformGridView.getContext());
-			this.platformAdapter = platformAdapter;
-			this.callback = platformAdapter.callback;
-		}
-
-		public void setData(int lines, Object[] beans) {
-			this.lines = lines;
-			this.beans = beans;
-			init();
-		}
-
-		private void init() {
-			int dp_5 = com.mob.tools.utils.R.dipToPx(getContext(), 5);
-			setPadding(0, dp_5, 0, dp_5);
-			setOrientation(VERTICAL);
-
-			int size = beans == null ? 0 : beans.length;
-			int COLUMN_PER_LINE = platformAdapter.platformGridView.COLUMN_PER_LINE;
-			int lineSize = size / COLUMN_PER_LINE;
-			if (size % COLUMN_PER_LINE > 0) {
-				lineSize++;
-			}
-			LayoutParams lp = new LayoutParams(
-					LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
-			lp.weight = 1;
-			for (int i = 0; i < lines; i++) {
-				LinearLayout llLine = new LinearLayout(getContext());
-				llLine.setLayoutParams(lp);
-				llLine.setPadding(dp_5, 0, dp_5, 0);
-				addView(llLine);
-
-				if (i >= lineSize) {
-					continue;
-				}
-
-				for (int j = 0; j < COLUMN_PER_LINE; j++) {
-					final int index = i * COLUMN_PER_LINE + j;
-					if (index >= size) {
-						LinearLayout llItem = new LinearLayout(getContext());
-						llItem.setLayoutParams(lp);
-						llLine.addView(llItem);
-						continue;
-					}
-
-					final LinearLayout llItem = getView(index, callback, getContext());
-					llItem.setTag(beans[index]);
-					llItem.setLayoutParams(lp);
-					llLine.addView(llItem);
-				}
-			}
-		}
-
-		private LinearLayout getView(int position, OnClickListener ocL, Context context) {
-			Bitmap logo;
-			String label;
-			OnClickListener listener;
-			if (beans[position] instanceof Platform) {
-				logo = getIcon((Platform) beans[position]);
-				label = getName((Platform) beans[position]);
-				listener = ocL;
-			} else {
-				logo = ((CustomerLogo) beans[position]).enableLogo;
-				label = ((CustomerLogo) beans[position]).label;
-				listener = ocL;
-			}
-
-			LinearLayout ll = new LinearLayout(context);
-			ll.setOrientation(LinearLayout.VERTICAL);
-
-			ImageView iv = new ImageView(context);
-			int dp_5 = com.mob.tools.utils.R.dipToPx(context, 5);
-			iv.setPadding(dp_5, dp_5, dp_5, dp_5);
-			iv.setScaleType(ScaleType.CENTER_INSIDE);
-			LayoutParams lpIv = new LayoutParams(
-					LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-			lpIv.setMargins(dp_5, dp_5, dp_5, dp_5);
-			lpIv.gravity = Gravity.CENTER_HORIZONTAL;
-			iv.setLayoutParams(lpIv);
-			iv.setImageBitmap(logo);
-			ll.addView(iv);
-
-			TextView tv = new TextView(context);
-			tv.setTextColor(0xff000000);
-			tv.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 14);
-			tv.setSingleLine();
-			tv.setIncludeFontPadding(false);
-			LayoutParams lpTv = new LayoutParams(
-					LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-			lpTv.gravity = Gravity.CENTER_HORIZONTAL;
-			lpTv.weight = 1;
-			lpTv.setMargins(dp_5, 0, dp_5, dp_5);
-			tv.setLayoutParams(lpTv);
-			tv.setText(label);
-			ll.addView(tv);
-			ll.setOnClickListener(listener);
-
-			return ll;
-		}
-
-		private Bitmap getIcon(Platform plat) {
-			if (plat == null) {
-				return null;
-			}
-
-			String name = plat.getName();
-			if (name == null) {
-				return null;
-			}
-
-			String resName = "logo_" + plat.getName();
-			int resId = getBitmapRes(getContext(), resName.toLowerCase());
-			return BitmapFactory.decodeResource(getResources(), resId);
-		}
-
-		private String getName(Platform plat) {
-			if (plat == null) {
-				return "";
-			}
-
-			String name = plat.getName();
-			if (name == null) {
-				return "";
-			}
-
-			int resId = com.mob.tools.utils.R.getStringRes(getContext(), plat.getName().toLowerCase());
-			if (resId > 0) {
-				return getContext().getString(resId);
-			}
-			return null;
-		}
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/FollowListPage.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/FollowListPage.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/FollowListPage.java	(revision )
@@ -1,459 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.skyblue;
-
-import static com.mob.tools.utils.R.dipToPx;
-import static com.mob.tools.utils.R.getBitmapRes;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-
-import android.app.Activity;
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.graphics.Canvas;
-import android.os.Handler.Callback;
-import android.os.Message;
-import android.util.TypedValue;
-import android.view.Gravity;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.FrameLayout;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.LinearLayout.LayoutParams;
-import android.widget.ProgressBar;
-import android.widget.TextView;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.PlatformActionListener;
-import cn.sharesdk.framework.TitleLayout;
-
-import com.mob.tools.gui.AsyncImageView;
-import com.mob.tools.gui.BitmapProcessor;
-import com.mob.tools.gui.PullToRefreshListAdapter;
-import com.mob.tools.gui.PullToRefreshView;
-import com.mob.tools.utils.UIHandler;
-import com.sharesdk.onekeyshare.FollowerListFakeActivity;
-
-/** 获取好友或关注列表 */
-public class FollowListPage extends FollowerListFakeActivity implements OnClickListener, OnItemClickListener {
-	private TitleLayout llTitle;
-	private FollowAdapter adapter;
-	private int lastPosition = -1;
-
-
-	public void onCreate() {
-		LinearLayout llPage = new LinearLayout(getContext());
-		llPage.setBackgroundColor(0xfff5f5f5);
-		llPage.setOrientation(LinearLayout.VERTICAL);
-		activity.setContentView(llPage);
-
-		// 标题栏
-		llTitle = new TitleLayout(getContext());
-		int resId = getBitmapRes(getContext(), "title_back");
-		if (resId > 0) {
-			llTitle.setBackgroundResource(resId);
-		}
-		llTitle.getBtnBack().setOnClickListener(this);
-		resId = getStringRes(getContext(), "multi_share");
-		if (resId > 0) {
-			llTitle.getTvTitle().setText(resId);
-		}
-		llTitle.getBtnRight().setVisibility(View.VISIBLE);
-		resId = getStringRes(getContext(), "finish");
-		if (resId > 0) {
-			llTitle.getBtnRight().setText(resId);
-		}
-		llTitle.getBtnRight().setOnClickListener(this);
-		llTitle.setLayoutParams(new LinearLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
-		llPage.addView(llTitle);
-
-		FrameLayout flPage = new FrameLayout(getContext());
-		LinearLayout.LayoutParams lpFl = new LinearLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		lpFl.weight = 1;
-		flPage.setLayoutParams(lpFl);
-		llPage.addView(flPage);
-
-		// 关注（或朋友）列表
-		PullToRefreshView followList = new PullToRefreshView(getContext());
-		FrameLayout.LayoutParams lpLv = new FrameLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
-		followList.setLayoutParams(lpLv);
-		flPage.addView(followList);
-		adapter = new FollowAdapter(followList);
-		adapter.setPlatform(platform);
-		followList.setAdapter(adapter);
-		adapter.getListView().setOnItemClickListener(this);
-
-		ImageView ivShadow = new ImageView(getContext());
-		resId = getBitmapRes(getContext(), "title_shadow");
-		if (resId > 0) {
-			ivShadow.setBackgroundResource(resId);
-		}
-		FrameLayout.LayoutParams lpSd = new FrameLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		ivShadow.setLayoutParams(lpSd);
-		flPage.addView(ivShadow);
-
-		// 请求数据
-		followList.performPulling(true);
-	}
-
-	public void onClick(View v) {
-		if (v.equals(llTitle.getBtnRight())) {
-			ArrayList<String> selected = new ArrayList<String>();
-			for (int i = 0, size = adapter.getCount(); i < size; i++) {
-				if (adapter.getItem(i).checked) {
-					selected.add(adapter.getItem(i).atName);
-				}
-			}
-
-			setResultForChecked(selected);
-		}
-
-		finish();
-	}
-
-	public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-		String name = platform.getName();
-		if (isRadioMode(name)) {
-			if(lastPosition >= 0) {
-				Following lastFollwing = adapter.getItem(lastPosition);
-				lastFollwing.checked = false;
-			}
-			lastPosition  = position;
-		}
-		Following following = adapter.getItem(position);
-		following.checked = !following.checked;
-		adapter.notifyDataSetChanged();
-	}
-
-	private static class FollowAdapter extends PullToRefreshListAdapter
-			implements PlatformActionListener, Callback {
-		private static final int FOLLOW_LIST_EMPTY = 2;
-		private int curPage;
-		private ArrayList<Following> follows;
-		private HashMap<String, Boolean> map;
-		private boolean hasNext;
-		private Platform platform;
-		private PRTHeader llHeader;
-		private Bitmap bmChd;
-		private Bitmap bmUnch;
-
-		public FollowAdapter(PullToRefreshView view) {
-			super(view);
-			curPage = -1;
-			hasNext = true;
-			map = new HashMap<String, Boolean>();
-			follows = new ArrayList<Following>();
-
-			llHeader = new PRTHeader(getContext());
-
-			int resId = getBitmapRes(getContext(), "auth_follow_cb_chd");
-			if (resId > 0) {
-				bmChd = BitmapFactory.decodeResource(view.getResources(), resId);
-			}
-			resId = getBitmapRes(getContext(), "auth_follow_cb_unc");
-			if (resId > 0) {
-				bmUnch = BitmapFactory.decodeResource(view.getResources(), resId);
-			}
-		}
-
-		public void setPlatform(Platform platform) {
-			this.platform = platform;
-			platform.setPlatformActionListener(this);
-		}
-
-		private void next() {
-			if (hasNext) {
-				platform.listFriend(15, curPage + 1, null);
-			}
-		}
-
-		public View getView(int position, View convertView, ViewGroup parent) {
-			FollowListItem item = null;
-			boolean simpleMode = "FacebookMessenger".equals(platform.getName());
-			if (convertView == null) {
-				LinearLayout llItem = new LinearLayout(parent.getContext());
-				item = new FollowListItem();
-				llItem.setTag(item);
-				convertView = llItem;
-
-				int dp_52 = com.mob.tools.utils.R.dipToPx(getContext(), 52);
-				int dp_10 = com.mob.tools.utils.R.dipToPx(parent.getContext(), 10);
-				int dp_5 = com.mob.tools.utils.R.dipToPx(parent.getContext(), 5);
-
-				if(!simpleMode) {
-					item.aivIcon = new AsyncImageView(getContext());
-					LinearLayout.LayoutParams lpIcon = new LinearLayout.LayoutParams(dp_52, dp_52);
-					lpIcon.gravity = Gravity.CENTER_VERTICAL;
-					lpIcon.setMargins(dp_10, dp_5, dp_10, dp_5);
-					item.aivIcon.setLayoutParams(lpIcon);
-					llItem.addView(item.aivIcon);
-				}
-
-				LinearLayout llText = new LinearLayout(parent.getContext());
-				llText.setPadding(0, dp_10, dp_10, dp_10);
-				llText.setOrientation(LinearLayout.VERTICAL);
-				LinearLayout.LayoutParams lpText = new LinearLayout.LayoutParams(
-						LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-				lpText.gravity = Gravity.CENTER_VERTICAL;
-				lpText.weight = 1;
-				llText.setLayoutParams(lpText);
-				llItem.addView(llText);
-
-				item.tvName = new TextView(parent.getContext());
-				item.tvName.setTextColor(0xff000000);
-				item.tvName.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-				item.tvName.setSingleLine();
-				if(simpleMode) {
-					item.tvName.setPadding(dp_10, 0, 0, 0);
-				}
-				llText.addView(item.tvName);
-
-				if(!simpleMode) {
-					item.tvSign = new TextView(parent.getContext());
-					item.tvSign.setTextColor(0x7f000000);
-					item.tvSign.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 14);
-					item.tvSign.setSingleLine();
-					llText.addView(item.tvSign);
-				}
-
-				item.ivCheck = new ImageView(parent.getContext());
-				item.ivCheck.setPadding(0, 0, dp_10, 0);
-				LinearLayout.LayoutParams lpCheck = new LinearLayout.LayoutParams(
-						LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-				lpCheck.gravity = Gravity.CENTER_VERTICAL;
-				item.ivCheck.setLayoutParams(lpCheck);
-				llItem.addView(item.ivCheck);
-			} else {
-				item = (FollowListItem) convertView.getTag();
-			}
-
-			Following following = getItem(position);
-			item.tvName.setText(following.screenName);
-			if(!simpleMode) {
-				item.tvSign.setText(following.description);
-			}
-			item.ivCheck.setImageBitmap(following.checked ? bmChd : bmUnch);
-			if(!simpleMode) {
-				if (isFling()) {
-					Bitmap bm = BitmapProcessor.getBitmapFromCache(following.icon);
-					if (bm != null && !bm.isRecycled()) {
-						item.aivIcon.setImageBitmap(bm);
-					} else {
-						item.aivIcon.execute(null, 0);
-					}
-				} else {
-					item.aivIcon.execute(following.icon,0);
-				}
-			}
-
-			if (position == getCount() - 1) {
-				next();
-			}
-			return convertView;
-		}
-
-		public Following getItem(int position) {
-			return follows.get(position);
-		}
-
-		public long getItemId(int position) {
-			return position;
-		}
-
-		public int getCount() {
-			return follows == null ? 0 : follows.size();
-		}
-
-		public View getHeaderView() {
-			return llHeader;
-		}
-
-		public void onPullDown(int percent) {
-			llHeader.onPullDown(percent);
-		}
-
-		public void onRequest() {
-			llHeader.onRequest();
-			curPage = -1;
-			hasNext = true;
-			map.clear();
-			next();
-		}
-
-		public void onCancel(Platform plat, int action) {
-			UIHandler.sendEmptyMessage(-1, this);
-		}
-
-		public void onComplete(Platform plat, int action, HashMap<String, Object> res) {
-			FollowersResult followersResult = parseFollowers(platform.getName(), res, map);
-
-			if(followersResult == null) {
-				UIHandler.sendEmptyMessage(FOLLOW_LIST_EMPTY, this);
-				return;
-			}
-			hasNext = followersResult.hasNextPage;
-			if (followersResult.list != null && followersResult.list.size() > 0) {
-				curPage++;
-				Message msg = new Message();
-				msg.what = 1;
-				msg.obj = followersResult.list;
-				UIHandler.sendMessage(msg, this);
-			}
-		}
-
-		public void onError(Platform plat, int action, Throwable t) {
-			t.printStackTrace();
-		}
-
-		public boolean handleMessage(Message msg) {
-			if (msg.what < 0) {
-				((Activity) getContext()).finish();
-			} else if(msg.what == FOLLOW_LIST_EMPTY) {
-				notifyDataSetChanged();
-			} else {
-				if (curPage <= 0) {
-					follows.clear();
-				}
-				@SuppressWarnings("unchecked")
-				ArrayList<Following> data = (ArrayList<Following>) msg.obj;
-				follows.addAll(data);
-				notifyDataSetChanged();
-			}
-			return false;
-		}
-
-		public void onReversed() {
-			super.onReversed();
-			llHeader.reverse();
-		}
-
-	}
-
-	private static class FollowListItem {
-		public AsyncImageView aivIcon;
-		public TextView tvName;
-		public TextView tvSign;
-		public ImageView ivCheck;
-	}
-
-	private static class PRTHeader extends LinearLayout {
-		private TextView tvHeader;
-		private RotateImageView ivArrow;
-		private ProgressBar pbRefreshing;
-
-		public PRTHeader(Context context) {
-			super(context);
-			setOrientation(VERTICAL);
-
-			LinearLayout llInner = new LinearLayout(context);
-			LinearLayout.LayoutParams lpInner = new LinearLayout.LayoutParams(
-					LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-			lpInner.gravity = Gravity.CENTER_HORIZONTAL;
-			addView(llInner, lpInner);
-
-			ivArrow = new RotateImageView(context);
-			int resId = getBitmapRes(context, "ssdk_oks_ptr_ptr");
-			if (resId > 0) {
-				ivArrow.setImageResource(resId);
-			}
-			int dp_32 = dipToPx(context, 32);
-			LayoutParams lpIv = new LayoutParams(dp_32, dp_32);
-			lpIv.gravity = Gravity.CENTER_VERTICAL;
-			llInner.addView(ivArrow, lpIv);
-
-			pbRefreshing = new ProgressBar(context);
-			llInner.addView(pbRefreshing, lpIv);
-			pbRefreshing.setVisibility(View.GONE);
-
-			tvHeader = new TextView(getContext());
-			tvHeader.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-			tvHeader.setGravity(Gravity.CENTER);
-			int dp_10 = com.mob.tools.utils.R.dipToPx(getContext(), 10);
-			tvHeader.setPadding(dp_10, dp_10, dp_10, dp_10);
-			tvHeader.setTextColor(0xff000000);
-			LayoutParams lpTv = new LayoutParams(
-					LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-			lpTv.gravity = Gravity.CENTER_VERTICAL;
-			llInner.addView(tvHeader, lpTv);
-		}
-
-		public void onPullDown(int percent) {
-			if (percent > 100) {
-				int degree = (percent - 100) * 180 / 20;
-				if (degree > 180) {
-					degree = 180;
-				}
-				if (degree < 0) {
-					degree = 0;
-				}
-				ivArrow.setRotation(degree);
-			} else {
-				ivArrow.setRotation(0);
-			}
-
-			if (percent < 100) {
-				int resId = getStringRes(getContext(), "pull_to_refresh");
-				if (resId > 0) {
-					tvHeader.setText(resId);
-				}
-			} else {
-				int resId = getStringRes(getContext(), "release_to_refresh");
-				if (resId > 0) {
-					tvHeader.setText(resId);
-				}
-			}
-		}
-
-		public void onRequest() {
-			ivArrow.setVisibility(View.GONE);
-			pbRefreshing.setVisibility(View.VISIBLE);
-			int resId = getStringRes(getContext(), "refreshing");
-			if (resId > 0) {
-				tvHeader.setText(resId);
-			}
-		}
-
-		public void reverse() {
-			pbRefreshing.setVisibility(View.GONE);
-			ivArrow.setRotation(180);
-			ivArrow.setVisibility(View.VISIBLE);
-		}
-
-	}
-
-	private static class RotateImageView extends ImageView {
-		private int rotation;
-
-		public RotateImageView(Context context) {
-			super(context);
-		}
-
-		public void setRotation(int degree) {
-			rotation = degree;
-			invalidate();
-		}
-
-		protected void onDraw(Canvas canvas) {
-			canvas.rotate(rotation, getWidth() / 2, getHeight() / 2);
-			super.onDraw(canvas);
-		}
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AKeyWaterActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AKeyWaterActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AKeyWaterActivity.java	(revision )
@@ -1,360 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.os.Bundle;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.Button;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.LocMap;
-import com.anniu.shandiandaojia.db.jsondb.MyAddress;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.lee.wheel.WheelViewTimeActivity;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-/**
- * @ClassName: AKeyWater
- * @Description: 一键送水界面
- * @author YY
- * @date 2015年6月16日 下午12:07:08
- */
-public class AKeyWaterActivity extends BaseActivity {
-	private TextView titleBarTv, name, phone, address, buyNum, surplusNum,
-			modify, remark, receiver, sendTime;
-	private ImageView waterBg,ivSub,ivAdd;
-	/** 默认给用户选择1张水券 */
-	private int number = 1;
-	private int ticketnum = 0;
-	/** 用户备注内容 */
-	private String contextText = "";
-	private WaterInfo waterInfo;
-	private LocMap locMap;
-	private String rev_name,user_tel,user_addr,time;
-	int cTime = Integer.parseInt(Utils.getCurrentTimeHHmmStr(Utils.getCurrentSystemTime()));
-	private String start_time = cTime + 1 + ":00";
-	private String end_time = cTime + 2 + ":00";
-	public static String EXTRA_ORDER_NUM = "order_num";
-	private RelativeLayout rlSendTime, rlRemark, rlContacts, loadingView,errorView;
-	private Button commit;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	private int water_code = 0;
-	private int water_tic_code = 0;
-	
-	@Override
-	public void onClick(View v) {
-		Intent intent = null;
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left:// 点击返回
-			finish();
-			break;
-		case R.id.iv_sub:// 数量-1
-			number--;
-			if (number < 1) {
-				number = 1;
-				MyToast.show(this, "最少要使用" + number + "张水券");
-			}
-			buyNum.setText(number + "");
-			surplusNum.setText((waterInfo.getNumbers() - number) + "");
-			break;
-		case R.id.iv_add:// 数量+1
-			int numbers = ticketnum;
-			number++;
-			if (number > numbers) {
-				number = numbers;
-				MyToast.show(this, "您的水券只有" + number + "张");
-			}
-			buyNum.setText(number + "");
-			surplusNum.setText((waterInfo.getNumbers() - number) + "");
-			break;
-		case R.id.bt_commit://提交一键送水的订单
-			getWaterWaterorder();
-			break;
-		case R.id.tv_modifi://点击修改水票
-			intent = new Intent();
-			intent.setClass(this, WaterTicketActivity.class);
-			intent.putExtra(WaterTicketActivity.TICKET, waterInfo);
-			intent.putExtra(WaterTicketActivity.EXTRA_FROM, 2);
-			startActivityForResult(intent,WaterTicketActivity.REQUEST_CODE);
-			break;
-		case R.id.rl_contacts://点击修改地址
-			intent = new Intent();
-			intent.setClass(this, AddressListActivity.class);
-			startActivityForResult(intent, AddressListActivity.REQUESTCODE);
-			break;
-		case R.id.rl_send_time://修改送水时间
-			intent =  new Intent();
-			String currTime = sendTime.getText().toString().trim();
-			intent.putExtra(WheelViewTimeActivity.EXTRA_CURRENT_TIME,currTime);
-			intent.setClass(this,WheelViewTimeActivity.class);
-            startActivityForResult(intent,WheelViewTimeActivity.REQUESTCODE);
-			break;
-		case R.id.rl_remark://点击填写备注
-			intent = new Intent(this,RemarkActivity.class);
-			intent.putExtra(RemarkActivity.CONTENT, contextText);
-			startActivityForResult(intent, RemarkActivity.REQUESTCODE);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_akey_water);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.a_key_send_water);
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-
-	private void initView() {
-		getWaterUsetickets();
-		initImageloader();
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		initDate();
-	}
-
-	/** 初始化控件 */
-	private void initDate() {
-		name = (TextView) findViewById(R.id.tv_name);
-		phone = (TextView) findViewById(R.id.tv_phone);
-		address = (TextView) findViewById(R.id.tv_address);
-		rlSendTime = (RelativeLayout) findViewById(R.id.rl_send_time);
-		sendTime = (TextView) findViewById(R.id.tv_send_time);
-		
-		int time = Integer.parseInt(Utils.getCurrentTimeHHmmStr(Utils.getCurrentSystemTime()));
-		sendTime.setText((time + 1) + ":00" + " - " + (time + 2) + ":00");
-		
-		waterBg = (ImageView) findViewById(R.id.iv_water);
-		ivSub = (ImageView) findViewById(R.id.iv_sub);
-		ivAdd = (ImageView) findViewById(R.id.iv_add);
-		buyNum = (TextView) findViewById(R.id.num);
-		surplusNum = (TextView) findViewById(R.id.tv_num);
-		remark = (TextView) findViewById(R.id.tv_remark);
-		commit = (Button) findViewById(R.id.bt_commit);
-		modify = (TextView) findViewById(R.id.tv_modifi);
-		rlContacts = (RelativeLayout) findViewById(R.id.rl_contacts);
-		receiver = (TextView) findViewById(R.id.tv_watername);
-		rlRemark = (RelativeLayout) findViewById(R.id.rl_remark);
-		
-		setOnClickListener();
-	}
-
-	private void setOnClickListener() {
-		rlSendTime.setOnClickListener(this);
-		ivSub.setOnClickListener(this);
-		ivAdd.setOnClickListener(this);
-		commit.setOnClickListener(this);
-		modify.setOnClickListener(this);
-		rlContacts.setOnClickListener(this);
-		rlRemark.setOnClickListener(this);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_WATER_USETICKETS_SUCESS:// 进入一键送水成功事件
-			hideErrorLocal();
-			loadingView.setVisibility(View.GONE);
-			waterInfo = (WaterInfo) bundle.getSerializable(TicketLogic.EXTRA_TICKETS_BUY);
-			locMap = (LocMap) bundle.getSerializable(TicketLogic.EXTRA_LOCMAP);
-			
-			if (locMap == null) {
-				name.setText("空");
-				phone.setText("空");
-				address.setText("空");
-			} else {
-				name.setText(locMap.getRev_name());
-				phone.setText(locMap.getUser_tel());
-				address.setText(locMap.getUser_addr());
-			}
-			mImageLoader.displayImage(waterInfo.getPictrue_addr(), waterBg ,options);
-			ticketnum = waterInfo.getNumbers();
-			contextText = remark.getText().toString().trim();
-			buyNum.setText(number + "");
-			surplusNum.setText((waterInfo.getNumbers() - number) + "");
-			receiver.setText(waterInfo.getGoods_name());
-			break;
-		case Event.GET_WATER_USETICKETS_FAILED:// 进入一键送水失败事件
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_WATER_ORDER_SUCESS:// 用水票购买水成功事件 
-			OrderInfo orderInfo = (OrderInfo) bundle.getSerializable(TicketLogic.EXTRA_ORDERS);
-			Intent intent = new Intent();
-			intent.setClass(this, OrderDetailsActivity.class);
-			intent.putExtra(OrderDetailsActivity.EXTRA_FROM, 1);
-			intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, orderInfo.getOrder_num());
-			startActivity(intent);
-			finish();
-			break;
-		case Event.POST_WATER_ORDER_FAILED:// 用水票购买水失败事件
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_WATER_USETICKETS_SUCESS,
-				Event.GET_WATER_USETICKETS_FAILED,
-				Event.POST_WATER_ORDER_SUCESS, Event.POST_WATER_ORDER_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	@Override
-	protected void onActivityResult(int requestCode, int resultCode, Intent data) {
-		super.onActivityResult(requestCode, resultCode, data);
-		if (requestCode == AddressListActivity.REQUESTCODE) {
-			boolean hasaddress = data.getExtras().getBoolean(AddressListActivity.ISHASADDRESS);
-			if (hasaddress) {
-				MyAddress addr = (MyAddress) data.getSerializableExtra(GlobalInfo.KEY_LOC_INFO);
-				if (addr != null) {
-					rev_name = addr.getRev_name();
-					user_tel = addr.getUser_tel();
-					user_addr = addr.getUser_addr();
-
-					name.setText(rev_name);
-					phone.setText(user_tel);
-					address.setText(user_addr);
-				}
-			} else {
-				name.setText("");
-				phone.setText("");
-				address.setText("");
-			}
-		}else if (requestCode == WheelViewTimeActivity.REQUESTCODE) {
-			time = data.getStringExtra(GlobalInfo.KEY_TIME);
-			String[] splitTime = time.split("-");
-			start_time = splitTime[0];
-			end_time = splitTime[1];
-			sendTime.setText(start_time + "-" + end_time);
-		}else if (requestCode == RemarkActivity.REQUESTCODE) {
-			String text = data.getStringExtra(GlobalInfo.KEY_CONTENT);
-			contextText = text;
-			remark.setText(text);
-		} else if (requestCode == WaterTicketActivity.REQUEST_CODE) {
-			WaterInfo waterInfoNew = (WaterInfo) data.getSerializableExtra(TicketLogic.EXTRA_WATER_TICKET_INFO);
-			if (waterInfoNew != null) {
-				waterInfo = waterInfoNew;
-				water_code = waterInfo.getGoods_code();
-				water_tic_code = waterInfo.getTic_code();
-				mImageLoader.displayImage(waterInfo.getPictrue_addr(),waterBg, options);
-				ticketnum = waterInfo.getNumbers();
-				number = 1;
-				buyNum.setText(number + "");
-				surplusNum.setText((waterInfo.getNumbers() - number) + "");
-				receiver.setText(waterInfo.getGoods_name());
-			}
-		}
-	}
-
-	/** 获取一键送水界面提交订单页面数据 */
-	private void getWaterUsetickets() {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_WATER_USETICKETS);
-		intent.putExtra(TicketLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(TicketLogic.EXTRA_SHOP_CODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		sendAction(intent);
-	}
-	
-	/**一键送水界面提交订单*/
-	private void getWaterWaterorder() {//number直接传递
-		int goods_code = waterInfo.getGoods_code();
-		int tic_code = waterInfo.getTic_code();
-		if (water_tic_code != 0) {
-			tic_code = water_tic_code ;
-		}
-		if (water_code != 0) {
-			goods_code = water_code ;
-		}
-		String memo = remark.getText().toString().trim();
-		String startTime = start_time;
-		String endTime = end_time;
-		
-		Intent intent = new Intent(TicketLogic.ACTION_POST_WATER_WATERORDER);
-		intent.putExtra(TicketLogic.EXTRA_SHOP_CODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(TicketLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(TicketLogic.EXTRA_GOODS_CODE, goods_code);
-		intent.putExtra(TicketLogic.EXTRA_TIC_CODE, tic_code);
-		intent.putExtra(TicketLogic.EXTRA_MEMO, memo);
-		intent.putExtra(TicketLogic.EXTRA_STARTTIME, startTime);
-		intent.putExtra(TicketLogic.EXTRA_ENDTIME, endTime);
-		intent.putExtra(TicketLogic.EXTRA_NUMBER, number);
-		sendAction(intent);
-	}
-	
-	@SuppressWarnings("deprecation")
-	private void initImageloader() {
-		mImageLoader = App.initImageLoader(this);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				.showStubImage(R.drawable.no_data)// 加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/LocationReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/LocationReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/LocationReq.java	(revision )
@@ -1,74 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: LocationReq
- * @Description: 请求地理位置
- * @author zxl
- * @date 2015年5月30日 下午5:26:40
- */
-public class LocationReq extends HttpReq {
-
-	/** 地图api的精度 */
-	private String lng;
-	/** 地图api的纬度 */
-	private String lat;
-	/** 页数 */
-	private int pagenum;
-	/** 每页大小 */
-	private int pagesize;
-
-	public LocationReq(int reqId, String lng, String lat, int pagenum,
-			int pagesize) {
-		super();
-		this.id = reqId;
-		this.lng = lng;
-		this.lat = lat;
-		this.pagenum = pagenum;
-		this.pagesize = pagesize;
-	}
-
-	public String getLng() {
-		return lng;
-	}
-
-	public void setLng(String lng) {
-		this.lng = lng;
-	}
-
-	public String getLat() {
-		return lat;
-	}
-
-	public void setLat(String lat) {
-		this.lat = lat;
-	}
-
-	public int getPagenum() {
-		return pagenum;
-	}
-
-	public void setPagenum(int pagenum) {
-		this.pagenum = pagenum;
-	}
-
-	public int getPagesize() {
-		return pagesize;
-	}
-
-	public void setPagesize(int pagesize) {
-		this.pagesize = pagesize;
-	}
-
-	@Override
-	public String getParams() {
-		return "lng=" + lng + "&lat=" + lat + "&pagenum=" + pagenum
-				+ "&pagesize=" + pagesize;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/PageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/PageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/PageIndicator.java	(revision )
@@ -1,63 +0,0 @@
-/*
- * Copyright (C) 2011 Patrik Akerfeldt
- * Copyright (C) 2011 Jake Wharton
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.support.v4.view.ViewPager;
-
-/**
- * A PageIndicator is responsible to show an visual indicator on the total views
- * number and the current visible view.
- */
-public interface PageIndicator extends ViewPager.OnPageChangeListener {
-    /**
-     * Bind the indicator to a ViewPager.
-     *
-     * @param view
-     */
-    void setViewPager(ViewPager view);
-
-    /**
-     * Bind the indicator to a ViewPager.
-     *
-     * @param view
-     * @param initialPosition
-     */
-    void setViewPager(ViewPager view, int initialPosition);
-
-    /**
-     * <p>Set the current page of both the ViewPager and indicator.</p>
-     *
-     * <p>This <strong>must</strong> be used if you need to set the page before
-     * the views are drawn on screen (e.g., default start page).</p>
-     *
-     * @param item
-     */
-    void setCurrentItem(int item);
-
-    /**
-     * Set a page change listener which will receive forwarded events.
-     *
-     * @param listener
-     */
-    void setOnPageChangeListener(ViewPager.OnPageChangeListener listener);
-
-    /**
-     * Notify the indicator that the fragment list has changed.
-     */
-    void notifyDataSetChanged();
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/VoucherTicket.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/VoucherTicket.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/VoucherTicket.java	(revision )
@@ -1,104 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/**
- * @ClassName: VoucherTicket
- * @Description: 代金券
- * @author YY
- * @date 2015年6月5日 下午1:52:23
- */
-public class VoucherTicket implements Serializable {
-	private static final long serialVersionUID = -8719068902354329269L;
-	/** 优惠券金额 */
-	private int price;
-	/** 开始时间 */
-	private String startdate;
-	/** 代金券来源 */
-	private String source;
-	/** 备注--描述 */
-	private String remark;
-	/** 优惠券编号 */
-	private int coupon_code;
-	/** 类型 */
-	private String type;
-	/** 结束时间 */
-	private String enddate;
-	/** 够满金额可以使用优惠券 */
-	private int minmoney;
-	/** shop_name */
-	private String shop_name;
-
-	public String getShop_name() {
-		return shop_name;
-	}
-
-	public void setShop_name(String shop_name) {
-		this.shop_name = shop_name;
-	}
-
-	public int getCoupon_code() {
-		return coupon_code;
-	}
-
-	public void setCoupon_code(int coupon_code) {
-		this.coupon_code = coupon_code;
-	}
-
-	public String getEnddate() {
-		return enddate;
-	}
-
-	public void setEnddate(String enddate) {
-		this.enddate = enddate;
-	}
-
-	public String getStartdate() {
-		return startdate;
-	}
-
-	public void setStartdate(String startdate) {
-		this.startdate = startdate;
-	}
-
-	public int getMinmoney() {
-		return minmoney;
-	}
-
-	public void setMinmoney(int minmoney) {
-		this.minmoney = minmoney;
-	}
-
-	public int getPrice() {
-		return price;
-	}
-
-	public void setPrice(int price) {
-		this.price = price;
-	}
-
-	public String getRemark() {
-		return remark;
-	}
-
-	public void setRemark(String remark) {
-		this.remark = remark;
-	}
-
-	public String getSource() {
-		return source;
-	}
-
-	public void setSource(String source) {
-		this.source = source;
-	}
-
-	public String getType() {
-		return type;
-	}
-
-	public void setType(String type) {
-		this.type = type;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/DeleteaddrReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/DeleteaddrReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/DeleteaddrReq.java	(revision )
@@ -1,47 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  DeleteaddrReq
- * @Description: 删除用户信息请求
- * @author YY
- * @date 2015年6月8日 下午8:45:26
- */
-public class DeleteaddrReq extends HttpReq {
-	
-	private int userLocCode;
-	
-	
-
-	public DeleteaddrReq(int reqid,int userLocCode) {
-		super();
-		this.id = reqid;
-		this.userLocCode = userLocCode;
-	}
-	
-	
-
-	public int getUserLocCode() {
-		return userLocCode;
-	}
-
-
-
-	public void setUserLocCode(int userLocCode) {
-		this.userLocCode = userLocCode;
-	}
-
-
-
-	@Override
-	public String getParams() {
-		return "user_loc_code="+userLocCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/AppException.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/AppException.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/AppException.java	(revision )
@@ -1,286 +0,0 @@
-package com.anniu.shandiandaojia.app;
-
-import android.content.Context;
-import android.content.Intent;
-import android.content.pm.PackageInfo;
-import android.content.pm.PackageManager;
-import android.content.pm.PackageManager.NameNotFoundException;
-import android.os.Environment;
-import android.os.Looper;
-import android.util.Log;
-import android.widget.Toast;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.ActivityMgr;
-import com.anniu.shandiandaojia.logic.UpdateLogic;
-
-import org.apache.http.HttpException;
-
-import java.io.File;
-import java.io.FileOutputStream;
-import java.io.FileWriter;
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.lang.Thread.UncaughtExceptionHandler;
-import java.net.ConnectException;
-import java.net.SocketException;
-import java.net.UnknownHostException;
-import java.util.Date;
-
-public class AppException extends Exception implements UncaughtExceptionHandler{
-
-	private static final long serialVersionUID = 7317069892594361757L;
-	private final static boolean Debug = true;//是否保存错误日志
-	
-	/** 定义异常类型 */
-	public final static int TYPE_NETWORK 	= 1;
-	public final static int TYPE_SOCKET		= 2;
-	public final static int TYPE_HTTP_CODE	= 3;
-	public final static int TYPE_HTTP_ERROR	= 4;
-	public final static int TYPE_IO	 		= 5;
-	public final static int TYPE_RUN	 	= 6;
-	public final static int TYPE_JSON	 	= 7;
-	
-	private int type;
-	private int code;
-	
-	/** 系统默认的UncaughtException处理类 */
-	private Thread.UncaughtExceptionHandler mDefaultHandler;
-	
-	private AppException(){
-		this.mDefaultHandler = Thread.getDefaultUncaughtExceptionHandler();
-	}
-	
-	private AppException(int type, int code, Exception excp) {
-		super(excp);
-		this.type = type;
-		this.code = code;		
-		if(Debug){
-			this.saveErrorLog(excp);
-		}
-	}
-	public int getCode() {
-		return this.code;
-	}
-	public int getType() {
-		return this.type;
-	}
-	
-	/**
-	 * 提示友好的错误信息
-	 * @param ctx
-	 */
-	public void makeToast(Context ctx){
-		switch(this.getType()){
-		case TYPE_HTTP_CODE:
-			String err = ctx.getString(R.string.http_status_code_error, this.getCode());
-			Toast.makeText(ctx, err, Toast.LENGTH_SHORT).show();
-			break;
-		case TYPE_HTTP_ERROR:
-			Toast.makeText(ctx, R.string.http_exception_error, Toast.LENGTH_SHORT).show();
-			break;
-		case TYPE_SOCKET:
-			Toast.makeText(ctx, R.string.socket_exception_error, Toast.LENGTH_SHORT).show();
-			break;
-		case TYPE_NETWORK:
-			Toast.makeText(ctx, R.string.network_not_connected, Toast.LENGTH_SHORT).show();
-			break;
-		case TYPE_JSON:
-			Toast.makeText(ctx, R.string.xml_parser_failed, Toast.LENGTH_SHORT).show();
-			break;
-		case TYPE_IO:
-			Toast.makeText(ctx, R.string.io_exception_error, Toast.LENGTH_SHORT).show();
-			break;
-		case TYPE_RUN:
-			Toast.makeText(ctx, R.string.app_run_code_error, Toast.LENGTH_SHORT).show();
-			break;
-		}
-	}
-	
-	/**
-	 * 保存异常日志
-	 * @param excp
-	 */
-	public void saveErrorLog(Exception excp) {
-		String errorlog = "errorlog.txt";
-		String savePath = "";
-		String logFilePath = "";
-		FileWriter fw = null;
-		PrintWriter pw = null;
-		try {
-			//判断是否挂载了SD卡
-			String storageState = Environment.getExternalStorageState();		
-			if(storageState.equals(Environment.MEDIA_MOUNTED)){
-				savePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/anniu/Log/";
-				File file = new File(savePath);
-				if(!file.exists()){
-					file.mkdirs();
-				}
-				logFilePath = savePath + errorlog;
-			}
-			//没有挂载SD卡，无法写文件
-			if(logFilePath == ""){
-				return;
-			}
-			File logFile = new File(logFilePath);
-			if (!logFile.exists()) {
-				logFile.createNewFile();
-			}
-			fw = new FileWriter(logFile,true);
-			pw = new PrintWriter(fw);
-			pw.println("--------------------"+(new Date().toLocaleString())+"---------------------");	
-			excp.printStackTrace(pw);
-			pw.close();
-			fw.close();
-		} catch (Exception e) {
-			e.printStackTrace();		
-		}finally{ 
-			if(pw != null){ pw.close(); } 
-			if(fw != null){ try { fw.close(); } catch (IOException e) { }}
-		}
-
-	}
-	
-	public static AppException http(int code) {
-		return new AppException(TYPE_HTTP_CODE, code, null);
-	}
-	
-	public static AppException http(Exception e) {
-		return new AppException(TYPE_HTTP_ERROR, 0 ,e);
-	}
-
-	public static AppException socket(Exception e) {
-		return new AppException(TYPE_SOCKET, 0 ,e);
-	}
-	
-	public static AppException io(Exception e) {
-		if(e instanceof UnknownHostException || e instanceof ConnectException){
-			return new AppException(TYPE_NETWORK, 0, e);
-		}
-		else if(e instanceof IOException){
-			return new AppException(TYPE_IO, 0 ,e);
-		}
-		return run(e);
-	}
-	
-	public static AppException json(Exception e) {
-		return new AppException(TYPE_JSON, 0, e);
-	}
-	
-	public static AppException network(Exception e) {
-		if(e instanceof UnknownHostException || e instanceof ConnectException){
-			return new AppException(TYPE_NETWORK, 0, e);
-		}
-		else if(e instanceof HttpException){
-			return http(e);
-		}
-		else if(e instanceof SocketException){
-			return socket(e);
-		}
-		return http(e);
-	}
-	
-	public static AppException run(Exception e) {
-		return new AppException(TYPE_RUN, 0, e);
-	}
-
-	/**
-	 * 获取APP异常崩溃处理对象
-	 * @param context
-	 * @return
-	 */
-	public static AppException getAppExceptionHandler(){
-		return new AppException();
-	}
-	
-	@Override
-	public void uncaughtException(Thread thread, Throwable ex) {
-
-		if(!handleException(ex) && mDefaultHandler != null) {
-			mDefaultHandler.uncaughtException(thread, ex);
-		}
-
-	}
-	/**
-	 * 自定义异常处理:收集错误信息&发送错误报告
-	 * @param ex
-	 * @return true:处理了该异常信息;否则返回false
-	 */
-	private boolean handleException(Throwable ex) {
-		if(ex == null) {
-			return false;
-		}
-		
-		final Context context = ActivityMgr.getContext();
-		
-		if(context == null) {
-			return false;
-		}
-		
-		final String crashReport = getCrashReport(context, ex);
-		//显示异常信息&发送报告
-		new Thread() {
-			public void run() {
-				Looper.prepare();
-				saveCrash2File(crashReport);
-				sendExceptionAction(crashReport);
-				Looper.loop();
-			}
-		}.start();
-		return true;
-	}
-	
-	private void saveCrash2File(String errorMsg) {
-		if("".equals(errorMsg)){
-			return;
-		}
-		try {
-			String fileName = "crash-log.log";
-			if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
-				String path = "/sdcard/anniu/crash/";
-				File dir = new File(path);
-				if (!dir.exists()) {
-					dir.mkdirs();
-				}
-				FileOutputStream fos = new FileOutputStream(path + fileName);
-				fos.write(errorMsg.toString().getBytes());
-				fos.close();
-			}
-		} catch (Exception e) {
-			Log.e("AppException", "an error occured while writing file... : " + '\n' + e.toString());
-		}
-		return;
-	}
-	
-	/**
-	 * 获取APP崩溃异常报告
-	 * @param ex
-	 * @return
-	 */
-	private String getCrashReport(Context context, Throwable ex) {
-		PackageManager manager = context.getPackageManager();
-		PackageInfo pinfo = null;
-		try {
-			pinfo = manager.getPackageInfo(context.getPackageName(), 0);
-		} catch (NameNotFoundException e) {
-			e.printStackTrace();
-		}
-		StringBuffer exceptionStr = new StringBuffer();
-		exceptionStr.append("Version: "+pinfo.versionName+"("+pinfo.versionCode+")\n");
-		exceptionStr.append("Android: "+android.os.Build.VERSION.RELEASE+"("+android.os.Build.MODEL+")\n");
-		exceptionStr.append("Exception: "+ex.getMessage()+"\n");
-		StackTraceElement[] elements = ex.getStackTrace();
-		for (int i = 0; i < elements.length; i++) {
-			exceptionStr.append(elements[i].toString()+"\n");
-		}
-		return exceptionStr.toString();
-	}
-	
-	/** 提交日志到服务器 */
-	private void sendExceptionAction(String crashReport) {
-		Intent intent = new Intent();
-		intent.putExtra(UpdateLogic.EXTRA_ERROR_LOG, crashReport);
-		App.getInstance().sendAction(intent);
-	}
-	
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/LocationAddrReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/LocationAddrReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/LocationAddrReq.java	(revision )
@@ -1,73 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-import java.io.UnsupportedEncodingException;
-import java.net.URLEncoder;
-
-/**
- * @ClassName: LocationAddrReq
- * @Description: 通过地址定位请求
- * @author zxl
- * @date 2015年5月30日 下午5:41:48
- */
-
-public class LocationAddrReq extends HttpReq {
-
-	/** 用户输入的地址 */
-	private String address;
-	/** 页数 */
-	private int pagenum;
-	/** 每页大小 */
-	private int pagesize;
-
-	public LocationAddrReq(int reqId, String address, int pagenum, int pagesize) {
-		super();
-		this.id = reqId;
-		this.address = address;
-		this.pagenum = pagenum;
-		this.pagesize = pagesize;
-	}
-
-	public String getAddress() {
-		return address;
-	}
-
-	public void setAddress(String address) {
-		this.address = address;
-	}
-
-	public int getPagenum() {
-		return pagenum;
-	}
-
-	public void setPagenum(int pagenum) {
-		this.pagenum = pagenum;
-	}
-
-	public int getPagesize() {
-		return pagesize;
-	}
-
-	public void setPagesize(int pagesize) {
-		this.pagesize = pagesize;
-	}
-
-	@Override
-	public String getParams() {
-		String str = null;
-		try {
-			str = "address="+ URLEncoder.encode(address, GlobalValue.ENCODING)
-					+ "&pagenum=" + pagenum + "&pagesize=" + pagesize;
-		} catch (UnsupportedEncodingException e) {
-			e.printStackTrace();
-		}
-		return str;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/PlatformListPage.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/PlatformListPage.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/PlatformListPage.java	(revision )
@@ -1,159 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.classic;
-
-import static com.mob.tools.utils.R.getBitmapRes;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.util.ArrayList;
-
-import android.content.res.Configuration;
-import android.graphics.drawable.ColorDrawable;
-import android.util.TypedValue;
-import android.view.Gravity;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.animation.Animation;
-import android.view.animation.TranslateAnimation;
-import android.widget.Button;
-import android.widget.FrameLayout;
-import android.widget.LinearLayout;
-
-import com.sharesdk.onekeyshare.PlatformListFakeActivity;
-
-public class PlatformListPage extends PlatformListFakeActivity implements View.OnClickListener {
-	// page container
-	private FrameLayout flPage;
-	// gridview of platform list
-	private PlatformGridView grid;
-	// cancel button
-	private Button btnCancel;
-	// sliding up animation
-	private Animation animShow;
-	// sliding down animation
-	private Animation animHide;
-	private boolean finishing;
-	private LinearLayout llPage;
-
-	public void onCreate() {
-		super.onCreate();
-
-		finishing = false;
-		initPageView();
-		initAnim();
-		activity.setContentView(flPage);
-
-		// set the data for platform gridview
-		grid.setData(shareParamsMap, silent);
-		grid.setHiddenPlatforms(hiddenPlatforms);
-		grid.setCustomerLogos(customerLogos);
-		grid.setParent(this);
-		//btnCancel.setOnClickListener(this);
-
-		// display gridviews
-		llPage.clearAnimation();
-		llPage.startAnimation(animShow);
-	}
-
-	private void initPageView() {
-		flPage = new FrameLayout(getContext());
-		flPage.setOnClickListener(this);
-		flPage.setBackgroundDrawable(new ColorDrawable(0x55000000));
-
-		// container of the platform gridview
-		llPage = new LinearLayout(getContext()) {
-			public boolean onTouchEvent(MotionEvent event) {
-				return true;
-			}
-		};
-		llPage.setOrientation(LinearLayout.VERTICAL);
-		llPage.setBackgroundDrawable(new ColorDrawable(0xffffffff));
-		FrameLayout.LayoutParams lpLl = new FrameLayout.LayoutParams(
-				FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.WRAP_CONTENT);
-		lpLl.gravity = Gravity.BOTTOM;
-		llPage.setLayoutParams(lpLl);
-		flPage.addView(llPage);
-
-		// gridview
-		grid = new PlatformGridView(getContext());
-		grid.setEditPageBackground(getBackgroundView());
-		LinearLayout.LayoutParams lpWg = new LinearLayout.LayoutParams(
-				LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
-		grid.setLayoutParams(lpWg);
-		llPage.addView(grid);
-
-		// cancel button
-		//btnCancel = new Button(getContext());
-	}
-
-	private void initAnim() {
-		animShow = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0,
-				Animation.RELATIVE_TO_SELF, 0,
-				Animation.RELATIVE_TO_SELF, 1,
-				Animation.RELATIVE_TO_SELF, 0);
-		animShow.setDuration(300);
-
-		animHide = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0,
-				Animation.RELATIVE_TO_SELF, 0,
-				Animation.RELATIVE_TO_SELF, 0,
-				Animation.RELATIVE_TO_SELF, 1);
-		animHide.setDuration(300);
-	}
-
-	public void onConfigurationChanged(Configuration newConfig) {
-		if (grid != null) {
-			grid.onConfigurationChanged();
-		}
-	}
-
-	public boolean onFinish() {
-		if (finishing) {
-			return super.onFinish();
-		}
-
-		if (animHide == null) {
-			finishing = true;
-			return false;
-		}
-
-		finishing = true;
-		animHide.setAnimationListener(new Animation.AnimationListener() {
-			public void onAnimationStart(Animation animation) {
-
-			}
-
-			public void onAnimationRepeat(Animation animation) {
-
-			}
-
-			public void onAnimationEnd(Animation animation) {
-				flPage.setVisibility(View.GONE);
-				finish();
-			}
-		});
-		llPage.clearAnimation();
-		llPage.startAnimation(animHide);
-		//中断finish操作
-		return true;
-	}
-
-	@Override
-	public void onClick(View v) {
-		if (v.equals(flPage) || v.equals(btnCancel)) {
-			setCanceled(true);
-			finish();
-		}
-	}
-
-	public void onPlatformIconClick(View v, ArrayList<Object> platforms) {
-		onShareButtonClick(v, platforms);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GoodsLoveAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GoodsLoveAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GoodsLoveAdapter.java	(revision )
@@ -1,147 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.Paint;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.RegistActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.ArrayList;
-
-/**
-* @ClassName: GoodsLoveAdapter 
-* @Description: 关联购买
-* @author zxl 
-* @date 2015年6月4日 上午11:11:38
- */
-public class GoodsLoveAdapter extends BaseAdapter {
-
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private ArrayList<Goods> mList;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	public int changecode;
-
-	@SuppressWarnings("deprecation")
-	public GoodsLoveAdapter(Context context, ArrayList<Goods> goods) {
-		super();
-		this.mContext = context;
-		this.mList = goods;
-		mInflater = LayoutInflater.from(mContext);
-		mImageLoader = App.initImageLoader(mContext);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_bargain_goods, null);
-			holder.rl_price = (RelativeLayout) convertView.findViewById(R.id.rl_price);
-			holder.shopImg = (ImageView) convertView.findViewById(R.id.iv_shop_img);
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.promotePrice = (TextView) convertView.findViewById(R.id.tv_promote_price);
-			holder.add = (ImageView) convertView.findViewById(R.id.iv_add);
-			holder.add.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					if (Utils.loginState()) {
-						Goods goods = (Goods) v.getTag();
-						sendAddGood2CartAction(goods.getChange_code(),goods.getLimited());
-					} else {
-						mContext.startActivity(new Intent(mContext,RegistActivity.class));
-					}
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		mImageLoader.displayImage(goods.getPictrue_addr(), holder.shopImg, options);
-		holder.goodsName.setText(goods.getGoods_name());
-		
-		int status = goods.getGoods_status();
-		if (status == 1) {//特价
-			holder.rl_price.setVisibility(View.VISIBLE);
-			holder.goodsPrice.setText("￥"+goods.getGoods_price()+"");
-			holder.promotePrice.setVisibility(View.VISIBLE);
-			holder.promotePrice.setText("￥"+goods.getPromote_price()+"");
-			holder.goodsPrice.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG );
-		}else{
-			holder.rl_price.setVisibility(View.GONE);
-			holder.promotePrice.setText("￥"+goods.getGoods_price()+"");
-		}
-		holder.add.setTag(goods);
-		return convertView;
-	}
-
-	class ViewHolder {
-		RelativeLayout rl_price;
-		ImageView shopImg;
-		TextView goodsName;
-		TextView goodsPrice;
-		TextView promotePrice;
-		ImageView add;
-	}
-
-	public void addData(ArrayList<Goods> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-	
-	public void sendAddGood2CartAction(int changecode,int limited){
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(mContext, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 1);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,limited);
-		App.getInstance().sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/AckorderReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/AckorderReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/AckorderReq.java	(revision )
@@ -1,49 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/***
- * @ClassName: AckorderReq
- * @Description: 结算请求
- * @author YY
- * @date 2015年6月11日 下午8:27:39
- */
-public class AckorderReq extends HttpReq {
-
-	private int shopCode;
-	private int userCode;
-
-	public AckorderReq(int reqid, int shopCode, int userCode) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-		this.userCode = userCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?user_code=" + userCode + "&shop_code=" + shopCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ReflectableShareContentCustomizeCallback.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ReflectableShareContentCustomizeCallback.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ReflectableShareContentCustomizeCallback.java	(revision )
@@ -1,35 +0,0 @@
-package com.sharesdk.onekeyshare;
-
-import android.os.Handler.Callback;
-import android.os.Message;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.Platform.ShareParams;
-
-import com.mob.tools.utils.UIHandler;
-
-/**
- * 此类在Onekeyshare中并无用途，只是在Socialization中考虑到耦合度，需要通过反射的方式操作Onekeyshare，
- *而原先的{@link ShareContentCustomizeCallback}无法完成此需求，故创建本类，以供外部设置操作回调。
- *
- * @author Brook
- */
-public class ReflectableShareContentCustomizeCallback implements ShareContentCustomizeCallback {
-	private int onShareWhat;
-	private Callback onShareCallback;
-
-	public void setOnShareCallback(int what, Callback callback) {
-		onShareWhat = what;
-		onShareCallback = callback;
-	}
-
-	@Override
-	public void onShare(Platform platform, ShareParams paramsToShare) {
-		if (onShareCallback != null) {
-			Message msg = new Message();
-			msg.what = onShareWhat;
-			msg.obj = new Object[] {platform, paramsToShare};
-			UIHandler.sendMessage(msg, onShareCallback);
-		}
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/FlowLayout.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/FlowLayout.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/FlowLayout.java	(revision )
@@ -1,161 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.view.View;
-import android.view.ViewGroup;
-
-import java.util.ArrayList;
-import java.util.List;
-
-public class FlowLayout extends ViewGroup {
-	private static final int HORIZONTAL_SPACING = 20;
-	private static final int VERTICAL_SPACING = 20;
-
-	// 测量方法 有可能调用多次
-	@Override
-	protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-		lines.clear();
-		line = null;
-		userWidth = 0; // 把之前缓存数据全部清空
-		int widthMode = MeasureSpec.getMode(widthMeasureSpec);// 获取到当前FlowLayout的宽的模式
-		int widthSize = MeasureSpec.getSize(widthMeasureSpec)-getPaddingLeft()-getPaddingRight();// //  包含padding的 把padding减去
-		int heightMode = MeasureSpec.getMode(heightMeasureSpec);// 获取到当前FlowLayout的高的模式
-		int heightSize = MeasureSpec.getSize(heightMeasureSpec)-getPaddingTop()-getPaddingBottom();// // 
-		// 测量每个孩子
-		int childCount = getChildCount();
-		for (int i = 0; i < childCount; i++) {
-
-			View child = getChildAt(i);
-			// 如果父容器是精确的值 子View就是AT_Most 其余情况和父容器一样
-			int childWidthMeasureSpec = MeasureSpec.makeMeasureSpec(widthSize,
-					widthMode == MeasureSpec.EXACTLY ? MeasureSpec.AT_MOST : widthMode);
-			int childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(
-					heightSize,
-					heightMode == MeasureSpec.EXACTLY ? MeasureSpec.AT_MOST : heightMode);
-			// 要计算子view规则
-			child.measure(childWidthMeasureSpec, childHeightMeasureSpec);
-			if(child.getVisibility()==View.GONE){
-				continue;
-			}
-			if (line == null) {
-				line = new Line();
-			}
-			int childWidth = child.getMeasuredWidth();// 获取孩子的宽
-			userWidth += childWidth;
-			if (userWidth <= widthSize) {
-				line.addChild(child);
-				userWidth += HORIZONTAL_SPACING;
-				if (userWidth > widthSize) {
-					// 换行
-					newLine();
-				}
-			} else {
-				// 换行
-				newLine();
-				userWidth += childWidth;
-				line.addChild(child);// 把孩子添加到新的一行上
-			}
-		}
-		if (!lines.contains(line)) {
-			lines.add(line);// 把最后一行添加到集合中
-		}
-
-		int heightTotal = 0;
-		for (int i = 0; i < lines.size(); i++) {
-			heightTotal += lines.get(i).getHeight();
-		}
-		heightTotal += (lines.size() - 1) * VERTICAL_SPACING;
-		heightTotal+=getPaddingTop();
-		heightTotal+=getPaddingBottom();
-		setMeasuredDimension(widthSize+getPaddingLeft()+getPaddingRight(),
-				resolveSize(heightTotal, heightMeasureSpec));
-	}
-
-	// 管理当前控件所有行的集合
-	private List<Line> lines = new ArrayList<FlowLayout.Line>();
-
-	private void newLine() {
-		lines.add(line);// 把之前的行添加到集合中
-		line = new Line();
-		userWidth = 0;
-	}
-
-	private int userWidth;// 当前行使用的空间
-	private Line line;
-
-	class Line {
-		private int width;// 行占用的宽度
-		private int height;// 当前行的高度
-		// 记录当前行管理的view对象
-		private List<View> children = new ArrayList<View>();
-
-		public void addChild(View child) {
-			children.add(child);
-			// 让当前行 等于最高的一个孩子的高度
-			height = height < child.getMeasuredHeight() ? child
-					.getMeasuredHeight() : height;
-			width += child.getMeasuredWidth();
-		}
-
-		// 分配行里面每个TextView的位置
-		public void layout(int l, int t) {
-			width += (children.size() - 1) * HORIZONTAL_SPACING;
-			int surplusWidth = getMeasuredWidth()-getPaddingLeft()-getPaddingRight() - width;
-			int extraWidth = surplusWidth / children.size();
-			for (int i = 0; i < children.size(); i++) {
-				View child = children.get(i);
-				// 重新测量孩子
-				if (extraWidth > 0) {
-					int widthMeasureSpec = MeasureSpec.makeMeasureSpec(
-							child.getMeasuredWidth() + extraWidth,
-							MeasureSpec.EXACTLY);
-					int heightMeasureSpec = MeasureSpec.makeMeasureSpec(
-							child.getMeasuredHeight(), MeasureSpec.EXACTLY);
-					child.measure(widthMeasureSpec, heightMeasureSpec);
-				}
-				// 分配孩子的位置
-				child.layout(l, t, l + child.getMeasuredWidth(),
-						t + child.getMeasuredHeight());
-
-				// 让l加上 上一个孩子的宽度
-				l += child.getMeasuredWidth();
-
-				l += HORIZONTAL_SPACING;
-			}
-		}
-
-		public int getHeight() {
-			return height;
-		}
-
-	}
-
-	// 分配每个孩子的位置
-	// l t 代表当前控件 FlowLayout的左上角
-	@Override
-	protected void onLayout(boolean changed, int l, int t, int r, int b) {
-		t+=getPaddingTop();
-		for (int i = 0; i < lines.size(); i++) {
-			Line line2 = lines.get(i);
-			// 第一行左上角的位置 和整个FlowLayout一样的
-			
-			line2.layout(l+getPaddingLeft(), t); // 分配行的位置 然后再交给每个行去分配位置
-			t += line2.getHeight();
-			t += VERTICAL_SPACING;
-		}
-	}
-
-	public FlowLayout(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-	}
-
-	public FlowLayout(Context context, AttributeSet attrs) {
-		super(context, attrs);
-	}
-
-	public FlowLayout(Context context) {
-		super(context);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/HttpRsp.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/HttpRsp.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/HttpRsp.java	(revision )
@@ -1,34 +0,0 @@
-package com.anniu.shandiandaojia.net.bean;
-
-public class HttpRsp {
-	public static final int CODE_TIMEOUT = -99;
-	public static final int CODE_UNKNOW_HOST = -100;
-	public static final int CODE_NET_ERROR = -101;
-	public static final int CODE_SUCCESS = 200;
-
-	/** http应答码 */
-	public int code;
-	public String msg;
-	public String result;
-	public byte[] data;
-	
-	public String getMsg(int errorCode){
-		String msg = "";
-		switch (errorCode) {
-			case CODE_TIMEOUT:
-				msg = "请求超时，请稍后重试！";
-				break;
-			case CODE_UNKNOW_HOST:
-				msg = "网络请求错误，请稍后重试！";
-				break;
-			case CODE_NET_ERROR:
-				msg = "网络连接错误，请稍后重试！";
-				break;
-			default:
-				msg = "网络请求错误，请稍后重试！";
-				break;
-		}
-		return msg;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ResourceMgrUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ResourceMgrUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ResourceMgrUtils.java	(revision )
@@ -1,115 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.app.Activity;
-import android.content.Context;
-import android.content.ServiceConnection;
-
-import java.util.ArrayList;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Map;
-import java.util.Map.Entry;
-
-/**
- * 
- * @ClassName: ResourceMgrUtils
- * @Description: 资源管理基类
- * @author zxl
- * @date 2014年10月11日 下午2:14:53
- * 
- */
-public class ResourceMgrUtils {
-	private static String TAG = "ResourceManagerUtils";
-
-	private static Context context;
-
-	private static Activity curActivity;
-
-	private static ServiceConnection m_localConnection;
-
-	private static Map<Integer, Activity> mCacheActivities = new LinkedHashMap<Integer, Activity>();
-
-	public void init(Context context) {
-		this.context = context;
-	}
-
-	private ResourceMgrUtils() {
-	}
-
-	public static void setAppContext(Context obj) {
-		context = obj;
-	}
-
-	public static Context getAppContext() {
-		if (context == null) {
-			context = curActivity.getApplicationContext();
-		}
-		return context;
-	}
-
-	public static Activity getActivity() {
-		return curActivity;
-	}
-
-	public static void resumeActivity(Activity activity) {
-		curActivity = activity;
-		if (mCacheActivities == null) {
-			mCacheActivities = new LinkedHashMap<Integer, Activity>();
-		}
-		int hashCode = activity.hashCode();
-		if (mCacheActivities.containsKey(hashCode)) {
-			mCacheActivities.remove(hashCode);
-		}
-		mCacheActivities.put(hashCode, activity);
-		MyLog.e(TAG, "resumeActivity.activity = "
-				+ activity.getClass().getSimpleName()
-				+ ", mCacheActivities.size() = " + mCacheActivities.size());
-	}
-
-	public static void destroyActivity(Activity activity) {
-		if (mCacheActivities != null) {
-			mCacheActivities.remove(activity.hashCode());
-
-			MyLog.e(TAG, "destroyActivity.activity = "
-					+ activity.getClass().getSimpleName()
-					+ ", mCacheActivities.size() = " + mCacheActivities.size());
-		}
-	}
-
-	public static int finishAllActivity(boolean isIgnoreCurrentActivity) {
-		int finishCount = 0;
-		MyLog.e(TAG, "finishAllActivity.mCacheActivities.size() = "
-				+ (mCacheActivities == null ? 0 : mCacheActivities.size()));
-		if (mCacheActivities != null && !mCacheActivities.isEmpty()) {
-			List<Activity> activitys = new ArrayList<Activity>();
-			for (Entry<Integer, Activity> entry : mCacheActivities.entrySet()) {
-				activitys.add(entry.getValue());
-			}
-			for (Activity activity : activitys) {
-				mCacheActivities.remove(activity.hashCode());
-				if (!isIgnoreCurrentActivity
-						|| (isIgnoreCurrentActivity && activity != curActivity)) {
-					if (!activity.isFinishing()) {
-						activity.finish();
-						finishCount++;
-						MyLog.e(TAG, "finishAllActivity.activity = "
-								+ activity.getClass().getSimpleName()
-								+ " finished");
-					}
-				}
-			}
-		}
-		MyLog.e(TAG, "finishAllActivity.finishCount = " + finishCount);
-		return finishCount;
-	}
-
-	public static ServiceConnection getLocalServiceConnection() {
-		return m_localConnection;
-	}
-
-	public static void setLocalServiceConnection(
-			ServiceConnection m_localConnection) {
-		ResourceMgrUtils.m_localConnection = m_localConnection;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/PicViewer.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/PicViewer.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/PicViewer.java	(revision )
@@ -1,221 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-
-package com.sharesdk.onekeyshare;
-
-import android.annotation.SuppressLint;
-import android.graphics.Bitmap;
-import android.graphics.Matrix;
-import android.graphics.PointF;
-import android.graphics.RectF;
-import android.util.DisplayMetrics;
-import android.util.FloatMath;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.View.OnTouchListener;
-import android.widget.ImageView;
-import android.widget.ImageView.ScaleType;
-
-import com.mob.tools.FakeActivity;
-
-/** 查看编辑页面中图片的例子 */
-public class PicViewer extends FakeActivity implements OnTouchListener {
-	private ImageView ivViewer;
-	private Bitmap pic;
-
-	Matrix matrix = new Matrix();
-    Matrix savedMatrix = new Matrix();
-    DisplayMetrics dm;
-
-    /** 最小缩放比例*/
-    float minScaleR = 1f;
-    /** 最大缩放比例*/
-    static final float MAX_SCALE = 10f;
-
-    /** 初始状态*/
-    static final int NONE = 0;
-    /** 拖动*/
-    static final int DRAG = 1;
-    /** 缩放*/
-    static final int ZOOM = 2;
-
-    /** 当前模式*/
-    int mode = NONE;
-
-    PointF prev = new PointF();
-    PointF mid = new PointF();
-    float dist = 1f;
-
-	/** 设置图片用于浏览 */
-	public void setImageBitmap(Bitmap pic) {
-		this.pic = pic;
-		if (ivViewer != null) {
-			ivViewer.setImageBitmap(pic);
-		}
-	}
-
-	public void onCreate() {
-		ivViewer = new ImageView(activity);
-		ivViewer.setScaleType(ScaleType.MATRIX);
-		ivViewer.setBackgroundColor(0xc0000000);
-		ivViewer.setOnTouchListener(this);
-		if (pic != null && !pic.isRecycled()) {
-			ivViewer.setImageBitmap(pic);
-		}
-		dm = new DisplayMetrics();
-		activity.getWindowManager().getDefaultDisplay().getMetrics(dm);// 获取分辨率
-        minZoom();
-        CheckView();
-        ivViewer.setImageMatrix(matrix);
-	    activity.setContentView(ivViewer);
-
-	}
-
-
-
-	/**
-     * 触屏监听
-     */
-    public boolean onTouch(View v, MotionEvent event) {
-
-        switch (event.getAction() & MotionEvent.ACTION_MASK) {
-        // 主点按下
-        case MotionEvent.ACTION_DOWN:
-            savedMatrix.set(matrix);
-            prev.set(event.getX(), event.getY());
-            mode = DRAG;
-            break;
-        // 副点按下
-        case MotionEvent.ACTION_POINTER_DOWN:
-            dist = spacing(event);
-            // 如果连续两点距离大于10，则判定为多点模式
-            if (spacing(event) > 10f) {
-                savedMatrix.set(matrix);
-                midPoint(mid, event);
-                mode = ZOOM;
-            }
-            break;
-        case MotionEvent.ACTION_UP:
-        case MotionEvent.ACTION_POINTER_UP:
-            mode = NONE;
-            break;
-        case MotionEvent.ACTION_MOVE:
-            if (mode == DRAG) {
-                matrix.set(savedMatrix);
-                matrix.postTranslate(event.getX() - prev.x, event.getY()
-                        - prev.y);
-            } else if (mode == ZOOM) {
-                float newDist = spacing(event);
-                if (newDist > 10f) {
-                    matrix.set(savedMatrix);
-                    float tScale = newDist / dist;
-                    matrix.postScale(tScale, tScale, mid.x, mid.y);
-                }
-            }
-            break;
-        }
-        ivViewer.setImageMatrix(matrix);
-        CheckView();
-        return true;
-    }
-
-    /**
-     * 限制最大最小缩放比例，自动居中
-     */
-    private void CheckView() {
-        float p[] = new float[9];
-        matrix.getValues(p);
-        if (mode == ZOOM) {
-            if (p[0] < minScaleR) {
-//                Log.d("", "当前缩放级别:"+p[0]+",最小缩放级别:"+minScaleR);
-                matrix.setScale(minScaleR, minScaleR);
-            }
-            if (p[0] > MAX_SCALE) {
-//                Log.d("", "当前缩放级别:"+p[0]+",最大缩放级别:"+MAX_SCALE);
-                matrix.set(savedMatrix);
-            }
-        }
-        center();
-    }
-
-    /**
-     * 最小缩放比例，最大为100%
-     */
-    private void minZoom() {
-        minScaleR = Math.min(
-                (float) dm.widthPixels / (float) pic.getWidth(),
-                (float) dm.heightPixels / (float) pic.getHeight());
-        //以最小缩放比例显示
-        matrix.setScale(minScaleR, minScaleR);
-    }
-
-    private void center() {
-        center(true, true);
-    }
-
-    /**
-     * 横向、纵向居中
-     */
-    protected void center(boolean horizontal, boolean vertical) {
-
-    	 Matrix m = new Matrix();
-         m.set(matrix);
-         RectF rect = new RectF(0, 0, pic.getWidth(), pic.getHeight());
-         m.mapRect(rect);
-
-         float height = rect.height();
-         float width = rect.width();
-
-         float deltaX = 0, deltaY = 0;
-
-         if (vertical) {
-             // 图片小于屏幕大小，则居中显示。大于屏幕，上方留空则往上移，下方留空则往下移
-             int screenHeight = dm.heightPixels;
-             if (height < screenHeight) {
-                 deltaY = (screenHeight - height) / 2 - rect.top;
-             } else if (rect.top > 0) {
-                 deltaY = -rect.top;
-             } else if (rect.bottom < screenHeight) {
-                 deltaY = ivViewer.getHeight() - rect.bottom;
-             }
-         }
-
-         if (horizontal) {
-             int screenWidth = dm.widthPixels;
-             if (width < screenWidth) {
-                 deltaX = (screenWidth - width) / 2 - rect.left;
-             } else if (rect.left > 0) {
-                 deltaX = -rect.left;
-             } else if (rect.right < screenWidth) {
-                 deltaX = ivViewer.getWidth() - rect.right;
-             }
-         }
-         matrix.postTranslate(deltaX, deltaY);
-    }
-
-    /**
-     * 两点的距离
-     */
-    @SuppressLint("FloatMath")
-	private float spacing(MotionEvent event) {
-        float x = event.getX(0) - event.getX(1);
-        float y = event.getY(0) - event.getY(1);
-        return FloatMath.sqrt(x * x + y * y);
-    }
-
-    /**
-     * 两点的中点
-     */
-    private void midPoint(PointF point, MotionEvent event) {
-        float x = event.getX(0) + event.getX(1);
-        float y = event.getY(0) + event.getY(1);
-        point.set(x / 2, y / 2);
-    }
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/NetMgr.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/NetMgr.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/NetMgr.java	(revision )
@@ -1,64 +0,0 @@
-package com.anniu.shandiandaojia.net;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.SocketReq;
-import com.anniu.shandiandaojia.net.bean.SocketRsp;
-
-import java.util.concurrent.ExecutorService;
-import java.util.concurrent.Executors;
-
-/**
- * http和socket管理模块，只负责维护网络连接，收发数据
- * 
- * @author zxl
- * 
- */
-public class NetMgr {
-
-	private ExecutorService httpThreadPool;
-	private ExecutorService socketSendPool;
-	private ExecutorService socketRecvPool;
-	private HttpClient httpClient;
-	private SocketClient socketClient;
-
-	public NetMgr() {
-		httpThreadPool = Executors.newFixedThreadPool(5);
-		socketSendPool = Executors.newFixedThreadPool(1);
-		socketRecvPool = Executors.newFixedThreadPool(1);
-		httpClient = new HttpClient();
-		socketClient = new SocketClient();
-	}
-
-	public void sendHttpReq(final HttpReq req) {
-
-		if (null != req) {
-			Runnable sendThread = new Runnable() {
-
-				@Override
-				public void run() {
-					if (req.isHttpPost()) {
-						httpClient.sendPost(req);
-					} else {
-						httpClient.sendReq(req);
-					}
-				}
-			};
-
-			httpThreadPool.execute(sendThread);
-		}
-	}
-
-	public void sendSocketReq(SocketReq req) {
-		// socketClient.sendReq(req);
-	}
-
-	public interface OnHttpRsp {
-		public void onHttpRsp(HttpRsp httpRsp);
-	}
-
-	public interface OnSocketRsp {
-		public void onSocketRsp(SocketRsp rsp);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/Util.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/Util.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/Util.java	(revision )
@@ -1,346 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.graphics.Bitmap;
-import android.graphics.Bitmap.CompressFormat;
-import android.graphics.BitmapFactory;
-import android.util.Log;
-
-import junit.framework.Assert;
-
-import org.apache.http.HttpResponse;
-import org.apache.http.HttpStatus;
-import org.apache.http.HttpVersion;
-import org.apache.http.client.HttpClient;
-import org.apache.http.client.methods.HttpGet;
-import org.apache.http.client.methods.HttpPost;
-import org.apache.http.conn.ClientConnectionManager;
-import org.apache.http.conn.scheme.PlainSocketFactory;
-import org.apache.http.conn.scheme.Scheme;
-import org.apache.http.conn.scheme.SchemeRegistry;
-import org.apache.http.conn.ssl.SSLSocketFactory;
-import org.apache.http.entity.StringEntity;
-import org.apache.http.impl.client.DefaultHttpClient;
-import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;
-import org.apache.http.params.BasicHttpParams;
-import org.apache.http.params.HttpParams;
-import org.apache.http.params.HttpProtocolParams;
-import org.apache.http.protocol.HTTP;
-import org.apache.http.util.EntityUtils;
-
-import java.io.ByteArrayOutputStream;
-import java.io.File;
-import java.io.IOException;
-import java.io.RandomAccessFile;
-import java.net.Socket;
-import java.net.UnknownHostException;
-import java.security.KeyManagementException;
-import java.security.KeyStore;
-import java.security.KeyStoreException;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import java.security.UnrecoverableKeyException;
-import java.security.cert.X509Certificate;
-import java.util.ArrayList;
-import java.util.List;
-
-import javax.net.ssl.SSLContext;
-import javax.net.ssl.TrustManager;
-import javax.net.ssl.X509TrustManager;
-
-public class Util {
-	
-	private static final String TAG = "SDK_Sample.Util";
-	
-	public static byte[] bmpToByteArray(final Bitmap bmp, final boolean needRecycle) {
-		ByteArrayOutputStream output = new ByteArrayOutputStream();
-		bmp.compress(CompressFormat.PNG, 100, output);
-		if (needRecycle) {
-			bmp.recycle();
-		}
-		
-		byte[] result = output.toByteArray();
-		try {
-			output.close();
-		} catch (Exception e) {
-			e.printStackTrace();
-		}
-		
-		return result;
-	}
-
-	public static byte[] httpGet(final String url) {
-		if (url == null || url.length() == 0) {
-			Log.e(TAG, "httpGet, url is null");
-			return null;
-		}
-
-		HttpClient httpClient = getNewHttpClient();
-		HttpGet httpGet = new HttpGet(url);
-
-		try {
-			HttpResponse resp = httpClient.execute(httpGet);
-			if (resp.getStatusLine().getStatusCode() != HttpStatus.SC_OK) {
-				Log.e(TAG, "httpGet fail, status code = " + resp.getStatusLine().getStatusCode());
-				return null;
-			}
-
-			return EntityUtils.toByteArray(resp.getEntity());
-
-		} catch (Exception e) {
-			Log.e(TAG, "httpGet exception, e = " + e.getMessage());
-			e.printStackTrace();
-			return null;
-		}
-	}
-	
-	public static byte[] httpPost(String url, String entity) {
-		if (url == null || url.length() == 0) {
-			Log.e(TAG, "httpPost, url is null");
-			return null;
-		}
-		
-		HttpClient httpClient = getNewHttpClient();
-		
-		HttpPost httpPost = new HttpPost(url);
-		
-		try {
-			httpPost.setEntity(new StringEntity(entity));
-			httpPost.setHeader("Accept", "application/json");
-			httpPost.setHeader("Content-type", "application/json");
-			
-			HttpResponse resp = httpClient.execute(httpPost);
-			if (resp.getStatusLine().getStatusCode() != HttpStatus.SC_OK) {
-				Log.e(TAG, "httpGet fail, status code = " + resp.getStatusLine().getStatusCode());
-				return null;
-			}
-
-			return EntityUtils.toByteArray(resp.getEntity());
-		} catch (Exception e) {
-			Log.e(TAG, "httpPost exception, e = " + e.getMessage());
-			e.printStackTrace();
-			return null;
-		}
-	}
-	
-	private static class SSLSocketFactoryEx extends SSLSocketFactory {      
-	      
-	    SSLContext sslContext = SSLContext.getInstance("TLS");      
-	      
-	    public SSLSocketFactoryEx(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {      
-	        super(truststore);      
-	      
-	        TrustManager tm = new X509TrustManager() {      
-	      
-	            public X509Certificate[] getAcceptedIssuers() {      
-	                return null;      
-	            }      
-	      
-				@Override
-				public void checkClientTrusted(X509Certificate[] chain, String authType) throws java.security.cert.CertificateException {
-				}
-
-				@Override
-				public void checkServerTrusted(X509Certificate[] chain,	String authType) throws java.security.cert.CertificateException {
-				}  
-	        };      
-	      
-	        sslContext.init(null, new TrustManager[] { tm }, null);      
-	    }      
-	      
-		@Override
-		public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
-			return sslContext.getSocketFactory().createSocket(socket, host,	port, autoClose);
-		}
-
-		@Override
-		public Socket createSocket() throws IOException {
-			return sslContext.getSocketFactory().createSocket();
-		} 
-	}  
-
-	private static HttpClient getNewHttpClient() { 
-	   try { 
-	       KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType()); 
-	       trustStore.load(null, null); 
-
-	       SSLSocketFactory sf = new SSLSocketFactoryEx(trustStore); 
-	       sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); 
-
-	       HttpParams params = new BasicHttpParams(); 
-	       HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1); 
-	       HttpProtocolParams.setContentCharset(params, HTTP.UTF_8); 
-
-	       SchemeRegistry registry = new SchemeRegistry(); 
-	       registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80)); 
-	       registry.register(new Scheme("https", sf, 443)); 
-
-	       ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry); 
-
-	       return new DefaultHttpClient(ccm, params); 
-	   } catch (Exception e) { 
-	       return new DefaultHttpClient(); 
-	   } 
-	}
-	
-	public static byte[] readFromFile(String fileName, int offset, int len) {
-		if (fileName == null) {
-			return null;
-		}
-
-		File file = new File(fileName);
-		if (!file.exists()) {
-			Log.i(TAG, "readFromFile: file not found");
-			return null;
-		}
-
-		if (len == -1) {
-			len = (int) file.length();
-		}
-
-		Log.d(TAG, "readFromFile : offset = " + offset + " len = " + len + " offset + len = " + (offset + len));
-
-		if(offset <0){
-			Log.e(TAG, "readFromFile invalid offset:" + offset);
-			return null;
-		}
-		if(len <=0 ){
-			Log.e(TAG, "readFromFile invalid len:" + len);
-			return null;
-		}
-		if(offset + len > (int) file.length()){
-			Log.e(TAG, "readFromFile invalid file len:" + file.length());
-			return null;
-		}
-
-		byte[] b = null;
-		try {
-			RandomAccessFile in = new RandomAccessFile(fileName, "r");
-			b = new byte[len]; // ´´½¨ºÏÊÊÎÄ¼þ´óÐ¡µÄÊý×é
-			in.seek(offset);
-			in.readFully(b);
-			in.close();
-
-		} catch (Exception e) {
-			Log.e(TAG, "readFromFile : errMsg = " + e.getMessage());
-			e.printStackTrace();
-		}
-		return b;
-	}
-	
-	private static final int MAX_DECODE_PICTURE_SIZE = 1920 * 1440;
-	public static Bitmap extractThumbNail(final String path, final int height, final int width, final boolean crop) {
-		Assert.assertTrue(path != null && !path.equals("") && height > 0 && width > 0);
-
-		BitmapFactory.Options options = new BitmapFactory.Options();
-
-		try {
-			options.inJustDecodeBounds = true;
-			Bitmap tmp = BitmapFactory.decodeFile(path, options);
-			if (tmp != null) {
-				tmp.recycle();
-				tmp = null;
-			}
-
-			Log.d(TAG, "extractThumbNail: round=" + width + "x" + height + ", crop=" + crop);
-			final double beY = options.outHeight * 1.0 / height;
-			final double beX = options.outWidth * 1.0 / width;
-			Log.d(TAG, "extractThumbNail: extract beX = " + beX + ", beY = " + beY);
-			options.inSampleSize = (int) (crop ? (beY > beX ? beX : beY) : (beY < beX ? beX : beY));
-			if (options.inSampleSize <= 1) {
-				options.inSampleSize = 1;
-			}
-
-			// NOTE: out of memory error
-			while (options.outHeight * options.outWidth / options.inSampleSize > MAX_DECODE_PICTURE_SIZE) {
-				options.inSampleSize++;
-			}
-
-			int newHeight = height;
-			int newWidth = width;
-			if (crop) {
-				if (beY > beX) {
-					newHeight = (int) (newWidth * 1.0 * options.outHeight / options.outWidth);
-				} else {
-					newWidth = (int) (newHeight * 1.0 * options.outWidth / options.outHeight);
-				}
-			} else {
-				if (beY < beX) {
-					newHeight = (int) (newWidth * 1.0 * options.outHeight / options.outWidth);
-				} else {
-					newWidth = (int) (newHeight * 1.0 * options.outWidth / options.outHeight);
-				}
-			}
-
-			options.inJustDecodeBounds = false;
-
-			Log.i(TAG, "bitmap required size=" + newWidth + "x" + newHeight + ", orig=" + options.outWidth + "x" + options.outHeight + ", sample=" + options.inSampleSize);
-			Bitmap bm = BitmapFactory.decodeFile(path, options);
-			if (bm == null) {
-				Log.e(TAG, "bitmap decode failed");
-				return null;
-			}
-
-			Log.i(TAG, "bitmap decoded size=" + bm.getWidth() + "x" + bm.getHeight());
-			final Bitmap scale = Bitmap.createScaledBitmap(bm, newWidth, newHeight, true);
-			if (scale != null) {
-				bm.recycle();
-				bm = scale;
-			}
-
-			if (crop) {
-				final Bitmap cropped = Bitmap.createBitmap(bm, (bm.getWidth() - width) >> 1, (bm.getHeight() - height) >> 1, width, height);
-				if (cropped == null) {
-					return bm;
-				}
-
-				bm.recycle();
-				bm = cropped;
-				Log.i(TAG, "bitmap croped size=" + bm.getWidth() + "x" + bm.getHeight());
-			}
-			return bm;
-
-		} catch (final OutOfMemoryError e) {
-			Log.e(TAG, "decode bitmap failed: " + e.getMessage());
-			options = null;
-		}
-
-		return null;
-	}
-	
-	public static String sha1(String str) {
-		if (str == null || str.length() == 0) {
-			return null;
-		}
-		
-		char hexDigits[] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f' };
-		
-		try {
-			MessageDigest mdTemp = MessageDigest.getInstance("SHA1");
-			mdTemp.update(str.getBytes());
-			
-			byte[] md = mdTemp.digest();
-			int j = md.length;
-			char buf[] = new char[j * 2];
-			int k = 0;
-			for (int i = 0; i < j; i++) {
-				byte byte0 = md[i];
-				buf[k++] = hexDigits[byte0 >>> 4 & 0xf];
-				buf[k++] = hexDigits[byte0 & 0xf];
-			}
-			return new String(buf);
-		} catch (Exception e) {
-			return null;
-		}
-	}
-	
-	public static List<String> stringsToList(final String[] src) {
-		if (src == null || src.length == 0) {
-			return null;
-		}
-		final List<String> result = new ArrayList<String>();
-		for (int i = 0; i < src.length; i++) {
-			result.add(src[i]);
-		}
-		return result;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/LocationLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/LocationLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/LocationLogic.java	(revision )
@@ -1,647 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Banner;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Category;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.ShopInfo;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.LocationAddrReq;
-import com.anniu.shandiandaojia.net.bean.entity.LocationReq;
-import com.anniu.shandiandaojia.net.bean.entity.SelectShopReq;
-import com.anniu.shandiandaojia.net.bean.entity.ShopInfoReq;
-import com.anniu.shandiandaojia.service.HttpService;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.List;
-
-/**
-* @ClassName: LocationLogic 
-* @Description: 定位logic 
-* @author zxl 
-* @date 2015年5月30日 下午5:13:22
- */
-public class LocationLogic extends BaseLogic {
-
-	/** 定位*/
-	public static String ACTION_GET_LOCATION = "LocationLogic.ACTION_GET_LOCATION";
-	/** 定位通过地址*/
-	public static String ACTION_GET_LOCATION_ADDR = "LocationLogic.ACTION_GET_LOCATION_ADDR";
-	/** 选择店铺进入店铺首页*/
-	public static String ACTION_GET_LOCATION_LIST2SHOP = "LocationLogic.ACTION_GET_LOCATION_LIST2SHOP";
-	/** 首页重新选择便利店*/
-	public static String ACTION_GET_SELECT_BROWER_SHOP = "LocationLogic.ACTION_GET_SELECT_BROWER_SHOP";
-	/** 分类页重新选择便利店*/
-	public static String ACTION_GET_SELECT_BROWER_SHOP_CATEGORY = "LocationLogic.ACTION_GET_SELECT_BROWER_SHOP_CATEGORY";
-	
-	/** 地图api的精度 */
-	public static String EXTRA_LNG = "lng";
-	/** 地图api的纬度 */
-	public static String EXTRA_LAT = "lat";
-	/** 页码（不传入默认第一页）*/
-	public static String EXTRA_PAGENUM = "pagenum";
-	/** 一页显示数量(默认20个)*/
-	public static String EXTRA_PAGESIZE = "pagesize";
-	/** address地址*/
-	public static String EXTRA_ADDRESS = "address";
-	
-	/** shops地址*/
-	public static String EXTRA_SHOPS = "shops";
-	/** shoplist*/
-	public static String EXTRA_SHOPLIST = "shoplist";
-	/** loadType*/
-	public static String EXTRA_LOADTYPE = "loadType";
-	
-	/** shopcode*/
-	public static String EXTRA_SHOPCODE = "shopcode";
-	/** usercode*/
-	public static String EXTRA_USERCODE = "usercode";
-	
-	/** indexInfo*/
-	public static String EXTRA_INDEXINFO = "indexInfo";
-	/** shopInfo*/
-	public static String EXTRA_SHOPINFO = "shopInfo";
-	
-	/** bannerInfo*/
-	public static String EXTRA_BANNERINFO = "bannerInfo";
-	/** bannerlist*/
-	public static String EXTRA_BINNERLIST = "bannerlist";
-	/** bargainGoods*/
-	public static String EXTRA_BARGAINGOODSLIST = "bargaingoodslist";
-	/** bottomstatusbarlist*/
-	public static String EXTRA_BOTTOMSTATUSBARLIST = "bottomstatusbarlist";
-	/** goodsList*/
-	public static String EXTRA_GOODSLIST = "goodsList";
-	/** goodInfo*/
-	public static String EXTRA_GOODINFO = "goodInfo";
-	/** sendInfo*/
-	public static String EXTRA_SENDINFO = "sendInfo";
-	/** goodsforType*/
-	public static String EXTRA_GOODSFORTYPE = "goodsforType";
-	
-	/** goodstype_code*/
-	public static String EXTRA_GOODSTYPECODE = "goodstype_code";
-	/** goodstype_name*/
-	public static String EXTRA_GOODSTYPENAME = "goodstype_name";
-	/** goods*/
-	public static String EXTRA_GOODS = "goods";
-	
-	public static String EXTRA_FLAG = "flag";
-	
-	public LocationLogic(HttpService service) {
-		super(service);
-		List<String> actions = new ArrayList<String>();
-		actions.add(ACTION_GET_LOCATION);
-		actions.add(ACTION_GET_LOCATION_ADDR);
-		actions.add(ACTION_GET_LOCATION_LIST2SHOP);
-		actions.add(ACTION_GET_SELECT_BROWER_SHOP);
-		actions.add(ACTION_GET_SELECT_BROWER_SHOP_CATEGORY);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_GET_LOCATION.equals(action)) {
-			String lng = intent.getStringExtra(EXTRA_LNG);
-			String lat = intent.getStringExtra(EXTRA_LAT);
-			int pagenum = intent.getExtras().getInt(EXTRA_PAGENUM);
-			int pagesize = intent.getExtras().getInt(EXTRA_PAGESIZE);
-			int loadType = intent.getIntExtra(EXTRA_LOADTYPE, 1);
-			getLocation(lng, lat, pagenum, pagesize,loadType);
- 		}else if (ACTION_GET_LOCATION_ADDR.equals(action)) {
-			String address = intent.getStringExtra(EXTRA_ADDRESS);
-			int pagenum = intent.getExtras().getInt(EXTRA_PAGENUM);
-			int pagesize = intent.getExtras().getInt(EXTRA_PAGESIZE);
-			int loadType = intent.getIntExtra(EXTRA_LOADTYPE, 1);
-			getLocationByAddr(address,pagenum,pagesize,loadType);
-		}else if (ACTION_GET_LOCATION_LIST2SHOP.equals(action)) {
-			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
-			int usercode = intent.getExtras().getInt(EXTRA_USERCODE);
-			int loadType = intent.getExtras().getInt(EXTRA_LOADTYPE);
-			getShopInfo(shopcode,usercode,loadType);
-		}else if (ACTION_GET_SELECT_BROWER_SHOP.equals(action)) {
-			String lng = intent.getStringExtra(EXTRA_LNG);
-			String lat = intent.getStringExtra(EXTRA_LAT);
-			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
-			int usercode = intent.getExtras().getInt(EXTRA_USERCODE);
-			getBrowerShop(lng,lat,shopcode,usercode);
-		}else if (ACTION_GET_SELECT_BROWER_SHOP_CATEGORY.equals(action)) {
-			String lng = intent.getStringExtra(EXTRA_LNG);
-			String lat = intent.getStringExtra(EXTRA_LAT);
-			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
-			int usercode = intent.getExtras().getInt(EXTRA_USERCODE);
-			getBrowerShopCategory(lng,lat,shopcode,usercode);
-		}
-	}
-
-	private void getBrowerShopCategory(String lng, String lat, int shopcode,
-			int usercode) {
-		SelectShopReq req = new SelectShopReq(ReqInfo.REQ_GET_SELECT_BROWERS_SHOP, lng, lat, shopcode, usercode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_SHOPS)) {
-									JSONArray array = msg.getJSONArray(EXTRA_SHOPS);
-									if (array != null && array.length() > 0) {
-										ArrayList<ShopInfo> shopList = new ArrayList<ShopInfo>();
-										JSONObject shopObj = null ;
-										ShopInfo shopInfo = null ;
-										for (int i = 0; i < array.length(); i++) {
-											shopObj = (JSONObject) array.get(i);
-											shopInfo = gson.fromJson(shopObj.toString(), ShopInfo.class);
-											shopList.add(shopInfo);
-										}
-										bundle.putSerializable(EXTRA_SHOPLIST, shopList);
-									}
-								}
-							}
-							notice(Event.GET_SELECT_BROWER_SHOP_CATEGORY_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_SELECT_BROWER_SHOP_CATEGORY_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_SELECT_BROWER_SHOP_CATEGORY_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_SELECT_BROWER_SHOP_CATEGORY_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 首页重新选择便利店*/
-	private void getBrowerShop(String lng, String lat, int shopcode,
-			int usercode) {
-		SelectShopReq req = new SelectShopReq(ReqInfo.REQ_GET_SELECT_BROWERS_SHOP, lng, lat, shopcode, usercode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_SHOPS)) {
-									JSONArray array = msg.getJSONArray(EXTRA_SHOPS);
-									if (array != null && array.length() > 0) {
-										ArrayList<ShopInfo> shopList = new ArrayList<ShopInfo>();
-										JSONObject shopObj = null ;
-										ShopInfo shopInfo = null ;
-										for (int i = 0; i < array.length(); i++) {
-											shopObj = (JSONObject) array.get(i);
-											shopInfo = gson.fromJson(shopObj.toString(), ShopInfo.class);
-											shopList.add(shopInfo);
-										}
-										bundle.putSerializable(EXTRA_SHOPLIST, shopList);
-									}
-								}
-							}
-							notice(Event.GET_SELECT_BROWER_SHOP_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_SELECT_BROWER_SHOP_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_SELECT_BROWER_SHOP_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_SELECT_BROWER_SHOP_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 获取上铺首页信息*/
-	private void getShopInfo(int shopcode, int usercode,final int loadType) {
-		ShopInfoReq req = new ShopInfoReq(ReqInfo.REQ_GET_SHOP_INFO, shopcode, usercode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_LOADTYPE, loadType);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_INDEXINFO)) {
-									JSONArray jsonArray = msg.getJSONArray(EXTRA_INDEXINFO);
-									if (jsonArray != null && jsonArray.length() > 0) {
-										JSONObject jsonObj1 = (JSONObject) jsonArray.get(0);
-										JSONObject jsonObj2 = (JSONObject) jsonArray.get(1);
-										JSONObject jsonObj3 = (JSONObject) jsonArray.get(2);
-										JSONObject jsonObj4 = (JSONObject) jsonArray.get(3);
-										JSONObject jsonObj5 = (JSONObject) jsonArray.get(4);
-										JSONObject jsonObj6 = (JSONObject) jsonArray.get(5);
-										
-										//商铺详情
-										if (jsonObj1 != null && jsonObj1.has(EXTRA_SHOPINFO) ) {
-											JSONArray shopArray = jsonObj1.getJSONArray(EXTRA_SHOPINFO);
-											if (shopArray != null && shopArray.length() >0 ) {
-												JSONObject shopObj = null;
-												ShopInfo shopInfo = null;
-												ArrayList<ShopInfo> shopList = new ArrayList<ShopInfo>();
-												for (int i = 0; i < shopArray.length(); i++) {
-													shopObj = (JSONObject) shopArray.get(0);
-													shopInfo = gson.fromJson(shopObj.toString(), ShopInfo.class);
-													shopList.add(shopInfo);
-													SPUtils.saveString(mContext, GlobalInfo.KEY_SHOPINFO, shopObj.toString());
-													SPUtils.saveString(mContext, GlobalInfo.KEY_SHOPNAME, shopInfo.getShop_name());
-													SPUtils.saveInt(mContext, GlobalInfo.KEY_SHOPSTATE, shopInfo.getStatus());
-													
-													int shopcode = shopInfo.getShop_code();
-													int old = SPUtils.getInt(mContext, GlobalInfo.KEY_SHOPCODE, 0);
-													if (old != shopcode) {
-														SPUtils.saveBoolean(mContext, GlobalInfo.KEY_NEEDLOAD, true);
-														SPUtils.saveInt(mContext, GlobalInfo.KEY_SHOPCODE, shopcode);
-													}
-												}
-												bundle.putSerializable(EXTRA_SHOPLIST,shopList);
-											}
-										}
-										
-										//轮播图
-										if (jsonObj2 != null && jsonObj2.has(EXTRA_BANNERINFO) ) {
-											JSONArray bannerArray = jsonObj2.getJSONArray(EXTRA_BANNERINFO);
-											if (bannerArray != null && bannerArray.length() >0 ) {
-												JSONObject shopObj = null;
-												Banner banner = null;
-												ArrayList<Banner> bannerList = new ArrayList<Banner>();
-												for (int i = 0; i < bannerArray.length(); i++) {
-													shopObj = (JSONObject) bannerArray.get(i);
-													banner = gson.fromJson(shopObj.toString(), Banner.class);
-													bannerList.add(banner);
-												}
-												bundle.putSerializable(EXTRA_BANNERINFO, bannerList);
-											}
-										}
-										
-										//特价商品
-										if (jsonObj3 != null && jsonObj3.has(EXTRA_GOODINFO)) {
-											String text = jsonObj3.getString(EXTRA_GOODINFO);
-											if (!text.equals("null")) {
-												JSONArray goodsArray = jsonObj3.getJSONArray(EXTRA_GOODINFO);
-												if (goodsArray != null && goodsArray.length() > 0) {
-													JSONObject shopObj = null;
-													ArrayList<Goods> bargainGoodsList = new ArrayList<Goods>();
-													for (int i = 0; i < goodsArray.length(); i++) {
-														shopObj = (JSONObject) goodsArray.get(i);
-														Goods bargainGoods = gson.fromJson(shopObj.toString(),Goods.class);
-														bargainGoodsList.add(bargainGoods);
-													}
-													bundle.putSerializable(EXTRA_BARGAINGOODSLIST, bargainGoodsList);
-												}
-											} else {
-												bundle.putSerializable(EXTRA_BARGAINGOODSLIST,null);
-											}
-										} else {
-											bundle.putSerializable(EXTRA_BARGAINGOODSLIST,null);
-										}
-										
-										//购物车信息
-										if (jsonObj4 != null && jsonObj4.has(EXTRA_SENDINFO) ) {
-											JSONArray sendInfoArray = jsonObj4.getJSONArray(EXTRA_SENDINFO);
-											if (sendInfoArray != null && sendInfoArray.length() > 0 ) {
-												ArrayList<BottomStatusBar> bottomStatusBaeList = new ArrayList<BottomStatusBar>();
-												JSONObject bottomStatusBarObj = (JSONObject) sendInfoArray.get(0);
-												BottomStatusBar bottomStatusBar = gson.fromJson(bottomStatusBarObj.toString(), BottomStatusBar.class);
-												bottomStatusBaeList.add(bottomStatusBar);
-												//TODO 所有关于底部购物车的信息都用LocationLogic.EXTRA_BOTTOMSTATUSBARLIST
-												bundle.putSerializable(EXTRA_BOTTOMSTATUSBARLIST,bottomStatusBaeList);
-											}
-										}
-										
-										//产品分类
-										if (jsonObj5 != null && jsonObj5.has(EXTRA_GOODSFORTYPE)) {
-											JSONArray goodsTypeArray = jsonObj5.getJSONArray(EXTRA_GOODSFORTYPE);
-											if (goodsTypeArray != null && goodsTypeArray.length() > 0) {
-												ArrayList<Category> categoryList = new ArrayList<Category>();
-												ArrayList<Goods> goodsList = null;
-												Category category = null;
-												for (int i = 0; i < goodsTypeArray.length(); i++) {
-													JSONObject goodsType = (JSONObject) goodsTypeArray.get(i);
-													int goodsTypeCode = 0;
-													String goodsTypeName = "";
-													category = new Category();
-													goodsList = new ArrayList<Goods>() ;
-													if (goodsType.has(EXTRA_GOODSTYPECODE)) {
-														goodsTypeCode = goodsType.getInt(EXTRA_GOODSTYPECODE);
-														category.setGoodstype_code(goodsTypeCode);
-													}
-													if (goodsType.has(EXTRA_GOODSTYPENAME)) {
-														goodsTypeName = goodsType.getString(EXTRA_GOODSTYPENAME);
-														category.setGoodstype_name(goodsTypeName);
-													}
-													if (goodsType.has(EXTRA_GOODS)) {
-														JSONArray goodsArr = goodsType.getJSONArray(EXTRA_GOODS);
-														if (goodsArr != null && goodsArr.length() > 0) {
-															JSONObject goodsObj = null;
-															for (int j = 0; j < goodsArr.length(); j++) {
-																goodsObj = (JSONObject) goodsArr.get(j);
-																Goods goods = gson.fromJson(goodsObj.toString(),Goods.class);
-																goodsList.add(goods);
-															}
-															category.setGoodsList(goodsList);
-														}
-													}
-													categoryList.add(category);
-												}
-												bundle.putSerializable(EXTRA_GOODSLIST,categoryList);
-											}
-										}
-										
-										/**购买水票标识*/
-										if (jsonObj6 != null && jsonObj6.has(EXTRA_FLAG)) {
-											int flag = jsonObj6.getInt(EXTRA_FLAG);
-											bundle.putInt(EXTRA_FLAG, flag);
-										}
-									}
-								}
-							}
-							notice(Event.GET_SHOP_INFO_SUCCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_SHOP_INFO_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_SHOP_INFO_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_SHOP_INFO_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 通过地址获取商店列表*/
-	private void getLocationByAddr(String address, int pagenum, int pagesize,final int loadType) {
-		LocationAddrReq req = new LocationAddrReq(ReqInfo.REQ_GET_LOCATION_ADDR, address, pagenum, pagesize);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_LOADTYPE, loadType);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_SHOPS)) {
-									JSONArray array = msg.getJSONArray(EXTRA_SHOPS);
-									if (array != null && array.length() > 0) {
-										JSONObject addObj = (JSONObject) array.get(0);
-										if (addObj != null) {
-											if (addObj.has(GlobalInfo.ADDRESS)) {
-												String address = addObj.getString(GlobalInfo.ADDRESS);
-												SPUtils.saveString(mContext, GlobalInfo.ADDRESS, address);
-											}
-											if (addObj.has(EXTRA_LNG)) {
-												String lng = addObj.getString(EXTRA_LNG);
-												SPUtils.saveString(mContext, GlobalInfo.LNG, lng);
-											}
-											if (addObj.has(EXTRA_LAT)) {
-												String lat = addObj.getString(EXTRA_LAT);
-												SPUtils.saveString(mContext, GlobalInfo.LAT, lat);
-											}
-											
-										}
-										JSONObject objShop = (JSONObject) array.get(1);
-										if (objShop != null ) {
-											if (objShop.has(GlobalInfo.TOTALPAGE)) {
-												int totalPage = objShop.getInt(GlobalInfo.TOTALPAGE);
-												bundle.putInt(GlobalInfo.TOTALPAGE, totalPage);
-											}
-											if (objShop.has(GlobalInfo.CURPAGE)) {
-												int curpage = objShop.getInt(GlobalInfo.CURPAGE);
-												bundle.putInt(GlobalInfo.CURPAGE, curpage);
-											}
-											if (objShop.has(GlobalInfo.TOTALRECORDER)) {
-												int totalRecorder = objShop.getInt(GlobalInfo.TOTALRECORDER);
-												bundle.putInt(GlobalInfo.TOTALRECORDER, totalRecorder);
-											}
-											if (objShop.has(EXTRA_SHOPLIST)) {
-												JSONArray shopArray = objShop.getJSONArray(EXTRA_SHOPLIST);
-												if (shopArray != null && shopArray.length() > 0 ) {
-													ArrayList<ShopInfo> list = new ArrayList<ShopInfo>();
-													ShopInfo shopInfo = null;
-													for (int i = 0; i < shopArray.length(); i++) {
-														Object object = shopArray.get(i);
-														shopInfo = gson.fromJson(object.toString(), ShopInfo.class);
-														list.add(shopInfo);
-													}
-													bundle.putSerializable(EXTRA_SHOPLIST,list);
-												}
-											}
-										}
-									}
-								}
-							}
-							notice(Event.GET_LOCATION_ADDR_SUCCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_LOCATION_ADDR_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_LOCATION_ADDR_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_LOCATION_ADDR_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 通过经纬度获取商店列表*/
-	private void getLocation(String lng, String lat, int pagenum, int pagesize,final int loadType) {
-		LocationReq req = new LocationReq(ReqInfo.REQ_GET_LOCATION, lng, lat, pagenum, pagesize);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_LOADTYPE, loadType);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_SHOPS)) {
-									JSONArray array = msg.getJSONArray(EXTRA_SHOPS);
-									if (array != null && array.length() > 0) {
-										JSONObject addObj = (JSONObject) array.get(0);
-										if (addObj != null) {
-											if (addObj.has(GlobalInfo.ADDRESS)) {
-												String address = addObj.getString(GlobalInfo.ADDRESS);
-												SPUtils.saveString(mContext, GlobalInfo.ADDRESS, address);
-											}
-											if (addObj.has(EXTRA_LNG)) {
-												String lng = addObj.getString(EXTRA_LNG);
-												SPUtils.saveString(mContext, GlobalInfo.LNG, lng);
-											}
-											if (addObj.has(EXTRA_LAT)) {
-												String lat = addObj.getString(EXTRA_LAT);
-												SPUtils.saveString(mContext, GlobalInfo.LAT, lat);
-											}
-											
-										}
-										JSONObject objShop = (JSONObject) array.get(1);
-										if (objShop != null ) {
-											if (objShop.has(GlobalInfo.TOTALPAGE)) {
-												int totalPage = objShop.getInt(GlobalInfo.TOTALPAGE);
-												bundle.putInt(GlobalInfo.TOTALPAGE, totalPage);
-											}
-											if (objShop.has(GlobalInfo.CURPAGE)) {
-												int curpage = objShop.getInt(GlobalInfo.CURPAGE);
-												bundle.putInt(GlobalInfo.CURPAGE, curpage);
-											}
-											if (objShop.has(GlobalInfo.TOTALRECORDER)) {
-												int totalRecorder = objShop.getInt(GlobalInfo.TOTALRECORDER);
-												bundle.putInt(GlobalInfo.TOTALRECORDER, totalRecorder);
-											}
-											if (objShop.has(EXTRA_SHOPLIST)) {
-												JSONArray shopArray = objShop.getJSONArray(EXTRA_SHOPLIST);
-												if (shopArray != null && shopArray.length() > 0 ) {
-													ArrayList<ShopInfo> list = new ArrayList<ShopInfo>();
-													ShopInfo shopInfo = null;
-													for (int i = 0; i < shopArray.length(); i++) {
-														Object object = shopArray.get(i);
-														shopInfo = gson.fromJson(object.toString(), ShopInfo.class);
-														list.add(shopInfo);
-													}
-													bundle.putSerializable(EXTRA_SHOPLIST,list);
-												}
-											}
-										}
-									}
-								}
-							}
-							notice(Event.GET_LOCATION_SUCCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_LOCATION_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_LOCATION_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_LOCATION_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/GoodDeleteReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/GoodDeleteReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/GoodDeleteReq.java	(revision )
@@ -1,51 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: GoodDeleteReq
- * @Description: 删除购物车中一条商品纪录
- * @author zxl
- * @date 2015年6月9日 下午5:13:10
- */
-public class GoodDeleteReq extends HttpReq {
-
-	/** 页数 */
-	private int usercode;
-	/** 每页大小 */
-	private int changecode;
-
-	public GoodDeleteReq(int reqId, int usercode, int changecode) {
-		super();
-		this.id = reqId;
-		this.usercode = usercode;
-		this.changecode = changecode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-
-	public int getChangecode() {
-		return changecode;
-	}
-
-	public void setChangecode(int changecode) {
-		this.changecode = changecode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + usercode + "&changecode=" + changecode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/MyAddress.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/MyAddress.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/MyAddress.java	(revision )
@@ -1,66 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/**
- * 
- * @ClassName:MyAddress
- * @Description:MyAddress
- * @author YY
- * @date 2015年6月8日 下午12:28:17
- */
-public class MyAddress implements Serializable{
-
-	private static final long serialVersionUID = -3587094999907260779L;
-	/**选中状态*/
-	private int defalut_addr;
-	/**用户名*/
-	private String rev_name;
-	/**用户地址*/
-	private String user_addr;
-	/**用户编号*/
-	private int user_code;
-	/**用户地址的ID*/
-	private int user_loc_code;
-	/**用户联系方式*/
-	private String user_tel;
-	public int getDefalut_addr() {
-		return defalut_addr;
-	}
-	public void setDefalut_addr(int defalut_addr) {
-		this.defalut_addr = defalut_addr;
-	}
-	public String getRev_name() {
-		return rev_name;
-	}
-	public void setRev_name(String rev_name) {
-		this.rev_name = rev_name;
-	}
-	public String getUser_addr() {
-		return user_addr;
-	}
-	public void setUser_addr(String user_addr) {
-		this.user_addr = user_addr;
-	}
-	public int getUser_code() {
-		return user_code;
-	}
-	public void setUser_code(int user_code) {
-		this.user_code = user_code;
-	}
-	public int getUser_loc_code() {
-		return user_loc_code;
-	}
-	public void setUser_loc_code(int user_loc_code) {
-		this.user_loc_code = user_loc_code;
-	}
-	public String getUser_tel() {
-		return user_tel;
-	}
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-	
-	
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InsertAddrReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InsertAddrReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/InsertAddrReq.java	(revision )
@@ -1,65 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-public class InsertAddrReq extends HttpReq {
-	
-	private int userCode;
-	private String userName;
-	private String userPhone;
-	private String userAddr;
-	
-	
-
-	public InsertAddrReq(int reqid,int userCode, String userName, String userPhone,String userAddr) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-		this.userName = userName;
-		this.userPhone = userPhone;
-		this.userAddr = userAddr;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	public String getUserName() {
-		return userName;
-	}
-
-	public void setUserName(String userName) {
-		this.userName = userName;
-	}
-
-	public String getUserPhone() {
-		return userPhone;
-	}
-
-	public void setUserPhone(String userPhone) {
-		this.userPhone = userPhone;
-	}
-
-	public String getUserAddr() {
-		return userAddr;
-	}
-
-	public void setUserAddr(String userAddr) {
-		this.userAddr = userAddr;
-	}
-
-	@Override
-	public String getParams() {
-		return "usercode=" + userCode + "&rev_name=" + userName + "&user_tel="+ userPhone + "&user_addr=" + userAddr;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/GoodsDetailsReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/GoodsDetailsReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/GoodsDetailsReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: GoodsDetailsReq
- * @Description: 商品详情请求
- * @author zxl
- * @date 2015年6月3日 下午8:06:15
- */
-public class GoodsDetailsReq extends HttpReq {
-
-	/** 商店商品标识id */
-	private int changcode;
-	/** 如果用户登录，那么传用户id */
-	private int usercode;
-
-	public GoodsDetailsReq(int reqid, int changcode, int usercode) {
-		super();
-		this.id = reqid;
-		this.changcode = changcode;
-		this.usercode = usercode;
-	}
-
-	public int getChangcode() {
-		return changcode;
-	}
-
-	public void setChangcode(int changcode) {
-		this.changcode = changcode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?changcode=" + changcode + "&usercode=" + usercode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ToastBasic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ToastBasic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ToastBasic.java	(revision )
@@ -1,65 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.view.Gravity;
-import android.widget.Toast;
-
-public class ToastBasic {
-
-    public static Toast toast;
-
-    public static void showToast(Context context, String text, int duration) {
-
-        toast = Toast.makeText(context, text, duration);
-
-        toast.show();
-    }
-
-    public static void showToast(Context context, int resId, int duration) {
-
-        toast = Toast.makeText(context, resId, duration);
-
-        toast.show();
-    }
-
-    public static void showToast(Context context, String text) {
-
-        // TextView
-        // tv=(TextView)Splash.toastRoot.findViewById(R.id.TextViewInfo);
-        // tv.setText(text);
-        toast = Toast.makeText(context, text, Toast.LENGTH_SHORT);
-        // toast = new Toast(context);
-        // toast.setText(text);
-        // toast.setDuration(Toast.LENGTH_SHORT);
-        toast.show();
-    }
-
-    // 设置显示的位置
-    public static void showToastLocal(String text) {
-        // TextView
-        // tv=(TextView)Splash.toastRoot.findViewById(R.id.TextViewInfo);
-        // tv.setText(text);
-        toast.setText(text);
-        toast.setGravity(Gravity.BOTTOM, 0, 0);
-        toast.show();
-    }
-
-    public static void showToast(int resId) {
-
-        toast.setText(resId);
-
-        toast.show();
-    }
-
-    public static void closeToast() {
-
-        toast.cancel();
-    }
-
-    public static void setToastLocation(int gravity) {
-
-        toast.setGravity(gravity, 0, 0);
-
-    }
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/AddAndSubView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/AddAndSubView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/AddAndSubView.java	(revision )
@@ -1,662 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.annotation.SuppressLint;
-import android.content.Context;
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.graphics.drawable.Drawable;
-import android.text.Editable;
-import android.text.TextWatcher;
-import android.util.AttributeSet;
-import android.view.Gravity;
-import android.view.View;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.LinearLayout;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.RegistActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.ActivityMgr;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/**
- * @ClassName: AddAndSubView
- * @Description: 加減自定义控件
- * @author zxl
- * @date 2015年6月9日 上午10:04:04
- */
-public class AddAndSubView extends LinearLayout {
-	Context context;
-	LinearLayout mainLinearLayout; // 主View，即AddAndSubView
-	LinearLayout leftLinearLayout; // 内部左view
-	LinearLayout centerLinearLayout; // 中间view
-	LinearLayout rightLinearLayout; // 内部右view
-	OnNumChangeListener onNumChangeListener;
-	Button addButton;
-	Button subButton;
-	EditText editText;
-	int num; // editText中的数值
-	int editTextLayoutWidth; // editText视图的宽度
-	int editTextLayoutHeight; // editText视图的宽度
-	int editTextMinimumWidth; // editText视图的最小宽度
-	int editTextMinimumHeight; // editText视图的最小高度
-	int editTextMinHeight; // editText文本区域的最小高度
-	int editTextHeight; // editText文本区域的高度
-
-	int number;// 手动输入的商品数量
-	int changecode;// 商品的唯一编码
-	int limited;//<=0,标识商品为不限购商品
-
-	public int getLimited() {
-		return limited;
-	}
-
-	public void setLimited(int limited) {
-		this.limited = limited;
-	}
-
-	public int getChangecode() {
-		return changecode;
-	}
-
-	public void setChangecode(int changecode) {
-		this.changecode = changecode;
-	}
-
-	public AddAndSubView(Context context) {
-		super(context);
-		this.context = context;
-		num = 0;
-		control();
-	}
-
-	/**
-	 * 带初始数据实例化
-	 * 
-	 * @param context
-	 * @param 初始数据
-	 */
-	public AddAndSubView(Context context, int num, int mchangecode,int limited) {
-		super(context);
-		this.context = context;
-		this.num = num;
-		this.changecode = mchangecode;
-		this.limited = limited;
-		control();
-	}
-
-	/**
-	 * 从XML中实例化
-	 */
-	public AddAndSubView(Context context, AttributeSet attrs) {
-		super(context, attrs);
-		this.context = context;
-		num = 0;
-		control();
-	}
-
-	/**
-	 * 
-	 */
-	private void control() {
-		initTextWithHeight();
-		initialise(); // 实例化内部view
-		setViewsLayoutParm(); // 设置内部view的布局参数
-		insertView(); // 将子view放入linearlayout中
-		setViewListener();
-	}
-
-	/**
-	 * 初始化EditText宽高参数
-	 */
-	private void initTextWithHeight() {
-		editTextLayoutWidth = -1;
-		editTextLayoutHeight = -1;
-		editTextMinimumWidth = -1;
-		editTextMinimumHeight = -1;
-		editTextMinHeight = -1;
-		editTextHeight = -1;
-	}
-
-	/**
-	 * 实例化内部View
-	 */
-	@SuppressWarnings("deprecation")
-	private void initialise() {
-		mainLinearLayout = new LinearLayout(context);
-		leftLinearLayout = new LinearLayout(context);
-		centerLinearLayout = new LinearLayout(context);
-		rightLinearLayout = new LinearLayout(context);
-		addButton = new Button(context);
-		subButton = new Button(context);
-		editText = new EditText(context);
-
-		addButton.setText("+");
-		subButton.setText("-");
-
-		addButton.setTextColor(0x00000000);
-		subButton.setTextColor(0x00000000);
-
-		addButton.setTag("+");
-		subButton.setTag("-");
-		// 设置输入类型为数字
-		editText.setInputType(android.text.InputType.TYPE_CLASS_NUMBER);
-		editText.setText(String.valueOf(num));
-		editText.setBackgroundDrawable(null);
-		editText.setTextSize(14);
-		editText.setFocusable(false);
-	}
-
-	/**
-	 * 设置内部view的布局参数
-	 */
-	@SuppressWarnings("deprecation")
-	@SuppressLint("NewApi")
-	private void setViewsLayoutParm() {
-		LayoutParams viewLayoutParams = new LayoutParams(
-				LinearLayout.LayoutParams.WRAP_CONTENT,
-				LinearLayout.LayoutParams.WRAP_CONTENT);
-
-		addButton.setBackgroundDrawable(null);
-		subButton.setBackgroundDrawable(null);
-		addButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.ic_add));
-		subButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.ic_sub));
-
-		addButton.setLayoutParams(viewLayoutParams);
-		subButton.setLayoutParams(viewLayoutParams);
-		editText.setLayoutParams(viewLayoutParams);
-		editText.setGravity(Gravity.CENTER);
-		setTextWidthHeight();
-
-		viewLayoutParams.gravity = Gravity.CENTER;
-		centerLinearLayout.setLayoutParams(viewLayoutParams);
-		// 让editText不自动获得焦点
-		centerLinearLayout.setFocusable(true);
-		centerLinearLayout.setFocusableInTouchMode(true);
-
-		viewLayoutParams.width = LinearLayout.LayoutParams.WRAP_CONTENT;
-		viewLayoutParams.weight = 1.0f;
-		leftLinearLayout.setLayoutParams(viewLayoutParams); // 参数：宽、高、比重，比重为1.0
-		rightLinearLayout.setLayoutParams(viewLayoutParams); // 参数：宽、高、比重，比重为1.0
-
-		viewLayoutParams.width = LinearLayout.LayoutParams.MATCH_PARENT;
-		mainLinearLayout.setLayoutParams(viewLayoutParams);
-		mainLinearLayout.setOrientation(LinearLayout.HORIZONTAL);
-	}
-
-	/**
-	 * 设置整体控件的宽高度
-	 * 
-	 * @param widthDp
-	 *            宽度DP
-	 * @param heightDp
-	 *            高度DP
-	 */
-	public void setViewsLayoutParm(int widthDp, int heightDp) {
-		LayoutParams viewLayoutParams = new LayoutParams(dip2px(context,widthDp), dip2px(context, heightDp));
-		mainLinearLayout.setLayoutParams(viewLayoutParams);
-	}
-
-	/**
-	 * 设置按钮的宽高度
-	 * 
-	 * @param widthDp
-	 *            宽度DP
-	 * @param heightDp
-	 *            高度DP
-	 */
-	public void setButtonLayoutParm(int widthDp, int heightDp) {
-		LayoutParams viewLayoutParams = new LayoutParams(dip2px(context,widthDp), dip2px(context, heightDp));
-		addButton.setLayoutParams(viewLayoutParams);
-		subButton.setLayoutParams(viewLayoutParams);
-		leftLinearLayout.setLayoutParams(viewLayoutParams);
-		rightLinearLayout.setLayoutParams(viewLayoutParams);
-	}
-
-	/**
-	 * 根据手机的分辨率从 dp 的单位 转成为 px(像素)
-	 */
-	private int dip2px(Context context, float dpValue) {
-		final float scale = context.getResources().getDisplayMetrics().density;
-		return (int) (dpValue * scale + 0.5f);
-	}
-
-	/**
-	 * 设置EditText视图和文本区域宽高
-	 */
-	private void setTextWidthHeight() {
-		// 设置视图最小宽度
-		if (editTextMinimumWidth < 0) {
-			editTextMinimumWidth = dip2px(context, 80f);
-		}
-		editText.setMinimumWidth(dip2px(context, editTextMinimumWidth));
-		centerLinearLayout.setMinimumWidth(dip2px(context, editTextMinimumWidth));
-
-		// 设置文本区域高度
-		if (editTextHeight > 0) {
-			if (editTextMinHeight >= 0 && editTextMinHeight > editTextHeight) {
-				editTextHeight = editTextMinHeight;
-			}
-			editText.setHeight(dip2px(context, editTextHeight));
-		}
-
-		// 设置视图高度
-		if (editTextLayoutHeight > 0) {
-			if (editTextMinimumHeight > 0 && editTextMinimumHeight > editTextLayoutHeight) {
-				editTextLayoutHeight = editTextMinimumHeight;
-			}
-
-			LayoutParams layoutParams = (LayoutParams) editText.getLayoutParams();
-			layoutParams.height = dip2px(context, editTextLayoutHeight);
-			editText.setLayoutParams(layoutParams);
-			centerLinearLayout.setLayoutParams(layoutParams);
-		}
-
-		// 设置视图宽度
-		if (editTextLayoutWidth > 0) {
-			if (editTextMinimumWidth > 0 && editTextMinimumWidth > editTextLayoutWidth) {
-				editTextLayoutWidth = editTextMinimumWidth;
-			}
-
-			LayoutParams layoutParams = (LayoutParams) editText.getLayoutParams();
-			layoutParams.width = dip2px(context, editTextLayoutWidth);
-			editText.setLayoutParams(layoutParams);
-			centerLinearLayout.setLayoutParams(layoutParams);
-		}
-	}
-
-	/**
-	 * 将子view放入linearlayout中
-	 */
-	private void insertView() {
-		mainLinearLayout.addView(leftLinearLayout, 0);
-		mainLinearLayout.addView(centerLinearLayout, 1);
-		mainLinearLayout.addView(rightLinearLayout, 2);
-
-		leftLinearLayout.addView(subButton);
-		centerLinearLayout.addView(editText);
-		rightLinearLayout.addView(addButton);
-
-		addView(mainLinearLayout); // 将整块视图添加进当前AddAndSubView中
-	}
-
-	/**
-	 * 设置editText中的值
-	 * 
-	 * @param num
-	 */
-	public void setNum(int num) {
-		this.num = num;
-		editText.setText(String.valueOf(num));
-	}
-
-	/**
-	 * 获取editText中的值
-	 * 
-	 * @return
-	 */
-	public int getNum() {
-		if (editText.getText().toString() != null) {
-			return Integer.parseInt(editText.getText().toString());
-		} else {
-			return 0;
-		}
-	}
-
-	/**
-	 * 设置EditText视图的最小高度
-	 * 
-	 * @param minimumWidth
-	 *            EditText的最小高度，单位px
-	 */
-	public void setEditTextMinimumWidth(int editTextMinimumWidth) {
-		// 设置视图最小宽度
-		if (editTextMinimumWidth > 0) {
-			this.editTextMinimumWidth = editTextMinimumWidth;
-			editText.setMinimumWidth(dip2px(context, editTextMinimumWidth));
-		}
-
-	}
-
-	/**
-	 * 设置EditText视图的最小高度
-	 * @param editTextMinimumHeight
-	 *            EditText视图的最小高度,单位：px
-	 */
-	public void setEditTextMinimumHeight(int editTextMinimumHeight) {
-		// 设置视图最小高度
-		if (editTextMinimumHeight > 0) {
-			this.editTextMinimumHeight = editTextMinimumHeight;
-			editText.setMinimumHeight(dip2px(context, editTextMinimumHeight));
-		}
-	}
-
-	/**
-	 * 设置EditText文本区域的最小高度
-	 * 
-	 * @param editTextMinHeight
-	 *            EditText文本区域的最小高度,单位：px
-	 */
-	public void setEditTextMinHeight(int editTextMinHeight) {
-		// 设置文本区域最小高度
-		if (editTextMinHeight > 0) {
-			this.editTextMinHeight = editTextMinHeight;
-			editText.setMinHeight(dip2px(context, editTextMinHeight));
-		}
-	}
-
-	/**
-	 * 设置EditText文本区域的高度
-	 * 
-	 * @param editTextHeight
-	 *            EditText文本区域的高度,单位：px
-	 */
-	public void setEditTextHeight(int editTextHeight) {
-		this.editTextHeight = editTextHeight;
-		setTextWidthHeight();
-	}
-
-	/**
-	 * 设置EditText视图的宽度
-	 * 
-	 * @param editTextLayoutWidth
-	 *            设置EditText视图的宽度,单位px
-	 */
-	public void setEditTextLayoutWidth(int editTextLayoutWidth) {
-		this.editTextLayoutWidth = editTextLayoutWidth;
-		setTextWidthHeight();
-	}
-
-	/**
-	 * 设置EditText视图的高度
-	 * 
-	 * @param editTextLayoutHeight
-	 *            EditText视图的最小高度，单位px
-	 */
-	public void setEditTextLayoutHeight(int editTextLayoutHeight) {
-		this.editTextLayoutHeight = editTextLayoutHeight;
-		setTextWidthHeight();
-	}
-
-	/**
-	 * 设置输入框中的字体大小
-	 * 
-	 * @param spValue
-	 *            字体大小SP
-	 */
-	public void setTextSize(int spValue) {
-		editText.setTextSize(spValue);
-	}
-
-	/**
-	 * 以Drawable形式 设置按钮背景图
-	 * 
-	 * @param addBtnDrawable
-	 *            加号背景图
-	 * @param subBtnDrawable
-	 *            减号背景图
-	 */
-	@SuppressWarnings("deprecation")
-	public void setButtonBgDrawable(Drawable addBtnDrawable,
-			Drawable subBtnDrawable) {
-		// 不推荐用setBackgroundDrawable，新API推荐用setBackground（在API 16中）
-		addButton.setBackgroundDrawable(addBtnDrawable);
-		subButton.setBackgroundDrawable(subBtnDrawable);
-		addButton.setText("");
-		subButton.setText("");
-	}
-
-	/**
-	 * 以资源Resource形式 设置按钮背景图
-	 * 
-	 * @param addBtnResource
-	 *            加号背景图
-	 * @param subBtnResource
-	 *            减号背景图
-	 */
-	public void setButtonBgResource(int addBtnResource, int subBtnResource) {
-		addButton.setBackgroundResource(addBtnResource);
-		subButton.setBackgroundResource(subBtnResource);
-		addButton.setText("");
-		subButton.setText("");
-	}
-
-	/**
-	 * 设置按钮背景色
-	 * 
-	 * @param addBtnColor
-	 *            加号背景色
-	 * @param subBtnColor
-	 *            减号背景色
-	 */
-	public void setButtonBgColor(int addBtnColor, int subBtnColor) {
-		addButton.setBackgroundColor(addBtnColor);
-		subButton.setBackgroundColor(subBtnColor);
-	}
-
-	/**
-	 * 设置EditText文本变化监听
-	 * 
-	 * @param onNumChangeListener
-	 */
-	public void setOnNumChangeListener(OnNumChangeListener onNumChangeListener) {
-		this.onNumChangeListener = onNumChangeListener;
-	}
-
-	/**
-	 * 设置文本变化相关监听事件
-	 */
-	private void setViewListener() {
-		addButton.setOnClickListener(new OnButtonClickListener());
-		subButton.setOnClickListener(new OnButtonClickListener());
-		editText.addTextChangedListener(new OnTextChangeListener());
-	}
-
-	/**
-	 * 加减按钮事件监听器
-	 * 
-	 * @author ZJJ
-	 * 
-	 */
-	class OnButtonClickListener implements OnClickListener {
-
-		@Override
-		public void onClick(View v) {
-			if (!Utils.loginState()) {//判断是否登录过
-				ActivityMgr.mCurActivity.startActivity(new Intent(ActivityMgr.mCurActivity,RegistActivity.class));
-				return;
-			}
-			String numString = editText.getText().toString();
-			if (numString == null || numString.equals("")) {
-				num = 0;
-				editText.setText("0");
-			} else {
-				if (v.getTag().equals("+")) {
-					if (++num < 0) // 先加，再判断
-					{
-						num--;
-						MyToast.show(context, "请输入一个大于0的数字！");
-						editText.setText("0");
-					} else {
-						editText.setText(String.valueOf(num));
-
-						if (onNumChangeListener != null) {
-							onNumChangeListener.onNumChange(AddAndSubView.this,num);
-						}
-						sendAddGood2CartAction();
-					}
-				} else if (v.getTag().equals("-")) {
-					if (--num <= 0) // 先减，再判断
-					{
-						showAlertDialog();
-					} else {
-						editText.setText(String.valueOf(num));
-						if (onNumChangeListener != null) {
-							onNumChangeListener.onNumChange(AddAndSubView.this,num);
-						}
-						sendSubGood2CartAction();
-					}
-				}
-			}
-		}
-	}
-	
-	/**
-	 * 提示框
-	 */
-	public void showAlertDialog() {
-		MyDialog.Builder builder = new MyDialog.Builder(context);
-		builder.setTitle("提示");
-		builder.setMessage("您真的要刪除商品！");
-		builder.setConfirmButton("确定", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-				num++;
-				editText.setText("0");
-				sendSubGood2CartAction();
-			}
-		});
-		builder.setCancelButton("取消", new android.content.DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-			}
-		});
-		builder.create().show();
-	}
-
-	/**
-	 * EditText输入变化事件监听器
-	 * 
-	 * @author ZJJ
-	 * 
-	 */
-	class OnTextChangeListener implements TextWatcher {
-
-		@Override
-		public void afterTextChanged(Editable s) {
-			String numString = s.toString();
-			if (numString == null || numString.equals("")) {
-				num = 0;
-				if (onNumChangeListener != null) {
-					onNumChangeListener.onNumChange(AddAndSubView.this, num);
-				}
-			} else {
-				int numInt = Integer.parseInt(numString);
-				if (numInt < 0) {
-					MyToast.show(context, "请输入一个大于0的数字！");
-					editText.setText("0");
-				} else {
-					// 设置EditText光标位置 为文本末端
-					editText.setSelection(editText.getText().toString().length());
-					num = numInt;
-					if (onNumChangeListener != null) {
-						onNumChangeListener.onNumChange(AddAndSubView.this, num);
-					}
-				}
-			}
-		}
-
-		@Override
-		public void beforeTextChanged(CharSequence s, int start, int count,
-				int after) {
-
-		}
-
-		@Override
-		public void onTextChanged(CharSequence s, int start, int before,
-				int count) {
-
-		}
-
-	}
-
-	public interface OnNumChangeListener {
-		/**
-		 * 输入框中的数值改变事件
-		 * 
-		 * @param view
-		 *            整个AddAndSubView
-		 * @param num
-		 *            输入框的数值
-		 */
-		public void onNumChange(View view, int num);
-	}
-	
-	/**
-	 * 根据手机的分辨率从 px(像素) 的单位 转成为 dp
-	 */
-	@SuppressWarnings("unused")
-	private int px2dip(Context context, float pxValue) {
-		final float scale = context.getResources().getDisplayMetrics().density;
-		return (int) (pxValue / scale + 0.5f);
-	}
-
-	/**
-	 * 将px值转换为sp值，保证文字大小不变
-	 * 
-	 * @param pxValue
-	 * @param fontScale
-	 *            （DisplayMetrics类中属性scaledDensity）
-	 * @return
-	 */
-	@SuppressWarnings("unused")
-	private int px2sp(Context context, float pxValue) {
-		final float fontScale = context.getResources().getDisplayMetrics().scaledDensity;
-		return (int) (pxValue / fontScale + 0.5f);
-	}
-
-	/**
-	 * 将sp值转换为px值，保证文字大小不变
-	 * 
-	 * @param spValue
-	 * @param fontScale
-	 *            （DisplayMetrics类中属性scaledDensity）
-	 * @return
-	 */
-	@SuppressWarnings("unused")
-	private int sp2px(Context context, float spValue) {
-		final float fontScale = context.getResources().getDisplayMetrics().scaledDensity;
-		return (int) (spValue * fontScale + 0.5f);
-	}
-
-	/** 添加商品 */
-	public void sendAddGood2CartAction() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE,SPUtils.getInt(context, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 1);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,limited);
-		App.getInstance().sendAction(intent);
-	}
-
-	/** 減去商品 */
-	public void sendSubGood2CartAction() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE,SPUtils.getInt(context, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, 0);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 2);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,limited);
-		App.getInstance().sendAction(intent);
-	}
-
-	/** 手动输入商品数量 */
-	public void sendAddGood2CartAction3() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_INSERTORUPDATECARTGOODNUM);
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE,SPUtils.getInt(context, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_CHANGECODE, changecode);
-		intent.putExtra(ShoppingCartLogic.EXTRA_NUM, number);
-		intent.putExtra(ShoppingCartLogic.EXTRA_OPERATION, 3);
-		intent.putExtra(ShoppingCartLogic.EXTRA_LIMITED,limited);
-		App.getInstance().sendAction(intent);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/TabAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/TabAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/TabAdapter.java	(revision )
@@ -1,276 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.annotation.SuppressLint;
-import android.os.Bundle;
-import android.os.Parcelable;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.FragmentManager;
-import android.support.v4.app.FragmentTransaction;
-import android.support.v4.view.PagerAdapter;
-import android.view.View;
-import android.view.ViewGroup;
-
-import com.anniu.shandiandaojia.activity.GoodsCategoryActivity;
-import com.anniu.shandiandaojia.db.jsondb.Category;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.fragment.MyFragment;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.utils.MyLog;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-
-@SuppressLint("UseSparseArrays")
-public class TabAdapter extends PagerAdapter {
-
-	private static final String TAG = TabAdapter.class.getSimpleName();
-	private final FragmentManager mFragmentManager;
-	private FragmentTransaction mCurTransaction = null;
-	
-	private ArrayList<Fragment.SavedState> mSavedState = new ArrayList<Fragment.SavedState>();
-	private ArrayList<MyFragment> mFragments = new ArrayList<MyFragment>();
-    private MyFragment mCurFragment = null;
-	
-	private List<Category> categoryList;
-	private List<Goods> mAllDatas;
-	
-	/** goodstypecode对应的商品集合 */
-	private Map<Integer, List<Goods>> map = new HashMap<Integer, List<Goods>>();
-
-    private GoodsCategoryActivity mActivity;
-    
-	public TabAdapter(FragmentManager fm, GoodsCategoryActivity activity) {
-		mFragmentManager = fm;
-		this.mActivity = activity;
-	}
-	
-	@Override
-	public CharSequence getPageTitle(int position) {
-		if (categoryList != null && categoryList.size() > position) {
-			return categoryList.get(position).getGoodstype_name();
-		}
-		return "";
-	}
-	
-	public void setPageContents(List<Goods> dataList) {
-		mAllDatas = dataList;
-		if (mCurFragment != null) {
-			mCurFragment.setDatas(dataList , mCurFragment.tempLoadType);
-		}
-		if (mFragments != null && mFragments.size() > 0) {
-			for (Fragment f : mFragments) {
-				if (f != null && f != mCurFragment) {
-					((MyFragment) f).setDatas(dataList,((MyFragment) f).tempLoadType);
-				}
-			}
-		}
-	}
-	
-	@SuppressWarnings("rawtypes")
-	public void onRefreshComplete(Bundle bundle) {
-		int loadtype = bundle.getInt(GoodsLogic.EXTRA_LOADTYPE);
-		int typeCode = bundle.getInt(GoodsLogic.EXTRA_GOODSTYPECODE);
-		ArrayList<Goods> goodsList = (ArrayList<Goods>) bundle.getSerializable(GoodsLogic.EXTRA_GOODLIST);
-		
-		putallData(loadtype, typeCode, goodsList);
-
-		MyFragment fragment = (MyFragment) findFragment(typeCode);
-		if (loadtype == GoodsCategoryActivity.LOAD_TYPE_REFRESH) {
-			if (fragment != null) {
-				fragment.stopRefresh();
-			}
-		}else{
-			if (fragment != null) {
-				fragment.stopLoadMore();
-			}
-		}
-		
-		List<Goods> goods = map.get(typeCode);
-		setFragmentData(fragment, goods, loadtype);
-    }
-	 
-	private void putallData(int loadtype,int typeCode, List goodsList) {
-		List<Goods> list = map.get(typeCode);
-		if (loadtype == mActivity.LOAD_TYPE_REFRESH) {
-			list = goodsList;
-			map.put(typeCode, list);
-		}else{
-			if (goodsList != null ) {
-				list.addAll(goodsList);
-				map.put(typeCode, list);
-			}
-		}
-	}
-
-	/** 给fragment设置数据 */
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	private void setFragmentData(MyFragment fragment, List goodsList ,int loadtype) {
-		fragment.setDatas(goodsList, loadtype);
-	}
-
-	private MyFragment findFragment(int typeCode) {
-		for (int i = 0; i < categoryList.size(); i++) {
-			int code  = categoryList.get(i).getGoodstype_code();
-			if (code == typeCode) {
-				return (MyFragment) mFragments.get(i);
-			}
-		}
-		return null;
-	}
-	
-	@Override
-	public Object instantiateItem(View container, int position) {
-		// If we already have this item instantiated, there is nothing
-        // to do. This can happen when we are restoring the entire pager
-        // from its saved state, where the fragment manager has already
-        // taken care of restoring the fragments we previously had instantiated.
-		if (mFragments.size() > position) {
-            Fragment f = mFragments.get(position);
-            if (f != null) {
-                return f;
-            }
-        }
-		
-		if (mCurTransaction == null) {
-            mCurTransaction = mFragmentManager.beginTransaction();
-        }
-
-		int goodstype_code = categoryList.get(position).getGoodstype_code();
-		MyFragment fragment = MyFragment.newInstance(position,goodstype_code);
-		
-		fragment.setListener(mActivity,goodstype_code);
-		fragment.setDatas(mAllDatas, fragment.tempLoadType);
-	    
-	    if (mSavedState.size() > position) {
-            Fragment.SavedState fss = mSavedState.get(position);
-            if (fss != null) {
-                fragment.setInitialSavedState(fss);
-            }
-        }
-	    while (mFragments.size() <= position) {
-            mFragments.add(null);
-        }
-        fragment.setMenuVisibility(false);
-        fragment.setUserVisibleHint(false);
-        mFragments.set(position, fragment);
-        mCurTransaction.add(container.getId(), fragment);
-
-        return fragment;
-	}
-
-	@Override
-	public void destroyItem(View container, int position, Object object) {
-		Fragment fragment = (Fragment) object;
-
-        if (mCurTransaction == null) {
-            mCurTransaction = mFragmentManager.beginTransaction();
-        }
-        
-        while (mSavedState.size() <= position) {
-            mSavedState.add(null);
-        }
-        mSavedState.set(position,mFragmentManager.saveFragmentInstanceState(fragment));
-        mFragments.set(position, null);
-
-        mCurTransaction.remove(fragment);
-	}
-	
-	@Override
-	public void setPrimaryItem(ViewGroup container, int position, Object object) {
-		MyFragment fragment = (MyFragment) object;
-		if (fragment != mCurFragment) {
-			if (mCurFragment != null) {
-				mCurFragment.setMenuVisibility(false);
-				mCurFragment.setUserVisibleHint(false);
-			}
-			if (fragment != null) {
-				fragment.setMenuVisibility(true);
-				fragment.setUserVisibleHint(true);
-			}
-			mCurFragment = fragment;
-		}
-	}
-	
-	public void setCategories(List<Category> categories) {
-		this.categoryList = categories;
-		notifyDataSetChanged();
-	}
-
-	@Override
-	public int getCount() {
-		if (categoryList != null) {
-			return categoryList.size();
-		}
-		return 0;
-	}
-
-	@Override
-	public void finishUpdate(ViewGroup container) {
-		if (mCurTransaction != null) {
-			mCurTransaction.commitAllowingStateLoss();
-			mCurTransaction = null;
-			mFragmentManager.executePendingTransactions();
-		}
-	}
-
-	@Override
-	public boolean isViewFromObject(View view, Object object) {
-		return ((Fragment) object).getView() == view;
-	}
-	
-	@Override
-	public Parcelable saveState() {
-		Bundle state = null;
-		if (mSavedState.size() > 0) {
-			state = new Bundle();
-			Fragment.SavedState[] fss = new Fragment.SavedState[mSavedState.size()];
-			mSavedState.toArray(fss);
-			state.putParcelableArray("states", fss);
-		}
-		for (int i = 0; i < mFragments.size(); i++) {
-			Fragment f = mFragments.get(i);
-			if (f != null) {
-				if (state == null) {
-					state = new Bundle();
-				}
-				String key = "f" + i;
-				mFragmentManager.putFragment(state, key, f);
-			}
-		}
-		return state;
-	}
-
-	@Override
-	public void restoreState(Parcelable state, ClassLoader loader) {
-		if (state != null) {
-			Bundle bundle = (Bundle) state;
-			bundle.setClassLoader(loader);
-			Parcelable[] fss = bundle.getParcelableArray("states");
-			mSavedState.clear();
-			mFragments.clear();
-			if (fss != null) {
-				for (int i = 0; i < fss.length; i++) {
-					mSavedState.add((Fragment.SavedState) fss[i]);
-				}
-			}
-			Iterable<String> keys = bundle.keySet();
-			for (String key : keys) {
-				if (key.startsWith("f")) {
-					int index = Integer.parseInt(key.substring(1));
-					MyFragment f = (MyFragment) mFragmentManager.getFragment(bundle, key);
-					if (f != null) {
-						while (mFragments.size() <= index) {
-							mFragments.add(null);
-						}
-						f.setMenuVisibility(false);
-						mFragments.set(index, f);
-					} else {
-						MyLog.w(TAG, "Bad fragment at key " + key);
-					}
-				}
-			}
-		}
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CategoryGoodsReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CategoryGoodsReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CategoryGoodsReq.java	(revision )
@@ -1,85 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 商品分类
- * 
- * @author zxl
- */
-public class CategoryGoodsReq extends HttpReq {
-
-	/** 用户id */
-	private int usercode;
-	/** 商店id */
-	private int shopcode;
-	/** 商品类别 */
-	private int goodstypecode;
-	/** 第一页 默认1 */
-	private int pagenum;
-	/** 每页显示多少 默认20 */
-	private int pagesize;
-
-	public CategoryGoodsReq(int reqId, int usercode, int shopcode,
-			int goodstypecode, int pagenum, int pagesize) {
-		super();
-		this.id = reqId;
-		this.usercode = usercode;
-		this.shopcode = shopcode;
-		this.goodstypecode = goodstypecode;
-		this.pagenum = pagenum;
-		this.pagesize = pagesize;
-	}
-
-	public int getGoodstypecode() {
-		return goodstypecode;
-	}
-
-	public void setGoodstypecode(int goodstypecode) {
-		this.goodstypecode = goodstypecode;
-	}
-
-	public int getPagenum() {
-		return pagenum;
-	}
-
-	public void setPagenum(int pagenum) {
-		this.pagenum = pagenum;
-	}
-
-	public int getPagesize() {
-		return pagesize;
-	}
-
-	public void setPagesize(int pagesize) {
-		this.pagesize = pagesize;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	public int getShopcode() {
-		return shopcode;
-	}
-
-	public void setShopcode(int shopcode) {
-		this.shopcode = shopcode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + usercode + "&shopcode=" + shopcode
-				+ "&goodstypecode=" + goodstypecode + "&pagenum=" + pagenum
-				+ "&pagesize=" + pagesize;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/UserInfoActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/UserInfoActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/UserInfoActivity.java	(revision )
@@ -1,246 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.graphics.drawable.BitmapDrawable;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.Gravity;
-import android.view.View;
-import android.view.WindowManager.LayoutParams;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ArrayAdapter;
-import android.widget.ListView;
-import android.widget.PopupWindow;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.CustomLengthFilter;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.ClearEditText;
-import com.anniu.shandiandaojia.view.MySwitch;
-import com.anniu.shandiandaojia.view.MySwitch.OnChangedListener;
-
-/**
- * 
- * @ClassName: UserInfoActivity
- * @Description: 个人信息页面
- * @author YY
- * @date 2015年5月30日 下午8:29:31
- */
-public class UserInfoActivity extends BaseActivity implements OnChangedListener {
-	private TextView titleBarTv;// 界面标题
-	private TextView tv_phone;// 显示电话号码
-	private TextView tv_nickname;// 显示用户姓名/昵称
-	private TextView tv_sex;// 显示用户性别
-	private int userCode;//用户ID
-	private String newName;//修改的用户姓名/昵称
-	private int sexID;//修改的用户性别
-	private PopupWindow popupWindow;// 弹窗
-	private TextView noticetext;
-	private TextView cancel;
-	private TextView confirm;
-	private ClearEditText clear_name;
-	
-	private String sex[] = {"先生",  "女士" };
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId() == R.id.title_bar_left) {
-			finish();
-		} else if (v.getId() == R.id.rl_name) {
-			//showNameDialog();
-			showNameActivity();
-		} else if (v.getId() == R.id.rl_sex) {
-			//showSexdialog();
-			showSexActivity();
-		} else if (v.getId() == R.id.cancel) {
-			MyToast.show(UserInfoActivity.this, "您取消了修改姓名！");
-			popupWindow.dismiss();
-		} else if (v.getId() == R.id.confirm) {
-			rename();
-		}
-	}
-
-	/**修改用户称谓--用Activity弹窗*/
-	@SuppressWarnings("deprecation")
-	private void showSexActivity() {
-		View view = getLayoutInflater().inflate(R.layout.sex_dialog_activity, null,true);
-		ListView lsitview = (ListView) view.findViewById(R.id.lv_list);
-		
-		lsitview.setAdapter(new ArrayAdapter<String>(context,R.layout.item_sex, R.id.tv_text, sex));
-		lsitview.setOnItemClickListener(new OnItemClickListener() {
-			@Override
-			public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
-				
-				String name = SPUtils.getString(UserInfoActivity.this, GlobalInfo.KEY_NICK_NAME, "");
-				newName = name;
-				int which = 0;
-				// 关闭popupWindow
-				if (sex[arg2].equals("先生")) {
-					which = 0;
-					tv_sex.setText("先生");//性别修改成功后，更新显示并保存到本地，上传到服务器
-					postUpdatePersoninfo(userCode,name,1);
-					//SPUtils.saveString(UserInfoActivity.this, GlobalInfo.KEY_USER_SEX, "1");
-					popupWindow.dismiss();
-				}else if (sex[arg2].equals("女士")) {
-					which = 1;
-					tv_sex.setText("女士");//性别修改成功后，更新显示并保存到本地，上传到服务器
-					postUpdatePersoninfo(userCode,name,2);
-					popupWindow.dismiss();
-				}
-				sexID = which;
-			}
-		});
-		
-		view.setFocusableInTouchMode(true);
-		
-		popupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setFocusable(true);
-		//popupWindow.setAnimationStyle(R.style.style_ppw);
-		popupWindow.setOutsideTouchable(true);
-		popupWindow.update();
-		popupWindow.showAtLocation(view, Gravity.CENTER | Gravity.CENTER, 0,0);
-	}
-
-	/**判断输入的是否合法及发送修改请求*/
-	private void rename() {
-		newName = clear_name.getText().toString().trim();
-		int length = CustomLengthFilter.getLength(newName);
-		if (length > 12) {
-			noticetext.setText("超出字数限制");
-			noticetext.setTextColor(getResources().getColor(R.color.red));
-		}else if(TextUtils.isEmpty(newName)){
-			noticetext.setText("姓名或者昵称不能为空");
-			noticetext.setTextColor(getResources().getColor(R.color.red));
-		}else {
-			int newsex=1;
-			tv_nickname.setText(newName);//姓名修改成功后，更新显示并保存到本地，上传到服务器
-			String sex = SPUtils.getString(UserInfoActivity.this, GlobalInfo.KEY_USER_SEX, "");
-			if (sex.equals("女士")) {
-				newsex=2;
-			}else {
-				newsex =1;
-			}
-			postUpdatePersoninfo(userCode,newName,newsex);
-			popupWindow.dismiss();
-		}
-	}
-
-	/**修改用户姓名或者昵称--用Activity弹窗*/
-	@SuppressWarnings("deprecation")
-	private void showNameActivity() {
-		View view = getLayoutInflater().inflate(R.layout.motify_name_activity, null,true);
-		
-		clear_name = (ClearEditText) view.findViewById(R.id.clear_name);
-		noticetext = (TextView) view.findViewById(R.id.notice);
-		cancel = (TextView) view.findViewById(R.id.cancel);
-		confirm = (TextView) view.findViewById(R.id.confirm);
-		cancel.setOnClickListener(this);
-		confirm.setOnClickListener(this);
-		clear_name.setText(SPUtils.getString(UserInfoActivity.this,GlobalInfo.KEY_NICK_NAME, ""));
-		noticetext.setText("12个字符，可由中英文、数字等符号组成。");
-		
-		view.setFocusableInTouchMode(true);
-		popupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setFocusable(true);
-		//popupWindow.setAnimationStyle(R.style.style_ppw);
-		popupWindow.setOutsideTouchable(true);
-		popupWindow.update();
-		popupWindow.showAtLocation(view, Gravity.CENTER | Gravity.CENTER, 0,0);
-	}
-
-
-	
-	/**个人中心姓名性别保存至服务器*/
-	protected void postUpdatePersoninfo(int userCode,String name, int sex) {
-		Intent intent = new Intent(UserLogic.ACTION_POST_PERSON_NAME_SEX);
-		intent.putExtra(UserLogic.EXTRA_USER_CODE, userCode);
-		intent.putExtra(UserLogic.EXTRA_NICK_NAME, name);
-		intent.putExtra(UserLogic.EXTRA_USER_SEX, sex);
-		sendAction(intent);
-	}
-	
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_information);
-
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("修改个人信息");
-
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-
-		findViewById(R.id.rl_phone).setOnClickListener(this);
-		findViewById(R.id.rl_name).setOnClickListener(this);
-		findViewById(R.id.rl_sex).setOnClickListener(this);
-		
-		userCode = SPUtils.getInt(UserInfoActivity.this, GlobalInfo.KEY_USERCODE, 0);
-
-		tv_phone = (TextView) findViewById(R.id.tv_phone);
-		tv_nickname = (TextView) findViewById(R.id.tv_name);
-		tv_sex = (TextView) findViewById(R.id.tv_sex);
-
-		tv_phone.setText(SPUtils.getString(UserInfoActivity.this,GlobalInfo.KEY_USER_TEL, ""));
-		tv_nickname.setText(SPUtils.getString(UserInfoActivity.this,GlobalInfo.KEY_NICK_NAME, ""));
-		String sex = SPUtils.getString(UserInfoActivity.this,GlobalInfo.KEY_USER_SEX, "");
-		if (sex.equals("1")) {
-			tv_sex.setText("先生");
-		} else {
-			tv_sex.setText("女士");
-		}
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.POST_PERSON_NAME_SEX_SUCESS://保存用户姓名性别成功事件
-			SPUtils.saveString(UserInfoActivity.this, GlobalInfo.KEY_NICK_NAME, newName);
-			if (sexID==0) {
-				SPUtils.saveString(UserInfoActivity.this, GlobalInfo.KEY_USER_SEX, "1");
-			}else {
-				SPUtils.saveString(UserInfoActivity.this, GlobalInfo.KEY_USER_SEX, "2");
-			}
-			MyToast.show(UserInfoActivity.this, "恭喜您信息修改成功！");
-			break;
-		case Event.POST_PERSON_NAME_SEX_FAILED://保存用户姓名性别失败事件
-			MyToast.show(this, notice);
-			break;
-
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.POST_PERSON_NAME_SEX_SUCESS,Event.POST_PERSON_NAME_SEX_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-	@Override
-	public void OnChanged(MySwitch wiperSwitch, boolean checkState) {
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AboutActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AboutActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AboutActivity.java	(revision )
@@ -1,61 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.os.Bundle;
-import android.view.View;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.Utils;
-/**
- * 
- * @ClassName:  AboutActivity
- * @Description: 关于闪电到家页面
- * @author YY
- * @date 2015年6月10日 下午3:55:47
- */
-public class AboutActivity extends BaseActivity {
-	
-	private TextView titleBarTv;//标题
-	private TextView version;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {//返回
-			finish();
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_about_us);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.about_us);
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		version = (TextView) findViewById(R.id.versaion);
-		version.setText("版本号"+Utils.version_name);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/TicketLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/TicketLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/TicketLogic.java	(revision )
@@ -1,696 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.LocMap;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.VoucherTicket;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.FindWaterTicketReq;
-import com.anniu.shandiandaojia.net.bean.entity.OrderFindcouponReq;
-import com.anniu.shandiandaojia.net.bean.entity.TicketBuyWaterReq;
-import com.anniu.shandiandaojia.net.bean.entity.TicketReq;
-import com.anniu.shandiandaojia.net.bean.entity.WaterConfired;
-import com.anniu.shandiandaojia.net.bean.entity.WaterDetailReq;
-import com.anniu.shandiandaojia.net.bean.entity.WaterFindReq;
-import com.anniu.shandiandaojia.net.bean.entity.WaterSelectedticketReq;
-import com.anniu.shandiandaojia.net.bean.entity.WaterUseticketsReq;
-import com.anniu.shandiandaojia.service.HttpService;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.List;
-/**
- * 
- * @ClassName:  TicketLogic
- * @Description: 票的Logic类
- * @author YY
- * @date 2015年6月15日 下午2:56:19
- */
-public class TicketLogic extends BaseLogic {
-	/**获取所有水票*/
-	public static String ACTION_GET_FINDWATERTICKET = "TicketLogic.ACTION_GET_FINDWATERTICKET";
-	/**获取所有优惠券*/
-	public static String ACTION_GET_FINDUSERCOUPON = "TicketLogic.ACTION_GET_FINDUSERCOUPON";
-	/**初始化一键送水界面*/
-	public static String ACTION_GET_WATER_FIND = "TicketLogic.ACTION_GET_WATER_FIND";
-	/**购买水票*/
-	public static String ACTION_POST_WATER_CONFIRED = "TicketLogic.ACTION_POST_WATER_CONFIRED";
-	/**获取水票详情*/
-	public static String ACTION_GET_WATER_DETAIL = "TicketLogic.ACTION_GET_WATER_DETAIL";
-	/**获取一键送水界面提交订单页面数据*/
-	public static String ACTION_GET_WATER_USETICKETS = "TicketLogic.ACTION_GET_WATER_USETICKETS";
-	/**用水票购买水*/
-	public static String ACTION_POST_WATER_WATERORDER = "TicketLogic.ACTION_POST_WATER_WATERORDER";
-	/**点击切换使用水票*/
-	public static String ACTION_GET_WATER_SELECTEDTICKET = "TicketLogic.ACTION_GET_WATER_SELECTEDTICKET";
-	/**触发优惠券*/
-	public static String ACTION_GET_ORDER_FINDCOUPON = "TicketLogic.ACTION_GET_ORDER_FINDCOUPON";
-	
-	/**所有优惠券*/
-	public static String EXTRA_VOUCHER_TICKET_LIST = "voucher_ticket_list";
-	/**水的信息*/
-	public static String EXTRA_WATER_LIST = "water_list";
-	
-	/** 用户ID */
-	public static String EXTRA_USER_CODE = "user_code";
-	/** 商铺ID */
-	public static String EXTRA_SHOP_CODE = "shop_code";
-	/** 水票ID */
-	public static String EXTRA_GOODS_CODE = "goods_code";
-	
-	public static String EXTRA_FINDLIST = "findList";
-	/**判断用户有没有购买过水票*/
-	public static String EXTRA_FLAG = "flag";
-	
-	public static String EXTRA_RESULT = "result";
-	/**购买水票*/
-	public static String EXTRA_RESUL = "resul";
-	/**水票信息*/
-	public static String EXTRA_WATER_TICKET_INFO = "water_ticket_info";
-	/**水票详细信息*/
-	public static String EXTRA_WATER_DETAIL = "water_detail";
-	/**支付方式*/
-	public static String EXTRA_PAYWAY = "payway";
-	/**订单页数据*/
-	public static String EXTRA_ORDERS = "orders";
-	/**订单页用户信息*/
-	public static String EXTRA_USEWATER = "usewater";
-	/**订单页水票信息*/
-	public static String EXTRA_WATER = "water";
-	/**购买的水票*/
-	public static String EXTRA_GOODSMAP="goodsMap";
-	/**用户姓名电话及地址*/
-	public static String EXTRA_LOCMAP = "locMap";
-	/**水票标识*/
-	public static String EXTRA_TICKETS = "tickets";
-	/** ticket水票标识 */
-	public static String EXTRA_TICKET = "ticket";
-	/**已购买的水票*/
-	public static String EXTRA_TICKETS_BUY = "ticket_buy";
-	/**备注*/
-	public static String EXTRA_MEMO = "memo";
-	/**开始时间*/
-	public static String EXTRA_STARTTIME = "starttime";
-	/**结束时间*/
-	public static String EXTRA_ENDTIME = "endtime";
-	/**水票使用张数*/
-	public static String EXTRA_NUMBER = "number";
-	/**水票使用*/
-	public static String EXTRA_DETAIL = "detail";
-	/**订单情况*/
-	public static String EXTRA_ORDERINFO = "orderInfo";
-	/**优惠券金额*/
-	public static String EXTRA_COUPON = "coupon";
-	
-	public static String EXTRA_TIC_CODE = "tic_code";
-	/**金额*/
-	public static String EXTRA_TOTALMONEY ="totalmoney";
-	
-	public TicketLogic(HttpService service) {
-		super(service);
-		List<String> actions = new ArrayList<String>();
-		actions.add(ACTION_GET_FINDWATERTICKET);
-		actions.add(ACTION_GET_FINDUSERCOUPON);
-		actions.add(ACTION_GET_WATER_FIND);
-		actions.add(ACTION_POST_WATER_CONFIRED);
-		actions.add(ACTION_GET_WATER_DETAIL);
-		actions.add(ACTION_GET_WATER_USETICKETS);
-		actions.add(ACTION_POST_WATER_WATERORDER);
-		actions.add(ACTION_GET_WATER_SELECTEDTICKET);
-		actions.add(ACTION_GET_ORDER_FINDCOUPON);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_GET_FINDWATERTICKET.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			getFindwaterticket(userCode,shopCode);
-		}else if (ACTION_GET_FINDUSERCOUPON.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			getFindusercoupon(userCode);
-		}else if (ACTION_GET_WATER_FIND.equals(action)) {
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			getWaterFind(shopCode);
-		}else if (ACTION_POST_WATER_CONFIRED.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			int goodsCode = intent.getIntExtra(EXTRA_GOODS_CODE, 0);
-			postWaterConfired(shopCode,goodsCode,userCode);
-		}else if (ACTION_GET_WATER_DETAIL.equals(action)) {
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			int goodsCode = intent.getIntExtra(EXTRA_GOODS_CODE, 0);
-			getWaterDetail(goodsCode,shopCode);
-		}else if (ACTION_GET_WATER_USETICKETS.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			getWaterUsetickets(shopCode,userCode);
-		}else if (ACTION_POST_WATER_WATERORDER.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			int shopCode = intent.getIntExtra(EXTRA_SHOP_CODE, 0);
-			int goodsCode = intent.getIntExtra(EXTRA_GOODS_CODE, 0);
-			int ticCode = intent.getIntExtra(EXTRA_TIC_CODE,0);
-			String memo = intent.getStringExtra(EXTRA_MEMO);
-			String startTime = intent.getStringExtra(EXTRA_STARTTIME);
-			String endTime = intent.getStringExtra(EXTRA_ENDTIME);
-			int number = intent.getIntExtra(EXTRA_NUMBER, 0);
-			postWaterOrder(userCode,shopCode,goodsCode,ticCode,memo,startTime,endTime,number);
-		}else if (ACTION_GET_WATER_SELECTEDTICKET.equals(action)) {
-			int ticCode = intent.getIntExtra(EXTRA_TIC_CODE, 0);
-			getWaterSelectedticket(ticCode);
-		}else if (ACTION_GET_ORDER_FINDCOUPON.equals(action)) {
-			int userCode = intent.getIntExtra(EXTRA_USER_CODE, 0);
-			String totalMoney = intent.getStringExtra(EXTRA_TOTALMONEY);
-			getOrderFindcoupon(userCode,totalMoney);
-		}
-	}
-
-	/**获取可用的优惠券*/
-	private void getOrderFindcoupon(int userCode, String totalMoney) {
-		OrderFindcouponReq req = new OrderFindcouponReq(ReqInfo.REQ_GET_ORDER_FINDCOUPON, userCode, totalMoney);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONArray jsonArray = obj.getJSONArray(GlobalValue.KEY_MSG);
-								if (jsonArray != null && jsonArray.length() > 0) {
-									ArrayList<VoucherTicket> voucherTicketsList = new ArrayList<>();
-									VoucherTicket voucherTicket = null;
-									for (int i = 0; i < jsonArray.length(); i++) {
-										JSONObject couponObject = (JSONObject) jsonArray.get(i);
-										voucherTicket = gson.fromJson(couponObject.toString(), VoucherTicket.class);
-										voucherTicketsList.add(voucherTicket);
-									}
-									bundle.putSerializable(EXTRA_VOUCHER_TICKET_LIST,voucherTicketsList);
-								}
-							}
-							notice(Event.GET_ORDER_FINDCOUPON_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_ORDER_FINDCOUPON_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_ORDER_FINDCOUPON_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_ORDER_FINDCOUPON_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**切换水票*/
-	private void getWaterSelectedticket(int ticCode) {
-		WaterSelectedticketReq req = new WaterSelectedticketReq(ReqInfo.REQ_GET_WATER_SELECTEDTICKET, ticCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_TICKET)) {
-									JSONObject object = jsonObject.getJSONObject(EXTRA_TICKET);
-									WaterInfo waterInfo = gson.fromJson(object.toString(), WaterInfo.class);
-									bundle.putSerializable(EXTRA_WATER_TICKET_INFO, waterInfo);
-								}
-							}
-							notice(Event.GET_WATER_SELECTEDTICKET_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_WATER_SELECTEDTICKET_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_WATER_SELECTEDTICKET_FAILED,bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_WATER_SELECTEDTICKET_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**用水票购买水*/
-	private void postWaterOrder(int userCode, int shopCode, int goodsCode,int ticCode,String memo, String startTime, String endTime,int number) {
-		TicketBuyWaterReq req = new TicketBuyWaterReq(ReqInfo.REQ_POST_WATER_ORDER, shopCode, userCode, goodsCode,ticCode, memo, startTime, endTime, number);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_DETAIL)) {
-									JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_DETAIL);
-									if (jsonArray!=null&&jsonArray.length()>0) {
-										Goods goods = null;
-										for (int i = 0; i < jsonArray.length(); i++) {
-											JSONObject waterObject = (JSONObject) jsonArray.get(i);
-											goods = gson.fromJson(waterObject.toString(), Goods.class);
-										}
-										bundle.putSerializable(EXTRA_WATER_TICKET_INFO, goods);
-									}
-								}
-								if (jsonObject.has(EXTRA_ORDERINFO)) {
-									JSONObject orderObject = jsonObject.getJSONObject(EXTRA_ORDERINFO);
-									OrderInfo orderInfo = gson.fromJson(orderObject.toString(), OrderInfo.class);
-									bundle.putSerializable(EXTRA_ORDERS, orderInfo);
-								}
-							}
-							notice(Event.POST_WATER_ORDER_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_WATER_ORDER_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_WATER_ORDER_FAILED, bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_WATER_ORDER_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取一键送水界面提交订单页面数据*/
-	private void getWaterUsetickets(int shopCode, int userCode) {
-		WaterUseticketsReq req = new WaterUseticketsReq(ReqInfo.REQ_GET_WATER_USETICKETS, shopCode, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_GOODSMAP)) {
-									JSONObject goodsObject = jsonObject.getJSONObject(EXTRA_GOODSMAP);
-									WaterInfo waterTicketInfo = gson.fromJson(goodsObject.toString(), WaterInfo.class);
-									bundle.putSerializable(EXTRA_TICKETS_BUY, waterTicketInfo);
-								}
-								if (jsonObject.has(EXTRA_LOCMAP)) {
-									String locMap = jsonObject.getString(EXTRA_LOCMAP);
-									if (!locMap.equals("null")) {
-										JSONObject locmapObject = jsonObject.getJSONObject(EXTRA_LOCMAP);
-										LocMap loc = gson.fromJson(locmapObject.toString(), LocMap.class);
-										bundle.putSerializable(EXTRA_LOCMAP, loc);
-									}else {
-										bundle.putSerializable(EXTRA_LOCMAP, null);
-									}
-								}
-							}
-							notice(Event.GET_WATER_USETICKETS_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_WATER_USETICKETS_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_WATER_USETICKETS_FAILED, bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_WATER_USETICKETS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**获取水票详情页面*/
-	private void getWaterDetail(int goodsCode, int shopCode) {
-		WaterDetailReq req = new WaterDetailReq(ReqInfo.REQ_GET_WATER_DETAIL, goodsCode, shopCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("static-access")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == httpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								WaterInfo waterInfo = gson.fromJson(jsonObject.toString(), WaterInfo.class);
-								bundle.putSerializable(EXTRA_WATER_DETAIL, waterInfo);
-							}
-							notice(Event.GET_WATER_DETAIL_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_WATER_DETAIL_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_WATER_DETAIL_FAILED, bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_WATER_DETAIL_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**购买水票请求*/
-	private void postWaterConfired(int shopCode, int goodsCode, int userCode) {
-		WaterConfired req = new WaterConfired(ReqInfo.REQ_POST_WATER_CONFIRED, shopCode, goodsCode, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("static-access")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == httpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_GOODSMAP)) {
-									JSONObject resulObject = jsonObject.getJSONObject(EXTRA_GOODSMAP);
-									WaterInfo waterTicketInfo = gson.fromJson(resulObject.toString(), WaterInfo.class);
-									bundle.putSerializable(EXTRA_WATER_TICKET_INFO, waterTicketInfo);
-								}
-								if (jsonObject.has(EXTRA_LOCMAP)) {
-									String locMap = jsonObject.getString(EXTRA_LOCMAP);
-									if (!locMap.equals("null")) {
-										JSONObject locmapObject = jsonObject.getJSONObject(EXTRA_LOCMAP);
-										LocMap loc = gson.fromJson(locmapObject.toString(), LocMap.class);
-										bundle.putSerializable(EXTRA_LOCMAP, loc);
-									}else {
-										bundle.putSerializable(EXTRA_LOCMAP, null);
-									}
-								}
-							}
-							notice(Event.POST_WATER_CONFIRED_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.POST_WATER_CONFIRED_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.POST_WATER_CONFIRED_FAILED, bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.POST_WATER_CONFIRED_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/**初始化一键送水界面*/
-	private void getWaterFind(int shopCode) {
-		WaterFindReq req = new WaterFindReq(ReqInfo.REQ_GET_WATER_FIND,shopCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings({ "unchecked", "static-access" })
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == httpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_FINDLIST)) {
-									JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_FINDLIST);
-									if (jsonArray != null && jsonArray.length() > 0) {
-										ArrayList<WaterInfo> waterList = new ArrayList<WaterInfo>();
-										WaterInfo water = null;
-										for (int i = 0; i < jsonArray.length(); i++) {
-											JSONObject object = (JSONObject) jsonArray.get(i);
-											water = gson.fromJson(object.toString(), WaterInfo.class);
-											waterList.add(water);
-										}
-										bundle.putSerializable(EXTRA_WATER_LIST,waterList);
-									}
-								}
-							}
-							notice(Event.GET_WATER_FIND_SUCESS, bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_WATER_FIND_FAILED, bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_WATER_FIND_FAILED, bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_WATER_FIND_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 获取所有优惠券的请求 */
-	private void getFindusercoupon(int userCode) {
-		TicketReq req = new TicketReq(ReqInfo.REQ_GET_FINDUSERCOUPON, userCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONArray jsonArray = obj.getJSONArray(GlobalValue.KEY_MSG);
-								ArrayList<VoucherTicket> voucherTicketlArrayList = new ArrayList<VoucherTicket>();
-								VoucherTicket voucherTicket = null ;
-								for (int i = 0; i < jsonArray.length(); i++) {
-									JSONObject jsonObject = (JSONObject) jsonArray.get(i);
-									voucherTicket = gson.fromJson(jsonObject.toString(), VoucherTicket.class);
-									voucherTicketlArrayList.add(voucherTicket);
-								}
-								bundle.putSerializable(EXTRA_VOUCHER_TICKET_LIST,voucherTicketlArrayList);
-							}
-							notice(Event.GET_FINDUSERCOUPON_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_FINDUSERCOUPON_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_FINDUSERCOUPON_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_FINDUSERCOUPON_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 获取所有水票的请求 */
-	private void getFindwaterticket(int userCode,int shopCode) {
-		FindWaterTicketReq req = new FindWaterTicketReq(ReqInfo.REQ_GET_PERSON_FINDTICKETS, userCode,shopCode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONArray jsonArray = obj.getJSONArray(GlobalValue.KEY_MSG);
-								if (jsonArray != null && jsonArray.length() > 0) {
-									ArrayList<WaterInfo> waterTicketInfosList = new ArrayList<>();
-									WaterInfo waterTicketInfo = null;
-									for (int i = 0; i < jsonArray.length(); i++) {
-										JSONObject waterinfoObject = (JSONObject) jsonArray.get(i);
-										waterTicketInfo = gson.fromJson(waterinfoObject.toString(), WaterInfo.class);
-										waterTicketInfosList.add(waterTicketInfo);
-									}
-									bundle.putSerializable(EXTRA_WATER_TICKET_INFO,waterTicketInfosList);
-								}
-							}
-							notice(Event.GET_PERSON_FINDTICKETS_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_PERSON_FINDTICKETS_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_PERSON_FINDTICKETS_FAILED,bundle);
-						}
-
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_PERSON_FINDTICKETS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/LocationActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/LocationActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/LocationActivity.java	(revision )
@@ -1,92 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.baidu.location.LocationClient;
-import com.baidu.location.LocationClientOption;
-import com.baidu.location.LocationClientOption.LocationMode;
-
-/**
-* @ClassName: LocationActivity 
-* @Description: 定位页面 
-* @author zxl 
-* @date 2015年5月29日 下午7:23:39
- */
-public class LocationActivity extends BaseActivity {
-
-	public static LocationClient mLocationClient;
-	private TextView titleBarTv;
-	private LocationMode tempMode = LocationMode.Hight_Accuracy;
-	private String tempcoor="gcj02";//gcj02、bd09ll、bd09
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.btn_current:
-			InitLocation();
-			mLocationClient.start();
-			
-			Intent intent = new Intent(this, FamliyMartActivity.class);
-			intent.putExtra(FamliyMartActivity.EXTRA_FROM, FamliyMartActivity.EXTRA_L);
-			startActivity(intent);
-			finish();
-			break;
-		case R.id.btn_modify_location:
-			startActivity(new Intent(LocationActivity.this, ModifyLocationActivity.class));
-			finish();
-			break;
-		}
-	}
-	
-	private void InitLocation(){
-		LocationClientOption option = new LocationClientOption();
-		option.setLocationMode(tempMode);//设置定位模式
-		option.setCoorType(tempcoor);//返回的定位结果是百度经纬度，默认值gcj02
-		option.setScanSpan(5000);//设置发起定位请求的间隔时间为5000ms
-		option.setIsNeedAddress(true);//是否反地理编码
-		mLocationClient.setLocOption(option);
-	}
-	
-	@Override
-	protected void onStop() {
-		super.onStop();
-	}
-
-
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_location);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.title_text_location1);
-		
-		findViewById(R.id.btn_current).setOnClickListener(this);
-		findViewById(R.id.btn_modify_location).setOnClickListener(this);
-		
-		mLocationClient = ((App)getApplication()).mLocationClient;
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		
-	}
-
-	@Override
-	protected void addEventListener() {
-		
-	}
-
-	@Override
-	protected void removeListener() {
-		
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/TabPageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/TabPageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/TabPageIndicator.java	(revision )
@@ -1,285 +0,0 @@
-/*
- * Copyright (C) 2011 The Android Open Source Project
- * Copyright (C) 2011 Jake Wharton
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.support.v4.view.PagerAdapter;
-import android.support.v4.view.ViewPager;
-import android.support.v4.view.ViewPager.OnPageChangeListener;
-import android.util.AttributeSet;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.HorizontalScrollView;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-
-import static android.view.ViewGroup.LayoutParams.MATCH_PARENT;
-import static android.view.ViewGroup.LayoutParams.WRAP_CONTENT;
-
-/**
- * This widget implements the dynamic action bar tab behavior that can change
- * across different configurations or circumstances.
- */
-public class TabPageIndicator extends HorizontalScrollView implements PageIndicator {
-    /** Title text used when no title is provided by the adapter. */
-    private static final CharSequence EMPTY_TITLE = "";
-
-    /**
-     * Interface for a callback when the selected tab has been reselected.
-     */
-    public interface OnTabReselectedListener {
-        /**
-         * Callback when the selected tab has been reselected.
-         *
-         * @param position Position of the current center item.
-         */
-        void onTabReselected(int position);
-    }
-
-    private Runnable mTabSelector;
-
-    private final OnClickListener mTabClickListener = new OnClickListener() {
-        public void onClick(View view) {
-            TabView tabView = (TabView)view;
-            final int oldSelected = mViewPager.getCurrentItem();
-            final int newSelected = tabView.getIndex();
-            mViewPager.setCurrentItem(newSelected);
-            if (oldSelected == newSelected && mTabReselectedListener != null) {
-                mTabReselectedListener.onTabReselected(newSelected);
-            }
-        }
-    };
-
-    private final IcsLinearLayout mTabLayout;
-
-    private ViewPager mViewPager;
-    private ViewPager.OnPageChangeListener mListener;
-
-    private int mMaxTabWidth;
-    private int mSelectedTabIndex;
-
-    private OnTabReselectedListener mTabReselectedListener;
-
-    public TabPageIndicator(Context context) {
-        this(context, null);
-    }
-
-    public TabPageIndicator(Context context, AttributeSet attrs) {
-        super(context, attrs);
-        setHorizontalScrollBarEnabled(false);
-
-        mTabLayout = new IcsLinearLayout(context, R.attr.vpiTabPageIndicatorStyle);
-        addView(mTabLayout, new ViewGroup.LayoutParams(WRAP_CONTENT, MATCH_PARENT));
-    }
-
-    public void setOnTabReselectedListener(OnTabReselectedListener listener) {
-        mTabReselectedListener = listener;
-    }
-
-    @Override
-    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-        final int widthMode = MeasureSpec.getMode(widthMeasureSpec);
-        final boolean lockedExpanded = widthMode == MeasureSpec.EXACTLY;
-        setFillViewport(lockedExpanded);
-
-        final int childCount = mTabLayout.getChildCount();
-        if (childCount > 1 && (widthMode == MeasureSpec.EXACTLY || widthMode == MeasureSpec.AT_MOST)) {
-            if (childCount > 2) {
-                mMaxTabWidth = (int)(MeasureSpec.getSize(widthMeasureSpec) * 0.4f);
-            } else {
-                mMaxTabWidth = MeasureSpec.getSize(widthMeasureSpec) / 2;
-            }
-        } else {
-            mMaxTabWidth = -1;
-        }
-
-        final int oldWidth = getMeasuredWidth();
-        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
-        final int newWidth = getMeasuredWidth();
-
-        if (lockedExpanded && oldWidth != newWidth) {
-            // Recenter the tab display if we're at a new (scrollable) size.
-            setCurrentItem(mSelectedTabIndex);
-        }
-    }
-
-    private void animateToTab(final int position) {
-        final View tabView = mTabLayout.getChildAt(position);
-        if (mTabSelector != null) {
-            removeCallbacks(mTabSelector);
-        }
-        mTabSelector = new Runnable() {
-            public void run() {
-                final int scrollPos = tabView.getLeft() - (getWidth() - tabView.getWidth()) / 2;
-                smoothScrollTo(scrollPos, 0);
-                mTabSelector = null;
-            }
-        };
-        post(mTabSelector);
-    }
-
-    @Override
-    public void onAttachedToWindow() {
-        super.onAttachedToWindow();
-        if (mTabSelector != null) {
-            // Re-post the selector we saved
-            post(mTabSelector);
-        }
-    }
-
-    @Override
-    public void onDetachedFromWindow() {
-        super.onDetachedFromWindow();
-        if (mTabSelector != null) {
-            removeCallbacks(mTabSelector);
-        }
-    }
-
-    private void addTab(int index, CharSequence text, int iconResId) {
-        final TabView tabView = new TabView(getContext());
-        tabView.mIndex = index;
-        tabView.setFocusable(true);
-        tabView.setOnClickListener(mTabClickListener);
-        tabView.setText(text);
-
-        if (iconResId != 0) {
-            tabView.setCompoundDrawablesWithIntrinsicBounds(iconResId, 0, 0, 0);
-        }
-
-        mTabLayout.addView(tabView, new LinearLayout.LayoutParams(0, MATCH_PARENT, 1));
-    }
-
-    @Override
-    public void onPageScrollStateChanged(int arg0) {
-        if (mListener != null) {
-            mListener.onPageScrollStateChanged(arg0);
-        }
-    }
-
-    @Override
-    public void onPageScrolled(int arg0, float arg1, int arg2) {
-        if (mListener != null) {
-            mListener.onPageScrolled(arg0, arg1, arg2);
-        }
-    }
-
-    @Override
-    public void onPageSelected(int arg0) {
-        setCurrentItem(arg0);
-        if (mListener != null) {
-            mListener.onPageSelected(arg0);
-        }
-    }
-
-    @Override
-    public void setViewPager(ViewPager view) {
-        if (mViewPager == view) {
-            return;
-        }
-        if (mViewPager != null) {
-            mViewPager.setOnPageChangeListener(null);
-        }
-        final PagerAdapter adapter = view.getAdapter();
-        if (adapter == null) {
-            throw new IllegalStateException("ViewPager does not have adapter instance.");
-        }
-        mViewPager = view;
-        view.setOnPageChangeListener(this);
-        notifyDataSetChanged();
-    }
-
-    public void notifyDataSetChanged() {
-        mTabLayout.removeAllViews();
-        PagerAdapter adapter = mViewPager.getAdapter();
-        IconPagerAdapter iconAdapter = null;
-        if (adapter instanceof IconPagerAdapter) {
-            iconAdapter = (IconPagerAdapter)adapter;
-        }
-        final int count = adapter.getCount();
-        for (int i = 0; i < count; i++) {
-            CharSequence title = adapter.getPageTitle(i);
-            if (title == null) {
-                title = EMPTY_TITLE;
-            }
-            int iconResId = 0;
-            if (iconAdapter != null) {
-                iconResId = iconAdapter.getIconResId(i);
-            }
-            addTab(i, title, iconResId);
-        }
-        if (mSelectedTabIndex > count) {
-            mSelectedTabIndex = count - 1;
-        }
-        setCurrentItem(mSelectedTabIndex);
-        requestLayout();
-    }
-
-    @Override
-    public void setViewPager(ViewPager view, int initialPosition) {
-        setViewPager(view);
-        setCurrentItem(initialPosition);
-    }
-
-    @Override
-    public void setCurrentItem(int item) {
-        if (mViewPager == null) {
-            throw new IllegalStateException("ViewPager has not been bound.");
-        }
-        mSelectedTabIndex = item;
-        mViewPager.setCurrentItem(item);
-
-        final int tabCount = mTabLayout.getChildCount();
-        for (int i = 0; i < tabCount; i++) {
-            final View child = mTabLayout.getChildAt(i);
-            final boolean isSelected = (i == item);
-            child.setSelected(isSelected);
-            if (isSelected) {
-                animateToTab(item);
-            }
-        }
-    }
-
-    @Override
-    public void setOnPageChangeListener(OnPageChangeListener listener) {
-        mListener = listener;
-    }
-
-    private class TabView extends TextView {
-        private int mIndex;
-
-        public TabView(Context context) {
-            super(context, null, R.attr.vpiTabPageIndicatorStyle);
-        }
-
-        @Override
-        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
-
-            // Re-measure if we went beyond our maximum size.
-            if (mMaxTabWidth > 0 && getMeasuredWidth() > mMaxTabWidth) {
-                super.onMeasure(MeasureSpec.makeMeasureSpec(mMaxTabWidth, MeasureSpec.EXACTLY),
-                        heightMeasureSpec);
-            }
-        }
-
-        public int getIndex() {
-            return mIndex;
-        }
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/VoucherAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/VoucherAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/VoucherAdapter.java	(revision )
@@ -1,105 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.text.TextUtils;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.VoucherTicket;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.text.ParseException;
-import java.util.ArrayList;
-
-public class VoucherAdapter extends BaseAdapter {
-	private Context mContext;
-	private LayoutInflater mInflater;
-	private ArrayList<VoucherTicket> voucherTickets;
-	public VoucherAdapter(Context context,ArrayList<VoucherTicket> voucherList) {
-		super();
-		this.mContext = context;
-		this.voucherTickets = voucherList;
-		mInflater = LayoutInflater.from(mContext);
-	}
-
-	@Override
-	public int getCount() {
-		if (voucherTickets != null) {
-			return voucherTickets.size();
-		}
-		return 0;
-	}
-
-	@Override
-	public Object getItem(int position) {
-		if (voucherTickets.get(position) != null) {
-			return voucherTickets.get(position);
-		}
-		return null;
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		VoucherTicket voucherTicket = voucherTickets.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_money_ticket, null);
-			holder.tv_price = (TextView) convertView.findViewById(R.id.tv_price);
-			holder.tv_name = (TextView) convertView.findViewById(R.id.tv_name);
-			holder.tv_disc = (TextView) convertView.findViewById(R.id.tv_disc);
-			holder.tv_time = (TextView) convertView.findViewById(R.id.tv_time);
-			holder.valid_date = (TextView) convertView.findViewById(R.id.valid_date);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		holder.tv_price.setText(voucherTicket.getPrice()+"元");
-		String name = null;
-		String text = "";
-		if (TextUtils.isEmpty(voucherTicket.getShop_name())) {
-			name = "";
-			text = "全场";
-		}else{
-			text = voucherTicket.getShop_name();
-			name = voucherTicket.getShop_name();
-		}
-		
-		holder.tv_name.setText(name + "代金券");
-		holder.tv_disc.setText("满" + voucherTicket.getMinmoney() + "元商品可用，此代金券适用于" + text);
-		
-		String enddate = voucherTicket.getEnddate();
-		String currentTime = Utils.getCurrentTime();
-		String end = Utils.getTimeFormatStr2(Long.parseLong(enddate));
-		String current = Utils.getTimeFormatStr2(Long.parseLong(currentTime));
-		try {
-			int daysBetween = Utils.daysBetween(current, end);
-			String timeFormatStr2 = Utils.getTimeFormatStr2(Long.parseLong(enddate));
-			String[] splitTime = timeFormatStr2.split("-");
-			daysBetween += 1;
-			holder.tv_time.setText("剩余：" + daysBetween + "天");
-			holder.valid_date.setText("有效期至" + splitTime[0] + "年" + splitTime[1] + "月" + splitTime[2] + "日");
-		} catch (ParseException e) {
-			e.printStackTrace();
-		}
-		return convertView;
-	}
-	
-	static class ViewHolder{
-		TextView tv_price;
-		TextView tv_name;
-		TextView tv_disc;
-		TextView tv_time;
-		TextView valid_date;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/PayResult.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/PayResult.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/PayResult.java	(revision )
@@ -1,61 +0,0 @@
-package com.anniu.shandiandaojia.alipay;
-
-import android.text.TextUtils;
-
-public class PayResult {
-	private String resultStatus;
-	private String result;
-	private String memo;
-
-	public PayResult(String rawResult) {
-
-		if (TextUtils.isEmpty(rawResult))
-			return;
-
-		String[] resultParams = rawResult.split(";");
-		for (String resultParam : resultParams) {
-			if (resultParam.startsWith("resultStatus")) {
-				resultStatus = gatValue(resultParam, "resultStatus");
-			}
-			if (resultParam.startsWith("result")) {
-				result = gatValue(resultParam, "result");
-			}
-			if (resultParam.startsWith("memo")) {
-				memo = gatValue(resultParam, "memo");
-			}
-		}
-	}
-
-	@Override
-	public String toString() {
-		return "resultStatus={" + resultStatus + "};memo={" + memo
-				+ "};result={" + result + "}";
-	}
-
-	private String gatValue(String content, String key) {
-		String prefix = key + "={";
-		return content.substring(content.indexOf(prefix) + prefix.length(),
-				content.lastIndexOf("}"));
-	}
-
-	/**
-	 * @return the resultStatus
-	 */
-	public String getResultStatus() {
-		return resultStatus;
-	}
-
-	/**
-	 * @return the memo
-	 */
-	public String getMemo() {
-		return memo;
-	}
-
-	/**
-	 * @return the result
-	 */
-	public String getResult() {
-		return result;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosGallery.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosGallery.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosGallery.java	(revision )
@@ -1,3152 +0,0 @@
-/*
- * Copyright (C) 2007 The Android Open Source Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.anniu.shandiandaojia.view.lee.wheel.widget;
-
-import android.content.Context;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Rect;
-import android.graphics.drawable.Drawable;
-import android.util.AttributeSet;
-import android.util.Log;
-import android.view.ContextMenu.ContextMenuInfo;
-import android.view.GestureDetector;
-import android.view.Gravity;
-import android.view.HapticFeedbackConstants;
-import android.view.KeyEvent;
-import android.view.MotionEvent;
-import android.view.SoundEffectConstants;
-import android.view.View;
-import android.view.ViewConfiguration;
-import android.view.ViewGroup;
-import android.view.animation.Transformation;
-import android.widget.Scroller;
-
-import com.anniu.shandiandaojia.R;
-
-/**
- * A view that shows items in a center-locked, horizontally scrolling list.
- * <p>
- * The default values for the Gallery assume you will be using
- * {@link android.R.styleable#Theme_galleryItemBackground} as the background for each View given to
- * the Gallery from the Adapter. If you are not doing this, you may need to adjust some Gallery
- * properties, such as the spacing.
- * <p>
- * Views given to the Gallery should use {@link TosGallery.LayoutParams} as their layout parameters
- * type.
- * 
- * @attr ref android.R.styleable#Gallery_animationDuration
- * @attr ref android.R.styleable#Gallery_spacing
- * @attr ref android.R.styleable#Gallery_gravity
- */
-public class TosGallery extends TosAbsSpinner implements GestureDetector.OnGestureListener,
-        GestureDetector.OnDoubleTapListener {
-
-    private static final String TAG = "Gallery";
-
-    private static final boolean localLOGV = false;
-
-    /**
-     * Duration in milliseconds from the start of a scroll during which we're unsure whether the
-     * user is scrolling or flinging.
-     */
-    private static final int SCROLL_TO_FLING_UNCERTAINTY_TIMEOUT = 250;
-
-    /**
-     * Horizontal spacing between items.
-     */
-    private int mSpacing = 0;
-
-    /**
-     * How long the transition animation should run when a child view changes position, measured in
-     * milliseconds.
-     */
-    private int mAnimationDuration = 400;
-
-    /**
-     * The alpha of items that are not selected.
-     */
-    private float mUnselectedAlpha;
-
-    /**
-     * Left most edge of a child seen so far during layout.
-     */
-    private int mLeftMost;
-
-    /**
-     * Right most edge of a child seen so far during layout.
-     */
-    private int mRightMost;
-
-    private int mGravity;
-
-    /**
-     * Helper for detecting touch gestures.
-     */
-    private GestureDetector mGestureDetector;
-
-    /**
-     * The position of the item that received the user's down touch.
-     */
-    private int mDownTouchPosition;
-
-    /**
-     * The view of the item that received the user's down touch.
-     */
-    private View mDownTouchView;
-
-    /**
-     * Executes the delta scrolls from a fling or scroll movement.
-     */
-    private FlingRunnable mFlingRunnable = new FlingRunnable();
-
-    /**
-     * Sets mSuppressSelectionChanged = false. This is used to set it to false in the future. It
-     * will also trigger a selection changed.
-     */
-    private Runnable mDisableSuppressSelectionChangedRunnable = new Runnable() {
-        public void run() {
-            mSuppressSelectionChanged = false;
-            selectionChanged();
-        }
-    };
-
-    /**
-     * When fling runnable runs, it resets this to false. Any method along the path until the end of
-     * its run() can set this to true to abort any remaining fling. For example, if we've reached
-     * either the leftmost or rightmost item, we will set this to true.
-     */
-    private boolean mShouldStopFling;
-
-    /**
-     * The currently selected item's child.
-     */
-    private View mSelectedChild;
-
-    /**
-     * Whether to continuously callback on the item selected listener during a fling.
-     */
-    private boolean mShouldCallbackDuringFling = true;
-
-    /**
-     * Whether to callback when an item that is not selected is clicked.
-     */
-    private boolean mShouldCallbackOnUnselectedItemClick = true;
-
-    /**
-     * If true, do not callback to item selected listener.
-     */
-    private boolean mSuppressSelectionChanged;
-
-    /**
-     * If true, we have received the "invoke" (center or enter buttons) key down. This is checked
-     * before we action on the "invoke" key up, and is subsequently cleared.
-     */
-    private boolean mReceivedInvokeKeyDown;
-
-    private AdapterContextMenuInfo mContextMenuInfo;
-
-    /**
-     * If true, this onScroll is the first for this user's drag (remember, a drag sends many
-     * onScrolls).
-     */
-    private boolean mIsFirstScroll;
-
-    public TosGallery(Context context) {
-        this(context, null);
-    }
-
-    public TosGallery(Context context, AttributeSet attrs) {
-        this(context, attrs, R.attr.galleryStyle);
-    }
-
-    public TosGallery(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-
-        mGestureDetector = new GestureDetector(context, this);
-        mGestureDetector.setIsLongpressEnabled(true);
-
-        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Gallery, defStyle, 0);
-
-        int index = a.getInt(R.styleable.Gallery_gravity, -1);
-        if (index >= 0) {
-            setGravity(index);
-        }
-
-        int animationDuration = a.getInt(R.styleable.Gallery_animationDuration, -1);
-        if (animationDuration > 0) {
-            setAnimationDuration(animationDuration);
-        }
-
-        int spacing = a.getDimensionPixelOffset(R.styleable.Gallery_spacing, 0);
-        setSpacing(spacing);
-
-        float unselectedAlpha = a.getFloat(R.styleable.Gallery_unselectedAlpha, 0.5f);
-        setUnselectedAlpha(unselectedAlpha);
-
-        a.recycle();
-
-        // Deleted by LiHong at 2011/08/12 begin.
-        //
-        // Note: FLAG_USE_CHILD_DRAWING_ORDER and FLAG_SUPPORT_STATIC_TRANSFORMATIONS are
-        // defined in ViewGroup class, they are protected static final, in this class, we
-        // can not access the members, but we can use methods to replace these members.
-
-        /**
-         * // We draw the selected item last (because otherwise the item to the // right overlaps
-         * it) mGroupFlags |= FLAG_USE_CHILD_DRAWING_ORDER;
-         * 
-         * mGroupFlags |= FLAG_SUPPORT_STATIC_TRANSFORMATIONS;
-         */
-
-        //
-        // Deleted by LiHong at 2011/08/12 end.
-
-        // Added by LiHong at 2011/08/12 begin===================================.
-        //
-
-        // We draw the selected item last (because otherwise the item to the
-        // right overlaps it)
-        setChildrenDrawingOrderEnabled(true);
-
-        setStaticTransformationsEnabled(true);
-
-        // The scroll bar size.
-        mScrollBarSize = ViewConfiguration.get(context).getScaledScrollBarSize();
-
-        if (isOrientationVertical()) {
-            mGravity = Gravity.CENTER_HORIZONTAL;
-        } else {
-            mGravity = Gravity.CENTER_VERTICAL;
-        }
-        //
-        // Added by LiHong at 2011/08/12 end=====================================.
-    }
-
-    /**
-     * Whether or not to callback on any {@link #getOnItemSelectedListener()} while the items are
-     * being flinged. If false, only the final selected item will cause the callback. If true, all
-     * items between the first and the final will cause callbacks.
-     * 
-     * @param shouldCallback Whether or not to callback on the listener while the items are being
-     *            flinged.
-     */
-    public void setCallbackDuringFling(boolean shouldCallback) {
-        mShouldCallbackDuringFling = shouldCallback;
-    }
-
-    /**
-     * Whether or not to callback when an item that is not selected is clicked. If false, the item
-     * will become selected (and re-centered). If true, the {@link #getOnItemClickListener()} will
-     * get the callback.
-     * 
-     * @param shouldCallback Whether or not to callback on the listener when a item that is not
-     *            selected is clicked.
-     * @hide
-     */
-    public void setCallbackOnUnselectedItemClick(boolean shouldCallback) {
-        mShouldCallbackOnUnselectedItemClick = shouldCallback;
-    }
-
-    /**
-     * Sets how long the transition animation should run when a child view changes position. Only
-     * relevant if animation is turned on.
-     * 
-     * @param animationDurationMillis The duration of the transition, in milliseconds.
-     * 
-     * @attr ref android.R.styleable#Gallery_animationDuration
-     */
-    public void setAnimationDuration(int animationDurationMillis) {
-        mAnimationDuration = animationDurationMillis;
-    }
-
-    /**
-     * Sets the spacing between items in a Gallery
-     * 
-     * @param spacing The spacing in pixels between items in the Gallery
-     * 
-     * @attr ref android.R.styleable#Gallery_spacing
-     */
-    public void setSpacing(int spacing) {
-        mSpacing = spacing;
-    }
-
-    /**
-     * Sets the alpha of items that are not selected in the Gallery.
-     * 
-     * @param unselectedAlpha the alpha for the items that are not selected.
-     * 
-     * @attr ref android.R.styleable#Gallery_unselectedAlpha
-     */
-    public void setUnselectedAlpha(float unselectedAlpha) {
-        mUnselectedAlpha = unselectedAlpha;
-    }
-
-    @Override
-    protected boolean getChildStaticTransformation(View child, Transformation t) {
-        t.clear();
-        t.setAlpha(child == mSelectedChild ? 1.0f : mUnselectedAlpha);
-
-        Log(" getChildStaticTransformation   mSelectedPosition =  " + mSelectedPosition + "   mFirstPosition = "
-                + mFirstPosition + "     mSelectedChild = " + mSelectedChild);
-
-        return true;
-    }
-
-    // Added by LiHong at 2011/09/29 begin ===========================
-    //
-
-    protected void onDrawHorizontalScrollBar(Canvas canvas, Drawable scrollBar, int l, int t, int r, int b) {
-        // This method is hide for client, add the bottom margin of the scroll bar.
-        //
-        // Note: If the bottom margin is not zero, we should override the
-        // #invalidate(int, int, int, int) method so that the scroll bar can be fade when
-        // completing scrolling.
-        t -= mScrollBarBottomMargin;
-        b -= mScrollBarBottomMargin;
-        t = b - mScrollBarSize;
-
-        scrollBar.setBounds(l, t, r, b);
-        scrollBar.draw(canvas);
-    }
-
-    /**
-     * Mark the the area defined by the rect (l,t,r,b) as needing to be drawn. The coordinates of
-     * the dirty rect are relative to the view. If the view is visible, {@link #onDraw} will be
-     * called at some point in the future. This must be called from a UI thread. To call from a
-     * non-UI thread, call {@link #postInvalidate()}.
-     * 
-     * @param l the left position of the dirty region
-     * @param t the top position of the dirty region
-     * @param r the right position of the dirty region
-     * @param b the bottom position of the dirty region
-     */
-    public void invalidate(int l, int t, int r, int b) {
-        t -= (mScrollBarSize + mScrollBarBottomMargin);
-
-        super.invalidate(l, t, r, b);
-    }
-
-    // Added by LiHong at 2011/09/29 end =============================
-
-    @Override
-    protected int computeHorizontalScrollExtent() {
-        // Only 1 item is considered to be selected
-        // return 1;
-
-        // Added by LiHong at 2011/09/29 begin ==================
-        //
-        // Note: Support the horizontal scroll bar for this gallery.
-
-        final int count = getChildCount();
-        if (count > 0) {
-            int extent = count * 100;
-
-            View view = getChildAt(0);
-            final int left = view.getLeft();
-            int width = view.getWidth();
-            if (width > 0) {
-                boolean isFirst = (0 == mFirstPosition);
-                // If the first position is zero and the left is more than zero, we do not add the
-                // left extent.
-                if (!(isFirst && left > 0)) {
-                    extent += (left * 100) / width;
-                }
-            }
-
-            view = getChildAt(count - 1);
-            final int right = view.getRight();
-            width = view.getWidth();
-            if (width > 0) {
-                boolean isLast = (mFirstPosition + count == mItemCount);
-                // If the last child is show, we do no add the right extent.
-                if (!(isLast && right < getWidth())) {
-                    extent -= ((right - getWidth()) * 100) / width;
-                }
-            }
-
-            return extent;
-        }
-
-        return 0;
-
-        // Added by LiHong at 2011/09/29 end ====================
-    }
-
-    @Override
-    protected int computeHorizontalScrollOffset() {
-        // Current scroll position is the same as the selected position
-        // return mSelectedPosition;
-
-        // Added by LiHong at 2011/09/29 begin ==================
-        //
-        // Note: Support the horizontal scroll bar for this gallery.
-
-        if (mFirstPosition >= 0 && getChildCount() > 0) {
-            final View view = getChildAt(0);
-            final int left = view.getLeft();
-            int width = view.getWidth();
-            if (width > 0) {
-                final int whichCol = mFirstPosition / 1;
-                return Math.max(whichCol * 100 - (left * 100) / width, 0);
-            }
-        }
-
-        return mSelectedPosition;
-
-        // Added by LiHong at 2011/09/29 end ====================
-    }
-
-    @Override
-    protected int computeHorizontalScrollRange() {
-        // Scroll range is the same as the item count
-        // return mItemCount;
-
-        // Added by LiHong at 2011/09/29 begin ==================
-        //
-        // Note: Support the horizontal scroll bar for this gallery.
-
-        final int numRows = 1;
-        final int colCount = (mItemCount + numRows - 1) / numRows;
-        return Math.max(colCount * 100, 0);
-
-        // Added by LiHong at 2011/09/29 end ====================
-    }
-
-    protected boolean checkLayoutParams(ViewGroup.LayoutParams p) {
-        return p instanceof LayoutParams;
-    }
-
-    @Override
-    protected ViewGroup.LayoutParams generateLayoutParams(ViewGroup.LayoutParams p) {
-        return new LayoutParams(p);
-    }
-
-    @Override
-    public ViewGroup.LayoutParams generateLayoutParams(AttributeSet attrs) {
-        return new LayoutParams(getContext(), attrs);
-    }
-
-    @Override
-    protected ViewGroup.LayoutParams generateDefaultLayoutParams() {
-        /*
-         * Gallery expects Gallery.LayoutParams.
-         */
-        return new TosGallery.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-    }
-
-    @Override
-    protected void onLayout(boolean changed, int l, int t, int r, int b) {
-        super.onLayout1(changed, l, t, r, b);
-
-        /*
-         * Remember that we are in layout to prevent more layout request from being generated.
-         */
-        mInLayout = true;
-        layout(0, false);
-        mInLayout = false;
-    }
-
-    @Override
-    int getChildHeight(View child) {
-        return child.getMeasuredHeight();
-    }
-
-    /**
-     * Tracks a motion scroll. In reality, this is used to do just about any movement to items
-     * (touch scroll, arrow-key scroll, set an item as selected).
-     * 
-     * @param deltaX Change in X from the previous event.
-     */
-    void trackMotionScroll(int deltaX) {
-
-        if (getChildCount() == 0) {
-            return;
-        }
-
-        boolean toLeft = deltaX < 0;
-
-        // Deleted by LiHong at 2011/08/12 begin =========================
-        //
-        if (isSlotInCenter()) {
-            // If the gallery scroll cycle, or item count not fill the gallery fully.
-            if (!isScrollCycle() || getChildCount() >= mItemCount) {
-                int limitedDeltaX = getLimitedMotionScrollAmount(toLeft, deltaX);
-                if (limitedDeltaX != deltaX) {
-                    // The above call returned a limited amount, so stop any scrolls/flings
-                    mFlingRunnable.endFling(false);
-                    onFinishedMovement();
-                }
-            }
-
-            offsetChildrenLeftAndRight(deltaX);
-
-            detachOffScreenChildren(toLeft);
-
-            if (toLeft) {
-                // If moved left, there will be empty space on the right
-                fillToGalleryRight();
-            } else {
-                // Similarly, empty space on the left
-                fillToGalleryLeft();
-            }
-
-            // Clear unused views
-            mRecycler.clear();
-
-            setSelectionToCenterChild();
-
-            invalidate();
-            return;
-        }
-        //
-        // Deleted by LiHong at 2011/08/12 end ===========================
-
-        // Add by ZhouYuanqi begin.
-        if (toLeft) {
-            View child = getChildAt(getChildCount() - 1);
-
-            if (null != child && child.getRight() < getStopFlingPosition()) {
-                deltaX = 0;
-                if (null != mFlingRunnable) {
-                    mFlingRunnable.stop(false);
-                }
-            }
-        } else {
-            // First child is out of gallery left bound.
-            View child = getChildAt(0);
-            if (null != child && child.getLeft() > (getWidth() - getStopFlingPosition())) {
-                deltaX = 0;
-
-                if (null != mFlingRunnable) {
-                    mFlingRunnable.stop(false);
-                }
-            }
-        }
-        // Add by ZhouYuanqi end.
-
-        offsetChildrenLeftAndRight(deltaX);
-
-        detachOffScreenChildren(toLeft);
-
-        if (toLeft) {
-            // If moved left, there will be empty space on the right
-            fillToGalleryRight();
-        } else {
-            // Similarly, empty space on the left
-            fillToGalleryLeft();
-        }
-
-        // Clear unused views
-        mRecycler.clear();
-
-        // Must call this method, if not, it may lead crash when user scroll left or right.
-        setSelectionToCenterChild();
-
-        // Added by LiHong at 2011/09/29 to awake the scroll bar.
-        awakenScrollBars();
-        invalidate();
-    }
-
-    void trackMotionScrollVertical(int deltaY) {
-
-        if (getChildCount() == 0) {
-            return;
-        }
-
-        boolean toTop = deltaY < 0;
-
-        // Deleted by LiHong at 2011/08/12 begin =========================
-        //
-        if (isSlotInCenter()) {
-            // If the gallery scroll cycle, or item count not fill the gallery fully.
-            if (!isScrollCycle() || getChildCount() >= mItemCount) {
-                int limitedDeltaX = getLimitedMotionScrollAmount(toTop, deltaY);
-                if (limitedDeltaX != deltaY) {
-                    // The above call returned a limited amount, so stop any scrolls/flings
-                    mFlingRunnable.endFling(false);
-                    onFinishedMovement();
-                }
-            }
-
-            offsetChildrenTopAndBottom(deltaY);
-
-            detachOffScreenChildrenVertical(toTop);
-
-            if (toTop) {
-                // If moved left, there will be empty space on the right
-                fillToGalleryBottom();
-            } else {
-                // Similarly, empty space on the left
-                fillToGalleryTop();
-            }
-
-            // Clear unused views
-            mRecycler.clear();
-
-            setSelectionToCenterChildVertical();
-
-            invalidate();
-            return;
-        }
-        //
-        // Deleted by LiHong at 2011/08/12 end ===========================
-
-        // Add by ZhouYuanqi begin.
-        if (toTop) {
-            View child = getChildAt(getChildCount() - 1);
-
-            if (null != child && child.getRight() < getStopFlingPosition()) {
-                deltaY = 0;
-                if (null != mFlingRunnable) {
-                    mFlingRunnable.stop(false);
-                }
-            }
-        } else {
-            // First child is out of gallery left bound.
-            View child = getChildAt(0);
-            if (null != child && child.getLeft() > (getWidth() - getStopFlingPosition())) {
-                deltaY = 0;
-
-                if (null != mFlingRunnable) {
-                    mFlingRunnable.stop(false);
-                }
-            }
-        }
-        // Add by ZhouYuanqi end.
-
-        offsetChildrenTopAndBottom(deltaY);
-
-        detachOffScreenChildrenVertical(toTop);
-
-        if (toTop) {
-            // If moved left, there will be empty space on the right
-            fillToGalleryBottom();
-        } else {
-            // Similarly, empty space on the left
-            fillToGalleryTop();
-        }
-
-        // Clear unused views
-        mRecycler.clear();
-
-        // Must call this method, if not, it may lead crash when user scroll left or right.
-        setSelectionToCenterChild();
-
-        // Added by LiHong at 2011/09/29 to awake the scroll bar.
-        awakenScrollBars();
-        invalidate();
-    }
-
-    int getLimitedMotionScrollAmount(boolean motionToLeft, int deltaX) {
-        int extremeItemPosition = motionToLeft ? mItemCount - 1 : 0;
-        View extremeChild = getChildAt(extremeItemPosition - mFirstPosition);
-
-        if (extremeChild == null) {
-            return deltaX;
-        }
-
-        int extremeChildCenter = getCenterOfView(extremeChild);
-        int galleryCenter = getCenterOfGallery();
-
-        if (motionToLeft) {
-            if (extremeChildCenter <= galleryCenter) {
-
-                // The extreme child is past his boundary point!
-                return 0;
-            }
-        } else {
-            if (extremeChildCenter >= galleryCenter) {
-
-                // The extreme child is past his boundary point!
-                return 0;
-            }
-        }
-
-        int centerDifference = galleryCenter - extremeChildCenter;
-
-        return motionToLeft ? Math.max(centerDifference, deltaX) : Math.min(centerDifference, deltaX);
-    }
-
-    /**
-     * Offset the horizontal location of all children of this view by the specified number of
-     * pixels.
-     * 
-     * @param offset the number of pixels to offset
-     */
-    private void offsetChildrenLeftAndRight(int offset) {
-        for (int i = getChildCount() - 1; i >= 0; i--) {
-            getChildAt(i).offsetLeftAndRight(offset);
-        }
-    }
-
-    private void offsetChildrenTopAndBottom(int offset) {
-        for (int i = getChildCount() - 1; i >= 0; i--) {
-            getChildAt(i).offsetTopAndBottom(offset);
-        }
-    }
-
-    /**
-     * @return The center of this Gallery.
-     */
-    protected int getCenterOfGallery() {
-        if (isOrientationVertical()) {
-            return (getHeight() - getPaddingTop() - getPaddingBottom()) / 2 + getPaddingTop();
-        }
-        // return (getWidth() - mPaddingLeft - mPaddingRight) / 2 + mPaddingLeft;
-
-        // Modified by LiHong at 2011/08/12 begin ========================
-        //
-        return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2 + getPaddingLeft();
-        //
-        // Modified by LiHong at 2011/08/12 end ==========================
-    }
-
-    /**
-     * @return the stop fling position.
-     */
-    private float getStopFlingPosition() {
-        if (isOrientationVertical()) {
-            return (getHeight() - getPaddingTop() - getPaddingBottom()) * onStopFlingPosRatio() + getPaddingTop();
-        }
-
-        return (getWidth() - getPaddingLeft() - getPaddingRight()) * onStopFlingPosRatio() + getPaddingLeft();
-    }
-
-    /**
-     * @return the position for stopping fling.
-     */
-    protected float onStopFlingPosRatio() {
-        return 0.0f;
-    }
-
-    /**
-     * @return The center of the given view.
-     */
-    private int getCenterOfView(View view) {
-        if (isOrientationVertical()) {
-            return view.getTop() + view.getHeight() / 2;
-        }
-
-        return view.getLeft() + view.getWidth() / 2;
-    }
-
-    /**
-     * Detaches children that are off the screen (i.e.: Gallery bounds).
-     * 
-     * @param toLeft Whether to detach children to the left of the Gallery, or to the right.
-     */
-    private void detachOffScreenChildren(boolean toLeft) {
-        int numChildren = getChildCount();
-        int firstPosition = mFirstPosition;
-        int start = 0;
-        int count = 0;
-
-        if (toLeft) {
-            final int galleryLeft = getPaddingLeft();// mPaddingLeft;
-            for (int i = 0; i < numChildren; i++) {
-                final View child = getChildAt(i);
-                if (child.getRight() >= galleryLeft) {
-                    break;
-                } else {
-                    count++;
-                    mRecycler.put(firstPosition + i, child);
-                }
-            }
-
-            // Do not detach the last child when the child is out of the left bound.
-            if (count == numChildren) {
-                count -= 1;
-            }
-
-        } else {
-            final int galleryRight = getWidth() - getPaddingRight();// mPaddingRight;
-            for (int i = numChildren - 1; i >= 0; i--) {
-                final View child = getChildAt(i);
-                if (child.getLeft() <= galleryRight) {
-                    break;
-                } else {
-                    start = i;
-                    count++;
-                    mRecycler.put(firstPosition + i, child);
-                }
-            }
-
-            // Do not detach the first child when the child is out of the left bound.
-            if (0 == start) {
-                start += 1;
-            }
-        }
-
-        detachViewsFromParent(start, count);
-
-        if (toLeft) {
-            mFirstPosition += count;
-
-            // Added by LiHong at 2012/10/11 begin =======
-            if (isScrollCycle()) {
-                mFirstPosition = mFirstPosition % mItemCount;
-            }
-            // Added by LiHong at 2012/10/11 end =========
-        }
-    }
-
-    private void detachOffScreenChildrenVertical(boolean toTop) {
-        int numChildren = getChildCount();
-        int firstPosition = mFirstPosition;
-        int start = 0;
-        int count = 0;
-
-        if (toTop) {
-            final int galleryTop = getPaddingTop();// mPaddingLeft;
-            for (int i = 0; i < numChildren; i++) {
-                final View child = getChildAt(i);
-                if (child.getBottom() >= galleryTop) {
-                    break;
-                } else {
-                    count++;
-                    mRecycler.put(firstPosition + i, child);
-                }
-            }
-
-            // Do not detach the last child when the child is out of the left bound.
-            if (count == numChildren) {
-                count -= 1;
-            }
-        } else {
-            final int galleryBottom = getHeight() - getPaddingBottom();// mPaddingRight;
-            for (int i = numChildren - 1; i >= 0; i--) {
-                final View child = getChildAt(i);
-                if (child.getTop() <= galleryBottom) {
-                    break;
-                } else {
-                    start = i;
-                    count++;
-                    mRecycler.put(firstPosition + i, child);
-                }
-            }
-
-            // Do not detach the first child when the child is out of the left bound.
-            if (0 == start) {
-                start += 1;
-            }
-        }
-
-        detachViewsFromParent(start, count);
-
-        if (toTop) {
-            mFirstPosition += count;
-
-            // Added by LiHong at 2012/10/11 begin =======
-            if (isScrollCycle()) {
-                mFirstPosition = mFirstPosition % mItemCount;
-            }
-            // Added by LiHong at 2012/10/11 end =========
-        }
-    }
-
-    /**
-     * Scrolls the items so that the selected item is in its 'slot' (its center is the gallery's
-     * center).
-     */
-    public void scrollIntoSlots() {
-        if (isOrientationVertical()) {
-            scrollIntoSlotsVertical();
-            return;
-        }
-
-        // Deleted by LiHong at 2011/08/12 begin ====================================
-        //
-        if (isSlotInCenter()) {
-            if (getChildCount() == 0 || mSelectedChild == null)
-                return;
-
-            int selectedCenter = getCenterOfView(mSelectedChild);
-            int targetCenter = getCenterOfGallery();
-
-            int scrollAmount = targetCenter - selectedCenter;
-            if (scrollAmount != 0) {
-                mFlingRunnable.startUsingDistance(scrollAmount);
-            } else {
-                onFinishedMovement();
-            }
-
-            return;
-        }
-        //
-        // Deleted by LiHong at 2011/08/12 end ======================================
-
-        // Added by LiHong at 2011/08/12 begin ====================================
-        //
-        // Note: Make the gallery item views always dock right or left sides.
-        // If the gallery is playing animation, do nothing.
-        //
-        if (getChildCount() == 0) {
-            return;
-        }
-
-        int scrollAmount = 0;
-
-        if (0 == mFirstPosition) {
-            // In these cases the gallery child count is equal or more than the item count
-            // (adapter.getCount()),
-            // and the gallery first child's left is bigger than zero, we should move the
-            // first child anchors at the most left side of gallery.
-            View child = getChildAt(0);
-
-            // Make the first child anchors at the most left side of gallery when it is over
-            // the left side of gallery.
-            if (child.getLeft() >= 0) {
-                scrollAmount = getPaddingLeft() - child.getLeft();
-            } else {
-                /*
-                 * Delete by ZhouYuanqi on 2012/2/8. // Make the right child anchors at the right
-                 * side of gallery. child = getChildAt(getChildCount() - 1); // If the child's right
-                 * side is fully seeing, i.e, the child right side is // in the right of gallery. if
-                 * (child.getRight() < (getRight() - getPaddingRight())) { scrollAmount = getWidth()
-                 * - getPaddingRight() - child.getRight(); }
-                 * 
-                 * // Add this line to solve the issue that shrink children. scrollAmount =
-                 * getPaddingLeft() - m_firstChildOffset;
-                 */
-
-                // Add by ZhouYuanqi on 2012/2/8 for solve the issue
-                // when scroll from right to left.
-                View lastChild = getChildAt(getChildCount() - 1);
-
-                if ((lastChild.getRight() - child.getLeft()) < (getRight() - getPaddingRight())) {
-                    scrollAmount = getPaddingLeft() - mFirstChildOffset;
-                } else if (lastChild.getRight() < (getRight() - getPaddingRight())) {
-                    scrollAmount = getWidth() - getPaddingRight() - lastChild.getRight();
-                }
-            }
-        }
-        // If the most right view is the last item.
-        else if (mFirstPosition + getChildCount() == mItemCount) {
-            View child = getChildAt(getChildCount() - 1);
-            // If the child's right side is fully seeing, i.e, the child right side is
-            // in the right of gallery.
-            if (child.getRight() < (getRight() - getPaddingRight())) {
-                scrollAmount = getWidth() - getPaddingRight() - child.getRight();
-            }
-        }
-
-        if (0 != scrollAmount) {
-            // Call startUsingDistance method to implement elastic effect.
-            mFlingRunnable.startUsingDistance(scrollAmount);
-        } else {
-            onFinishedMovement();
-        }
-
-        //
-        // Added by LiHong at 2011/08/12 end ======================================
-    }
-
-    private void scrollIntoSlotsVertical() {
-        // Deleted by LiHong at 2011/08/12 begin ====================================
-        //
-        if (isSlotInCenter()) {
-            if (getChildCount() == 0 || mSelectedChild == null)
-                return;
-
-            int selectedCenter = getCenterOfView(mSelectedChild);
-            int targetCenter = getCenterOfGallery();
-
-            int scrollAmount = targetCenter - selectedCenter;
-            if (scrollAmount != 0) {
-                mFlingRunnable.startUsingDistance(scrollAmount);
-            } else {
-                onFinishedMovement();
-            }
-
-            return;
-        }
-        //
-        // Deleted by LiHong at 2011/08/12 end ======================================
-
-        // Added by LiHong at 2011/08/12 begin ====================================
-        //
-        // Note: Make the gallery item views always dock right or left sides.
-        // If the gallery is playing animation, do nothing.
-        //
-
-        if (getChildCount() == 0) {
-            return;
-        }
-
-        int scrollAmount = 0;
-
-        if (0 == mFirstPosition) {
-            // In these cases the gallery child count is equal or more than the item count
-            // (adapter.getCount()),
-            // and the gallery first child's left is bigger than zero, we should move the
-            // first child anchors at the most left side of gallery.
-            View child = getChildAt(0);
-
-            // Make the first child anchors at the most left side of gallery when it is over
-            // the left side of gallery.
-            if (child.getTop() >= 0) {
-                scrollAmount = getPaddingTop() - child.getTop();
-            } else {
-                /*
-                 * Delete by ZhouYuanqi on 2012/2/8. // Make the right child anchors at the right
-                 * side of gallery. child = getChildAt(getChildCount() - 1); // If the child's right
-                 * side is fully seeing, i.e, the child right side is // in the right of gallery. if
-                 * (child.getRight() < (getRight() - getPaddingRight())) { scrollAmount = getWidth()
-                 * - getPaddingRight() - child.getRight(); }
-                 * 
-                 * // Add this line to solve the issue that shrink children. scrollAmount =
-                 * getPaddingLeft() - m_firstChildOffset;
-                 */
-
-                // Add by ZhouYuanqi on 2012/2/8 for solve the issue
-                // when scroll from right to left.
-                View lastChild = getChildAt(getChildCount() - 1);
-
-                if ((lastChild.getBottom() - child.getTop()) < (getBottom() - getPaddingBottom())) {
-                    scrollAmount = getPaddingLeft() - mFirstChildOffset;
-                } else if (lastChild.getBottom() < (getBottom() - getPaddingBottom())) {
-                    scrollAmount = getHeight() - getPaddingBottom() - lastChild.getBottom();
-                }
-            }
-        }
-        // If the most right view is the last item.
-        else if (mFirstPosition + getChildCount() == mItemCount) {
-            View child = getChildAt(getChildCount() - 1);
-            // If the child's right side is fully seeing, i.e, the child right side is
-            // in the right of gallery.
-            if (child.getBottom() < (getBottom() - getPaddingBottom())) {
-                scrollAmount = getHeight() - getPaddingBottom() - child.getBottom();
-            }
-        }
-
-        if (0 != scrollAmount) {
-            // Call startUsingDistance method to implement elastic effect.
-            mFlingRunnable.startUsingDistance(scrollAmount);
-        } else {
-            onFinishedMovement();
-        }
-
-        //
-        // Added by LiHong at 2011/08/12 end ======================================
-    }
-
-    private void onFinishedMovement() {
-        if (mSuppressSelectionChanged) {
-            mSuppressSelectionChanged = false;
-
-            // We haven't been callbacking during the fling, so do it now
-            super.selectionChanged();
-        }
-        invalidate();
-    }
-
-    @Override
-    protected void selectionChanged() {
-        if (!mSuppressSelectionChanged) {
-            super.selectionChanged();
-        }
-    }
-
-    /**
-     * Looks for the child that is closest to the center and sets it as the selected child.
-     */
-    private void setSelectionToCenterChild() {
-
-        View selView = mSelectedChild;
-        if (mSelectedChild == null)
-            return;
-
-        int galleryCenter = getCenterOfGallery();
-
-        // Common case where the current selected position is correct
-        if (selView.getLeft() <= galleryCenter && selView.getRight() >= galleryCenter) {
-            return;
-        }
-
-        //  better search
-        int closestEdgeDistance = Integer.MAX_VALUE;
-        int newSelectedChildIndex = 0;
-        for (int i = getChildCount() - 1; i >= 0; i--) {
-
-            View child = getChildAt(i);
-
-            if (child.getLeft() <= galleryCenter && child.getRight() >= galleryCenter) {
-                // This child is in the center
-                newSelectedChildIndex = i;
-                break;
-            }
-
-            int childClosestEdgeDistance = Math.min(Math.abs(child.getLeft() - galleryCenter),
-                    Math.abs(child.getRight() - galleryCenter));
-            if (childClosestEdgeDistance < closestEdgeDistance) {
-                closestEdgeDistance = childClosestEdgeDistance;
-                newSelectedChildIndex = i;
-            }
-        }
-
-        int newPos = mFirstPosition + newSelectedChildIndex;
-
-        // Added by LiHong at 2012/11/18 begin ======
-        if (isScrollCycle()) {
-            newPos = newPos % mItemCount;
-        }
-        // Added by LiHong at 2012/11/18 end ========
-
-        if (newPos != mSelectedPosition) {
-            setSelectedPositionInt(newPos);
-            setNextSelectedPositionInt(newPos);
-            checkSelectionChanged();
-        }
-    }
-
-    /**
-     * Looks for the child that is closest to the center and sets it as the selected child.
-     */
-    private void setSelectionToCenterChildVertical() {
-
-        View selView = mSelectedChild;
-        if (mSelectedChild == null)
-            return;
-
-        int galleryCenter = getCenterOfGallery();
-
-        if (null != selView) {
-            // Common case where the current selected position is correct
-            if (selView.getTop() <= galleryCenter && selView.getBottom() >= galleryCenter) {
-                return;
-            }
-        }
-
-        //  better search
-        int closestEdgeDistance = Integer.MAX_VALUE;
-        int newSelectedChildIndex = 0;
-        for (int i = getChildCount() - 1; i >= 0; i--) {
-
-            View child = getChildAt(i);
-
-            if (child.getTop() <= galleryCenter && child.getBottom() >= galleryCenter) {
-                // This child is in the center
-                newSelectedChildIndex = i;
-                break;
-            }
-
-            int childClosestEdgeDistance = Math.min(Math.abs(child.getTop() - galleryCenter),
-                    Math.abs(child.getBottom() - galleryCenter));
-            if (childClosestEdgeDistance < closestEdgeDistance) {
-                closestEdgeDistance = childClosestEdgeDistance;
-                newSelectedChildIndex = i;
-            }
-        }
-
-        int newPos = mFirstPosition + newSelectedChildIndex;
-
-        // Added by LiHong at 2012/11/18 begin ======
-        if (isScrollCycle()) {
-            newPos = newPos % mItemCount;
-        }
-        // Added by LiHong at 2012/11/18 end ========
-
-        if (newPos != mSelectedPosition) {
-            setSelectedPositionInt(newPos);
-            setNextSelectedPositionInt(newPos);
-            checkSelectionChanged();
-        }
-    }
-
-    /**
-     * Creates and positions all views for this Gallery.
-     * <p>
-     * We layout rarely, most of the time {@link #trackMotionScroll(int)} takes care of
-     * repositioning, adding, and removing children.
-     * 
-     * @param delta Change in the selected position. +1 means the selection is moving to the right,
-     *            so views are scrolling to the left. -1 means the selection is moving to the left.
-     */
-    @Override
-    void layout(int delta, boolean animate) {
-        if (isOrientationVertical()) {
-            layoutVertical(delta, animate);
-            return;
-        }
-
-        // Make the first child's position does not change.
-        // View firstChild = getChildAt(0);
-        // int firstChildLeft =(null != firstChild) ? firstChild.getLeft() : 0;
-        int childrenLeft = mSpinnerPadding.left + mFirstChildOffset;
-
-        // Modified by LiHong at 2011/08/12 begin===========================.
-        //
-        // int childrenWidth = mRight - mLeft - mSpinnerPadding.left - mSpinnerPadding.right;
-        // int childrenWidth = getRight() - getLeft() - mSpinnerPadding.left -
-        // mSpinnerPadding.right;
-        //
-        // Modified by LiHong at 2011/08/12 end=============================.
-
-        if (mDataChanged) {
-            handleDataChanged();
-        }
-
-        // Handle an empty gallery by removing all views.
-        if (mItemCount == 0) {
-            resetList();
-            return;
-        }
-
-        // Update to the new selected position.
-        if (mNextSelectedPosition >= 0) {
-            setSelectedPositionInt(mNextSelectedPosition);
-        }
-
-        // All views go in recycler while we are in layout
-        recycleAllViews();
-
-        // Clear out old views
-        // removeAllViewsInLayout();
-        detachAllViewsFromParent();
-
-        /*
-         * These will be used to give initial positions to views entering the gallery as we scroll
-         */
-        mRightMost = 0;
-        mLeftMost = 0;
-
-        // Make selected view and center it
-
-        /*
-         * mFirstPosition will be decreased as we add views to the left later on. The 0 for x will
-         * be offset in a couple lines down.
-         */
-        // mFirstPosition = mSelectedPosition;
-        // View sel = makeAndAddView(mSelectedPosition, 0, 0, true);
-        mFirstPosition = mSelectedPosition;
-        View sel = makeAndAddView(mFirstPosition, 0, 0, true);
-
-        // Put the selected child in the center
-
-        // Modify by LiHong at 2011/08/12 begin ============================
-        //
-        // Note: Make the selected item offset is near left of the gallery, default
-        // the first item is selected, so the first item's offset is near left of gallery.
-        //
-
-        // int selectedOffset = childrenLeft + (childrenWidth / 2) - (sel.getWidth() / 2);
-        int selectedOffset = childrenLeft + mSpacing;
-
-        if (isSlotInCenter()) {
-            int childrenWidth = getRight() - getLeft() - mSpinnerPadding.left - mSpinnerPadding.right;
-            selectedOffset = childrenLeft + (childrenWidth / 2) - (sel.getWidth() / 2);
-        }
-
-        //
-        // Modify by LiHong at 2011/08/12 end ============================
-
-        sel.offsetLeftAndRight(selectedOffset);
-
-        fillToGalleryRight();
-        fillToGalleryLeft();
-
-        // Flush any cached views that did not get reused above
-        mRecycler.clear();
-
-        invalidate();
-        // checkSelectionChanged();
-
-        mDataChanged = false;
-        mNeedSync = false;
-        setNextSelectedPositionInt(mSelectedPosition);
-
-        updateSelectedItemMetadata();
-
-        // Added by LiHong at 2012/11/17 begin ==========
-        //
-        // NOTE: If the child count is less than the item count, we should disable cycle scroll,
-        // but, we should NOT change the mIsScrollCycle which is set by callers, because
-        // after user enlarge the item count such as add data dynamically, if the item count
-        // is bigger than child count, the gallery should be scrolling cycle.
-        mIsScrollCycleTemp = !(getChildCount() >= mItemCount);
-        // Added by LiHong at 2012/11/17 end ============
-    }
-
-    void layoutVertical(int delta, boolean animate) {
-        // Make the first child's position does not change.
-        // View firstChild = getChildAt(0);
-        // int firstChildLeft =(null != firstChild) ? firstChild.getLeft() : 0;
-        int childrenTop = mSpinnerPadding.top + mFirstChildOffset;
-
-        // Modified by LiHong at 2011/08/12 begin===========================.
-        //
-        // int childrenWidth = mRight - mLeft - mSpinnerPadding.left - mSpinnerPadding.right;
-        // int childrenWidth = getRight() - getLeft() - mSpinnerPadding.left -
-        // mSpinnerPadding.right;
-        //
-        // Modified by LiHong at 2011/08/12 end=============================.
-
-        if (mDataChanged) {
-            handleDataChanged();
-        }
-
-        // Handle an empty gallery by removing all views.
-        if (mItemCount == 0) {
-            resetList();
-            return;
-        }
-
-        // Update to the new selected position.
-        if (mNextSelectedPosition >= 0) {
-            setSelectedPositionInt(mNextSelectedPosition);
-        }
-
-        // All views go in recycler while we are in layout
-        recycleAllViews();
-
-        // Clear out old views
-        // removeAllViewsInLayout();
-        detachAllViewsFromParent();
-
-        /*
-         * These will be used to give initial positions to views entering the gallery as we scroll
-         */
-        mRightMost = 0;
-        mLeftMost = 0;
-
-        // Make selected view and center it
-
-        /*
-         * mFirstPosition will be decreased as we add views to the left later on. The 0 for x will
-         * be offset in a couple lines down.
-         */
-        // mFirstPosition = mSelectedPosition;
-        // View sel = makeAndAddView(mSelectedPosition, 0, 0, true);
-        mFirstPosition = mSelectedPosition;
-        View sel = makeAndAddViewVertical(mFirstPosition, 0, 0, true);
-
-        // Put the selected child in the center
-
-        // Modify by LiHong at 2011/08/12 begin ============================
-        //
-        // Note: Make the selected item offset is near left of the gallery, default
-        // the first item is selected, so the first item's offset is near left of gallery.
-        //
-
-        // int selectedOffset = childrenLeft + (childrenWidth / 2) - (sel.getWidth() / 2);
-        int selectedOffset = childrenTop + mSpacing;
-
-        if (isSlotInCenter()) {
-            int childrenHeight = getBottom() - getTop() - mSpinnerPadding.top - mSpinnerPadding.bottom;
-            selectedOffset = childrenTop + (childrenHeight / 2) - (sel.getHeight() / 2);
-        }
-
-        //
-        // Modify by LiHong at 2011/08/12 end ============================
-
-        sel.offsetTopAndBottom(selectedOffset);
-
-        fillToGalleryBottom();
-        fillToGalleryTop();
-
-        // Flush any cached views that did not get reused above
-        mRecycler.clear();
-
-        invalidate();
-        // checkSelectionChanged();
-
-        mDataChanged = false;
-        mNeedSync = false;
-        setNextSelectedPositionInt(mSelectedPosition);
-
-        updateSelectedItemMetadata();
-
-        // Added by LiHong at 2012/11/17 begin ==========
-        //
-        // NOTE: If the child count is less than the item count, we should disable cycle scroll,
-        // but, we should NOT change the mIsScrollCycle which is set by callers, because
-        // after user enlarge the item count such as add data dynamically, if the item count
-        // is bigger than child count, the gallery should be scrolling cycle.
-        mIsScrollCycleTemp = !(getChildCount() >= mItemCount);
-        // Added by LiHong at 2012/11/17 end ============
-    }
-
-    private void fillToGalleryLeft() {
-
-        // Added by LiHong at 2012/10/11 begin =======
-        if (isScrollCycle()) {
-            fillToGalleryLeftCycle();
-            return;
-        }
-        // Added by LiHong at 2012/10/11 end =========
-
-        int itemSpacing = mSpacing;
-        int galleryLeft = getPaddingLeft();// mPaddingLeft;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(0);
-        int curPosition;
-        int curRightEdge;
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition - 1;
-            curRightEdge = prevIterationView.getLeft() - itemSpacing;
-        } else {
-            // No children available!
-            curPosition = 0;
-            // curRightEdge = mRight - mLeft - mPaddingRight;
-            curRightEdge = getRight() - getLeft() - getPaddingRight();
-            mShouldStopFling = true;
-        }
-
-        while (curRightEdge > galleryLeft && curPosition >= 0) {
-            prevIterationView = makeAndAddView(curPosition, curPosition - mSelectedPosition, curRightEdge, false);
-
-            // Remember some state
-            mFirstPosition = curPosition;
-
-            // Set state for next iteration
-            curRightEdge = prevIterationView.getLeft() - itemSpacing;
-            curPosition--;
-        }
-    }
-
-    private void fillToGalleryTop() {
-
-        // Added by LiHong at 2012/10/11 begin =======
-        if (isScrollCycle()) {
-            fillToGalleryTopCycle();
-            return;
-        }
-        // Added by LiHong at 2012/10/11 end =========
-
-        int itemSpacing = mSpacing;
-        int galleryTop = getPaddingTop();// mPaddingLeft;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(0);
-        int curPosition;
-        int curRightEdge;
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition - 1;
-            curRightEdge = prevIterationView.getTop() - itemSpacing;
-        } else {
-            // No children available!
-            curPosition = 0;
-            // curRightEdge = mRight - mLeft - mPaddingRight;
-            curRightEdge = getBottom() - getTop() - getPaddingBottom();
-            mShouldStopFling = true;
-        }
-
-        while (curRightEdge > galleryTop && curPosition >= 0) {
-            prevIterationView = makeAndAddViewVertical(curPosition, curPosition - mSelectedPosition, curRightEdge,
-                    false);
-
-            // Remember some state
-            mFirstPosition = curPosition;
-
-            // Set state for next iteration
-            curRightEdge = prevIterationView.getTop() - itemSpacing;
-            curPosition--;
-        }
-    }
-
-    private void fillToGalleryRight() {
-
-        // Added by LiHong at 2012/10/11 begin =======
-        if (isScrollCycle()) {
-            fillToGalleryRightCycle();
-            return;
-        }
-        // Added by LiHong at 2012/10/11 end =========
-
-        int itemSpacing = mSpacing;
-
-        // int galleryRight = mRight - mLeft - mPaddingRight;
-        int galleryRight = getRight() - getLeft() - getPaddingRight();
-
-        int numChildren = getChildCount();
-        int numItems = mItemCount;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(numChildren - 1);
-        int curPosition;
-        int curLeftEdge;
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition + numChildren;
-            curLeftEdge = prevIterationView.getRight() + itemSpacing;
-        } else {
-            mFirstPosition = curPosition = mItemCount - 1;
-            curLeftEdge = getPaddingLeft();// mPaddingLeft;
-            mShouldStopFling = true;
-        }
-
-        while (curLeftEdge < galleryRight && curPosition < numItems) {
-
-            prevIterationView = makeAndAddView(curPosition, curPosition - mSelectedPosition, curLeftEdge, true);
-
-            // Set state for next iteration
-            curLeftEdge = prevIterationView.getRight() + itemSpacing;
-            curPosition++;
-        }
-    }
-
-    private void fillToGalleryBottom() {
-
-        // Added by LiHong at 2012/10/11 begin =======
-        if (isScrollCycle()) {
-            fillToGalleryBottomCycle();
-            return;
-        }
-        // Added by LiHong at 2012/10/11 end =========
-
-        int itemSpacing = mSpacing;
-
-        // int galleryRight = mRight - mLeft - mPaddingRight;
-        int galleryRight = getBottom() - getTop() - getPaddingRight();
-
-        int numChildren = getChildCount();
-        int numItems = mItemCount;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(numChildren - 1);
-        int curPosition;
-        int curLeftEdge;
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition + numChildren;
-            curLeftEdge = prevIterationView.getBottom() + itemSpacing;
-        } else {
-            mFirstPosition = curPosition = mItemCount - 1;
-            curLeftEdge = getPaddingTop();// mPaddingLeft;
-            mShouldStopFling = true;
-        }
-
-        while (curLeftEdge < galleryRight && curPosition < numItems) {
-
-            prevIterationView = makeAndAddViewVertical(curPosition, curPosition - mSelectedPosition, curLeftEdge, true);
-
-            // Set state for next iteration
-            curLeftEdge = prevIterationView.getBottom() + itemSpacing;
-            curPosition++;
-        }
-    }
-
-    /**
-     * Obtain a view, either by pulling an existing view from the recycler or by getting a new one
-     * from the adapter. If we are animating, make sure there is enough information in the view's
-     * layout parameters to animate from the old to new positions.
-     * 
-     * @param position Position in the gallery for the view to obtain
-     * @param offset Offset from the selected position
-     * @param x X-coordintate indicating where this view should be placed. This will either be the
-     *            left or right edge of the view, depending on the fromLeft paramter
-     * @param fromLeft Are we posiitoning views based on the left edge? (i.e., building from left to
-     *            right)?
-     * @return A view that has been added to the gallery
-     */
-    private View makeAndAddView(int position, int offset, int x, boolean fromLeft) {
-
-        View child;
-
-        if (!mDataChanged) {
-            child = mRecycler.get(position);
-            if (child != null) {
-
-                // Can reuse an existing view
-                int childLeft = child.getLeft();
-
-                // Remember left and right edges of where views have been placed
-                mRightMost = Math.max(mRightMost, childLeft + child.getMeasuredWidth());
-                mLeftMost = Math.min(mLeftMost, childLeft);
-
-                // Position the view
-                setUpChild(child, offset, x, fromLeft);
-
-                return child;
-            }
-        }
-
-        // Nothing found in the recycler -- ask the adapter for a view
-        child = mAdapter.getView(position, null, this);
-
-        // Position the view
-        setUpChild(child, offset, x, fromLeft);
-
-        return child;
-    }
-
-    private View makeAndAddViewVertical(int position, int offset, int y, boolean fromTop) {
-
-        View child;
-
-        if (!mDataChanged) {
-            child = mRecycler.get(position);
-            if (child != null) {
-
-                // Can reuse an existing view
-                int childTop = child.getTop();
-
-                // Remember left and right edges of where views have been placed
-                mRightMost = Math.max(mRightMost, childTop + child.getMeasuredHeight());
-                mLeftMost = Math.min(mLeftMost, childTop);
-
-                // Position the view
-                setUpChildVertical(child, offset, y, fromTop);
-
-                return child;
-            }
-        }
-
-        // Nothing found in the recycler -- ask the adapter for a view
-        child = mAdapter.getView(position, null, this);
-
-        // Position the view
-        setUpChildVertical(child, offset, y, fromTop);
-
-        return child;
-    }
-
-    /**
-     * Helper for makeAndAddView to set the position of a view and fill out its layout paramters.
-     * 
-     * @param child The view to position
-     * @param offset Offset from the selected position
-     * @param x X-coordintate indicating where this view should be placed. This will either be the
-     *            left or right edge of the view, depending on the fromLeft paramter
-     * @param fromLeft Are we posiitoning views based on the left edge? (i.e., building from left to
-     *            right)?
-     */
-    private void setUpChild(View child, int offset, int x, boolean fromLeft) {
-
-        // Respect layout params that are already in the view. Otherwise
-        // make some up...
-        TosGallery.LayoutParams lp = (TosGallery.LayoutParams) child.getLayoutParams();
-        if (lp == null) {
-            lp = (TosGallery.LayoutParams) generateDefaultLayoutParams();
-        }
-
-        addViewInLayout(child, fromLeft ? -1 : 0, lp);
-
-        child.setSelected(offset == 0);
-
-        // Get measure specs
-        int childHeightSpec = ViewGroup.getChildMeasureSpec(mHeightMeasureSpec, mSpinnerPadding.top
-                + mSpinnerPadding.bottom, lp.height);
-        int childWidthSpec = ViewGroup.getChildMeasureSpec(mWidthMeasureSpec, mSpinnerPadding.left
-                + mSpinnerPadding.right, lp.width);
-
-        // Measure child
-        child.measure(childWidthSpec, childHeightSpec);
-
-        int childLeft;
-        int childRight;
-
-        // Position vertically based on gravity setting
-        int childTop = calculateTop(child, true);
-        int childBottom = childTop + child.getMeasuredHeight();
-
-        int width = child.getMeasuredWidth();
-        if (fromLeft) {
-            childLeft = x;
-            childRight = childLeft + width;
-        } else {
-            childLeft = x - width;
-            childRight = x;
-        }
-
-        child.layout(childLeft, childTop, childRight, childBottom);
-    }
-
-    /**
-     * Helper for makeAndAddView to set the position of a view and fill out its layout paramters.
-     * 
-     * @param child The view to position
-     * @param offset Offset from the selected position
-     * @param y X-coordintate indicating where this view should be placed. This will either be the
-     *            left or right edge of the view, depending on the fromLeft paramter
-     * @param fromTop Are we posiitoning views based on the left edge? (i.e., building from left to
-     *            right)?
-     */
-    private void setUpChildVertical(View child, int offset, int y, boolean fromTop) {
-
-        // Respect layout params that are already in the view. Otherwise
-        // make some up...
-        TosGallery.LayoutParams lp = (TosGallery.LayoutParams) child.getLayoutParams();
-        if (lp == null) {
-            lp = (TosGallery.LayoutParams) generateDefaultLayoutParams();
-        }
-
-        addViewInLayout(child, fromTop ? -1 : 0, lp);
-
-        child.setSelected(offset == 0);
-
-        // Get measure specs
-        int childHeightSpec = ViewGroup.getChildMeasureSpec(mHeightMeasureSpec, mSpinnerPadding.top
-                + mSpinnerPadding.bottom, lp.height);
-        int childWidthSpec = ViewGroup.getChildMeasureSpec(mWidthMeasureSpec, mSpinnerPadding.left
-                + mSpinnerPadding.right, lp.width);
-
-        // Measure child
-        child.measure(childWidthSpec, childHeightSpec);
-
-        int childTop;
-        int childBottom;
-
-        // Position vertically based on gravity setting
-        int childLeft = calculateLeft(child, true);
-        int childRight = childLeft + child.getMeasuredWidth();
-
-        int height = child.getMeasuredHeight();
-        if (fromTop) {
-            childTop = y;
-            childBottom = childTop + height;
-        } else {
-            childTop = y - height;
-            childBottom = y;
-        }
-
-        child.layout(childLeft, childTop, childRight, childBottom);
-    }
-
-    /**
-     * Figure out vertical placement based on mGravity
-     * 
-     * @param child Child to place
-     * @return Where the top of the child should be
-     */
-    private int calculateTop(View child, boolean duringLayout) {
-        // int myHeight = duringLayout ? mMeasuredHeight : getHeight();
-        int myHeight = duringLayout ? getMeasuredHeight() : getHeight();
-        int childHeight = duringLayout ? child.getMeasuredHeight() : child.getHeight();
-
-        int childTop = 0;
-
-        switch (mGravity) {
-        case Gravity.TOP:
-            childTop = mSpinnerPadding.top;
-            break;
-        case Gravity.CENTER_VERTICAL:
-            int availableSpace = myHeight - mSpinnerPadding.bottom - mSpinnerPadding.top - childHeight;
-            childTop = mSpinnerPadding.top + (availableSpace / 2);
-            break;
-        case Gravity.BOTTOM:
-            childTop = myHeight - mSpinnerPadding.bottom - childHeight;
-            break;
-        }
-        return childTop;
-    }
-
-    private int calculateLeft(View child, boolean duringLayout) {
-        // int myHeight = duringLayout ? mMeasuredHeight : getHeight();
-        int myWidth = duringLayout ? getMeasuredWidth() : getWidth();
-        int childWidth = duringLayout ? child.getMeasuredWidth() : child.getWidth();
-
-        int childLeft = 0;
-
-        switch (mGravity) {
-        case Gravity.LEFT:
-            childLeft = mSpinnerPadding.left;
-            break;
-        case Gravity.CENTER_HORIZONTAL:
-            int availableSpace = myWidth - mSpinnerPadding.right - mSpinnerPadding.left - childWidth;
-            childLeft = mSpinnerPadding.left + (availableSpace / 2);
-            break;
-        case Gravity.RIGHT:
-            childLeft = myWidth - mSpinnerPadding.right - childWidth;
-            break;
-        }
-        return childLeft;
-    }
-
-    @Override
-    public boolean onTouchEvent(MotionEvent event) {
-
-        // Give everything to the gesture detector
-        boolean retValue = mGestureDetector.onTouchEvent(event);
-
-        int action = event.getAction();
-        if (action == MotionEvent.ACTION_UP) {
-            // Helper method for lifted finger
-            onUp();
-        } else if (action == MotionEvent.ACTION_CANCEL) {
-            onCancel();
-        }
-
-        return retValue;
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public boolean onSingleTapUp(MotionEvent e) {
-
-        if (mDownTouchPosition >= 0) {
-
-            // If the gallery is scroll cycle, we must calculate the touch position.
-            if (isScrollCycle()) {
-                mDownTouchPosition = mDownTouchPosition % getCount();
-            }
-
-            if (isSlotInCenter()) {
-                // An item tap should make it selected, so scroll to this child.
-                scrollToChild(mDownTouchPosition - mFirstPosition);
-            }
-
-            performItemSelect(mDownTouchPosition);
-
-            // Also pass the click so the client knows, if it wants to.
-            if (mShouldCallbackOnUnselectedItemClick || mDownTouchPosition == mSelectedPosition) {
-                performItemClick(mDownTouchView, mDownTouchPosition, mAdapter.getItemId(mDownTouchPosition));
-            }
-
-            return true;
-        }
-
-        return false;
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
-
-        // Added by LiHong at 2011/09/07 begin ===================
-        //
-        // User can disable scroll action when the child count is less than the adapter item count.
-        //
-        boolean disableScroll = shouldDisableScroll();
-
-        if (disableScroll) {
-            return true;
-        }
-
-        //
-        // Added by LiHong at 2011/09/07 end =====================
-
-        if (!mShouldCallbackDuringFling) {
-            // We want to suppress selection changes
-
-            // Remove any future code to set mSuppressSelectionChanged = false
-            removeCallbacks(mDisableSuppressSelectionChangedRunnable);
-
-            // This will get reset once we scroll into slots
-            if (!mSuppressSelectionChanged)
-                mSuppressSelectionChanged = true;
-        }
-
-        if (isOrientationVertical()) {
-            // Accelerate or decelerate the velocity of gallery on X directioin.
-            velocityY *= getVelocityRatio();
-            // Fling the gallery!
-            mFlingRunnable.startUsingVelocity((int) -velocityY);
-        } else {
-            // Accelerate or decelerate the velocity of gallery on X directioin.
-            velocityX *= getVelocityRatio();
-            // Fling the gallery!
-            mFlingRunnable.startUsingVelocity((int) -velocityX);
-        }
-
-        return true;
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
-
-        // Added by LiHong at 2011/09/07 begin ===================
-        //
-        // User can disable scroll action when the child count is less than the adapter item count.
-        //
-        boolean disableScroll = shouldDisableScroll();
-
-        if (disableScroll) {
-            return true;
-        }
-
-        mScrolling = true;
-        //
-        // Added by LiHong at 2011/09/07 end =====================
-
-        if (localLOGV)
-            Log.v(TAG, String.valueOf(e2.getX() - e1.getX()));
-
-        /*
-         * Now's a good time to tell our parent to stop intercepting our events! The user has moved
-         * more than the slop amount, since GestureDetector ensures this before calling this method.
-         * Also, if a parent is more interested in this touch's events than we are, it would have
-         * intercepted them by now (for example, we can assume when a Gallery is in the ListView, a
-         * vertical scroll would not end up in this method since a ListView would have intercepted
-         * it by now).
-         */
-        // mParent.requestDisallowInterceptTouchEvent(true);
-        getParent().requestDisallowInterceptTouchEvent(true);
-
-        // As the user scrolls, we want to callback selection changes so related-
-        // info on the screen is up-to-date with the gallery's selection
-        if (!mShouldCallbackDuringFling) {
-            if (mIsFirstScroll) {
-                /*
-                 * We're not notifying the client of selection changes during the fling, and this
-                 * scroll could possibly be a fling. Don't do selection changes until we're sure it
-                 * is not a fling.
-                 */
-                if (!mSuppressSelectionChanged)
-                    mSuppressSelectionChanged = true;
-                postDelayed(mDisableSuppressSelectionChangedRunnable, SCROLL_TO_FLING_UNCERTAINTY_TIMEOUT);
-            }
-        } else {
-            if (mSuppressSelectionChanged)
-                mSuppressSelectionChanged = false;
-        }
-
-        // Track the motion
-        if (isOrientationVertical()) {
-            trackMotionScrollVertical(-1 * (int) distanceY);
-        } else {
-            trackMotionScroll(-1 * (int) distanceX);
-        }
-
-        mIsFirstScroll = false;
-        return true;
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public boolean onDown(MotionEvent e) {
-
-        // Kill any existing fling/scroll
-        mFlingRunnable.stop(false);
-
-        // Get the item's view that was touched
-        mDownTouchPosition = pointToPosition((int) e.getX(), (int) e.getY());
-
-        if (mDownTouchPosition >= 0) {
-            mDownTouchView = getChildAt(mDownTouchPosition - mFirstPosition);
-            mDownTouchView.setPressed(true);
-        }
-
-        // Reset the multiple-scroll tracking state
-        mIsFirstScroll = true;
-
-        // Must return true to get matching events for this down event.
-        return true;
-    }
-
-    /**
-     * Called when a touch event's action is MotionEvent.ACTION_UP.
-     */
-    protected void onUp() {
-
-        if (mFlingRunnable.mScroller.isFinished()) {
-            scrollIntoSlots();
-        }
-
-        dispatchUnpress();
-    }
-
-    /**
-     * Called when a touch event's action is MotionEvent.ACTION_CANCEL.
-     */
-    void onCancel() {
-        onUp();
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    public void onLongPress(MotionEvent e) {
-
-        if (mDownTouchPosition < 0) {
-            return;
-        }
-
-        performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
-        long id = getItemIdAtPosition(mDownTouchPosition);
-        dispatchLongPress(mDownTouchView, mDownTouchPosition, id);
-    }
-
-    // Unused methods from GestureDetector.OnGestureListener below
-
-    /**
-     * {@inheritDoc}
-     */
-    public void onShowPress(MotionEvent e) {
-    }
-
-    // Unused methods from GestureDetector.OnGestureListener above
-
-    private void dispatchPress(View child) {
-
-        if (child != null) {
-            child.setPressed(true);
-        }
-
-        setPressed(true);
-    }
-
-    protected void dispatchUnpress() {
-
-        for (int i = getChildCount() - 1; i >= 0; i--) {
-            getChildAt(i).setPressed(false);
-        }
-
-        setPressed(false);
-    }
-
-    @Override
-    public void dispatchSetSelected(boolean selected) {
-        /*
-         * We don't want to pass the selected state given from its parent to its children since this
-         * widget itself has a selected state to give to its children.
-         */
-    }
-
-    @Override
-    protected void dispatchSetPressed(boolean pressed) {
-
-        // Show the pressed state on the selected child
-        if (mSelectedChild != null) {
-            mSelectedChild.setPressed(pressed);
-        }
-    }
-
-    @Override
-    protected ContextMenuInfo getContextMenuInfo() {
-        return mContextMenuInfo;
-    }
-
-    @Override
-    public boolean showContextMenuForChild(View originalView) {
-
-        final int longPressPosition = getPositionForView(originalView);
-        if (longPressPosition < 0) {
-            return false;
-        }
-
-        final long longPressId = mAdapter.getItemId(longPressPosition);
-        return dispatchLongPress(originalView, longPressPosition, longPressId);
-    }
-
-    @Override
-    public boolean showContextMenu() {
-
-        if (isPressed() && mSelectedPosition >= 0) {
-            int index = mSelectedPosition - mFirstPosition;
-            View v = getChildAt(index);
-            return dispatchLongPress(v, mSelectedPosition, mSelectedRowId);
-        }
-
-        return false;
-    }
-
-    private boolean dispatchLongPress(View view, int position, long id) {
-        boolean handled = false;
-
-        if (mOnItemLongClickListener != null) {
-            handled = mOnItemLongClickListener.onItemLongClick(this, mDownTouchView, mDownTouchPosition, id);
-        }
-
-        if (!handled) {
-            mContextMenuInfo = new AdapterContextMenuInfo(view, position, id);
-            handled = super.showContextMenuForChild(this);
-        }
-
-        if (handled) {
-            performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
-        }
-
-        return handled;
-    }
-
-    @Override
-    public boolean dispatchKeyEvent(KeyEvent event) {
-        // Gallery steals all key events
-        return event.dispatch(this);
-    }
-
-    /**
-     * Handles left, right, and clicking
-     * 
-     * @see android.view.View#onKeyDown
-     */
-    @Override
-    public boolean onKeyDown(int keyCode, KeyEvent event) {
-        switch (keyCode) {
-
-        case KeyEvent.KEYCODE_DPAD_LEFT:
-            if (movePrevious()) {
-                playSoundEffect(SoundEffectConstants.NAVIGATION_LEFT);
-            }
-            return true;
-
-        case KeyEvent.KEYCODE_DPAD_RIGHT:
-            if (moveNext()) {
-                playSoundEffect(SoundEffectConstants.NAVIGATION_RIGHT);
-            }
-            return true;
-
-        case KeyEvent.KEYCODE_DPAD_CENTER:
-        case KeyEvent.KEYCODE_ENTER:
-            mReceivedInvokeKeyDown = true;
-            // fallthrough to default handling
-        }
-
-        return super.onKeyDown(keyCode, event);
-    }
-
-    @Override
-    public boolean onKeyUp(int keyCode, KeyEvent event) {
-        switch (keyCode) {
-        case KeyEvent.KEYCODE_DPAD_CENTER:
-        case KeyEvent.KEYCODE_ENTER: {
-
-            if (mReceivedInvokeKeyDown) {
-                if (mItemCount > 0) {
-
-                    dispatchPress(mSelectedChild);
-                    postDelayed(new Runnable() {
-                        public void run() {
-                            dispatchUnpress();
-                        }
-                    }, ViewConfiguration.getPressedStateDuration());
-
-                    int selectedIndex = mSelectedPosition - mFirstPosition;
-                    performItemClick(getChildAt(selectedIndex), mSelectedPosition,
-                            mAdapter.getItemId(mSelectedPosition));
-                }
-            }
-
-            // Clear the flag
-            mReceivedInvokeKeyDown = false;
-
-            return true;
-        }
-        }
-
-        return super.onKeyUp(keyCode, event);
-    }
-
-    boolean movePrevious() {
-        if (mItemCount > 0 && mSelectedPosition > 0) {
-            // scrollToChild(mSelectedPosition - mFirstPosition - 1);
-            return true;
-        } else {
-            return false;
-        }
-    }
-
-    boolean moveNext() {
-        if (mItemCount > 0 && mSelectedPosition < mItemCount - 1) {
-            // scrollToChild(mSelectedPosition - mFirstPosition + 1);
-            return true;
-        } else {
-            return false;
-        }
-    }
-
-    private boolean scrollToChild(int childPosition) {
-        View child = getChildAt(childPosition);
-
-        if (child != null) {
-            int distance = getCenterOfGallery() - getCenterOfView(child);
-            mFlingRunnable.startUsingDistance(distance);
-            return true;
-        }
-
-        return false;
-    }
-
-    @Override
-    protected void setSelectedPositionInt(int position) {
-        super.setSelectedPositionInt(position);
-
-        // Updates any metadata we keep about the selected item.
-        updateSelectedItemMetadata();
-    }
-
-    private void updateSelectedItemMetadata() {
-
-        View oldSelectedChild = mSelectedChild;
-
-        Log(" updateSelectedItemMetadata   mSelectedPosition =  " + mSelectedPosition + "   mFirstPosition = "
-                + mFirstPosition);
-
-        int index = mSelectedPosition - mFirstPosition;
-        if (isScrollCycle()) {
-            if (mFirstPosition > mSelectedPosition) {
-                index = mItemCount - mFirstPosition + mSelectedPosition;
-            }
-        }
-
-        View child = mSelectedChild = getChildAt(index);
-        if (child == null) {
-            return;
-        }
-
-        child.setSelected(true);
-        child.setFocusable(true);
-
-        if (hasFocus()) {
-            child.requestFocus();
-        }
-
-        // We unfocus the old child down here so the above hasFocus check
-        // returns true
-        if (oldSelectedChild != null) {
-
-            // Make sure its drawable state doesn't contain 'selected'
-            oldSelectedChild.setSelected(false);
-
-            // Make sure it is not focusable anymore, since otherwise arrow keys
-            // can make this one be focused
-            oldSelectedChild.setFocusable(false);
-        }
-
-    }
-
-    /**
-     * Describes how the child views are aligned.
-     * 
-     * @param gravity
-     * 
-     * @attr ref android.R.styleable#Gallery_gravity
-     */
-    public void setGravity(int gravity) {
-        if (mGravity != gravity) {
-            mGravity = gravity;
-            requestLayout();
-        }
-    }
-
-    @Override
-    protected int getChildDrawingOrder(int childCount, int i) {
-
-        // Removed by LiHong at 201109/21 begin =============
-        //
-        //
-
-        int selectedIndex = mSelectedPosition - mFirstPosition;
-        // Just to be safe
-        if (selectedIndex < 0)
-            return i;
-
-        if (i == childCount - 1) {
-            // Draw the selected child last
-            return selectedIndex;
-        } else if (i >= selectedIndex) {
-            // Move the children to the right of the selected child earlier one
-            return i + 1;
-        } else {
-            // Keep the children to the left of the selected child the same
-            return i;
-        }
-        //
-        // Removed by LiHong at 201109/21 end ===============
-
-        // We make the drawing order reverses the children order in list.
-        // return (childCount - 1 - i);
-    }
-
-    @Override
-    protected void onFocusChanged(boolean gainFocus, int direction, Rect previouslyFocusedRect) {
-        super.onFocusChanged(gainFocus, direction, previouslyFocusedRect);
-
-        /*
-         * The gallery shows focus by focusing the selected item. So, give focus to our selected
-         * item instead. We steal keys from our selected item elsewhere.
-         */
-        if (gainFocus && mSelectedChild != null) {
-            mSelectedChild.requestFocus(direction);
-        }
-
-    }
-
-    /**
-     * Responsible for fling behavior. Use {@link #startUsingVelocity(int)} to initiate a fling.
-     * Each frame of the fling is handled in {@link #run()}. A FlingRunnable will keep re-posting
-     * itself until the fling is done.
-     * 
-     */
-    private class FlingRunnable implements Runnable {
-        /**
-         * Tracks the decay of a fling scroll
-         */
-        private Scroller mScroller;
-
-        /**
-         * X value reported by mScroller on the previous fling
-         */
-        private int mLastFlingX;
-        private int mLastFlingY;
-
-        public FlingRunnable() {
-            mScroller = new Scroller(getContext());
-        }
-
-        private void startCommon() {
-            // Remove any pending flings
-            removeCallbacks(this);
-        }
-
-        public void startUsingVelocity(int initialVelocity) {
-            if (initialVelocity == 0)
-                return;
-
-            startCommon();
-
-            if (isOrientationVertical()) {
-                int initialY = initialVelocity < 0 ? Integer.MAX_VALUE : 0;
-                mLastFlingY = initialY;
-                mScroller.fling(0, initialY, 0, initialVelocity, 0, Integer.MAX_VALUE, 0, Integer.MAX_VALUE);
-                post(this);
-                return;
-            }
-
-            int initialX = initialVelocity < 0 ? Integer.MAX_VALUE : 0;
-            mLastFlingX = initialX;
-            mScroller.fling(initialX, 0, initialVelocity, 0, 0, Integer.MAX_VALUE, 0, Integer.MAX_VALUE);
-            post(this);
-        }
-
-        public void startUsingDistance(int distance) {
-            if (distance == 0)
-                return;
-
-            if (isOrientationVertical()) {
-                startCommon();
-                mScrolling = true;
-                mLastFlingY = 0;
-                mScroller.startScroll(0, 0, 0, -distance, mAnimationDuration);
-                post(this);
-                return;
-            }
-
-            startCommon();
-            mScrolling = true;
-            mLastFlingX = 0;
-            mScroller.startScroll(0, 0, -distance, 0, mAnimationDuration);
-            post(this);
-        }
-
-        public void stop(boolean scrollIntoSlots) {
-            removeCallbacks(this);
-            endFling(scrollIntoSlots);
-        }
-
-        private void endFling(boolean scrollIntoSlots) {
-
-            mScrolling = false;
-
-            /*
-             * Force the scroller's status to finished (without setting its position to the end)
-             */
-            mScroller.forceFinished(true);
-
-            if (scrollIntoSlots)
-                scrollIntoSlots();
-
-            // Added by LiHong at 2011/09/14 begin ==============
-            //
-            onEndFling();
-            //
-            // Added by LiHong at 2011/09/14 end ================
-        }
-
-        public void run() {
-
-            if (isOrientationVertical()) {
-                runVertical();
-                return;
-            }
-
-            if (mItemCount == 0) {
-                endFling(true);
-                return;
-            }
-
-            mShouldStopFling = false;
-
-            final Scroller scroller = mScroller;
-            boolean more = scroller.computeScrollOffset();
-            final int x = scroller.getCurrX();
-
-            // Flip sign to convert finger direction to list items direction
-            // (e.g. finger moving down means list is moving towards the top)
-            int delta = mLastFlingX - x;
-
-            // Pretend that each frame of a fling scroll is a touch scroll
-            if (delta > 0) {
-                // Moving towards the left. Use first view as mDownTouchPosition
-                mDownTouchPosition = mFirstPosition;
-
-                // Don't fling more than 1 screen
-                // delta = Math.min(getWidth() - mPaddingLeft - mPaddingRight - 1, delta);
-                delta = Math.min(getWidth() - getPaddingLeft() - getPaddingRight() - 1, delta);
-            } else {
-                // Moving towards the right. Use last view as mDownTouchPosition
-                int offsetToLast = getChildCount() - 1;
-                mDownTouchPosition = mFirstPosition + offsetToLast;
-
-                // Don't fling more than 1 screen
-                delta = Math.max(-(getWidth() - getPaddingRight() - getPaddingLeft() - 1), delta);
-            }
-
-            trackMotionScroll(delta);
-
-            if (more && !mShouldStopFling) {
-                mLastFlingX = x;
-                post(this);
-            } else {
-                endFling(true);
-            }
-        }
-
-        public void runVertical() {
-
-            if (mItemCount == 0) {
-                endFling(true);
-                return;
-            }
-
-            mShouldStopFling = false;
-
-            final Scroller scroller = mScroller;
-            boolean more = scroller.computeScrollOffset();
-            final int y = scroller.getCurrY();
-
-            // Flip sign to convert finger direction to list items direction
-            // (e.g. finger moving down means list is moving towards the top)
-            int delta = mLastFlingY - y;
-
-            // Pretend that each frame of a fling scroll is a touch scroll
-            if (delta > 0) {
-                // Moving towards the left. Use first view as mDownTouchPosition
-                mDownTouchPosition = mFirstPosition;
-
-                // Don't fling more than 1 screen
-                // delta = Math.min(getWidth() - mPaddingLeft - mPaddingRight - 1, delta);
-                delta = Math.min(getHeight() - getPaddingTop() - getPaddingBottom() - 1, delta);
-            } else {
-                // Moving towards the right. Use last view as mDownTouchPosition
-                int offsetToLast = getChildCount() - 1;
-                mDownTouchPosition = mFirstPosition + offsetToLast;
-
-                // Don't fling more than 1 screen
-                delta = Math.max(-(getHeight() - getPaddingBottom() - getPaddingTop() - 1), delta);
-            }
-
-            trackMotionScrollVertical(delta);
-
-            if (more && !mShouldStopFling) {
-                mLastFlingY = y;
-                post(this);
-            } else {
-                endFling(true);
-            }
-        }
-    }
-
-    /**
-     * Gallery extends LayoutParams to provide a place to hold current Transformation information
-     * along with previous position/transformation info.
-     * 
-     */
-    public static class LayoutParams extends ViewGroup.LayoutParams {
-        public LayoutParams(Context c, AttributeSet attrs) {
-            super(c, attrs);
-        }
-
-        public LayoutParams(int w, int h) {
-            super(w, h);
-        }
-
-        public LayoutParams(ViewGroup.LayoutParams source) {
-            super(source);
-        }
-    }
-
-    // Added by LiHong at 2011/08/12 begin ============================================.
-    //
-    // Author: Lee Hong
-    //
-    // Date 2012/10/12
-    //
-    /**
-     * Indicate disable scroll action when the child item is less than mItemCount. in other word,
-     * the children can be fully seeing in the gallery.
-     */
-    private boolean mIsDisableScroll = false;
-
-    /**
-     * scrolling and animating flag
-     */
-    private boolean mScrolling = false;
-
-    /**
-     * The first child offset.
-     */
-    private int mFirstChildOffset = 0;
-
-    /**
-     * The bottom margin of the horizontal scroll bar.
-     */
-    private int mScrollBarBottomMargin = 0;
-
-    /**
-     * The scroll bar size.
-     */
-    private int mScrollBarSize = 5;
-
-    /**
-     * The scroll velocity ratio.
-     */
-    private float mVelocityRatio = 1.0f;
-
-    /**
-     * Indicate the gallery scroll cycle or not.
-     */
-    private boolean mIsScrollCycle = false;
-
-    /**
-     * The temporary member for mIsScrollCycle
-     */
-    private boolean mIsScrollCycleTemp = true;
-
-    /**
-     * Slot into center. The default behavior of gallery is that the selected child will be slot in
-     * center.
-     */
-    private boolean mIsSlotCenter = false;
-
-    /**
-     * The orientation, default value is horizontal
-     */
-    private int mOrientation = HORIZONTAL;
-
-    /**
-     * The fling listener.
-     */
-    private OnEndFlingListener mOnEndFlingListener = null;
-
-    /**
-     * The orientation horizontal
-     */
-    public static final int HORIZONTAL = 0x01;
-
-    /**
-     * The orientation vertical
-     */
-    public static final int VERTICAL = 0x02;
-
-    /**
-     * Select a child.
-     */
-    private boolean performItemSelect(int childPosition) {
-        if (childPosition != mSelectedPosition) {
-            setSelectedPositionInt(childPosition);
-            setNextSelectedPositionInt(childPosition);
-            checkSelectionChanged();
-
-            return true;
-        }
-
-        return false;
-    }
-
-    /**
-     * Set the first child offset.
-     * 
-     * @param firstChildOffset The value of first child offset.
-     * 
-     * @author LeeHong
-     */
-    public void setFirstChildOffset(int firstChildOffset) {
-        mFirstChildOffset = firstChildOffset;
-    }
-
-    /**
-     * Set the first position of the gallery.
-     * 
-     * @param firstPosition The first position.
-     * 
-     * @author LeeHong
-     */
-    public void setFirstPosition(int firstPosition) {
-        mFirstPosition = firstPosition;
-    }
-
-    /**
-     * Indicate the gallery selected slot in center of not, default is false.
-     * 
-     * @param isSlotCenter
-     */
-    public void setSlotInCenter(boolean isSlotCenter) {
-        mIsSlotCenter = isSlotCenter;
-    }
-
-    /**
-     * Indicate the gallery selected slot in center of not, default is false.
-     * 
-     * @return
-     */
-    public boolean isSlotInCenter() {
-        return mIsSlotCenter;
-    }
-
-    /**
-     * Indicate the gallery layout in vertical or not.
-     * 
-     * @return
-     */
-    private boolean isOrientationVertical() {
-        return (mOrientation == VERTICAL);
-    }
-
-    /**
-     * @return the m_oritentation
-     */
-    public int getOrientation() {
-        return mOrientation;
-    }
-
-    /**
-     * @param orientation the m_orientation to set
-     */
-    public void setOrientation(int orientation) {
-        this.mOrientation = orientation;
-    }
-
-    /**
-     * Set the gallery fling listener.
-     * 
-     * @param listener The OnEndFlingListener instance.
-     * 
-     * @author LeeHong
-     */
-    public void setOnEndFlingListener(OnEndFlingListener listener) {
-        mOnEndFlingListener = listener;
-    }
-
-    /**
-     * Call this method to disable the scroll action, this method makes affect only when the all
-     * items are displaying in the gallery.
-     * 
-     * @param disableScroll true if disable the scroll action, otherwise false, default false.
-     * 
-     * @author LeeHong
-     */
-    public void setDisableScroll(boolean disableScroll) {
-        mIsDisableScroll = disableScroll;
-    }
-
-    /**
-     * Set the scroll bar bottom margin
-     * 
-     * @param scrollBarBottmMargin
-     * 
-     * @author LeeHong
-     */
-    public void setScrollBarBottomMargin(int scrollBarBottomMargin) {
-        mScrollBarBottomMargin = scrollBarBottomMargin;
-    }
-
-    /**
-     * Set the scroll bar size.
-     * 
-     * @param scrollBarSize The scroll bar.
-     * 
-     * @author LeeHong
-     */
-    public void setScrollBarSize(int scrollBarSize) {
-        mScrollBarSize = scrollBarSize;
-    }
-
-    /**
-     * Get the The position of the first child displayed.
-     * 
-     * @return
-     * 
-     * @author LeeHong
-     */
-    public int getFirstPosition() {
-        return mFirstPosition;
-    }
-
-    /**
-     * Get the spacing between children.
-     * 
-     * @return The spacing of the children.
-     * 
-     * @author LeeHong
-     */
-    public int getSpacing() {
-        return mSpacing;
-    }
-
-    /**
-     * Return the scrolling flag.
-     * 
-     * @return true if the gallery is scrolling, otherwise false.
-     * 
-     * @author LeeHong
-     */
-    public boolean isScrolling() {
-        return mScrolling;
-    }
-
-    /**
-     * Scroll gallery items towards left or right direction with the one item's width.
-     * 
-     * @param toLeft Indicate offset towards left or right.
-     * 
-     * @return The offset of the items.
-     * 
-     * @author LeeHong
-     */
-    public int scrollGalleryItems(boolean toLeft) {
-        if (0 == getChildCount()) {
-            return 0;
-        }
-
-        int offset = 0;
-
-        if (toLeft) {
-            View child = getChildAt(getChildCount() - 1);
-            offset = child.getRight() - this.getRight() + this.getPaddingRight();
-            offset = Math.max(offset, 0);
-
-            // The item is not the last one.
-            if (0 == offset && (mFirstPosition + getChildCount() != mItemCount)) {
-                offset += (null != child) ? child.getWidth() : 0;
-            }
-        } else {
-            View child = getChildAt(0);
-            offset = child.getLeft() - this.getPaddingLeft();
-            offset = Math.min(offset, 0);
-
-            // The current item is not the first one.
-            if (0 == offset && 0 != mFirstPosition) {
-                offset -= (null != child) ? child.getWidth() : 0;
-            }
-        }
-
-        // If the offset is not zero, scroll these items.
-        if (0 != offset) {
-            // trackMotionScroll(-1 * offset);
-            if (null != mFlingRunnable) {
-                mFlingRunnable.startUsingDistance(-1 * offset);
-            }
-        }
-
-        return (-1 * offset);
-    }
-
-    /**
-     * Scroll gallery items towards left or right direction with the one item's width.
-     * 
-     * @param offset The scroll offset
-     * 
-     * @author LeeHong
-     */
-    public int scrollGalleryItems(int offset) {
-        if (null != mFlingRunnable) {
-            mFlingRunnable.startUsingDistance(-1 * offset);
-        }
-
-        return (-1 * offset);
-    }
-
-    /**
-     * Get the index from specified point.
-     * 
-     * @param pt The specified point.
-     * 
-     * @return The based zero index, -1 if not found child which bound not contains the point.
-     * 
-     * @author LeeHong
-     */
-    public int getItemIndexFromPoint(android.graphics.Point pt) {
-        int nChildCount = getChildCount();
-        int nIndex = -1;
-        Rect rc = new Rect();
-        this.getDrawingRect(rc);
-
-        if (rc.contains(pt.x, pt.y)) {
-            for (int i = 0; i < nChildCount; ++i) {
-                // Get the rectangle of the child.
-                getChildAt(i).getHitRect(rc);
-
-                if (rc.contains(pt.x, pt.y)) {
-                    nIndex = i;
-                    break;
-                }
-            }
-        }
-
-        return (nIndex >= 0) ? (nIndex + mFirstPosition) : -1;
-    }
-
-    /**
-     * Called when the gallery ends fling operation.
-     * 
-     * @author LeeHong
-     */
-    protected void onEndFling() {
-        if (null != mOnEndFlingListener) {
-            mOnEndFlingListener.onEndFling(this);
-        }
-    }
-
-    /**
-     * Called when fling occurs, this method can return ratio value to accelerate or decelerate the
-     * velocity of gallery.
-     * 
-     * @return default return 1.0f.
-     * 
-     * @author LeeHong
-     */
-    public float getVelocityRatio() {
-        return mVelocityRatio;
-    }
-
-    /**
-     * Set the scroll or fling velocity ratio, value is in the range [0.5, 1.5], default value is
-     * 1.0f.
-     * 
-     * @param velocityRatio
-     * 
-     * @author LeeHong
-     */
-    public void setVelocityRatio(float velocityRatio) {
-        mVelocityRatio = velocityRatio;
-
-        if (mVelocityRatio < 0.5f) {
-            mVelocityRatio = 0.5f;
-        } else if (mVelocityRatio > 1.5f) {
-            mVelocityRatio = 1.5f;
-        }
-    }
-
-    /**
-     * Indicate the should disable scroll action.
-     * 
-     * @return true if disable scroll, otherwise false.
-     * 
-     * @author LeeHong
-     */
-    protected boolean shouldDisableScroll() {
-        if (mIsDisableScroll) {
-            if (getChildCount() < mItemCount) {
-                return false;
-            }
-
-            // First child is out of gallery left bound.
-            View child = getChildAt(0);
-            if (null != child && child.getLeft() < getLeft()) {
-                return false;
-            }
-
-            // Last child is out of gallery right bound.
-            child = getChildAt(getChildCount() - 1);
-            if (null != child && child.getRight() > getRight()) {
-                return false;
-            }
-
-            return true;
-        }
-
-        return false;
-    }
-
-    @Override
-    public boolean onSingleTapConfirmed(MotionEvent e) {
-        return false;
-    }
-
-    @Override
-    public boolean onDoubleTapEvent(MotionEvent e) {
-        if (MotionEvent.ACTION_UP == e.getAction()) {
-            if (mDownTouchPosition >= 0) {
-                // Also pass the click so the client knows, if it wants to.
-                if (mShouldCallbackOnUnselectedItemClick || mDownTouchPosition == mSelectedPosition) {
-                    performItemDoubleClick(mDownTouchView, mDownTouchPosition, mAdapter.getItemId(mDownTouchPosition));
-                }
-
-                return true;
-            }
-        }
-
-        return false;
-    }
-
-    @Override
-    public boolean onDoubleTap(MotionEvent e) {
-        return false;
-    }
-
-    /**
-     * This method is used to indicate the point is contained in a child or not.
-     * 
-     * @param x The x coordinate to the gallery.
-     * @param y The y coordinate to the gallery.
-     * 
-     * @return true if the point contained in a child.
-     * 
-     * @author LeeHong
-     */
-    public boolean isPointInChild(float x, float y) {
-        int childCount = getChildCount();
-        for (int i = 0; i < childCount; ++i) {
-            View child = getChildAt(i);
-            if (x >= child.getLeft() && x <= child.getRight() && y >= child.getTop() && y <= child.getBottom()) {
-                return true;
-            }
-        }
-
-        return false;
-    }
-
-    /**
-     * Set the scroll cycle.
-     * 
-     * @param scrollCycle
-     */
-    public void setScrollCycle(boolean scrollCycle) {
-        mIsScrollCycle = scrollCycle;
-    }
-
-    /**
-     * Get the flag for scroll cycle.
-     * 
-     * @return
-     */
-    public boolean isScrollCycle() {
-        return mIsScrollCycle && mIsScrollCycleTemp;
-    }
-
-    /**
-     * @author LeeHong
-     */
-    protected void Log(String msg) {
-        if (localLOGV) {
-            Log.d(TAG, msg);
-        }
-    }
-
-    private void fillToGalleryLeftCycle() {
-        int itemSpacing = mSpacing;
-        int galleryLeft = getPaddingLeft();// mPaddingLeft;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(0);
-        int curPosition;
-        int curRightEdge;
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition - 1;
-            curRightEdge = prevIterationView.getLeft() - itemSpacing;
-        } else {
-            // No children available!
-            curPosition = 0;
-            // curRightEdge = mRight - mLeft - mPaddingRight;
-            curRightEdge = getRight() - getLeft() - getPaddingRight();
-            mShouldStopFling = true;
-        }
-
-        while (curRightEdge > galleryLeft && curPosition >= 0) {
-            prevIterationView = makeAndAddView(curPosition, curPosition - mSelectedPosition, curRightEdge, false);
-
-            // Remember some state
-            mFirstPosition = curPosition;
-
-            // Set state for next iteration
-            curRightEdge = prevIterationView.getLeft() - itemSpacing;
-            curPosition--;
-        }
-
-        // Added by LiHong at 2012/10/11 begin ===========
-        curPosition = mItemCount - 1;
-        while (curRightEdge > galleryLeft && getChildCount() < mItemCount) {
-            prevIterationView = makeAndAddView(curPosition, curPosition - mSelectedPosition, curRightEdge, false);
-
-            // Remember some state
-            mFirstPosition = curPosition;
-
-            // Set state for next iteration
-            curRightEdge = prevIterationView.getLeft() - itemSpacing;
-            curPosition--;
-        }
-        // Added by LiHong at 2012/10/11 end =============
-    }
-
-    private void fillToGalleryTopCycle() {
-        int itemSpacing = mSpacing;
-        int galleryTop = getPaddingTop();// mPaddingLeft;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(0);
-        int curPosition;
-        int curRightEdge;
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition - 1;
-            curRightEdge = prevIterationView.getTop() - itemSpacing;
-        } else {
-            // No children available!
-            curPosition = 0;
-            // curRightEdge = mRight - mLeft - mPaddingRight;
-            curRightEdge = getBottom() - getTop() - getPaddingBottom();
-            mShouldStopFling = true;
-        }
-
-        while (curRightEdge > galleryTop && curPosition >= 0) {
-            prevIterationView = makeAndAddViewVertical(curPosition, curPosition - mSelectedPosition, curRightEdge,
-                    false);
-
-            // Remember some state
-            mFirstPosition = curPosition;
-
-            // Set state for next iteration
-            curRightEdge = prevIterationView.getTop() - itemSpacing;
-            curPosition--;
-        }
-
-        // Added by LiHong at 2012/10/11 begin ===========
-        curPosition = mItemCount - 1;
-        while (curRightEdge > galleryTop && getChildCount() < mItemCount) {
-            prevIterationView = makeAndAddViewVertical(curPosition, curPosition - mSelectedPosition, curRightEdge,
-                    false);
-
-            // Remember some state
-            mFirstPosition = curPosition;
-
-            // Set state for next iteration
-            curRightEdge = prevIterationView.getTop() - itemSpacing;
-            curPosition--;
-        }
-        // Added by LiHong at 2012/10/11 end =============
-    }
-
-    private void fillToGalleryRightCycle() {
-        int itemSpacing = mSpacing;
-
-        // int galleryRight = mRight - mLeft - mPaddingRight;
-        int galleryRight = getRight() - getLeft() - getPaddingRight();
-
-        int numChildren = getChildCount();
-        int numItems = mItemCount;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(numChildren - 1);
-        int curPosition;
-        int curLeftEdge;
-
-        Log("  fillToGalleryRightCycle mFirstPosition = " + mFirstPosition);
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition + numChildren;
-            curLeftEdge = prevIterationView.getRight() + itemSpacing;
-        } else {
-            mFirstPosition = curPosition = mItemCount - 1;
-            curLeftEdge = getPaddingLeft();// mPaddingLeft;
-            mShouldStopFling = true;
-        }
-
-        while (curLeftEdge < galleryRight && curPosition < numItems) {
-
-            prevIterationView = makeAndAddView(curPosition, curPosition - mSelectedPosition, curLeftEdge, true);
-
-            // Set state for next iteration
-            curLeftEdge = prevIterationView.getRight() + itemSpacing;
-            curPosition++;
-        }
-
-        // Added by LiHong at 2012/10/11 begin ===========
-        curPosition = curPosition % numItems;
-        while (curLeftEdge <= galleryRight && getChildCount() < mItemCount) {
-            prevIterationView = makeAndAddView(curPosition, curPosition - mSelectedPosition, curLeftEdge, true);
-
-            // Set state for next iteration
-            curLeftEdge = prevIterationView.getRight() + itemSpacing;
-            curPosition++;
-        }
-        // Added by LiHong at 2012/10/11 end =============
-    }
-
-    private void fillToGalleryBottomCycle() {
-        int itemSpacing = mSpacing;
-
-        // int galleryRight = mRight - mLeft - mPaddingRight;
-        int galleryBottom = getBottom() - getTop() - getPaddingBottom();
-
-        int numChildren = getChildCount();
-        int numItems = mItemCount;
-
-        // Set state for initial iteration
-        View prevIterationView = getChildAt(numChildren - 1);
-        int curPosition;
-        int curLeftEdge;
-
-        Log("  fillToGalleryRightCycle mFirstPosition = " + mFirstPosition);
-
-        if (prevIterationView != null) {
-            curPosition = mFirstPosition + numChildren;
-            curLeftEdge = prevIterationView.getBottom() + itemSpacing;
-        } else {
-            mFirstPosition = curPosition = mItemCount - 1;
-            curLeftEdge = getPaddingTop();// mPaddingLeft;
-            mShouldStopFling = true;
-        }
-
-        while (curLeftEdge < galleryBottom && curPosition < numItems) {
-
-            prevIterationView = makeAndAddViewVertical(curPosition, curPosition - mSelectedPosition, curLeftEdge, true);
-
-            // Set state for next iteration
-            curLeftEdge = prevIterationView.getBottom() + itemSpacing;
-            curPosition++;
-        }
-
-        // Added by LiHong at 2012/10/11 begin ===========
-        curPosition = curPosition % numItems;
-        while (curLeftEdge <= galleryBottom && getChildCount() < mItemCount) {
-            prevIterationView = makeAndAddViewVertical(curPosition, curPosition - mSelectedPosition, curLeftEdge, true);
-
-            // Set state for next iteration
-            curLeftEdge = prevIterationView.getBottom() + itemSpacing;
-            curPosition++;
-        }
-        // Added by LiHong at 2012/10/11 end =============
-    }
-
-    /**
-     * This interface defines methods for TosGallery.
-     * 
-     * @author LeeHong
-     */
-    public interface OnEndFlingListener {
-        /**
-         * Called when the fling operation ends.
-         * 
-         * @param v The gallery view.
-         */
-        public void onEndFling(TosGallery v);
-    }
-    //
-    // Added by LiHong at 2011/08/12 end ============================================.
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/ShopInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/ShopInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/ShopInfo.java	(revision )
@@ -1,175 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/***
- * @ClassName: ShopInfo
- * @Description: 商铺信息
- * @author zxl
- * @date 2015年6月1日 下午4:00:58
- */
-public class ShopInfo implements Serializable {
-
-	private static final long serialVersionUID = -596521256770847099L;
-	/** 平均送达时间 */
-	private String delivery_time;
-	/** 免配送费价格 */
-	private double free_send_price;
-	/** 商店纬度 */
-	private String shop_lat;
-	/** 商店id */
-	private int shop_code;
-	/** shop_tel */
-	private String shop_tel;
-	/** 1：正常营业 0：闭店 */
-	private int status;
-	/** 商店经度 */
-	private String shop_lng;
-	/** 商户id */
-	private int business_code;
-	/** 商户name */
-	private String shop_name;
-	/** 商户地址 */
-	private String shop_addr;
-	/** 距离 */
-	private String distance;
-	/** 起送价 */
-	private String send_out_price;
-	/** 配送截止时间 */
-	private String endbus_time;
-	/** 配送开始时间 */
-	private String startbus_time;
-	/** 图片地址 */
-	private String pictrue_addr;
-	/** 配送费 */
-	private double send_price;
-
-	public String getShop_lat() {
-		return shop_lat;
-	}
-
-	public void setShop_lat(String shop_lat) {
-		this.shop_lat = shop_lat;
-	}
-
-	public String getShop_tel() {
-		return shop_tel;
-	}
-
-	public void setShop_tel(String shop_tel) {
-		this.shop_tel = shop_tel;
-	}
-
-	public String getShop_lng() {
-		return shop_lng;
-	}
-
-	public void setShop_lng(String shop_lng) {
-		this.shop_lng = shop_lng;
-	}
-
-	public int getBusiness_code() {
-		return business_code;
-	}
-
-	public void setBusiness_code(int business_code) {
-		this.business_code = business_code;
-	}
-
-	public double getSend_price() {
-		return send_price;
-	}
-
-	public void setSend_price(double send_price) {
-		this.send_price = send_price;
-	}
-
-	public int getStatus() {
-		return status;
-	}
-
-	public String getPictrue_addr() {
-		return pictrue_addr;
-	}
-
-	public void setPictrue_addr(String pictrue_addr) {
-		this.pictrue_addr = pictrue_addr;
-	}
-
-	public void setStatus(int status) {
-		this.status = status;
-	}
-
-	public String getDelivery_time() {
-		return delivery_time;
-	}
-
-	public void setDelivery_time(String delivery_time) {
-		this.delivery_time = delivery_time;
-	}
-
-	public int getShop_code() {
-		return shop_code;
-	}
-
-	public void setShop_code(int shop_code) {
-		this.shop_code = shop_code;
-	}
-
-	public String getShop_addr() {
-		return shop_addr;
-	}
-
-	public void setShop_addr(String shop_addr) {
-		this.shop_addr = shop_addr;
-	}
-
-	public double getFree_send_price() {
-		return free_send_price;
-	}
-
-	public void setFree_send_price(double free_send_price) {
-		this.free_send_price = free_send_price;
-	}
-
-	public String getDistance() {
-		return distance;
-	}
-
-	public void setDistance(String distance) {
-		this.distance = distance;
-	}
-
-	public String getSend_out_price() {
-		return send_out_price;
-	}
-
-	public void setSend_out_price(String send_out_price) {
-		this.send_out_price = send_out_price;
-	}
-
-	public String getEndbus_time() {
-		return endbus_time;
-	}
-
-	public void setEndbus_time(String endbus_time) {
-		this.endbus_time = endbus_time;
-	}
-
-	public String getStartbus_time() {
-		return startbus_time;
-	}
-
-	public void setStartbus_time(String startbus_time) {
-		this.startbus_time = startbus_time;
-	}
-
-	public String getShop_name() {
-		return shop_name;
-	}
-
-	public void setShop_name(String shop_name) {
-		this.shop_name = shop_name;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ComplaintActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ComplaintActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ComplaintActivity.java	(revision )
@@ -1,106 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/**
- * @ClassName: ComplaintActivity
- * @Description: 投诉界面
- * @author YY
- * @date 2015年6月11日 下午4:48:40
- */
-public class ComplaintActivity extends BaseActivity {
-
-	private TextView titleBarTv;// 界面标题
-	private Button bt_commit;
-	private EditText et_content;
-	private int shopCode;
-	private int userCode;
-	private String orderNum;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId() == R.id.title_bar_left) {
-			finish();
-		} else if (v.getId() == R.id.bt_commit) {
-			String content = et_content.getText().toString().trim();
-			postComplainorder(orderNum, userCode, shopCode, content);
-			finish();
-		}
-	}
-
-	/** 投诉店铺 */
-	private void postComplainorder(String orderNum2, int userCode2,
-			int shopCode2, String content) {
-		Intent intent = new Intent(UserLogic.ACTION_POST_COMPLAINORDER);
-		intent.putExtra(UserLogic.EXTRA_ORDER_NUM, orderNum2);
-		intent.putExtra(UserLogic.EXTRA_USER_CODE, userCode2);
-		intent.putExtra(UserLogic.EXTRA_SHOP_CODE, shopCode2);
-		intent.putExtra(UserLogic.EXTRA_SUBMITADVICE, content);
-		sendAction(intent);
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_complaint);
-
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("投诉商铺");
-
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-
-		bt_commit = (Button) findViewById(R.id.bt_commit);
-		bt_commit.setOnClickListener(this);
-
-		et_content = (EditText) findViewById(R.id.et_content);
-
-		Intent intent = getIntent();
-		orderNum = intent.getStringExtra(GlobalInfo.KEY_ORDER_NUM);
-		shopCode = intent.getIntExtra(GlobalInfo.KEY_SHOPCODE, 0);
-		userCode = intent.getIntExtra(GlobalInfo.KEY_USERCODE, 0);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		switch (eventId) {
-		case Event.POST_COMPLAINORDER_SUCESS:// 投诉商铺成功事件
-
-			break;
-		case Event.POST_COMPLAINORDER_FAILED:// 投诉商铺失败事件
-
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, 
-				Event.POST_COMPLAINORDER_SUCESS,
-				Event.POST_COMPLAINORDER_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GroupAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GroupAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/GroupAdapter.java	(revision )
@@ -1,74 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-
-import java.util.List;
-
-/**
- * 
- * @ClassName: GroupAdapter
- * @Description: 填充确认收货时间
- * @author YY
- * @date 2015年6月3日 下午2:19:42
- */
-public class GroupAdapter extends BaseAdapter {
-
-	private Context context;
-
-	private List<String> list;
-
-	public GroupAdapter(Context context, List<String> list) {
-
-		this.context = context;
-		this.list = list;
-
-	}
-
-	@Override
-	public int getCount() {
-		return list.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-
-		return list.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup viewGroup) {
-
-		ViewHolder holder;
-		if (convertView == null) {
-			convertView = LayoutInflater.from(context).inflate(R.layout.group_item_view, null);
-			holder = new ViewHolder();
-
-			convertView.setTag(holder);
-
-			holder.groupItem = (TextView) convertView.findViewById(R.id.groupItem);
-
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		holder.groupItem.setText(list.get(position));
-
-		return convertView;
-	}
-
-	static class ViewHolder {
-		TextView groupItem;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/AddressListAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/AddressListAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/AddressListAdapter.java	(revision )
@@ -1,153 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.ModifyAddress;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.MyAddress;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-
-/**
- * 
- * @ClassName: AddressListAdapter
- * @Description: 我的地址适配器
- * @author YY
- * @date 2015年6月8日 下午12:48:49
- */
-public class AddressListAdapter extends BaseAdapter {
-
-	private Context context;
-	private ArrayList<MyAddress> mlist;
-	public int user_loc_code;
-
-	public int getUser_loc_code() {
-		return user_loc_code;
-	}
-
-	public void setUser_loc_code(int user_loc_code) {
-		this.user_loc_code = user_loc_code;
-	}
-
-	public AddressListAdapter(Context context, ArrayList<MyAddress> mlist) {
-		super();
-		this.context = context;
-		this.mlist = mlist;
-	}
-
-	@Override
-	public int getCount() {
-		return mlist.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mlist.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder;
-		MyAddress myAddress = mlist.get(position);
-		if (convertView == null) {
-			convertView = LayoutInflater.from(context).inflate(R.layout.item_my_address, null);
-			holder = new ViewHolder();
-			holder.ll_icon = (LinearLayout) convertView.findViewById(R.id.ll_icon);
-			holder.tv_checked = (TextView) convertView.findViewById(R.id.ischeck);
-			holder.tv_name = (TextView) convertView.findViewById(R.id.tv_name);
-			holder.tv_phone = (TextView) convertView.findViewById(R.id.tv_phone);
-			holder.tv_address = (TextView) convertView.findViewById(R.id.tv_address);
-			holder.tv_modify = (TextView) convertView.findViewById(R.id.tv_modify);
-			
-			/**
-			 * 点击修改默认收货地址
-			 */
-			holder.ll_icon.setOnClickListener(new OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					if (Utils.isFastClick()) {
-						return;
-					}
-					user_loc_code = (Integer) v.getTag();
-					Intent intent = new Intent(UserLogic.ACTION_GET_PERSON_INSERTADDR);
-					intent.putExtra(UserLogic.EXTRA_USER_LOC_CODE, user_loc_code);
-					intent.putExtra(UserLogic.EXTRA_USER_CODE,SPUtils.getInt(context, GlobalInfo.KEY_USERCODE, 0));
-					App.getInstance().sendAction(intent);
-				}
-			});
-			
-			/**
-			 * 点击修改收货信息
-			 */
-			holder.tv_modify.setOnClickListener(new OnClickListener() {
-
-				@Override
-				public void onClick(View v) {
-					MyAddress myAddress = (MyAddress) v.getTag();
-					Intent intent = new Intent(context, ModifyAddress.class);
-					intent.putExtra(UserLogic.EXTRA_USER_LOC_CODE,myAddress.getUser_loc_code());
-					intent.putExtra(UserLogic.EXTRA_USER_NAME,myAddress.getRev_name());
-					intent.putExtra(UserLogic.EXTRA_PHONE, myAddress.getUser_tel());
-					intent.putExtra(UserLogic.EXTRA_USER_ADDR,myAddress.getUser_addr());
-					context.startActivity(intent);
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		int defalut = myAddress.getDefalut_addr();
-		if (defalut == 1) {
-			holder.tv_checked.setBackgroundResource(R.drawable.sex_ischecked);
-		} else {
-			holder.tv_checked.setBackgroundResource(R.drawable.sex_default);
-		}
-
-		holder.tv_name.setText(myAddress.getRev_name());
-		holder.tv_phone.setText(myAddress.getUser_tel());
-		holder.tv_address.setText(myAddress.getUser_addr());
-		holder.ll_icon.setTag(myAddress.getUser_loc_code());
-		holder.tv_modify.setTag(myAddress);
-		return convertView;
-	}
-	
-
-	static class ViewHolder {
-		/** 地址是否被选中 */
-		TextView tv_checked;
-		/** 用户名称 */
-		TextView tv_name;
-		/** 用户电话 */
-		TextView tv_phone;
-		/** 用户地址 */
-		TextView tv_address;
-		/** 修改地址 */
-		TextView tv_modify;
-
-		LinearLayout ll_icon;
-	}
-
-	public void addData(ArrayList<MyAddress> list) {
-		mlist = list;
-		notifyDataSetChanged();
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CartListAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CartListAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/CartListAdapter.java	(revision )
@@ -1,89 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.view.AddAndSubView;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-
-/**
-* @ClassName: CartListAdapter 
-* @Description: 商品列表适配器 
-* @author zxl 
-* @date 2015年6月8日 下午8:54:26
- */
-public class CartListAdapter extends BaseAdapter {
-	private LayoutInflater mInflater;
-	private Context mContext;
-	private ArrayList<Goods> mList;
-	public int changecode;
-	public CartListAdapter(Context context, ArrayList<Goods> goods) {
-		super();
-		this.mContext = context;
-		this.mList = goods;
-		mInflater = LayoutInflater.from(mContext);
-	}
-
-	@Override
-	public int getCount() {
-		return mList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return mList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		Goods goods = mList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_cart_goods, null);
-			holder.goodsName = (TextView) convertView.findViewById(R.id.tv_goods_name);
-			holder.goodsPrice = (TextView) convertView.findViewById(R.id.tv_goods_price);
-			holder.addSub = (AddAndSubView) convertView.findViewById(R.id.addSub);
-			holder.addSub.setViewsLayoutParm(120, 35);
-			holder.addSub.setButtonLayoutParm(35, 35);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		
-		double price = goods.getGoods_price();
-		BigDecimal bdPrice = new BigDecimal(price);
-		bdPrice = bdPrice.setScale(2, BigDecimal.ROUND_DOWN);
-		
-		holder.goodsName.setText(goods.getGoods_name());
-		holder.goodsPrice.setText("￥" + bdPrice);
-		holder.addSub.setNum(goods.getGoods_num());
-		holder.addSub.setLimited(goods.getLimited());
-		holder.addSub.setChangecode(goods.getChange_code());
-		return convertView;
-	}
-
-	class ViewHolder {
-		TextView goodsName;
-		TextView goodsPrice;
-		AddAndSubView addSub;
-	}
-
-	public void addData(ArrayList<Goods> list) {
-		mList = list;
-		notifyDataSetChanged();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/UnderlinePageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/UnderlinePageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/UnderlinePageIndicator.java	(revision )
@@ -1,406 +0,0 @@
-/*
- * Copyright (C) 2012 Jake Wharton
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.content.res.Resources;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Paint;
-import android.graphics.drawable.Drawable;
-import android.os.Parcel;
-import android.os.Parcelable;
-import android.support.v4.view.MotionEventCompat;
-import android.support.v4.view.ViewConfigurationCompat;
-import android.support.v4.view.ViewPager;
-import android.util.AttributeSet;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.ViewConfiguration;
-
-import com.anniu.shandiandaojia.R;
-
-
-
-/**
- * Draws a line for each page. The current page line is colored differently
- * than the unselected page lines.
- */
-public class UnderlinePageIndicator extends View implements PageIndicator {
-    private static final int INVALID_POINTER = -1;
-    private static final int FADE_FRAME_MS = 30;
-
-    private final Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
-
-    private boolean mFades;
-    private int mFadeDelay;
-    private int mFadeLength;
-    private int mFadeBy;
-
-    private ViewPager mViewPager;
-    private ViewPager.OnPageChangeListener mListener;
-    private int mScrollState;
-    private int mCurrentPage;
-    private float mPositionOffset;
-
-    private int mTouchSlop;
-    private float mLastMotionX = -1;
-    private int mActivePointerId = INVALID_POINTER;
-    private boolean mIsDragging;
-
-    private final Runnable mFadeRunnable = new Runnable() {
-      @Override public void run() {
-        if (!mFades) return;
-
-        final int alpha = Math.max(mPaint.getAlpha() - mFadeBy, 0);
-        mPaint.setAlpha(alpha);
-        invalidate();
-        if (alpha > 0) {
-          postDelayed(this, FADE_FRAME_MS);
-        }
-      }
-    };
-
-    public UnderlinePageIndicator(Context context) {
-        this(context, null);
-    }
-
-    public UnderlinePageIndicator(Context context, AttributeSet attrs) {
-        this(context, attrs, R.attr.vpiUnderlinePageIndicatorStyle);
-    }
-
-    public UnderlinePageIndicator(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-        if (isInEditMode()) return;
-
-        final Resources res = getResources();
-
-        //Load defaults from resources
-        final boolean defaultFades = res.getBoolean(R.bool.default_underline_indicator_fades);
-        final int defaultFadeDelay = res.getInteger(R.integer.default_underline_indicator_fade_delay);
-        final int defaultFadeLength = res.getInteger(R.integer.default_underline_indicator_fade_length);
-        final int defaultSelectedColor = res.getColor(R.color.default_underline_indicator_selected_color);
-
-        //Retrieve styles attributes
-        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.UnderlinePageIndicator, defStyle, 0);
-
-        setFades(a.getBoolean(R.styleable.UnderlinePageIndicator_fades, defaultFades));
-        setSelectedColor(a.getColor(R.styleable.UnderlinePageIndicator_selectedColor, defaultSelectedColor));
-        setFadeDelay(a.getInteger(R.styleable.UnderlinePageIndicator_fadeDelay, defaultFadeDelay));
-        setFadeLength(a.getInteger(R.styleable.UnderlinePageIndicator_fadeLength, defaultFadeLength));
-
-        Drawable background = a.getDrawable(R.styleable.UnderlinePageIndicator_android_background);
-        if (background != null) {
-          setBackgroundDrawable(background);
-        }
-
-        a.recycle();
-
-        final ViewConfiguration configuration = ViewConfiguration.get(context);
-        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
-    }
-
-    public boolean getFades() {
-        return mFades;
-    }
-
-    public void setFades(boolean fades) {
-        if (fades != mFades) {
-            mFades = fades;
-            if (fades) {
-                post(mFadeRunnable);
-            } else {
-                removeCallbacks(mFadeRunnable);
-                mPaint.setAlpha(0xFF);
-                invalidate();
-            }
-        }
-    }
-
-    public int getFadeDelay() {
-        return mFadeDelay;
-    }
-
-    public void setFadeDelay(int fadeDelay) {
-        mFadeDelay = fadeDelay;
-    }
-
-    public int getFadeLength() {
-        return mFadeLength;
-    }
-
-    public void setFadeLength(int fadeLength) {
-        mFadeLength = fadeLength;
-        mFadeBy = 0xFF / (mFadeLength / FADE_FRAME_MS);
-    }
-
-    public int getSelectedColor() {
-        return mPaint.getColor();
-    }
-
-    public void setSelectedColor(int selectedColor) {
-        mPaint.setColor(selectedColor);
-        invalidate();
-    }
-
-    @Override
-    protected void onDraw(Canvas canvas) {
-        super.onDraw(canvas);
-
-        if (mViewPager == null) {
-            return;
-        }
-        final int count = mViewPager.getAdapter().getCount();
-        if (count == 0) {
-            return;
-        }
-
-        if (mCurrentPage >= count) {
-            setCurrentItem(count - 1);
-            return;
-        }
-
-        final int paddingLeft = getPaddingLeft();
-        final float pageWidth = (getWidth() - paddingLeft - getPaddingRight()) / (1f * count);
-        final float left = paddingLeft + pageWidth * (mCurrentPage + mPositionOffset);
-        final float right = left + pageWidth;
-        final float top = getPaddingTop();
-        final float bottom = getHeight() - getPaddingBottom();
-        canvas.drawRect(left, top, right, bottom, mPaint);
-    }
-
-    public boolean onTouchEvent(MotionEvent ev) {
-        if (super.onTouchEvent(ev)) {
-            return true;
-        }
-        if ((mViewPager == null) || (mViewPager.getAdapter().getCount() == 0)) {
-            return false;
-        }
-
-        final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
-        switch (action) {
-            case MotionEvent.ACTION_DOWN:
-                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
-                mLastMotionX = ev.getX();
-                break;
-
-            case MotionEvent.ACTION_MOVE: {
-                final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
-                final float x = MotionEventCompat.getX(ev, activePointerIndex);
-                final float deltaX = x - mLastMotionX;
-
-                if (!mIsDragging) {
-                    if (Math.abs(deltaX) > mTouchSlop) {
-                        mIsDragging = true;
-                    }
-                }
-
-                if (mIsDragging) {
-                    mLastMotionX = x;
-                    if (mViewPager.isFakeDragging() || mViewPager.beginFakeDrag()) {
-                        mViewPager.fakeDragBy(deltaX);
-                    }
-                }
-
-                break;
-            }
-
-            case MotionEvent.ACTION_CANCEL:
-            case MotionEvent.ACTION_UP:
-                if (!mIsDragging) {
-                    final int count = mViewPager.getAdapter().getCount();
-                    final int width = getWidth();
-                    final float halfWidth = width / 2f;
-                    final float sixthWidth = width / 6f;
-
-                    if ((mCurrentPage > 0) && (ev.getX() < halfWidth - sixthWidth)) {
-                        if (action != MotionEvent.ACTION_CANCEL) {
-                            mViewPager.setCurrentItem(mCurrentPage - 1);
-                        }
-                        return true;
-                    } else if ((mCurrentPage < count - 1) && (ev.getX() > halfWidth + sixthWidth)) {
-                        if (action != MotionEvent.ACTION_CANCEL) {
-                            mViewPager.setCurrentItem(mCurrentPage + 1);
-                        }
-                        return true;
-                    }
-                }
-
-                mIsDragging = false;
-                mActivePointerId = INVALID_POINTER;
-                if (mViewPager.isFakeDragging()) mViewPager.endFakeDrag();
-                break;
-
-            case MotionEventCompat.ACTION_POINTER_DOWN: {
-                final int index = MotionEventCompat.getActionIndex(ev);
-                mLastMotionX = MotionEventCompat.getX(ev, index);
-                mActivePointerId = MotionEventCompat.getPointerId(ev, index);
-                break;
-            }
-
-            case MotionEventCompat.ACTION_POINTER_UP:
-                final int pointerIndex = MotionEventCompat.getActionIndex(ev);
-                final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
-                if (pointerId == mActivePointerId) {
-                    final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
-                    mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
-                }
-                mLastMotionX = MotionEventCompat.getX(ev, MotionEventCompat.findPointerIndex(ev, mActivePointerId));
-                break;
-        }
-
-        return true;
-    }
-
-    @Override
-    public void setViewPager(ViewPager viewPager) {
-        if (mViewPager == viewPager) {
-            return;
-        }
-        if (mViewPager != null) {
-            //Clear us from the old pager.
-            mViewPager.setOnPageChangeListener(null);
-        }
-        if (viewPager.getAdapter() == null) {
-            throw new IllegalStateException("ViewPager does not have adapter instance.");
-        }
-        mViewPager = viewPager;
-        mViewPager.setOnPageChangeListener(this);
-        invalidate();
-        post(new Runnable() {
-            @Override public void run() {
-                if (mFades) {
-                    post(mFadeRunnable);
-                }
-            }
-        });
-    }
-
-    @Override
-    public void setViewPager(ViewPager view, int initialPosition) {
-        setViewPager(view);
-        setCurrentItem(initialPosition);
-    }
-
-    @Override
-    public void setCurrentItem(int item) {
-        if (mViewPager == null) {
-            throw new IllegalStateException("ViewPager has not been bound.");
-        }
-        mViewPager.setCurrentItem(item);
-        mCurrentPage = item;
-        invalidate();
-    }
-
-    @Override
-    public void notifyDataSetChanged() {
-        invalidate();
-    }
-
-    @Override
-    public void onPageScrollStateChanged(int state) {
-        mScrollState = state;
-
-        if (mListener != null) {
-            mListener.onPageScrollStateChanged(state);
-        }
-    }
-
-    @Override
-    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
-        mCurrentPage = position;
-        mPositionOffset = positionOffset;
-        if (mFades) {
-            if (positionOffsetPixels > 0) {
-                removeCallbacks(mFadeRunnable);
-                mPaint.setAlpha(0xFF);
-            } else if (mScrollState != ViewPager.SCROLL_STATE_DRAGGING) {
-                postDelayed(mFadeRunnable, mFadeDelay);
-            }
-        }
-        invalidate();
-
-        if (mListener != null) {
-            mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
-        }
-    }
-
-    @Override
-    public void onPageSelected(int position) {
-        if (mScrollState == ViewPager.SCROLL_STATE_IDLE) {
-            mCurrentPage = position;
-            mPositionOffset = 0;
-            invalidate();
-            mFadeRunnable.run();
-        }
-        if (mListener != null) {
-            mListener.onPageSelected(position);
-        }
-    }
-
-    @Override
-    public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener) {
-        mListener = listener;
-    }
-
-    @Override
-    public void onRestoreInstanceState(Parcelable state) {
-        SavedState savedState = (SavedState)state;
-        super.onRestoreInstanceState(savedState.getSuperState());
-        mCurrentPage = savedState.currentPage;
-        requestLayout();
-    }
-
-    @Override
-    public Parcelable onSaveInstanceState() {
-        Parcelable superState = super.onSaveInstanceState();
-        SavedState savedState = new SavedState(superState);
-        savedState.currentPage = mCurrentPage;
-        return savedState;
-    }
-
-    static class SavedState extends BaseSavedState {
-        int currentPage;
-
-        public SavedState(Parcelable superState) {
-            super(superState);
-        }
-
-        private SavedState(Parcel in) {
-            super(in);
-            currentPage = in.readInt();
-        }
-
-        @Override
-        public void writeToParcel(Parcel dest, int flags) {
-            super.writeToParcel(dest, flags);
-            dest.writeInt(currentPage);
-        }
-
-        @SuppressWarnings("UnusedDeclaration")
-        public static final Creator<SavedState> CREATOR = new Creator<SavedState>() {
-            @Override
-            public SavedState createFromParcel(Parcel in) {
-                return new SavedState(in);
-            }
-
-            @Override
-            public SavedState[] newArray(int size) {
-                return new SavedState[size];
-            }
-        };
-    }
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/SearchActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/SearchActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/SearchActivity.java	(revision )
@@ -1,179 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.graphics.drawable.BitmapDrawable;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ImageView;
-import android.widget.ListView;
-import android.widget.PopupWindow;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.SearchAdapter;
-import com.anniu.shandiandaojia.adapter.SearchHotKeywordsAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.HotWords;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.SearchLogic;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.ClearEditText;
-import com.anniu.shandiandaojia.view.MyGridView;
-
-import java.util.ArrayList;
-import java.util.List;
-
-/**
- * @ClassName: SearchActivity
- * @Description: 搜索页面
- * @author zxl
- * @date 2015年6月2日 下午4:37:59
- */
-public class SearchActivity extends BaseActivity {
-	private ImageView back;
-	private ClearEditText searchText;
-	private ImageView search;
-	private MyGridView gridview;
-	private SearchHotKeywordsAdapter adapter;
-	private List<HotWords> listItem = new ArrayList<HotWords>();
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.img_back) {//返回
-			finish();
-		}else if (v.getId()==R.id.iv_search) {//搜索
-			getSearchGoods();
-		}
-	}
-
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_search);
-		getHotKeyWordsAction();
-		
-		back = (ImageView) findViewById(R.id.img_back);
-		searchText = (ClearEditText) findViewById(R.id.search_text);
-		search = (ImageView) findViewById(R.id.iv_search);
-		gridview = (MyGridView) findViewById(R.id.gridview);
-		back.setOnClickListener(this);
-		search.setOnClickListener(this);
-		gridview.setOnItemClickListener(new OnItemClickListener() {
-
-			@Override
-			public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-				HotWords searchhots = (HotWords) listItem.get(position);
-				String name = searchhots.getName();
-				searchText.setText(name);
-			}
-		});
-	}
-
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_INDEX_SEARCHHOTS_SUCESS://进入搜索界面热词成功事件
-			ArrayList<HotWords> searchhotsList = (ArrayList<HotWords>) bundle.getSerializable(UserLogic.EXTRA_SEARCHHOTS_LIST);
-			if (searchhotsList != null && searchhotsList.size() > 0 ) {
-				listItem.clear();
-				listItem.addAll(searchhotsList);
-				if (adapter == null) {
-					adapter = new SearchHotKeywordsAdapter(this, listItem);
-					gridview.setAdapter(adapter);
-				}else{
-					adapter.setData(listItem);
-				}
-			}
-			break;
-		case Event.GET_INDEX_SEARCHHOTS_FAILED://进入搜索界面热词失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_SEARCH_GOODS_SUCESS://搜索商品成功事件 
-			ArrayList<Goods> goodsList = (ArrayList<Goods>) bundle.getSerializable(SearchLogic.EXTRA_GOODS_LIST);
-			if (goodsList != null && goodsList.size() > 0) {
-				showPopupwindow(goodsList);
-			} else {
-				MyToast.show(this, "您搜索的商品不存在！");
-			}
-			break;
-		case Event.GET_SEARCH_GOODS_FAILED://搜索商品失败事件 
-			MyToast.show(this, notice);
-			break;
-
-		default:
-			break;
-		}
-	}
-	
-	/**点击搜索商品成功后展示搜索的商品*/
-	@SuppressWarnings("deprecation")
-	private void showPopupwindow(final ArrayList<Goods> goodsList) {
-		ListView contentView = new ListView(getApplicationContext());
-		contentView.setAdapter(new SearchAdapter(goodsList,this));
-		contentView.setOnItemClickListener(new OnItemClickListener() {
-
-			@Override
-			public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
-				Goods good = goodsList.get(position);
-				Intent intent = new Intent();
-				intent.putExtra(GoodsLogic.EXTRA_GOODS_NUMBER,good.getGoods_num());
-				intent.putExtra(GoodsLogic.EXTRA_GOODS_CODE, good.getChange_code());
-				intent.putExtra(GoodsLogic.EXTRA_LIMITED,good.getLimited());
-				intent.setClass(SearchActivity.this, GoodsDetailActivity.class);
-				startActivity(intent);
-			}
-		});
-		
-		PopupWindow popupWindow = new PopupWindow(contentView,searchText.getWidth(), searchText.getHeight()*8,true);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setFocusable(true);
-		popupWindow.update();
-		popupWindow.showAsDropDown(searchText);
-		popupWindow.setOutsideTouchable(true);
-	}
-	
-	/** 获取搜索界面热词 */
-	private void getHotKeyWordsAction() {
-		Intent intent = new Intent(UserLogic.ACTION_GET_INDEX_SEARCHHOTS);
-		sendAction(intent);
-	}
-
-	/** 搜索商品 */
-	private void getSearchGoods() {
-		String goodsName = searchText.getText().toString().trim();
-		if (TextUtils.isEmpty(goodsName)) {
-			MyToast.show(this, "请您输入需要搜索的内容！");
-			return;
-		}
-		Intent intent = new Intent(SearchLogic.ACTION_GET_SEARCH_GOODS);
-		intent.putExtra(SearchLogic.EXTRA_SHOPCODE,SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(SearchLogic.EXTRA_GOODSNAME, goodsName);
-		sendAction(intent);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_INDEX_SEARCHHOTS_SUCESS,
-				Event.GET_INDEX_SEARCHHOTS_FAILED,
-				Event.GET_SEARCH_GOODS_SUCESS, Event.GET_SEARCH_GOODS_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/LocMap.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/LocMap.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/LocMap.java	(revision )
@@ -1,48 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-public class LocMap implements Serializable {
-
-	private static final long serialVersionUID = 3389542243281165104L;
-	/**用户名称*/
-	private String rev_name;
-	/**用户地址*/
-	private String user_addr;
-	/**用户ID*/
-	private int user_code;
-	/**用户地址ID*/
-	private int user_loc_code;
-	/**用户电话*/
-	private String user_tel;
-	public String getRev_name() {
-		return rev_name;
-	}
-	public void setRev_name(String rev_name) {
-		this.rev_name = rev_name;
-	}
-	public String getUser_addr() {
-		return user_addr;
-	}
-	public void setUser_addr(String user_addr) {
-		this.user_addr = user_addr;
-	}
-	public int getUser_code() {
-		return user_code;
-	}
-	public void setUser_code(int user_code) {
-		this.user_code = user_code;
-	}
-	public int getUser_loc_code() {
-		return user_loc_code;
-	}
-	public void setUser_loc_code(int user_loc_code) {
-		this.user_loc_code = user_loc_code;
-	}
-	public String getUser_tel() {
-		return user_tel;
-	}
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/RemarkActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/RemarkActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/RemarkActivity.java	(revision )
@@ -1,102 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.KeyEvent;
-import android.view.View;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/***
- * 
- * @ClassName: RemarkActivity
- * @Description: 订单备注
- * @author YY
- * @date 2015年6月30日 上午11:09:44
- */
-public class RemarkActivity extends BaseActivity {
-
-	private TextView titleBarTv;// 界面标题
-	private Button bt_commit_content;
-	private EditText et_content;
-	private String mContent;
-	public static int REQUESTCODE = 3;
-	public static String CONTENT = "content";
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId() == R.id.title_bar_left) {// 返回
-			setContent();
-		} else if (v.getId() == R.id.bt_commit_content) {// 提交
-			mContent = et_content.getText().toString().trim();
-			if (TextUtils.isEmpty(mContent)) {
-				MyToast.show(this, "请您填写内容！");
-				return;
-			}
-			Intent intent = new Intent();
-			intent.putExtra(GlobalInfo.KEY_CONTENT, mContent);
-			setResult(REQUESTCODE, intent);
-			finish();
-		}
-	}
-
-	private void setContent() {
-		Intent intent = new Intent();
-		intent.putExtra(GlobalInfo.KEY_CONTENT, mContent);
-		setResult(REQUESTCODE, intent);
-		finish();
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_remark);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("备注");
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		bt_commit_content = (Button) findViewById(R.id.bt_commit_content);
-		bt_commit_content.setOnClickListener(this);
-		et_content = (EditText) findViewById(R.id.et_content);
-		mContent = getIntent().getExtras().getString(CONTENT);
-		if (!TextUtils.isEmpty(mContent)) {
-			et_content.setText(mContent);
-		}
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			setContent();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CancelOrderReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CancelOrderReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/CancelOrderReq.java	(revision )
@@ -1,51 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  CancelOrderReq
- * @Description: 订单取消请求
- * @author YY
- * @date 2015年6月9日 下午12:37:45
- */
-public class CancelOrderReq extends HttpReq {
-	
-	private String orderNum;
-	private String cancelCause;
-	
-	
-
-	public CancelOrderReq(int reqid,String orderNum,String cancelCause) {
-		super();
-		this.id = reqid;
-		this.cancelCause = cancelCause;
-		this.orderNum = orderNum;
-	}
-	
-	public String getOrderNum() {
-		return orderNum;
-	}
-
-	public void setOrderNum(String orderNum) {
-		this.orderNum = orderNum;
-	}
-
-	public String getCancelCause() {
-		return cancelCause;
-	}
-
-	public void setCancelCause(String cancelCause) {
-		this.cancelCause = cancelCause;
-	}
-
-	@Override
-	public String getParams() {
-		return "ordernum=" + orderNum + "&reason=" + cancelCause;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GoodsCategoryActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GoodsCategoryActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GoodsCategoryActivity.java	(revision )
@@ -1,636 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.annotation.SuppressLint;
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.graphics.drawable.BitmapDrawable;
-import android.net.Uri;
-import android.os.Bundle;
-import android.support.v4.view.ViewPager;
-import android.text.TextUtils;
-import android.view.Gravity;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.MeasureSpec;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.view.ViewGroup.MarginLayoutParams;
-import android.view.WindowManager;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.ListAdapter;
-import android.widget.ListView;
-import android.widget.PopupWindow;
-import android.widget.PopupWindow.OnDismissListener;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.CartListAdapter;
-import com.anniu.shandiandaojia.adapter.TabAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Category;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.ShopInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.MyDialog;
-import com.anniu.shandiandaojia.view.PagerSlidingTabStrip;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.PullToRefreshLayout;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.PullToRefreshLayout.OnRefreshListener;
-import com.baidu.location.LocationClient;
-import com.baidu.location.LocationClientOption;
-import com.baidu.location.LocationClientOption.LocationMode;
-
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-import java.util.List;
-
-/**
- * @ClassName: GoodsCategoryActivity
- * @Description: 商品分类页面
- * @author zxl
- * @date 2015年6月3日 下午3:58:22
- */
-public class GoodsCategoryActivity extends BaseActivity implements OnRefreshListener{
-	protected String TAG = "GoodsCategoryActivity";
-	public static String EXTRA_TYPE_CODE = "type_code";
-	public static String EXTRA_SHOP_NAME = "shop_name";
-	public static final int LOAD_TYPE_REFRESH = 1;
-	public static final int LOAD_TYPE_LOADMORE = 2;
-	private PagerSlidingTabStrip tabs;
-	private ViewPager mViewPager;
-	private TabAdapter mAdapter;
-	private RelativeLayout rlShopTitle, errorView;
-	private TextView cartNum, cartPrice, cartNotice, tvShopTitle;
-	private ImageView ivArrow;
-	private CartListAdapter cartListAdapter;
-	private ArrayList<Goods> cartList = new ArrayList<Goods>();
-	public List<Category> categoryList = new ArrayList<Category>();
-	private PopupWindow carPopupWindow,popupWindow;
-	private BottomStatusBar bsb;
-
-	private int pagenum = 1;
-	private int pagesize = 21;
-	private int goodstypecode = 0;// 商品分类id,默认为零
-	private int temptypecode = 0;// 首页过来的typecode
-	private String shopName = null;// 店铺名称
-
-	public static LocationClient mLocationClient;
-	private LocationMode tempMode = LocationMode.Hight_Accuracy;
-	private String tempcoor = "gcj02";// gcj02、bd09ll、bd09
-	
-	private ListView goodsListView;
-
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_goods_category);
-		if (!CommonUtil.isNetworkConnected(context)) {
-			showErrorLocal(tryAgainListener);
-		}else{
-			initView();
-		}
-	}
-	
-	private void initView() {
-		Intent intent = getIntent();
-		temptypecode = intent.getExtras().getInt(EXTRA_TYPE_CODE);
-		shopName = intent.getExtras().getString(EXTRA_SHOP_NAME);
-		
-		tvShopTitle = (TextView) findViewById(R.id.title_bar_tv);
-		rlShopTitle = (RelativeLayout) findViewById(R.id.title_bar_center);
-		ivArrow = (ImageView) findViewById(R.id.iv_arrow);
-		cartNum = (TextView) findViewById(R.id.tv_cart_num);
-		cartPrice = (TextView) findViewById(R.id.cart_price);
-		cartNotice = (TextView) findViewById(R.id.tv_notice);
-		if (TextUtils.isEmpty(shopName)) {
-			shopName = SPUtils.getString(context, GlobalInfo.KEY_SHOPNAME, "");
-		}
-		tvShopTitle.setText(shopName);
-		
-		findViewById(R.id.iv_cart).setOnClickListener(this);
-		findViewById(R.id.rl_notice).setOnClickListener(this);	
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		findViewById(R.id.title_bar_right).setOnClickListener(this);
-		rlShopTitle.setOnClickListener(this);
-		
-		tabs = (PagerSlidingTabStrip) findViewById(R.id.tabs);
-		tabs.setTextSize(16);
-		tabs.setTextColor(getResources().getColor(R.color.category_tab_color_normal));
-		tabs.setIndicatorColor(getResources().getColor(R.color.red));
-		
-		mViewPager = (ViewPager) findViewById(R.id.id_pager);
-		mAdapter = new TabAdapter(getSupportFragmentManager(),this);
-		/** 默认设置一条记录*/
-		Category category = new Category();
-		category.setGoodstype_name("全部");
-		category.setGoodstype_code(0);
-		categoryList.add(category);
-		mAdapter.setCategories(categoryList);
-		mViewPager.setAdapter(mAdapter);
-		tabs.setViewPager(mViewPager);
-		
-		sendGetGoods();
-		mLocationClient = ((App)getApplication()).mLocationClient;
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-	}
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left://返回
-			finish();
-			break;
-		case R.id.title_bar_right://打电话
-			showAlertDialog();
-			break;
-		case R.id.title_bar_center://切换商铺
-			sendSelectBrowerShopAction();
-			break;
-		case R.id.iv_cart://购物车图标
-			if (Utils.loginState()) {//获取购物车中的商品列表
-				sendGetCartGoodsListAction();
-			}else {
-				startActivity(new Intent(this,RegistActivity.class));
-				finish();
-			}
-			break;
-		case R.id.rl_notice://去购物车
-			if (Utils.loginState()) {//判断是否登录过
-				startActivity(new Intent(this, ShoppingCartActivity.class));
-			}else {
-				startActivity(new Intent(this,RegistActivity.class));
-			}
-			finish();
-			break;
-		default:
-			break;
-		}
-	}
-	
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_GOODS_SUCESS://通过分类首次进入显示 全部商品成功事件 
-			hideErrorLocal();
-			tabCategory(bundle);
-			cartNotice(bundle);
-			mAdapter.onRefreshComplete(bundle);
-			break;
-		case Event.GET_GOODS_FAILED://通过分类首次进入显示 全部商品失败事件 
-			MyToast.show(this, notice);
-			mAdapter.onRefreshComplete(bundle);
-			break;
-		case Event.GET_GOODS_BY_TYPE_SUCESS://获取商品信息成功事件 
-			hideErrorLocal();
-			mAdapter.onRefreshComplete(bundle);
-			break;
-		case Event.GET_GOODS_BY_TYPE_FAILED://获取商品信息失败事件 
-			mAdapter.onRefreshComplete(bundle);
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_CATEGORY_CART_LIST_SUCESS://获取分类页购物车商品列表成功事件 
-			showCartPopWindow(bundle);
-			break;
-		case Event.GET_CATEGORY_CART_LIST_FAILED://获取分类页购物车列表失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS://添加或删除/修改商品数量成功事件 
-			cartNotice(bundle);
-			notifyPop(bundle);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED://添加或删除/修改商品数量失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_SELECT_BROWER_SHOP_CATEGORY_SUCESS://分类页重新选择便利店成功事件 
-			showPopWindow(bundle);
-			break;
-		case Event.GET_SELECT_BROWER_SHOP_CATEGORY_FAILED://分类页新选择便利店失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	/** 重新选择便利店*/
-	@SuppressLint("ResourceAsColor")
-	@SuppressWarnings({ "deprecation", "rawtypes" })
-	private void showPopWindow(Bundle bundle) {
-		ArrayList<ShopInfo> shopList =(ArrayList<ShopInfo>)bundle.getSerializable(LocationLogic.EXTRA_SHOPLIST);
-
-		View view = LayoutInflater.from(this).inflate(R.layout.popupwindow_shop_list, null,false);
-		LinearLayout group = (LinearLayout) view.findViewById(R.id.ll_pop_group);
-		
-		if (shopList != null && shopList.size() > 0 ) {
-			RelativeLayout viewText = null ;
-			ShopInfo shop = null ;
-			for (int i = 0; i < shopList.size(); i++) {
-				shop = (ShopInfo) shopList.get(i);
-				viewText = (RelativeLayout) LayoutInflater.from(this).inflate(R.layout.item_shop, null);
-				TextView textView = new TextView(this);
-//				TextView textView = (TextView) viewText.findViewById(R.id.shop);
-				textView.setText(shop.getShop_name()+"("+shop.getDistance()+"m)");
-				textView.setGravity(Gravity.CENTER);
-				textView.setPadding(5, 5, 5, 5);
-				textView.setTextColor(getResources().getColor(R.color.black));
-				textView.setTextSize(16);
-				textView.setTag(shop);
-				textView.setOnClickListener(new OnClickListener() {
-					
-					@Override
-					public void onClick(View v) {
-						popupWindow.dismiss();
-						ShopInfo shopinfo = (ShopInfo) v.getTag();
-						int shopcode = shopinfo.getShop_code();
-						int old = SPUtils.getInt(GoodsCategoryActivity.this, GlobalInfo.KEY_SHOPCODE, 0);
-						SPUtils.saveInt(GoodsCategoryActivity.this, GlobalInfo.KEY_SHOPSTATE, shopinfo.getStatus());
-						if (old != shopcode) {
-							tvShopTitle.setText(shopinfo.getShop_name());
-							SPUtils.saveBoolean(GoodsCategoryActivity.this, GlobalInfo.KEY_NEEDLOAD, true);
-							SPUtils.saveInt(GoodsCategoryActivity.this, GlobalInfo.KEY_SHOPCODE, shopcode);
-							/** 通过分类首次进入显示 全部商品 **/
-							sendGetGoods();
-						}
-					}
-				});
-				group.addView(textView, i);
-			}
-		}
-		
-		TextView text = new TextView(this);
-		text.setText("+ 添加便利店");
-		text.setTextSize(16);
-		text.setTextColor(getResources().getColor(R.color.black));
-		text.setGravity(Gravity.CENTER);
-		text.setPadding(5, 5, 5, 5);
-		text.setOnClickListener(new OnClickListener() {
-			
-			@Override
-			public void onClick(View v) {
-				popupWindow.dismiss();
-				InitLocation();
-				mLocationClient.start();
-				Intent intent = new Intent(GoodsCategoryActivity.this, FamliyMartActivity.class);
-				intent.putExtra(FamliyMartActivity.EXTRA_FROM, FamliyMartActivity.EXTRA_C);
-				startActivity(intent);
-				finish();
-			}
-		});
-		group.addView(text, shopList.size());
-		view.setFocusableInTouchMode(true);
-		popupWindow = new PopupWindow(view,(int) (App.windowWidth * 0.6f),LayoutParams.WRAP_CONTENT, true);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setAnimationStyle(R.style.style_ppw);
-		popupWindow.setOutsideTouchable(true);
-
-		ivArrow.setBackgroundDrawable(getResources().getDrawable(R.drawable.category_title_arrow_up));
-		
-		popupWindow.setOnDismissListener(new OnDismissListener() {
-			
-			@Override
-			public void onDismiss() {
-				ivArrow.setBackgroundDrawable(getResources().getDrawable(R.drawable.category_title_arrow_down));
-			}
-		});
-		
-		 // 计算x轴方向的偏移量，使得PopupWindow在Title的正下方显示，此处的单位是pixels 
-		float xoffInPixels = App.windowWidth * 0.5f - rlShopTitle.getWidth() * 0.5f; 
-	    // 将pixels转为dip 
-		int xoffInDip = Utils.px2dip(this, xoffInPixels);
-		popupWindow.showAsDropDown(rlShopTitle, -xoffInDip, 0);
-		popupWindow.update();
-	}
-	
-	private void InitLocation(){
-		LocationClientOption option = new LocationClientOption();
-		option.setLocationMode(tempMode);//设置定位模式
-		option.setCoorType(tempcoor);//返回的定位结果是百度经纬度，默认值gcj02
-		option.setScanSpan(5000);//设置发起定位请求的间隔时间为5000ms
-		option.setIsNeedAddress(true);//是否反地理编码
-		mLocationClient.setLocOption(option);
-	}
-
-
-	/** 点击加减判断是否减到0*/
-	private void notifyPop(Bundle bundle) {
-		int operation = bundle.getInt(ShoppingCartLogic.EXTRA_OPERATION);
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		int number = bundle.getInt(ShoppingCartLogic.EXTRA_NUM);
-		
-		if (operation == 2) {
-			Goods goods = null;
-			for (int i = 0; i < cartList.size(); i++) {
-				goods = cartList.get(i);
-				if (goods.getChange_code() == changecode) {
-					break;
-				}
-			}
-			int num = goods.getGoods_num();
-			if (--num <= 0 ) {
-				cartList.remove(goods);
-				cartListAdapter.notifyDataSetChanged();
-				setListViewHeightBasedOnChildren(goodsListView);
-				if (cartList.size() <= 0) {
-					carPopupWindow.dismiss();
-				}
-			}else{
-				goods.setGoods_num(num--);
-			}
-		}else if (operation == 3) {
-			if (number == 0) {
-				Goods goods = null;
-				for (int i = 0; i < cartList.size(); i++) {
-					goods = cartList.get(i);
-					if (goods.getChange_code() == changecode) {
-						break;
-					}
-				}
-				cartList.remove(goods);
-				cartListAdapter.notifyDataSetChanged();
-				setListViewHeightBasedOnChildren(goodsListView);
-			}
-		}
-	}
-	
-	/** 分类tab数据填充*/
-	@SuppressWarnings({ "unchecked", "rawtypes" })
-	private void tabCategory(Bundle bundle) {
-		ArrayList<Category> list = (ArrayList<Category>) bundle.getSerializable(GoodsLogic.EXTRA_GOODSTYPELIST);
-		if (list != null) {
-			categoryList.clear();
-			categoryList.addAll(list);
-			mAdapter.notifyDataSetChanged();
-			tabs.notifyDataSetChanged();
-			if (temptypecode != 0) {
-				for (int i = 0; i < categoryList.size(); i++) {
-					int code = categoryList.get(i).getGoodstype_code();
-					if (code == temptypecode) {
-						mViewPager.setCurrentItem(i);
-						break;
-					}
-				}
-			}
-		}
-	}
-	
-	/** 显示购物车商品view*/
-	@SuppressWarnings({ "rawtypes", "null", "unchecked", "deprecation" })
-	private void showCartPopWindow(Bundle bundle) {
-		ArrayList<Goods> list = (ArrayList<Goods>) bundle.getSerializable(ShoppingCartLogic.EXTRA_CARTGOODLIST);
-		if (list == null && list.size() == 0) {
-			MyToast.show(this, "购物车没有商品！");
-			return;
-		}
-		cartList.clear();
-		cartList.addAll(list);
-		
-		View view = getLayoutInflater().inflate(R.layout.popupwindow_goods_list, null,false);
-		goodsListView = (ListView) view.findViewById(R.id.listview);
-		cartListAdapter = new CartListAdapter(this, cartList);
-		goodsListView.setAdapter(cartListAdapter);
-		setListViewHeightBasedOnChildren(goodsListView);
-		
-		carPopupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
-		WindowManager.LayoutParams params = getWindow().getAttributes();
-		params.alpha = 0.7f;
-		getWindow().setAttributes(params);
-		
-		carPopupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
-		carPopupWindow.setBackgroundDrawable(new BitmapDrawable());
-		carPopupWindow.setAnimationStyle(R.style.style_ppwcart);
-		carPopupWindow.setOutsideTouchable(true);
-		carPopupWindow.setFocusable(true);
-		carPopupWindow.setOnDismissListener(new OnDismissListener() {
-			@Override
-			public void onDismiss() {
-				WindowManager.LayoutParams params = getWindow().getAttributes();
-				params.alpha = 1f;
-				getWindow().setAttributes(params);
-			}
-		});
-		
-		carPopupWindow.update();
-		carPopupWindow.showAtLocation(findViewById(R.id.layout_cart), Gravity.BOTTOM, 0, Utils.dip2px(this, 50));
-	}
-	
-	/** 购物车提示*/
-	@SuppressWarnings("rawtypes")
-	private void cartNotice(Bundle bundle) {
-		ArrayList<BottomStatusBar> bottomstatusbar = (ArrayList<BottomStatusBar>) bundle.getSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST);
-		int limited = bundle.getInt(ShoppingCartLogic.KEY_OVERLIMITED);
-		if (limited == 1){
-			MyToast.show(this,"该商品已经超过限购数量！");
-			return;
-		}
-
-		bsb = (BottomStatusBar) bottomstatusbar.get(0);
-		if (bsb.getCount() > 0 ) {
-			cartNum.setVisibility(View.VISIBLE);
-		}else{
-			cartNum.setVisibility(View.GONE);
-		}
-		
-		String number = "";
-		if (bsb.getCount() > 99) {
-			number = "99+";
-		} else {
-			number = bsb.getCount() + "";
-		}
-		cartNum.setText(number);
-		
-		double amount = bsb.getAmount();
-		BigDecimal bdmoney = new BigDecimal(amount);
-		bdmoney = bdmoney.setScale(2, BigDecimal.ROUND_DOWN);
-		cartPrice.setText(amount > 0 ? "￥"+bdmoney:"￥0.00");
-		String text = "";
-		if (amount == 0) {
-			double free_send_price = bsb.getFree_send_price();
-			BigDecimal bdsend = new BigDecimal(free_send_price);
-			bdsend = bdsend.setScale(2, BigDecimal.ROUND_DOWN);
-			text = "差" + bdsend + "元免费配送";
-		}else if (0 < amount && amount < bsb.getFree_send_price()) {
-			double sub = Utils.sub(bsb.getFree_send_price(), amount);
-			text = "差" + sub + "元免费配送";
-		}else{
-			text = "选好了";
-		}
-		cartNotice.setText(text);
-	}
-	
-	/**
-	 * 提示框
-	 */
-	public void showAlertDialog() {
-		String shopinfo = SPUtils.getString(context, GlobalInfo.KEY_SHOPINFO, "");
-		JSONObject shopJson ;
-		String shopName = "";
-		String tel = "";
-		try {
-			shopJson = new JSONObject(shopinfo);
-			shopName = shopJson.getString(GlobalInfo.KEY_SHOPNAME);
-			tel = shopJson.getString(GlobalInfo.KEY_SHOPTEL);
-			SPUtils.saveString(context, GlobalInfo.KEY_SHOPTEL, tel);
-		} catch (JSONException e) {
-			e.printStackTrace();
-		}
-		
-		MyDialog.Builder builder = new MyDialog.Builder(this);
-		builder.setTitle(shopName);
-		builder.setMessage("老板电话："+tel+"\n您可以直接拨打老板电话，电话订购所需商品！");
-		builder.setConfirmButton("确定", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-				startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+ SPUtils.getString(context, GlobalInfo.KEY_SHOPTEL, ""))));
-			}
-		});
-		builder.setCancelButton("取消", new android.content.DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-			}
-		});
-		builder.create().show();
-		
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_GOODS_BY_TYPE_SUCESS,Event.GET_GOODS_BY_TYPE_FAILED,
-				Event.GET_GOODS_SUCESS,Event.GET_GOODS_FAILED,
-				Event.GET_CATEGORY_CART_LIST_SUCESS,Event.GET_CATEGORY_CART_LIST_FAILED,
-				Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS,Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED,
-				Event.GET_SELECT_BROWER_SHOP_CATEGORY_SUCESS,Event.GET_SELECT_BROWER_SHOP_CATEGORY_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	/** 获取购物车商品列表*/
-	private void sendGetCartGoodsListAction() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_GETCATEGORYCARTLIST);
-		intent.putExtra(ShoppingCartLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-	
-	/** 通过分类首次进入显示 全部商品 */
-	public void sendGetGoods(){
-		Intent intent = new Intent(GoodsLogic.ACTION_GET_GOODS);
-		intent.putExtra(GoodsLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(GoodsLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(GoodsLogic.EXTRA_PAGENUM, pagenum);
-		intent.putExtra(GoodsLogic.EXTRA_PAGESIZE, pagesize);
-		intent.putExtra(GoodsLogic.EXTRA_GOODSTYPECODE, goodstypecode);
-		sendAction(intent);
-	}
-	
-	/** 通过分类类型获取商品*/
-	public void sendGetGoodsByType(int loadType){
-		if (loadType == LOAD_TYPE_REFRESH) {
-			pagenum = 1;
-		}
-		
-		Intent intent = new Intent(GoodsLogic.ACTION_GET_GOODS_BY_TYPE);
-		intent.putExtra(GoodsLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(GoodsLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(GoodsLogic.EXTRA_GOODSTYPECODE, goodstypecode);
-		intent.putExtra(GoodsLogic.EXTRA_PAGESIZE, pagesize);
-		intent.putExtra(GoodsLogic.EXTRA_PAGENUM, pagenum);
-		intent.putExtra(GoodsLogic.EXTRA_LOADTYPE, loadType);
-		sendAction(intent);
-	}
-	
-	/** 分类页重新选择便利店 */
-	private void sendSelectBrowerShopAction() {
-		Intent intent = new Intent(LocationLogic.ACTION_GET_SELECT_BROWER_SHOP_CATEGORY);
-		intent.putExtra(LocationLogic.EXTRA_LNG, SPUtils.getString(this, GlobalInfo.LNG, ""));
-		intent.putExtra(LocationLogic.EXTRA_LAT, SPUtils.getString(this, GlobalInfo.LAT, ""));
-		intent.putExtra(LocationLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(LocationLogic.EXTRA_USERCODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	@Override
-	public void onRefresh(PullToRefreshLayout pullToRefreshLayout,int typecode) {
-		goodstypecode = typecode;
-		sendGetGoodsByType(LOAD_TYPE_REFRESH);
-	}
-
-	@Override
-	public void onLoadMore(PullToRefreshLayout pullToRefreshLayout,int typecode) {
-		goodstypecode = typecode;
-		pagenum ++ ;
-		sendGetGoodsByType(LOAD_TYPE_LOADMORE);
-	}
-	
-	public void setListViewHeightBasedOnChildren(ListView listView) {
-		ListAdapter listAdapter = listView.getAdapter();
-		if (listAdapter == null) {
-			return;
-		}
-		int totalHeight = 0;
-		for (int i = 0; i < listAdapter.getCount(); i++) {
-			View listItem = listAdapter.getView(i, null, listView);
-			listItem.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
-			totalHeight += listItem.getMeasuredHeight();
-		}
-		
-		int h = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-		
-		if (h > App.windowHeight - Utils.dip2px(context, 180)) {
-			h = App.windowHeight - Utils.dip2px(context, 180);
-		} else {
-			h = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-		}
-		ViewGroup.LayoutParams params = listView.getLayoutParams();
-		params.height = h;
-		((MarginLayoutParams) params).setMargins(10, 10, 10, 10);
-		listView.setLayoutParams(params);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/SearchAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/SearchAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/SearchAdapter.java	(revision )
@@ -1,66 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-
-import java.util.ArrayList;
-/**
- * 
- * @ClassName:  SearchAdapter
- * @Description: 展示搜索商品
- * @author YY
- * @date 2015年7月3日 上午10:25:19
- */
-public class SearchAdapter extends BaseAdapter {
-	
-	private ArrayList<Goods> lists;
-	private Context mContext;
-
-	public SearchAdapter(ArrayList<Goods> goodsList,Context context) {
-		super();
-		this.lists = goodsList;
-		this.mContext = context;
-	}
-
-	@Override
-	public int getCount() {
-		return lists.size();
-	}
-
-	@Override
-	public View getView(final int position, View convertView,ViewGroup parent) {
-		ViewHolder holder;
-		String goods_name = lists.get(position).getGoods_name();
-		if (convertView == null) {
-			convertView = View.inflate(mContext,R.layout.item_search, null);
-			holder = new ViewHolder();
-			holder.tv_hots = (TextView) convertView.findViewById(R.id.tv_des);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		holder.tv_hots.setText(goods_name);
-		return convertView;
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return null;
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return 0;
-	}
-	
-	static class ViewHolder{
-		TextView tv_hots;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/TitlePageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/TitlePageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/TitlePageIndicator.java	(revision )
@@ -1,872 +0,0 @@
-/*
- * Copyright (C) 2011 Jake Wharton
- * Copyright (C) 2011 Patrik Akerfeldt
- * Copyright (C) 2011 Francisco Figueiredo Jr.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.content.res.Resources;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Paint;
-import android.graphics.Path;
-import android.graphics.Rect;
-import android.graphics.Typeface;
-import android.graphics.drawable.Drawable;
-import android.os.Parcel;
-import android.os.Parcelable;
-import android.support.v4.view.MotionEventCompat;
-import android.support.v4.view.ViewConfigurationCompat;
-import android.support.v4.view.ViewPager;
-import android.util.AttributeSet;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.ViewConfiguration;
-
-import com.anniu.shandiandaojia.R;
-
-import java.util.ArrayList;
-
-/**
- * A TitlePageIndicator is a PageIndicator which displays the title of left view
- * (if exist), the title of the current select view (centered) and the title of
- * the right view (if exist). When the user scrolls the ViewPager then titles are
- * also scrolled.
- */
-public class TitlePageIndicator extends View implements PageIndicator {
-    /**
-     * Percentage indicating what percentage of the screen width away from
-     * center should the underline be fully faded. A value of 0.25 means that
-     * halfway between the center of the screen and an edge.
-     */
-    private static final float SELECTION_FADE_PERCENTAGE = 0.25f;
-
-    /**
-     * Percentage indicating what percentage of the screen width away from
-     * center should the selected text bold turn off. A value of 0.05 means
-     * that 10% between the center and an edge.
-     */
-    private static final float BOLD_FADE_PERCENTAGE = 0.05f;
-
-    /**
-     * Title text used when no title is provided by the adapter.
-     */
-    private static final String EMPTY_TITLE = "";
-
-    /**
-     * Interface for a callback when the center item has been clicked.
-     */
-    public interface OnCenterItemClickListener {
-        /**
-         * Callback when the center item has been clicked.
-         *
-         * @param position Position of the current center item.
-         */
-        void onCenterItemClick(int position);
-    }
-
-    public enum IndicatorStyle {
-        None(0), Triangle(1), Underline(2);
-
-        public final int value;
-
-        private IndicatorStyle(int value) {
-            this.value = value;
-        }
-
-        public static IndicatorStyle fromValue(int value) {
-            for (IndicatorStyle style : IndicatorStyle.values()) {
-                if (style.value == value) {
-                    return style;
-                }
-            }
-            return null;
-        }
-    }
-
-    public enum LinePosition {
-        Bottom(0), Top(1);
-
-        public final int value;
-
-        private LinePosition(int value) {
-            this.value = value;
-        }
-
-        public static LinePosition fromValue(int value) {
-            for (LinePosition position : LinePosition.values()) {
-                if (position.value == value) {
-                    return position;
-                }
-            }
-            return null;
-        }
-    }
-
-    private ViewPager mViewPager;
-    private ViewPager.OnPageChangeListener mListener;
-    private int mCurrentPage = -1;
-    private float mPageOffset;
-    private int mScrollState;
-    private final Paint mPaintText = new Paint();
-    private boolean mBoldText;
-    private int mColorText;
-    private int mColorSelected;
-    private Path mPath = new Path();
-    private final Rect mBounds = new Rect();
-    private final Paint mPaintFooterLine = new Paint();
-    private IndicatorStyle mFooterIndicatorStyle;
-    private LinePosition mLinePosition;
-    private final Paint mPaintFooterIndicator = new Paint();
-    private float mFooterIndicatorHeight;
-    private float mFooterIndicatorUnderlinePadding;
-    private float mFooterPadding;
-    private float mTitlePadding;
-    private float mTopPadding;
-    /** Left and right side padding for not active view titles. */
-    private float mClipPadding;
-    private float mFooterLineHeight;
-
-    private static final int INVALID_POINTER = -1;
-
-    private int mTouchSlop;
-    private float mLastMotionX = -1;
-    private int mActivePointerId = INVALID_POINTER;
-    private boolean mIsDragging;
-
-    private OnCenterItemClickListener mCenterItemClickListener;
-
-
-    public TitlePageIndicator(Context context) {
-        this(context, null);
-    }
-
-    public TitlePageIndicator(Context context, AttributeSet attrs) {
-        this(context, attrs, R.attr.vpiTitlePageIndicatorStyle);
-    }
-
-    public TitlePageIndicator(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-        if (isInEditMode()) return;
-
-        //Load defaults from resources
-        final Resources res = getResources();
-        final int defaultFooterColor = res.getColor(R.color.default_title_indicator_footer_color);
-        final float defaultFooterLineHeight = res.getDimension(R.dimen.default_title_indicator_footer_line_height);
-        final int defaultFooterIndicatorStyle = res.getInteger(R.integer.default_title_indicator_footer_indicator_style);
-        final float defaultFooterIndicatorHeight = res.getDimension(R.dimen.default_title_indicator_footer_indicator_height);
-        final float defaultFooterIndicatorUnderlinePadding = res.getDimension(R.dimen.default_title_indicator_footer_indicator_underline_padding);
-        final float defaultFooterPadding = res.getDimension(R.dimen.default_title_indicator_footer_padding);
-        final int defaultLinePosition = res.getInteger(R.integer.default_title_indicator_line_position);
-        final int defaultSelectedColor = res.getColor(R.color.default_title_indicator_selected_color);
-        final boolean defaultSelectedBold = res.getBoolean(R.bool.default_title_indicator_selected_bold);
-        final int defaultTextColor = res.getColor(R.color.default_title_indicator_text_color);
-        final float defaultTextSize = res.getDimension(R.dimen.default_title_indicator_text_size);
-        final float defaultTitlePadding = res.getDimension(R.dimen.default_title_indicator_title_padding);
-        final float defaultClipPadding = res.getDimension(R.dimen.default_title_indicator_clip_padding);
-        final float defaultTopPadding = res.getDimension(R.dimen.default_title_indicator_top_padding);
-
-        //Retrieve styles attributes
-        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.TitlePageIndicator, defStyle, 0);
-
-        //Retrieve the colors to be used for this view and apply them.
-        mFooterLineHeight = a.getDimension(R.styleable.TitlePageIndicator_footerLineHeight, defaultFooterLineHeight);
-        mFooterIndicatorStyle = IndicatorStyle.fromValue(a.getInteger(R.styleable.TitlePageIndicator_footerIndicatorStyle, defaultFooterIndicatorStyle));
-        mFooterIndicatorHeight = a.getDimension(R.styleable.TitlePageIndicator_footerIndicatorHeight, defaultFooterIndicatorHeight);
-        mFooterIndicatorUnderlinePadding = a.getDimension(R.styleable.TitlePageIndicator_footerIndicatorUnderlinePadding, defaultFooterIndicatorUnderlinePadding);
-        mFooterPadding = a.getDimension(R.styleable.TitlePageIndicator_footerPadding, defaultFooterPadding);
-        mLinePosition = LinePosition.fromValue(a.getInteger(R.styleable.TitlePageIndicator_linePosition, defaultLinePosition));
-        mTopPadding = a.getDimension(R.styleable.TitlePageIndicator_topPadding, defaultTopPadding);
-        mTitlePadding = a.getDimension(R.styleable.TitlePageIndicator_titlePadding, defaultTitlePadding);
-        mClipPadding = a.getDimension(R.styleable.TitlePageIndicator_clipPadding, defaultClipPadding);
-        mColorSelected = a.getColor(R.styleable.TitlePageIndicator_selectedColor, defaultSelectedColor);
-        mColorText = a.getColor(R.styleable.TitlePageIndicator_android_textColor, defaultTextColor);
-        mBoldText = a.getBoolean(R.styleable.TitlePageIndicator_selectedBold, defaultSelectedBold);
-
-        final float textSize = a.getDimension(R.styleable.TitlePageIndicator_android_textSize, defaultTextSize);
-        final int footerColor = a.getColor(R.styleable.TitlePageIndicator_footerColor, defaultFooterColor);
-        mPaintText.setTextSize(textSize);
-        mPaintText.setAntiAlias(true);
-        mPaintFooterLine.setStyle(Paint.Style.FILL_AND_STROKE);
-        mPaintFooterLine.setStrokeWidth(mFooterLineHeight);
-        mPaintFooterLine.setColor(footerColor);
-        mPaintFooterIndicator.setStyle(Paint.Style.FILL_AND_STROKE);
-        mPaintFooterIndicator.setColor(footerColor);
-
-        Drawable background = a.getDrawable(R.styleable.TitlePageIndicator_android_background);
-        if (background != null) {
-          setBackgroundDrawable(background);
-        }
-
-        a.recycle();
-
-        final ViewConfiguration configuration = ViewConfiguration.get(context);
-        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
-    }
-
-
-    public int getFooterColor() {
-        return mPaintFooterLine.getColor();
-    }
-
-    public void setFooterColor(int footerColor) {
-        mPaintFooterLine.setColor(footerColor);
-        mPaintFooterIndicator.setColor(footerColor);
-        invalidate();
-    }
-
-    public float getFooterLineHeight() {
-        return mFooterLineHeight;
-    }
-
-    public void setFooterLineHeight(float footerLineHeight) {
-        mFooterLineHeight = footerLineHeight;
-        mPaintFooterLine.setStrokeWidth(mFooterLineHeight);
-        invalidate();
-    }
-
-    public float getFooterIndicatorHeight() {
-        return mFooterIndicatorHeight;
-    }
-
-    public void setFooterIndicatorHeight(float footerTriangleHeight) {
-        mFooterIndicatorHeight = footerTriangleHeight;
-        invalidate();
-    }
-
-    public float getFooterIndicatorPadding() {
-        return mFooterPadding;
-    }
-
-    public void setFooterIndicatorPadding(float footerIndicatorPadding) {
-        mFooterPadding = footerIndicatorPadding;
-        invalidate();
-    }
-
-    public IndicatorStyle getFooterIndicatorStyle() {
-        return mFooterIndicatorStyle;
-    }
-
-    public void setFooterIndicatorStyle(IndicatorStyle indicatorStyle) {
-        mFooterIndicatorStyle = indicatorStyle;
-        invalidate();
-    }
-
-    public LinePosition getLinePosition() {
-        return mLinePosition;
-    }
-
-    public void setLinePosition(LinePosition linePosition) {
-        mLinePosition = linePosition;
-        invalidate();
-    }
-
-    public int getSelectedColor() {
-        return mColorSelected;
-    }
-
-    public void setSelectedColor(int selectedColor) {
-        mColorSelected = selectedColor;
-        invalidate();
-    }
-
-    public boolean isSelectedBold() {
-        return mBoldText;
-    }
-
-    public void setSelectedBold(boolean selectedBold) {
-        mBoldText = selectedBold;
-        invalidate();
-    }
-
-    public int getTextColor() {
-        return mColorText;
-    }
-
-    public void setTextColor(int textColor) {
-        mPaintText.setColor(textColor);
-        mColorText = textColor;
-        invalidate();
-    }
-
-    public float getTextSize() {
-        return mPaintText.getTextSize();
-    }
-
-    public void setTextSize(float textSize) {
-        mPaintText.setTextSize(textSize);
-        invalidate();
-    }
-
-    public float getTitlePadding() {
-        return this.mTitlePadding;
-    }
-
-    public void setTitlePadding(float titlePadding) {
-        mTitlePadding = titlePadding;
-        invalidate();
-    }
-
-    public float getTopPadding() {
-        return this.mTopPadding;
-    }
-
-    public void setTopPadding(float topPadding) {
-        mTopPadding = topPadding;
-        invalidate();
-    }
-
-    public float getClipPadding() {
-        return this.mClipPadding;
-    }
-
-    public void setClipPadding(float clipPadding) {
-        mClipPadding = clipPadding;
-        invalidate();
-    }
-
-    public void setTypeface(Typeface typeface) {
-        mPaintText.setTypeface(typeface);
-        invalidate();
-    }
-
-    public Typeface getTypeface() {
-        return mPaintText.getTypeface();
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see android.view.View#onDraw(android.graphics.Canvas)
-     */
-    @Override
-    protected void onDraw(Canvas canvas) {
-        super.onDraw(canvas);
-
-        if (mViewPager == null) {
-            return;
-        }
-        final int count = mViewPager.getAdapter().getCount();
-        if (count == 0) {
-            return;
-        }
-
-        // mCurrentPage is -1 on first start and after orientation changed. If so, retrieve the correct index from viewpager.
-        if (mCurrentPage == -1 && mViewPager != null) {
-            mCurrentPage = mViewPager.getCurrentItem();
-        }
-
-        //Calculate views bounds
-        ArrayList<Rect> bounds = calculateAllBounds(mPaintText);
-        final int boundsSize = bounds.size();
-
-        //Make sure we're on a page that still exists
-        if (mCurrentPage >= boundsSize) {
-            setCurrentItem(boundsSize - 1);
-            return;
-        }
-
-        final int countMinusOne = count - 1;
-        final float halfWidth = getWidth() / 2f;
-        final int left = getLeft();
-        final float leftClip = left + mClipPadding;
-        final int width = getWidth();
-        int height = getHeight();
-        final int right = left + width;
-        final float rightClip = right - mClipPadding;
-
-        int page = mCurrentPage;
-        float offsetPercent;
-        if (mPageOffset <= 0.5) {
-            offsetPercent = mPageOffset;
-        } else {
-            page += 1;
-            offsetPercent = 1 - mPageOffset;
-        }
-        final boolean currentSelected = (offsetPercent <= SELECTION_FADE_PERCENTAGE);
-        final boolean currentBold = (offsetPercent <= BOLD_FADE_PERCENTAGE);
-        final float selectedPercent = (SELECTION_FADE_PERCENTAGE - offsetPercent) / SELECTION_FADE_PERCENTAGE;
-
-        //Verify if the current view must be clipped to the screen
-        Rect curPageBound = bounds.get(mCurrentPage);
-        float curPageWidth = curPageBound.right - curPageBound.left;
-        if (curPageBound.left < leftClip) {
-            //Try to clip to the screen (left side)
-            clipViewOnTheLeft(curPageBound, curPageWidth, left);
-        }
-        if (curPageBound.right > rightClip) {
-            //Try to clip to the screen (right side)
-            clipViewOnTheRight(curPageBound, curPageWidth, right);
-        }
-
-        //Left views starting from the current position
-        if (mCurrentPage > 0) {
-            for (int i = mCurrentPage - 1; i >= 0; i--) {
-                Rect bound = bounds.get(i);
-                //Is left side is outside the screen
-                if (bound.left < leftClip) {
-                    int w = bound.right - bound.left;
-                    //Try to clip to the screen (left side)
-                    clipViewOnTheLeft(bound, w, left);
-                    //Except if there's an intersection with the right view
-                    Rect rightBound = bounds.get(i + 1);
-                    //Intersection
-                    if (bound.right + mTitlePadding > rightBound.left) {
-                        bound.left = (int) (rightBound.left - w - mTitlePadding);
-                        bound.right = bound.left + w;
-                    }
-                }
-            }
-        }
-        //Right views starting from the current position
-        if (mCurrentPage < countMinusOne) {
-            for (int i = mCurrentPage + 1 ; i < count; i++) {
-                Rect bound = bounds.get(i);
-                //If right side is outside the screen
-                if (bound.right > rightClip) {
-                    int w = bound.right - bound.left;
-                    //Try to clip to the screen (right side)
-                    clipViewOnTheRight(bound, w, right);
-                    //Except if there's an intersection with the left view
-                    Rect leftBound = bounds.get(i - 1);
-                    //Intersection
-                    if (bound.left - mTitlePadding < leftBound.right) {
-                        bound.left = (int) (leftBound.right + mTitlePadding);
-                        bound.right = bound.left + w;
-                    }
-                }
-            }
-        }
-
-        //Now draw views
-        int colorTextAlpha = mColorText >>> 24;
-        for (int i = 0; i < count; i++) {
-            //Get the title
-            Rect bound = bounds.get(i);
-            //Only if one side is visible
-            if ((bound.left > left && bound.left < right) || (bound.right > left && bound.right < right)) {
-                final boolean currentPage = (i == page);
-                final CharSequence pageTitle = getTitle(i);
-
-                //Only set bold if we are within bounds
-                mPaintText.setFakeBoldText(currentPage && currentBold && mBoldText);
-
-                //Draw text as unselected
-                mPaintText.setColor(mColorText);
-                if(currentPage && currentSelected) {
-                    //Fade out/in unselected text as the selected text fades in/out
-                    mPaintText.setAlpha(colorTextAlpha - (int)(colorTextAlpha * selectedPercent));
-                }
-
-                //Except if there's an intersection with the right view
-                if (i < boundsSize - 1)  {
-                    Rect rightBound = bounds.get(i + 1);
-                    //Intersection
-                    if (bound.right + mTitlePadding > rightBound.left) {
-                        int w = bound.right - bound.left;
-                        bound.left = (int) (rightBound.left - w - mTitlePadding);
-                        bound.right = bound.left + w;
-                    }
-                }
-                canvas.drawText(pageTitle, 0, pageTitle.length(), bound.left, bound.bottom + mTopPadding, mPaintText);
-
-                //If we are within the selected bounds draw the selected text
-                if (currentPage && currentSelected) {
-                    mPaintText.setColor(mColorSelected);
-                    mPaintText.setAlpha((int)((mColorSelected >>> 24) * selectedPercent));
-                    canvas.drawText(pageTitle, 0, pageTitle.length(), bound.left, bound.bottom + mTopPadding, mPaintText);
-                }
-            }
-        }
-
-        //If we want the line on the top change height to zero and invert the line height to trick the drawing code
-        float footerLineHeight = mFooterLineHeight;
-        float footerIndicatorLineHeight = mFooterIndicatorHeight;
-        if (mLinePosition == LinePosition.Top) {
-            height = 0;
-            footerLineHeight = -footerLineHeight;
-            footerIndicatorLineHeight = -footerIndicatorLineHeight;
-        }
-
-        //Draw the footer line
-        mPath.reset();
-        mPath.moveTo(0, height - footerLineHeight / 2f);
-        mPath.lineTo(width, height - footerLineHeight / 2f);
-        mPath.close();
-        canvas.drawPath(mPath, mPaintFooterLine);
-
-        float heightMinusLine = height - footerLineHeight;
-        switch (mFooterIndicatorStyle) {
-            case Triangle:
-                mPath.reset();
-                mPath.moveTo(halfWidth, heightMinusLine - footerIndicatorLineHeight);
-                mPath.lineTo(halfWidth + footerIndicatorLineHeight, heightMinusLine);
-                mPath.lineTo(halfWidth - footerIndicatorLineHeight, heightMinusLine);
-                mPath.close();
-                canvas.drawPath(mPath, mPaintFooterIndicator);
-                break;
-
-            case Underline:
-                if (!currentSelected || page >= boundsSize) {
-                    break;
-                }
-
-                Rect underlineBounds = bounds.get(page);
-                final float rightPlusPadding = underlineBounds.right + mFooterIndicatorUnderlinePadding;
-                final float leftMinusPadding = underlineBounds.left - mFooterIndicatorUnderlinePadding;
-                final float heightMinusLineMinusIndicator = heightMinusLine - footerIndicatorLineHeight;
-
-                mPath.reset();
-                mPath.moveTo(leftMinusPadding, heightMinusLine);
-                mPath.lineTo(rightPlusPadding, heightMinusLine);
-                mPath.lineTo(rightPlusPadding, heightMinusLineMinusIndicator);
-                mPath.lineTo(leftMinusPadding, heightMinusLineMinusIndicator);
-                mPath.close();
-
-                mPaintFooterIndicator.setAlpha((int)(0xFF * selectedPercent));
-                canvas.drawPath(mPath, mPaintFooterIndicator);
-                mPaintFooterIndicator.setAlpha(0xFF);
-                break;
-        }
-    }
-
-    public boolean onTouchEvent(android.view.MotionEvent ev) {
-        if (super.onTouchEvent(ev)) {
-            return true;
-        }
-        if ((mViewPager == null) || (mViewPager.getAdapter().getCount() == 0)) {
-            return false;
-        }
-
-        final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
-        switch (action) {
-            case MotionEvent.ACTION_DOWN:
-                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
-                mLastMotionX = ev.getX();
-                break;
-
-            case MotionEvent.ACTION_MOVE: {
-                final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
-                final float x = MotionEventCompat.getX(ev, activePointerIndex);
-                final float deltaX = x - mLastMotionX;
-
-                if (!mIsDragging) {
-                    if (Math.abs(deltaX) > mTouchSlop) {
-                        mIsDragging = true;
-                    }
-                }
-
-                if (mIsDragging) {
-                    mLastMotionX = x;
-                    if (mViewPager.isFakeDragging() || mViewPager.beginFakeDrag()) {
-                        mViewPager.fakeDragBy(deltaX);
-                    }
-                }
-
-                break;
-            }
-
-            case MotionEvent.ACTION_CANCEL:
-            case MotionEvent.ACTION_UP:
-                if (!mIsDragging) {
-                    final int count = mViewPager.getAdapter().getCount();
-                    final int width = getWidth();
-                    final float halfWidth = width / 2f;
-                    final float sixthWidth = width / 6f;
-                    final float leftThird = halfWidth - sixthWidth;
-                    final float rightThird = halfWidth + sixthWidth;
-                    final float eventX = ev.getX();
-
-                    if (eventX < leftThird) {
-                        if (mCurrentPage > 0) {
-                            if (action != MotionEvent.ACTION_CANCEL) {
-                                mViewPager.setCurrentItem(mCurrentPage - 1);
-                            }
-                            return true;
-                        }
-                    } else if (eventX > rightThird) {
-                        if (mCurrentPage < count - 1) {
-                            if (action != MotionEvent.ACTION_CANCEL) {
-                                mViewPager.setCurrentItem(mCurrentPage + 1);
-                            }
-                            return true;
-                        }
-                    } else {
-                        //Middle third
-                        if (mCenterItemClickListener != null && action != MotionEvent.ACTION_CANCEL) {
-                            mCenterItemClickListener.onCenterItemClick(mCurrentPage);
-                        }
-                    }
-                }
-
-                mIsDragging = false;
-                mActivePointerId = INVALID_POINTER;
-                if (mViewPager.isFakeDragging()) mViewPager.endFakeDrag();
-                break;
-
-            case MotionEventCompat.ACTION_POINTER_DOWN: {
-                final int index = MotionEventCompat.getActionIndex(ev);
-                mLastMotionX = MotionEventCompat.getX(ev, index);
-                mActivePointerId = MotionEventCompat.getPointerId(ev, index);
-                break;
-            }
-
-            case MotionEventCompat.ACTION_POINTER_UP:
-                final int pointerIndex = MotionEventCompat.getActionIndex(ev);
-                final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
-                if (pointerId == mActivePointerId) {
-                    final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
-                    mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
-                }
-                mLastMotionX = MotionEventCompat.getX(ev, MotionEventCompat.findPointerIndex(ev, mActivePointerId));
-                break;
-        }
-
-        return true;
-    }
-
-    /**
-     * Set bounds for the right textView including clip padding.
-     *
-     * @param curViewBound
-     *            current bounds.
-     * @param curViewWidth
-     *            width of the view.
-     */
-    private void clipViewOnTheRight(Rect curViewBound, float curViewWidth, int right) {
-        curViewBound.right = (int) (right - mClipPadding);
-        curViewBound.left = (int) (curViewBound.right - curViewWidth);
-    }
-
-    /**
-     * Set bounds for the left textView including clip padding.
-     *
-     * @param curViewBound
-     *            current bounds.
-     * @param curViewWidth
-     *            width of the view.
-     */
-    private void clipViewOnTheLeft(Rect curViewBound, float curViewWidth, int left) {
-        curViewBound.left = (int) (left + mClipPadding);
-        curViewBound.right = (int) (mClipPadding + curViewWidth);
-    }
-
-    /**
-     * Calculate views bounds and scroll them according to the current index
-     *
-     * @param paint
-     * @return
-     */
-    private ArrayList<Rect> calculateAllBounds(Paint paint) {
-        ArrayList<Rect> list = new ArrayList<Rect>();
-        //For each views (If no values then add a fake one)
-        final int count = mViewPager.getAdapter().getCount();
-        final int width = getWidth();
-        final int halfWidth = width / 2;
-        for (int i = 0; i < count; i++) {
-            Rect bounds = calcBounds(i, paint);
-            int w = bounds.right - bounds.left;
-            int h = bounds.bottom - bounds.top;
-            bounds.left = (int)(halfWidth - (w / 2f) + ((i - mCurrentPage - mPageOffset) * width));
-            bounds.right = bounds.left + w;
-            bounds.top = 0;
-            bounds.bottom = h;
-            list.add(bounds);
-        }
-
-        return list;
-    }
-
-    /**
-     * Calculate the bounds for a view's title
-     *
-     * @param index
-     * @param paint
-     * @return
-     */
-    private Rect calcBounds(int index, Paint paint) {
-        //Calculate the text bounds
-        Rect bounds = new Rect();
-        CharSequence title = getTitle(index);
-        bounds.right = (int) paint.measureText(title, 0, title.length());
-        bounds.bottom = (int) (paint.descent() - paint.ascent());
-        return bounds;
-    }
-
-    @Override
-    public void setViewPager(ViewPager view) {
-        if (mViewPager == view) {
-            return;
-        }
-        if (mViewPager != null) {
-            mViewPager.setOnPageChangeListener(null);
-        }
-        if (view.getAdapter() == null) {
-            throw new IllegalStateException("ViewPager does not have adapter instance.");
-        }
-        mViewPager = view;
-        mViewPager.setOnPageChangeListener(this);
-        invalidate();
-    }
-
-    @Override
-    public void setViewPager(ViewPager view, int initialPosition) {
-        setViewPager(view);
-        setCurrentItem(initialPosition);
-    }
-
-    @Override
-    public void notifyDataSetChanged() {
-        invalidate();
-    }
-
-    /**
-     * Set a callback listener for the center item click.
-     *
-     * @param listener Callback instance.
-     */
-    public void setOnCenterItemClickListener(OnCenterItemClickListener listener) {
-        mCenterItemClickListener = listener;
-    }
-
-    @Override
-    public void setCurrentItem(int item) {
-        if (mViewPager == null) {
-            throw new IllegalStateException("ViewPager has not been bound.");
-        }
-        mViewPager.setCurrentItem(item);
-        mCurrentPage = item;
-        invalidate();
-    }
-
-    @Override
-    public void onPageScrollStateChanged(int state) {
-        mScrollState = state;
-
-        if (mListener != null) {
-            mListener.onPageScrollStateChanged(state);
-        }
-    }
-
-    @Override
-    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
-        mCurrentPage = position;
-        mPageOffset = positionOffset;
-        invalidate();
-
-        if (mListener != null) {
-            mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
-        }
-    }
-
-    @Override
-    public void onPageSelected(int position) {
-        if (mScrollState == ViewPager.SCROLL_STATE_IDLE) {
-            mCurrentPage = position;
-            invalidate();
-        }
-
-        if (mListener != null) {
-            mListener.onPageSelected(position);
-        }
-    }
-
-    @Override
-    public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener) {
-        mListener = listener;
-    }
-
-    @Override
-    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-        //Measure our width in whatever mode specified
-        final int measuredWidth = MeasureSpec.getSize(widthMeasureSpec);
-
-        //Determine our height
-        float height;
-        final int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);
-        if (heightSpecMode == MeasureSpec.EXACTLY) {
-            //We were told how big to be
-            height = MeasureSpec.getSize(heightMeasureSpec);
-        } else {
-            //Calculate the text bounds
-            mBounds.setEmpty();
-            mBounds.bottom = (int) (mPaintText.descent() - mPaintText.ascent());
-            height = mBounds.bottom - mBounds.top + mFooterLineHeight + mFooterPadding + mTopPadding;
-            if (mFooterIndicatorStyle != IndicatorStyle.None) {
-                height += mFooterIndicatorHeight;
-            }
-        }
-        final int measuredHeight = (int)height;
-
-        setMeasuredDimension(measuredWidth, measuredHeight);
-    }
-
-    @Override
-    public void onRestoreInstanceState(Parcelable state) {
-        SavedState savedState = (SavedState)state;
-        super.onRestoreInstanceState(savedState.getSuperState());
-        mCurrentPage = savedState.currentPage;
-        requestLayout();
-    }
-
-    @Override
-    public Parcelable onSaveInstanceState() {
-        Parcelable superState = super.onSaveInstanceState();
-        SavedState savedState = new SavedState(superState);
-        savedState.currentPage = mCurrentPage;
-        return savedState;
-    }
-
-    static class SavedState extends BaseSavedState {
-        int currentPage;
-
-        public SavedState(Parcelable superState) {
-            super(superState);
-        }
-
-        private SavedState(Parcel in) {
-            super(in);
-            currentPage = in.readInt();
-        }
-
-        @Override
-        public void writeToParcel(Parcel dest, int flags) {
-            super.writeToParcel(dest, flags);
-            dest.writeInt(currentPage);
-        }
-
-        @SuppressWarnings("UnusedDeclaration")
-        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
-            @Override
-            public SavedState createFromParcel(Parcel in) {
-                return new SavedState(in);
-            }
-
-            @Override
-            public SavedState[] newArray(int size) {
-                return new SavedState[size];
-            }
-        };
-    }
-
-    private CharSequence getTitle(int i) {
-        CharSequence title = mViewPager.getAdapter().getPageTitle(i);
-        if (title == null) {
-            title = EMPTY_TITLE;
-        }
-        return title;
-    }
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ShareContentCustomizeCallback.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ShareContentCustomizeCallback.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/ShareContentCustomizeCallback.java	(revision )
@@ -1,10 +0,0 @@
-package com.sharesdk.onekeyshare;
-
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.Platform.ShareParams;
-
-public interface ShareContentCustomizeCallback {
-
-	public void onShare(Platform platform, ShareParams paramsToShare);
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/Utils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/Utils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/Utils.java	(revision )
@@ -1,608 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.annotation.SuppressLint;
-import android.app.Activity;
-import android.app.ActivityManager;
-import android.content.ComponentName;
-import android.content.Context;
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.content.pm.ApplicationInfo;
-import android.content.pm.PackageInfo;
-import android.content.pm.PackageManager;
-import android.content.pm.PackageManager.NameNotFoundException;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
-import android.os.Environment;
-import android.telephony.TelephonyManager;
-import android.view.View;
-import android.view.inputmethod.InputMethodManager;
-import android.widget.ListView;
-
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.ActivityMgr;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.task.AppUpgradeService;
-import com.anniu.shandiandaojia.view.MyDialog;
-import com.google.gson.Gson;
-
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.ByteArrayInputStream;
-import java.io.ByteArrayOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.math.BigDecimal;
-import java.text.DateFormat;
-import java.text.ParseException;
-import java.text.SimpleDateFormat;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.Map;
-
-/**
- * @ClassName: Utils
- * @Description: 应用程序全局变量
- * @author zxl
- * @date 2014年10月27日 上午10:46:56
- */
-@SuppressLint("SimpleDateFormat")
-public class Utils {
-
-	public static final String VERSION_NAME = "versionName";
-	public static final String VERSION_CODE = "versionCode";
-	/** 客户端版本号，用于升级的，从androidManiferst取 */
-	public static String version_name;
-	/** 是否是测试环境 */
-	public static boolean IS_TEST;
-
-	/*** 获取手机型号 */
-	public static String getModel() {
-		return android.os.Build.MODEL;
-	}
-
-	/**
-	 * 获取操作系统的版本号
-	 * 
-	 * @return String 系统版本号
-	 */
-	public static String getSysRelease() {
-		return android.os.Build.VERSION.RELEASE;
-	}
-
-	/**
-	 * 初始化
-	 * 
-	 * @param context
-	 */
-	@SuppressWarnings("unused")
-	public static void init(Context context) {
-		PackageManager manager = context.getPackageManager();
-		PackageInfo info;
-		ApplicationInfo appInfo;
-		try {
-			info = manager.getPackageInfo(context.getPackageName(), 0);
-			appInfo = context.getPackageManager().getApplicationInfo(
-					context.getPackageName(), PackageManager.GET_META_DATA);
-			version_name = info.versionName;
-		} catch (NameNotFoundException e) {
-			MyLog.e("init", e.toString());
-		}
-		// 初始化对话框
-		DialogUtils.init();
-
-	}
-
-	/**
-	 * 加载isv调试插件
-	 */
-
-	public static TelephonyManager getTelephonyMgr(Context context) {
-		Object objTemp = context.getSystemService(Context.TELEPHONY_SERVICE);
-		if (objTemp != null && objTemp instanceof TelephonyManager) {
-			return (TelephonyManager) objTemp;
-		} else {
-			return null;
-		}
-	}
-
-	/**
-	 * 获取deviceid。首先取设备的imei,如果为空，则取uuid。
-	 * 
-	 * @param context
-	 * @return
-	 */
-	@SuppressWarnings("unused")
-	public static String getIMSI(Context context) {
-		Object objTemp = context.getSystemService(Context.TELEPHONY_SERVICE);
-		TelephonyManager phoneMgr;
-		String imsi = "";
-		String imei = "";
-		if (objTemp != null && objTemp instanceof TelephonyManager) {
-			phoneMgr = (TelephonyManager) objTemp;
-			imsi = phoneMgr.getSubscriberId();
-			imei = phoneMgr.getDeviceId();
-		}
-		return imsi != null ? imsi : "000000000000000";
-	}
-
-	/**
-	 * 
-	 * @param context
-	 * 
-	 *            上下文项
-	 * 
-	 * @param resId
-	 * 
-	 *            资源ID
-	 * 
-	 * @return 对应的bitmap
-	 */
-
-	public static Bitmap ReadBitmap(Context context, int resId) {
-
-		BitmapFactory.Options opt = new BitmapFactory.Options();
-
-		opt.inPreferredConfig = Bitmap.Config.RGB_565;
-
-		opt.inPurgeable = true;
-
-		opt.inInputShareable = true;
-
-		// 获取资源图片
-
-		InputStream is = context.getResources().openRawResource(resId);
-
-		return BitmapFactory.decodeStream(is, null, opt);
-
-	}
-
-	/**
-	 * 隐藏输入法（根据activity当前焦点所在控件的WindowToken）
-	 */
-	public static void hideSoftInput(Activity activity, View editText) {
-		View view;
-		if (editText == null) {
-			view = activity.getCurrentFocus();
-		} else {
-			view = editText;
-		}
-
-		if (view != null) {
-			InputMethodManager inputMethod = (InputMethodManager) activity
-					.getSystemService(Context.INPUT_METHOD_SERVICE);
-			inputMethod.hideSoftInputFromWindow(view.getWindowToken(), 0);
-		}
-	}
-
-	/**
-	 * sdcard是否可读写
-	 * 
-	 * @return
-	 */
-	public static boolean isSdcardReady() {
-		return Environment.MEDIA_MOUNTED.equals(Environment
-				.getExternalStorageState());
-	}
-
-	/**
-	 * 网络是否已连接
-	 * 
-	 * @param context
-	 * @return
-	 */
-	public static boolean isNetworkConnected(Context context) {
-		NetworkInfo networkInfo = ((ConnectivityManager) context
-				.getSystemService(Context.CONNECTIVITY_SERVICE))
-				.getActiveNetworkInfo();
-		return networkInfo != null && networkInfo.isConnected();
-	}
-
-	/**
-	 * 
-	 * @Title: getCurrentSystemTime
-	 * @Description: 获取当前系统时间
-	 * @param @return 设定文件
-	 * @return Long 返回类型
-	 * @throws
-	 */
-	public static Long getCurrentSystemTime() {
-		return Calendar.getInstance().getTimeInMillis();
-	}
-
-	/**
-	 * 取出当前的日期格式yyyyMMdd HH:mm:ss
-	 * 
-	 * @return
-	 */
-	public static String getCurrentTimeStr() {
-		Calendar curCalendar = Calendar.getInstance();
-		DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
-		return df.format(curCalendar.getTime());
-	}
-
-	/**
-	 * 给一个字符串的毫秒值，转换为时间 yyyy-MM-dd
-	 * 
-	 * @param time
-	 * @return
-	 */
-	public static String string2Time(String time) {
-		DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm");
-		return df.format(Long.parseLong(time));
-	}
-
-	/**
-	 * 计算两个日期之间相差的天数
-	 * 
-	 * @param smdate
-	 *            较小的时间
-	 * @param bdate
-	 *            较大的时间
-	 * @return 相差天数
-	 * @throws ParseException
-	 */
-	public static int daysBetween(Date smdate, Date bdate)
-			throws ParseException {
-		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
-		smdate = sdf.parse(sdf.format(smdate));
-		bdate = sdf.parse(sdf.format(bdate));
-		Calendar cal = Calendar.getInstance();
-		cal.setTime(smdate);
-		long time1 = cal.getTimeInMillis();
-		cal.setTime(bdate);
-		long time2 = cal.getTimeInMillis();
-		long between_days = (time2 - time1) / (1000 * 3600 * 24);
-		int diffDays = Integer.parseInt(String.valueOf(between_days));
-
-		return Math.abs(diffDays);
-	}
-
-	/**
-	 * 字符串的日期格式的计算
-	 */
-	public static int daysBetween(String smdate, String bdate)
-			throws ParseException {
-		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
-		Calendar cal = Calendar.getInstance();
-		cal.setTime(sdf.parse(smdate.toString()));
-		long time1 = cal.getTimeInMillis();
-		cal.setTime(sdf.parse(bdate.toString()));
-		long time2 = cal.getTimeInMillis();
-		long between_days = (time2 - time1) / (1000 * 3600 * 24);
-
-		return Integer.parseInt(String.valueOf(between_days));
-	}
-
-	/**
-	 * dip2px
-	 */
-	public static int dip2px(Context context, float dipValue) {
-		final float scale = context.getResources().getDisplayMetrics().density;
-		return (int) (dipValue * scale + 0.5f);
-	}
-
-	/**
-	 * px2dip
-	 */
-	public static int px2dip(Context context, float pxValue) {
-		final float scale = context.getResources().getDisplayMetrics().density;
-		return (int) (pxValue / scale + 0.5f);
-	}
-
-	/**
-	 * 获取listview 的item视图
-	 * 
-	 * @param pos
-	 * @param listView
-	 * @return
-	 */
-	public static View getViewByPosition(int pos, ListView listView) {
-		final int firstListItemPosition = listView.getFirstVisiblePosition();
-		final int lastListItemPosition = firstListItemPosition
-				+ listView.getChildCount() - 1;
-
-		if (pos < firstListItemPosition || pos > lastListItemPosition) {
-			return listView.getAdapter().getView(pos, null, listView);
-		} else {
-			final int childIndex = pos - firstListItemPosition;
-			return listView.getChildAt(childIndex);
-		}
-	}
-
-	/**
-	 * 显示更新APP弹窗
-	 * 
-	 * @param message
-	 * @param url
-	 */
-	public static void showUpdateDialog(final Context context, String message,
-			final String url, final boolean isForce) {
-		final Context mContext = context.getApplicationContext();
-		MyDialog.Builder builder = new MyDialog.Builder(context);
-		builder.setCancelable(!isForce);
-		builder.setMessage(message);
-		builder.setTitle("版本更新");
-		builder.setConfirmButton("现在升级", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				Intent intent = new Intent(App.getInstance(),
-						AppUpgradeService.class);
-				intent.putExtra("downloadUrl", url);
-				String apkFileName = url.substring(url.lastIndexOf("/") + 1);
-				intent.putExtra("apkFileName", apkFileName);
-				App.getInstance().startService(intent);
-				dialog.dismiss();
-				if (isForce) {
-					ActivityMgr.finishAllActivity(false);
-					// 退出程序
-					android.os.Process.killProcess(android.os.Process.myPid());
-					System.exit(1);
-				}
-			}
-		});
-
-		builder.setCancelButton("稍后升级",
-				new android.content.DialogInterface.OnClickListener() {
-					@Override
-					public void onClick(DialogInterface dialog, int which) {
-						dialog.dismiss();
-						if (isForce) {
-							ActivityMgr.finishAllActivity(false);
-							// 退出程序
-							android.os.Process.killProcess(android.os.Process
-									.myPid());
-							System.exit(1);
-						}
-					}
-				});
-		builder.create().show();
-	}
-
-	/**
-	 * 初始化
-	 * 
-	 * @param context
-	 */
-	@SuppressWarnings("unused")
-	public static Map<String, String> getVersion(Context context) {
-		Map<String, String> versionInfo = new HashMap<String, String>();
-		PackageManager manager = context.getPackageManager();
-		PackageInfo info;
-		ApplicationInfo appInfo;
-		try {
-			info = manager.getPackageInfo(context.getPackageName(), 0);
-			appInfo = context.getPackageManager().getApplicationInfo(
-					context.getPackageName(), PackageManager.GET_META_DATA);
-			versionInfo.put(VERSION_NAME, info.versionName);
-			versionInfo.put(VERSION_CODE, info.versionCode + "");
-		} catch (NameNotFoundException e) {
-			MyLog.e("getVersion", e.toString());
-		}
-		return versionInfo;
-	}
-
-	public static String toUnicode(String zhStr) {
-		StringBuffer unicode = new StringBuffer();
-		for (int i = 0; i < zhStr.length(); i++) {
-			char c = zhStr.charAt(i);
-			unicode.append("\\u" + Integer.toHexString(c));
-		}
-		return unicode.toString();
-	}
-
-	public static long lastClickTime;
-
-	/** 防止按钮连续点击 */
-	public static boolean isFastClick() {
-		long time = System.currentTimeMillis();
-		if (time - lastClickTime < 500) {
-			return true;
-		}
-		lastClickTime = time;
-		return false;
-	}
-
-	/**
-	 * 取出当前的日期格式yyyyMMdd
-	 * 
-	 * @return
-	 */
-	@SuppressWarnings("unused")
-	public static String getTimeFormatStr2(long time) {
-		Calendar curCalendar = Calendar.getInstance();
-		DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
-		return df.format(time);
-	}
-
-	/**
-	 * 取出当前的日期格式yyyyMMdd
-	 * 
-	 * @return
-	 */
-	@SuppressWarnings("unused")
-	public static String getTimeFormatStr3(long time) {
-		Calendar curCalendar = Calendar.getInstance();
-		DateFormat df = new SimpleDateFormat("yyyy.MM.dd");
-		return df.format(time);
-	}
-
-	/**
-	 * 取出当前的日期格式HH
-	 * 
-	 * @return
-	 */
-	@SuppressWarnings("unused")
-	public static String getCurrentTimeHHmmStr(long time) {
-		Calendar curCalendar = Calendar.getInstance();
-		DateFormat df = new SimpleDateFormat("HH");
-		return df.format(time);
-	}
-
-	/***
-	 * @Title: loginState
-	 * @Description: 登陆状态获取
-	 * @param @return
-	 * @return boolean
-	 * @throws
-	 */
-	public static boolean loginState() {
-		return SPUtils.getBoolean(ActivityMgr.mContext, GlobalInfo.KEY_ISLOGIN,
-				false);
-	}
-
-	/***
-	 * @Title: hidiInputMethodManager
-	 * @Description: 隐藏软键盘
-	 * @param @param v
-	 * @return void
-	 * @throws
-	 */
-	public static void hidiInputMethodManager(View v) {
-		InputMethodManager imm = (InputMethodManager) v.getContext()
-				.getSystemService(Context.INPUT_METHOD_SERVICE);
-		if (imm.isActive()) {
-			imm.hideSoftInputFromWindow(v.getApplicationWindowToken(), 0);
-		}
-	}
-
-	/***
-	 * @Title: isIMMShow
-	 * @Description: 判断键盘是否显示
-	 * @param @param v
-	 * @param @return
-	 * @return boolean
-	 * @throws
-	 */
-	public static boolean isIMMShow(View v) {
-		InputMethodManager imm = (InputMethodManager) v.getContext()
-				.getSystemService(Context.INPUT_METHOD_SERVICE);
-		return imm.isActive();
-	}
-
-	/**
-	 * 获取当前的系统时间转换为字符串
-	 * 
-	 * @return
-	 */
-	public static String getCurrentTime() {
-		long currentTimeMillis = System.currentTimeMillis();
-
-		return currentTimeMillis + "";
-	}
-
-	/**
-	 * 将InputStream转换成byte数组
-	 * 
-	 * @param in
-	 *            InputStream
-	 * @return byte[]
-	 * @throws IOException
-	 */
-	public static byte[] InputStreamTOByte(InputStream in) throws IOException {
-		ByteArrayOutputStream outStream = new ByteArrayOutputStream();
-		byte[] data = new byte[1024];
-		int count = -1;
-		while ((count = in.read(data, 0, 1024)) != -1)
-			outStream.write(data, 0, count);
-		data = null;
-		return outStream.toByteArray();
-	}
-
-	/**
-	 * 将String转换成InputStream
-	 * 
-	 * @param in
-	 * @return
-	 * @throws Exception
-	 */
-	public static InputStream StringTOInputStream(String in) throws Exception {
-		ByteArrayInputStream is = new ByteArrayInputStream(in.getBytes("utf-8"));
-		return is;
-	}
-
-	/***
-	 * @Title: getPrepayIdInfo
-	 * @Description: 转换json对象
-	 * @param @return 设定文件
-	 * @return PrepayIdInfo 返回类型
-	 * @throws
-	 */
-	public static PrepayIdInfo getPrepayIdInfo() {
-		PrepayIdInfo info;
-		Gson gson = new Gson();
-		String prepayStr = SPUtils.getString(ActivityMgr.mContext,
-				GlobalInfo.APP_ID, "");
-		JSONObject jj;
-		try {
-			jj = new JSONObject(prepayStr);
-			return info = gson.fromJson(jj.toString(), PrepayIdInfo.class);
-		} catch (JSONException e) {
-			e.printStackTrace();
-		}
-		return null;
-	}
-
-	/**
-	 * 获取当前Activity
-	 * 
-	 * @return
-	 */
-	public static String getCurrentActivity() {
-		String activityClassName = "";
-		ActivityManager am = (ActivityManager) ActivityMgr.getContext()
-				.getSystemService(Activity.ACTIVITY_SERVICE);
-		ComponentName cn = am.getRunningTasks(1).get(0).topActivity;
-		if ("com.anniu.shandiandaojia".equals(cn.getPackageName())) {
-			activityClassName = cn.getClassName();
-		}
-		return activityClassName;
-	}
-
-	/**
-	 * @Title: stringToInt
-	 * @Description: String to int
-	 * @param @param string
-	 * @param @return 设定文件
-	 * @return int 返回类型
-	 * @throws
-	 */
-	public static int stringToInt(String string) {
-		String str = string.substring(0, string.indexOf("."));
-		String str2 = string.substring(string.indexOf(".") + 1);
-		int length = str2.length();
-		if (length > 1) {
-			str += str2;
-		} else {
-			str += str2 + "0";
-		}
-		int intgeo = Integer.parseInt(str);
-		return intgeo;
-	}
-
-	/***
-	 * @Description: 提供精确的减法运算。
-	 * @param @param v1
-	 * @param @param v2
-	 */
-	public static double sub(double v1, double v2) {
-		BigDecimal b1 = new BigDecimal(Double.toString(v1));
-		BigDecimal b2 = new BigDecimal(Double.toString(v2));
-		return b1.subtract(b2).doubleValue();
-	}
-
-	/**
-	* @Description: 提供精确的加法运算。
-	* @param @param v1
-	* @param @param v2
-	 */
-	public static double add(double v1, double v2) {
-		BigDecimal b1 = new BigDecimal(Double.toString(v1));
-		BigDecimal b2 = new BigDecimal(Double.toString(v2));
-		return b1.add(b2).doubleValue();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/Event.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/Event.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/Event.java	(revision )
@@ -1,313 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-public class Event {
-
-	/* =================================================================== */
-	public static String KEY_GLOBAL_EVENT = "global_event";
-	public static String KEY_RESULT_BOOL = "result_bool";
-	public static String KEY_UPDATE_STRATEGY = "strategy";
-
-	/* =================================================================== */
-	/** 全局的UI事件: 显示全局的toast或者dialog时需要设置具体的 global event */
-	public static final int GLOBAL_UI = 1;
-
-	/** 登录成功事件 */
-	public static final int LOGIN_SUCCESS = GLOBAL_UI + 1;
-	/** 登录失败事件 */
-	public static final int LOGIN_FAILED = LOGIN_SUCCESS + 1;
-
-	/** 更新成功事件 */
-	public static final int UPDATE_SUCCESS = LOGIN_FAILED + 1;
-	/** 更新失败事件 */
-	public static final int UPDATE_FAILED = UPDATE_SUCCESS + 1;
-
-	/** 定位成功事件 */
-	public static final int GET_LOCATION_SUCCESS = UPDATE_FAILED + 1;
-	/** 定位失败事件 */
-	public static final int GET_LOCATION_FAILED = GET_LOCATION_SUCCESS + 1;
-
-	/** 通过地址定位成功事件 */
-	public static final int GET_LOCATION_ADDR_SUCCESS = GET_LOCATION_FAILED + 1;
-	/** 通过地址定位失败事件 */
-	public static final int GET_LOCATION_ADDR_FAILED = GET_LOCATION_ADDR_SUCCESS + 1;
-
-	/** 获取商铺首页信息成功事件 */
-	public static final int GET_SHOP_INFO_SUCCESS = GET_LOCATION_ADDR_FAILED + 1;
-	/** 获取商铺首页信息失败事件 */
-	public static final int GET_SHOP_INFO_FAILED = GET_SHOP_INFO_SUCCESS + 1;
-
-	/** 发送验证码成功事件 */
-	public static final int POST_SEND_VERFICATION_SUCCESS = GET_SHOP_INFO_FAILED + 1;
-	/** 发送验证码失败事件 */
-	public static final int POST_SEND_VERFICATION_FAILED = POST_SEND_VERFICATION_SUCCESS + 1;
-
-	/** 校验验证码并成功登录事件 */
-	public static final int POST_CHECK_OUT_VERFICATION_SUCCESS = POST_SEND_VERFICATION_FAILED + 1;
-	/** 校验验证码并成功失败事件 */
-	public static final int POST_CHECK_OUT_VERFICATION_FAILED = POST_CHECK_OUT_VERFICATION_SUCCESS + 1;
-
-	/** 获取商品详情成功事件 */
-	public static final int GET_GOODS_DETAILS_SUCCESS = POST_CHECK_OUT_VERFICATION_FAILED + 1;
-	/** 获取商品详情失败事件 */
-	public static final int GET_GOODS_DETAILS_FAILED = GET_GOODS_DETAILS_SUCCESS + 1;
-
-	/** 绑定水票成功事件 */
-	public static final int GET_BINDING_WATER_SUCESS = GET_GOODS_DETAILS_FAILED + 1;
-	/** 绑定水票失败事件 */
-	public static final int GET_BINDING_WATER_FAILED = GET_BINDING_WATER_SUCESS + 1;
-
-	/** 获取水票成功事件 */
-	public static final int GET_WATER_TICKET_SUCESS = GET_BINDING_WATER_FAILED + 1;
-	/** 获取水票失败事件 */
-	public static final int GET_WATER_TICKET_FAILED = GET_WATER_TICKET_SUCESS + 1;
-
-	/** 绑定代金券成功事件 */
-	public static final int GET_BINDING_VOUCHER_SUCESS = GET_WATER_TICKET_FAILED + 1;
-	/** 绑定代金券失败事件 */
-	public static final int GET_BINDING_VOUCHER_FAILED = GET_BINDING_VOUCHER_SUCESS + 1;
-
-	/** 获取代金券成功事件 */
-	public static final int GET_VOUCHER_TICKET_SUCESS = GET_BINDING_VOUCHER_FAILED + 1;
-	/** 获取代金券失败事件 */
-	public static final int GET_VOUCHER_TICKET_FAILED = GET_VOUCHER_TICKET_SUCESS + 1;
-
-	/** 获取个人中心设置成功事件 */
-	public static final int GET_PERSON_SETTING_SUCESS = GET_VOUCHER_TICKET_FAILED + 1;
-	/** 获取个人中心设置失败事件 */
-	public static final int GET_PERSON_SETTING_FAILED = GET_PERSON_SETTING_SUCESS + 1;
-
-	/** 保存个人中心姓名性别成功事件 */
-	public static final int POST_PERSON_NAME_SEX_SUCESS = GET_PERSON_SETTING_FAILED + 1;
-	/** 保存个人中心姓名性别失败事件 */
-	public static final int POST_PERSON_NAME_SEX_FAILED = POST_PERSON_NAME_SEX_SUCESS + 1;
-
-	/** 获取用户订单成功事件 */
-	public static final int GET_USER_ALLORDERS_SUCESS = POST_PERSON_NAME_SEX_FAILED + 1;
-	/** 获取用户订单失败事件 */
-	public static final int GET_USER_ALLORDERS_FAILED = GET_USER_ALLORDERS_SUCESS + 1;
-
-	/** 首页重新选择便利店成功事件 */
-	public static final int GET_SELECT_BROWER_SHOP_SUCESS = GET_USER_ALLORDERS_FAILED + 1;
-	/** 首页重新选择便利店失败事件 */
-	public static final int GET_SELECT_BROWER_SHOP_FAILED = GET_SELECT_BROWER_SHOP_SUCESS + 1;
-
-	/** 获取个人中心我的地址成功事件 */
-	public static final int GET_PERSON_FINDUSERLOC_SUCESS = GET_SELECT_BROWER_SHOP_FAILED + 1;
-	/** 获取个人中心我的地址失败事件 */
-	public static final int GET_PERSON_FINDUSERLOC_FAILED = GET_PERSON_FINDUSERLOC_SUCESS + 1;
-
-	/** 添加或删除/修改商品数量成功事件 */
-	public static final int INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS = GET_PERSON_FINDUSERLOC_FAILED + 1;
-	/** 添加或删除/修改商品数量失败事件 */
-	public static final int INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED = INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS + 1;
-
-	/** 修改用户收货信息--修改成功事件 */
-	public static final int POST_PERSON_EDITADDR_SUCESS = INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED + 1;
-	/** 修改用户收货信息--修改失败事件 */
-	public static final int POST_PERSON_EDITADDR_FAILED = POST_PERSON_EDITADDR_SUCESS + 1;
-
-	/** 修改用户收货信息--新增成功事件 */
-	public static final int POST_PERSON_INSERTADDR_SUCESS = POST_PERSON_EDITADDR_FAILED + 1;
-	/** 修改用户收货信息--新增失败事件 */
-	public static final int POST_PERSON_INSERTADDR_FAILED = POST_PERSON_INSERTADDR_SUCESS + 1;
-
-	/** 修改用户收货信息--修改默认收货地址成功事件 */
-	public static final int GET_PERSON_EDITDEFAULT_ADDR_SUCESS = POST_PERSON_INSERTADDR_FAILED + 1;
-	/** 修改用户收货信息--修改默认收货地址失败事件 */
-	public static final int GET_PERSON_EDITDEFAULT_ADDR_FAILED = GET_PERSON_EDITDEFAULT_ADDR_SUCESS + 1;
-
-	/** 获取购物车商品列表成功事件 */
-	public static final int GET_CART_LIST_SUCESS = GET_PERSON_EDITDEFAULT_ADDR_FAILED + 1;
-	/** 获取购物车商品列表失败事件 */
-	public static final int GET_CART_LIST_FAILED = GET_CART_LIST_SUCESS + 1;
-
-	/** 删除用户收货信息成功事件 */
-	public static final int POST_PERSON_DELETEADDR_SUCESS = GET_CART_LIST_FAILED + 1;
-	/** 删除用户收货信息失败事件 */
-	public static final int POST_PERSON_DELETEADDR_FAILED = POST_PERSON_DELETEADDR_SUCESS + 1;
-
-	/** 取消订单成功事件 */
-	public static final int POST_CANCEL_ORDER_SUCESS = POST_PERSON_DELETEADDR_FAILED + 1;
-	/** 取消订单失败事件 */
-	public static final int POST_CANCEL_ORDER_FAILED = POST_CANCEL_ORDER_SUCESS + 1;
-
-	/** 确认订单成功事件 */
-	public static final int GET_CONFIRM_ORDER_SUCESS = POST_CANCEL_ORDER_FAILED + 1;
-	/** 确认订单失败事件 */
-	public static final int GET_CONFIRM_ORDER_FAILED = GET_CONFIRM_ORDER_SUCESS + 1;
-
-	/** 获取订单详情成功事件 */
-	public static final int GET_ORDER_STATUS_SUCESS = GET_CONFIRM_ORDER_FAILED + 1;
-	/** 获取订单详情失败事件 */
-	public static final int GET_ORDER_STATUS_FAILED = GET_ORDER_STATUS_SUCESS + 1;
-
-	/** 获取商品详情页购物车商品列表成功事件 */
-	public static final int GET_CART_LIST_GOODS_DETAILS_SUCESS = GET_ORDER_STATUS_FAILED + 1;
-	/** 获取商品详情页购物车商品列表失败事件 */
-	public static final int GET_CART_LIST_GOODS_DETAILS_FAILED = GET_CART_LIST_GOODS_DETAILS_SUCESS + 1;
-
-	/** 获取购物车页面信息成功事件 */
-	public static final int GET_CART_INFO_SUCESS = GET_CART_LIST_GOODS_DETAILS_FAILED + 1;
-	/** 获取购物车页面信息失败事件 */
-	public static final int GET_CART_INFO_FAILED = GET_CART_INFO_SUCESS + 1;
-
-	/** 删除购物车一条商品成功事件 */
-	public static final int GET_DELETE_CART_GOOD_SUCESS = GET_CART_INFO_FAILED + 1;
-	/** 删除购物车一条商品失败事件 */
-	public static final int GET_DELETE_CART_GOOD_FAILED = GET_DELETE_CART_GOOD_SUCESS + 1;
-
-	/** 意见反馈成功事件 */
-	public static final int POST_SUBMITADVICE_SUCESS = GET_DELETE_CART_GOOD_FAILED + 1;
-	/** 意见反馈失败事件 */
-	public static final int POST_SUBMITADVICE_FAILED = POST_SUBMITADVICE_SUCESS + 1;
-
-	/** 通过分类id获取商品信息成功事件 */
-	public static final int GET_GOODS_BY_TYPE_SUCESS = POST_SUBMITADVICE_FAILED + 1;
-	/** 通过分类id获取商品信息失败事件 */
-	public static final int GET_GOODS_BY_TYPE_FAILED = GET_GOODS_BY_TYPE_SUCESS + 1;
-
-	/** 投诉商铺成功事件 */
-	public static final int POST_COMPLAINORDER_SUCESS = GET_GOODS_BY_TYPE_FAILED + 1;
-	/** 投诉商铺失败事件 */
-	public static final int POST_COMPLAINORDER_FAILED = POST_COMPLAINORDER_SUCESS + 1;
-
-	/** 通过分类首次进入显示 全部商品成功事件 */
-	public static final int GET_GOODS_SUCESS = POST_COMPLAINORDER_FAILED + 1;
-	/** 通过分类首次进入显示 全部商品失败事件 */
-	public static final int GET_GOODS_FAILED = GET_GOODS_SUCESS + 1;
-	
-	/** 结算页数据初始化成功事件 */
-	public static final int GET_ACKORDER_SUCESS = GET_GOODS_FAILED + 1;
-	/** 结算页数据初始化失败事件 */
-	public static final int GET_ACKORDER_FAILED = GET_ACKORDER_SUCESS + 1;
-
-	/** 获取分类页购物车商品列表成功事件 */
-	public static final int GET_CATEGORY_CART_LIST_SUCESS = GET_ACKORDER_FAILED + 1;
-	/** 获取分类页购物车列表失败事件 */
-	public static final int GET_CATEGORY_CART_LIST_FAILED = GET_CATEGORY_CART_LIST_SUCESS + 1;
-	
-	/** 版本检查更新成功事件 */
-	public static final int GET_VERSION_SUCESS = GET_CATEGORY_CART_LIST_FAILED + 1;
-	/**版本检查更新失败事件 */
-	public static final int GET_VERSION_FAILED = GET_VERSION_SUCESS + 1;
-	
-	/** 获取优惠券成功事件 */
-	public static final int GET_FINDUSERCOUPON_SUCESS = GET_VERSION_FAILED + 1;
-	/**获取优惠券失败事件 */
-	public static final int GET_FINDUSERCOUPON_FAILED = GET_FINDUSERCOUPON_SUCESS + 1;
-	
-	/** 获取优惠券成功事件 */
-	public static final int GET_FINDWATERTICKET_SUCESS = GET_FINDUSERCOUPON_FAILED + 1;
-	/**获取优惠券失败事件 */
-	public static final int GET_FINDWATERTICKET_FAILED = GET_FINDWATERTICKET_SUCESS + 1;
-	
-	/** 获取购买水漂成功事件 */
-	public static final int GET_WATER_FIND_SUCESS = GET_FINDWATERTICKET_FAILED + 1;
-	/** 获取购买水漂失败事件 */
-	public static final int GET_WATER_FIND_FAILED = GET_WATER_FIND_SUCESS + 1;
-	
-	/**生成 购买水票订单成功事件 */
-	public static final int POST_WATER_CONFIRED_SUCESS = GET_WATER_FIND_FAILED + 1;
-	/** 生成 购买水票订单失败事件 */
-	public static final int POST_WATER_CONFIRED_FAILED = POST_WATER_CONFIRED_SUCESS + 1;
-	
-	/**获取水票详情成功事件 */
-	public static final int GET_WATER_DETAIL_SUCESS = POST_WATER_CONFIRED_FAILED + 1;
-	/**获取水票详情失败事件 */
-	public static final int GET_WATER_DETAIL_FAILED = GET_WATER_DETAIL_SUCESS + 1;
-	
-	/**购买水票成功事件 */
-	public static final int GET_WATER_SUBMIT_SUCESS = GET_WATER_DETAIL_FAILED + 1;
-	/**购买水票失败事件 */
-	public static final int GET_WATER_SUBMIT_FAILED = GET_WATER_SUBMIT_SUCESS + 1;
-	
-	/**进入一键送水成功事件 */
-	public static final int GET_WATER_USETICKETS_SUCESS = GET_WATER_SUBMIT_FAILED + 1;
-	/**进入一键送水失败事件 */
-	public static final int GET_WATER_USETICKETS_FAILED = GET_WATER_USETICKETS_SUCESS + 1;
-	
-	/**一键送水提交订单成功事件 */
-	public static final int GET_WATER_WATERORDER_SUCESS = GET_WATER_USETICKETS_FAILED + 1;
-	/**一键送水提交订单失败事件 */
-	public static final int GET_WATER_WATERORDER_FAILED = GET_WATER_WATERORDER_SUCESS + 1;
-	
-	/**进入搜索界面热词成功事件 */
-	public static final int GET_INDEX_SEARCHHOTS_SUCESS = GET_WATER_WATERORDER_FAILED + 1;
-	/**进入搜索界面热词失败事件 */
-	public static final int GET_INDEX_SEARCHHOTS_FAILED = GET_INDEX_SEARCHHOTS_SUCESS + 1;
-	
-	/**搜索商品成功事件 */
-	public static final int GET_SEARCH_GOODS_SUCESS = GET_INDEX_SEARCHHOTS_FAILED + 1;
-	/**搜索商品失败事件 */
-	public static final int GET_SEARCH_GOODS_FAILED = GET_SEARCH_GOODS_SUCESS + 1;
-	
-	/**获取个人中心我的水票成功事件 */
-	public static final int GET_PERSON_FINDTICKETS_SUCESS = GET_SEARCH_GOODS_FAILED + 1;
-	/**获取个人中心我的水票失败事件 */
-	public static final int GET_PERSON_FINDTICKETS_FAILED = GET_PERSON_FINDTICKETS_SUCESS + 1;
-	
-	/**用水票购买水成功事件 */
-	public static final int POST_WATER_ORDER_SUCESS = GET_PERSON_FINDTICKETS_FAILED + 1;
-	/**用水票购买水失败事件 */
-	public static final int POST_WATER_ORDER_FAILED = POST_WATER_ORDER_SUCESS + 1;
-	
-	/** 分类页重新选择便利店成功事件 */
-	public static final int GET_SELECT_BROWER_SHOP_CATEGORY_SUCESS = GET_PERSON_FINDTICKETS_FAILED + 1;
-	/** 分类页新选择便利店失败事件 */
-	public static final int GET_SELECT_BROWER_SHOP_CATEGORY_FAILED = GET_SELECT_BROWER_SHOP_CATEGORY_SUCESS + 1;
-	
-	/** 普通订单提交成功事件 */
-	public static final int POST_ORDER_INSERTORDER_SUCESS = GET_SELECT_BROWER_SHOP_CATEGORY_FAILED + 1;
-	/** 普通订单提交失败事件 */
-	public static final int POST_ORDER_INSERTORDER_FAILED = POST_ORDER_INSERTORDER_SUCESS + 1;
-	
-	/** 点击切换水票成功事件 */
-	public static final int GET_WATER_SELECTEDTICKET_SUCESS = POST_ORDER_INSERTORDER_FAILED + 1;
-	/** 点击切换水票失败事件 */
-	public static final int GET_WATER_SELECTEDTICKET_FAILED = GET_WATER_SELECTEDTICKET_SUCESS + 1;
-	
-	/** 触发优惠券成功事件 */
-	public static final int GET_ORDER_FINDCOUPON_SUCESS = GET_WATER_SELECTEDTICKET_FAILED + 1;
-	/** 触发优惠券失败事件 */
-	public static final int GET_ORDER_FINDCOUPON_FAILED = GET_ORDER_FINDCOUPON_SUCESS + 1;
-	
-	/** WX支付获取prepayid成功事件 */
-	public static final int GET_PREPAY_ID_SUCESS = GET_ORDER_FINDCOUPON_FAILED + 1;
-	/** WX支付获取prepayid失败事件 */
-	public static final int GET_PREPAY_ID_FAILED = GET_PREPAY_ID_SUCESS + 1;
-	
-	/** WX支付回调成功事件 */
-	public static final int GET_PREPAY_CHECKPAY_SUCESS = GET_PREPAY_ID_FAILED + 1;
-	/** WX支付回调失败事件 */
-	public static final int GET_PREPAY_CHECKPAY_FAILED = GET_PREPAY_CHECKPAY_SUCESS + 1;
-
-	/** WX支付获取prepayid水票页面成功事件 */
-	public static final int GET_PREPAY_ID_WATER_SUCESS = GET_PREPAY_CHECKPAY_FAILED + 1;
-	/** WX支付获取prepayid水票页面失败事件 */
-	public static final int GET_PREPAY_ID_WATER_FAILED = GET_PREPAY_ID_WATER_SUCESS + 1;
-	
-	/** 提交系統日志成功事件 */
-	public static final int POST_ERROR_LOG_SUCESS = GET_PREPAY_ID_WATER_FAILED + 1;
-	/** 提交系統日志失败事件 */
-	public static final int POST_ERROR_LOG_FAILED = POST_ERROR_LOG_SUCESS + 1;
-
-	/** WX支付详情页面获取prepayid成功事件 */
-	public static final int GET_PREPAY_ID_DETAIL_SUCESS = POST_ERROR_LOG_FAILED + 1;
-	/** WX支付详情页面获取prepayid失败事件 */
-	public static final int GET_PREPAY_ID_DETAIL_FAILED = GET_PREPAY_ID_DETAIL_SUCESS + 1;
-
-	/** 订单详情页面取消订单成功事件 */
-	public static final int POST_CANCEL_ORDER_DETAIL_SUCESS = GET_PREPAY_ID_DETAIL_FAILED + 1;
-	/** 订单详情页面取消订单失败事件 */
-	public static final int POST_CANCEL_ORDER_DETAIL_FAILED = POST_CANCEL_ORDER_DETAIL_SUCESS + 1;
-
-	/** WX支付获取prepayid成功事件 */
-	public static final int GET_PREPAY_ID_DETAIL_TRUE_SUCESS = POST_CANCEL_ORDER_DETAIL_FAILED + 1;
-	/** WX支付获取prepayid失败事件 */
-	public static final int GET_PREPAY_ID_DETAIL_TRUE_FAILED = GET_PREPAY_ID_DETAIL_TRUE_SUCESS + 1;
-
-	/** WX支付获取prepayid成功事件 */
-	public static final int GET_PREPAY_ID_DETAIL_ADAPTER_SUCESS = GET_PREPAY_ID_DETAIL_TRUE_FAILED + 1;
-	/** WX支付获取prepayid失败事件 */
-	public static final int GET_PREPAY_ID_DETAIL_ADAPTER_FAILED = GET_PREPAY_ID_DETAIL_ADAPTER_SUCESS + 1;
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SelectShopReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SelectShopReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SelectShopReq.java	(revision )
@@ -1,75 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: SelectShopReq
- * @Description: 重新选择店铺
- * @author zxl
- * @date 2015年6月5日 下午2:11:16
- */
-public class SelectShopReq extends HttpReq {
-
-	/** 精度 **/
-	private String lng;
-	/** 纬度 **/
-	private String lat;
-	/** 首页目前访问的商店code **/
-	private int shopcode;
-	/** 用户code 不填写，后台默认值为0 **/
-	private int usercode;
-
-	public SelectShopReq(int reqId, String lng, String lat, int shopcode,
-			int usercode) {
-		super();
-		this.id = reqId;
-		this.lng = lng;
-		this.lat = lat;
-		this.shopcode = shopcode;
-		this.usercode = usercode;
-	}
-
-	public String getLng() {
-		return lng;
-	}
-
-	public void setLng(String lng) {
-		this.lng = lng;
-	}
-
-	public String getLat() {
-		return lat;
-	}
-
-	public void setLat(String lat) {
-		this.lat = lat;
-	}
-
-	public int getShopcode() {
-		return shopcode;
-	}
-
-	public void setShopcode(int shopcode) {
-		this.shopcode = shopcode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?lng=" + lng + "&lat=" + lat + "&shopcode=" + shopcode
-				+ "&usercode=" + usercode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FeedBackActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FeedBackActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FeedBackActivity.java	(revision )
@@ -1,101 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/**
- * @ClassName: FeedBackActivity
- * @Description: 意见反馈
- * @author YY
- * @date 2015年5月30日 下午6:58:44
- */
-public class FeedBackActivity extends BaseActivity {
-	private TextView titleBarTv;// 界面标题
-	private Button bt_commit;
-	private EditText et_content;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId() == R.id.title_bar_left) {
-			finish();
-		} else if (v.getId() == R.id.bt_commit) {
-			int userCode = SPUtils.getInt(FeedBackActivity.this,GlobalInfo.KEY_USERCODE, 0);
-			String content = et_content.getText().toString().trim();
-			if (TextUtils.isEmpty(content)) {
-				MyToast.show(this, "意见不能为空！");
-				return;
-			}
-			postFeedBack(userCode, content);
-		}
-	}
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_user_feedback);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("反馈意见");
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		bt_commit = (Button) findViewById(R.id.bt_commit);
-		bt_commit.setOnClickListener(this);
-		et_content = (EditText) findViewById(R.id.et_content);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.POST_SUBMITADVICE_SUCESS:// 意见反馈成功事件
-			MyToast.show(FeedBackActivity.this, "反馈成功！");
-			finish();
-			break;
-		case Event.POST_SUBMITADVICE_FAILED:// 意见反馈失败事件
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	/** 意见反馈 */
-	private void postFeedBack(int userCode, String content) {
-		Intent intent = new Intent(UserLogic.ACTION_POST_SUBMITADVICE);
-		intent.putExtra(UserLogic.EXTRA_USER_CODE, userCode);
-		intent.putExtra(UserLogic.EXTRA_SUBMITADVICE, content);
-		sendAction(intent);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.POST_SUBMITADVICE_SUCESS,
-				Event.POST_SUBMITADVICE_FAILED,
-				Event.POST_COMPLAINORDER_SUCESS,
-				Event.POST_COMPLAINORDER_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WelcomeActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WelcomeActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WelcomeActivity.java	(revision )
@@ -1,88 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.os.Handler;
-import android.os.Message;
-import android.view.View;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.logic.UpdateLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.umeng.analytics.AnalyticsConfig;
-import com.umeng.analytics.MobclickAgent;
-
-/**
- * @ClassName: WelcomeActivity
- * @Description: 欢迎页
- * @author zxl
- * @date 2015年5月7日 下午2:02:12
- */
-public class WelcomeActivity extends BaseActivity {
-
-	@Override
-	public void onClick(View v) {
-	}
-
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_splash);
-		// 获取屏幕宽高
-		App.getInstance().initDisplay();
-		MobclickAgent.updateOnlineConfig(this);
-		AnalyticsConfig.enableEncrypt(false);
-		sendUpdateAction();
-		
-		new Handler(new Handler.Callback() {
-			// 1 首先会展示欢迎界面。
-			// 2 判断当前用户是第一次进入app还是第二次进入app。
-			// 3 如果是第一次进入app的话，就要进入到引导界面。如果是第二次进入app的话就直接进入到主页面。
-			
-			@Override
-			public boolean handleMessage(Message msg) {
-				if (SPUtils.getBoolean(WelcomeActivity.this,GlobalInfo.IS_FIRST, false)) {
-					boolean isLocation = SPUtils.getBoolean(WelcomeActivity.this, GlobalInfo.HAS_LOCATION, false);
-					if (isLocation) {
-						startActivity(new Intent(WelcomeActivity.this,MainActivity.class));
-					}else{
-						startActivity(new Intent(WelcomeActivity.this,LocationActivity.class));
-					}
-				} else {
-					startActivity(new Intent(WelcomeActivity.this,GuaidActivity.class));
-					SPUtils.saveBoolean(WelcomeActivity.this,GlobalInfo.IS_FIRST, true);
-				}
-				finish();
-				return true;
-			}
-		}).sendEmptyMessageDelayed(0, 3000);
-	}
-
-	/**自动升级*/
-	private void sendUpdateAction() {
-		Intent intent = new Intent();
-		intent.setAction(UpdateLogic.ACTION_GET_UPDATEINFO);
-		intent.putExtra(UpdateLogic.KEY_UPDATE_MODE,UpdateLogic.UPDATE_STRATEGY_AUTO);
-		intent.putExtra(UpdateLogic.KEY_VERSION_NAME, Utils.version_name);
-		sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/App.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/App.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/app/App.java	(revision )
@@ -1,312 +0,0 @@
-package com.anniu.shandiandaojia.app;
-
-import android.annotation.SuppressLint;
-import android.app.Application;
-import android.app.Service;
-import android.content.BroadcastReceiver;
-import android.content.ComponentName;
-import android.content.Context;
-import android.content.Intent;
-import android.content.IntentFilter;
-import android.os.Bundle;
-import android.os.Handler;
-import android.os.Vibrator;
-import android.util.DisplayMetrics;
-import android.widget.Toast;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.ActivityMgr;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.base.event.MultiHashMap;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.logic.UpdateLogic;
-import com.anniu.shandiandaojia.service.HttpService;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyLog;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.ToastBasic;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.baidu.location.BDLocation;
-import com.baidu.location.BDLocationListener;
-import com.baidu.location.GeofenceClient;
-import com.baidu.location.LocationClient;
-import com.lidroid.xutils.DbUtils;
-import com.lidroid.xutils.DbUtils.DbUpgradeListener;
-import com.nostra13.universalimageloader.cache.disc.impl.UnlimitedDiskCache;
-import com.nostra13.universalimageloader.cache.disc.naming.Md5FileNameGenerator;
-import com.nostra13.universalimageloader.cache.memory.impl.UsingFreqLimitedMemoryCache;
-import com.nostra13.universalimageloader.core.ImageLoader;
-import com.nostra13.universalimageloader.core.ImageLoaderConfiguration;
-import com.nostra13.universalimageloader.core.assist.QueueProcessingType;
-import com.nostra13.universalimageloader.utils.StorageUtils;
-import com.umeng.analytics.MobclickAgent;
-
-import java.io.File;
-import java.util.ArrayList;
-import java.util.HashSet;
-import java.util.Set;
-
-import cn.jpush.android.api.JPushInterface;
-
-@SuppressLint("NewApi")
-public class App extends Application {
-	protected String TAG = "App";
-	private static final MultiHashMap<Integer, BaseActivity> observers = new MultiHashMap<Integer, BaseActivity>(12);
-	private Handler mUIHandler = new Handler();
-	private CommonReceiver mReceiver;
-	private IntentFilter mFilter;
-	private ComponentName mNameYPKService;
-	private static App mApp;
-	
-	public static ImageLoader mImageLoader = ImageLoader.getInstance();
-	private ImageLoaderConfiguration imageLoaderConfig = null;
-	private DbUtils mDbUtils = null;
-	
-	public LocationClient mLocationClient;
-	public GeofenceClient mGeofenceClient;
-	public MyLocationListener mMyLocationListener;
-	public Vibrator mVibrator;
-	public static int windowHeight;
-	public static int windowWidth;
-	boolean isJpushInit = false;
-	boolean isUmengInit = false;
-	
-	@Override
-	public void onCreate() {
-		super.onCreate();
-		mApp = this;
-		ActivityMgr.setContext(this);
-		Utils.init(this);
-		initJpush();
-		initLocation();
-		initHttpUtils();
-		initImgLoader();
-		initUmeng();
-//		initDb();
-		//注册App异常崩溃处理器
-        Thread.setDefaultUncaughtExceptionHandler(AppException.getAppExceptionHandler());
-	}
-	
-	public static App getInstance() {
-		return mApp;
-	}
-	
-	private void initHttpUtils() {
-		mNameYPKService = new ComponentName(this, HttpService.class);
-		mReceiver = new CommonReceiver();
-		mFilter = new IntentFilter(HttpService.ACTION_UPDATE_UI);
-		registerReceiver(mReceiver, mFilter);
-	}
-
-	private void initLocation() {
-		mLocationClient = new LocationClient(this.getApplicationContext());
-		mMyLocationListener = new MyLocationListener();
-		mLocationClient.registerLocationListener(mMyLocationListener);
-		mGeofenceClient = new GeofenceClient(getApplicationContext());
-		mVibrator =(Vibrator)getApplicationContext().getSystemService(Service.VIBRATOR_SERVICE);
-	}
-	
-	private void initUmeng() {
-		if(!isUmengInit){
-			// 关闭友盟的自动统计，改为自定义统计
-			MobclickAgent.setDebugMode(true);
-			MobclickAgent.openActivityDurationTrack(false);
-			isUmengInit = true;
-		}
-	}
-
-	private void initJpush() {
-		if(!isJpushInit){
-			// 初始化Jpush SDK
-			JPushInterface.setDebugMode(true);
-			JPushInterface.init(this);
-			
-			Set<String> tags = new HashSet<String>();
-			tags.add(Utils.getVersion(this).get(Utils.VERSION_NAME).replace(".", "_"));
-			if (Utils.loginState()) {
-				String uid = SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0) + "";
-				if (!"".equals(uid)) {
-					JPushInterface.setAliasAndTags(ActivityMgr.getContext(), uid, tags);
-				} else {
-					JPushInterface.setAliasAndTags(this, Utils.getIMSI(this), tags);
-				}
-			} else {
-				JPushInterface.setAliasAndTags(this, Utils.getIMSI(this), tags);
-			}
-			isJpushInit = true;
-		}
-	}
-	
-	/*** 初始化Db */
-	private void initDb(){
-		if(mDbUtils == null){
-			mDbUtils = DbUtils.create(this,"shandiandaojia", 1, new UpgradeListener());
-		}
-	}
-	
-	/*** 获取Db实例 **/
-	public DbUtils getDbUtils() {
-		if(mDbUtils == null){
-			initDb();
-		}
-		return mDbUtils;
-	}
-
-	public static ImageLoader initImageLoader(Context context) {
-		App.getInstance().initImgLoader();
-		mImageLoader.clearMemoryCache();
-		return mImageLoader;
-	}
-	
-	/*** 初始化ImageLoader */
-	@SuppressWarnings("deprecation")
-	public void initImgLoader(){
-		if(mImageLoader==null){
-			mImageLoader = ImageLoader.getInstance();
-		}
-		if(imageLoaderConfig == null || !mImageLoader.isInited()){
-			File cacheDir = StorageUtils.getOwnCacheDirectory(getApplicationContext(), "yopark/imageCache"); 
-			imageLoaderConfig = new ImageLoaderConfiguration.Builder(
-					getApplicationContext())
-					.denyCacheImageMultipleSizesInMemory()
-					.memoryCacheExtraOptions(640, 800)// 设定内存图片缓存大小限制，不设置默认为屏幕的宽高
-					.memoryCache(new UsingFreqLimitedMemoryCache(10 * 1024 *1024))// 设定内存缓存为弱缓存
-					// .memoryCacheSize(5 * 1024 * 1024)// 缓存到内存的最大数据
-					.discCacheSize(50 * 1024 * 1024)// 缓存到文件的最大数据
-					.discCacheFileCount(1000)// 文件数量
-					.discCache(new UnlimitedDiskCache(cacheDir))
-					.discCacheFileNameGenerator(new Md5FileNameGenerator())
-					.threadPoolSize(5).threadPriority(Thread.NORM_PRIORITY - 1)
-					.tasksProcessingOrder(QueueProcessingType.LIFO).build();
-			mImageLoader.init(imageLoaderConfig);// 初始化ImageLoader的与配置。
-		}
-	}
-
-	/*** 获得屏幕的高和宽 */
-	public void initDisplay() {
-		DisplayMetrics dm = getResources().getDisplayMetrics();
-		windowHeight = dm.heightPixels;
-		windowWidth = dm.widthPixels;
-	}
-	
-	/*** 发送请求 */
-	public void sendAction(Intent intent) {
-		if (intent != null) {
-			intent.setComponent(mNameYPKService);
-			startService(intent);
-		}
-	}
-
-	/*** 添加监听 */
-	public void addListener(BaseActivity listener, int... eventIds) {
-		for (int eventId : eventIds) {
-			observers.put(eventId, listener);
-		}
-	}
-
-	/*** 移除监听 */
-	public void removeListener(BaseActivity listener) {
-		observers.removeValue(listener);
-	}
-
-	public void notify(int eventId, Bundle bundle) {
-		synchronized (this) {
-			ArrayList<BaseActivity> ls = observers.get(eventId);
-			if (ls != null) {
-				BaseActivity[] arrays = new BaseActivity[ls.size()];
-				ls.toArray(arrays);
-				for (BaseActivity observer : arrays) {
-					if (observer != null) {
-						try {
-							observer.onNotify(eventId, bundle);
-						} catch (Exception e) {
-							MyLog.e(this.getClass().getSimpleName(), e.toString());
-						}
-					}
-				}
-			}
-		}
-	}
-
-	/*** 接收网络请求回来的数据 */
-	private class CommonReceiver extends BroadcastReceiver {
-
-		@Override
-		public void onReceive(Context context, Intent intent) {
-			final int eventId = intent.getIntExtra(HttpService.EXTRA_EVENT_ID,-1);
-			final Bundle bundle = intent.getExtras();
-			if (eventId == Event.UPDATE_SUCCESS) {
-				mUIHandler.post(new Runnable() {
-					public void run() {
-						try {
-							onUpdateUIEvent(bundle);
-						} catch (Exception e) {
-							MyLog.e(TAG,"CommonReceiver mUIHandler e:"+ e.toString());
-						}
-					}
-				});
-			}else if (eventId == Event.UPDATE_FAILED) {
-				String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-				MyToast.show(ActivityMgr.mContext, notice);
-			} else {
-				App.this.notify(eventId, bundle);
-			}
-		}
-	}
-
-	/*** app更新 */
-	@SuppressWarnings("unused")
-	public void onUpdateUIEvent(Bundle bundle) {
-		int isNewVersion = bundle.getInt(UpdateLogic.KEY_IS_NEW_VERSION);
-		int mode = bundle.getInt(UpdateLogic.EXTRA_CONTOL_TYPE);
-		String apkName = bundle.getString(UpdateLogic.KEY_VERSION_NAME, "");
-		String serverAppDownUrl = bundle.getString(UpdateLogic.EXTRA_VERSION_URL, "");
-		String apkDes = bundle.getString(UpdateLogic.EXTRA_DISCRIPT, "");
-		if (isNewVersion == 1) {
-			Utils.showUpdateDialog(ActivityMgr.mCurActivity, apkDes, serverAppDownUrl, false);
-		}else{
-			if (mode == UpdateLogic.UPDATE_STRATEGY_USER) {
-				ToastBasic.showToast(this, R.string.click_no_update,Toast.LENGTH_SHORT);
-			}
-		}
-	}
-	
-	/*** 数据库升级 */
-	class UpgradeListener implements DbUpgradeListener{
-
-		@Override
-		public void onUpgrade(DbUtils db, int oldVersion, int newVersion) {
-			if(oldVersion == 1){
-				
-			}
-		}
-	}
-	
-	public double lat = 0;
-	public double lon = 0;
-	
-	/*** 实现实位回调监听 */
-	public class MyLocationListener implements BDLocationListener {
-
-		@Override
-		public void onReceiveLocation(BDLocation location) {
-			lat = location.getLatitude();
-			lon = location.getLongitude();
-			sendLocationAction();
-		}
-	}
-	
-	/*** 发送定位请求 */
-	private void sendLocationAction(){
-		Intent intent = new Intent();
-		intent.setAction(LocationLogic.ACTION_GET_LOCATION);
-		intent.putExtra(LocationLogic.EXTRA_LNG, lon+"");
-		intent.putExtra(LocationLogic.EXTRA_LAT, lat+"");
-		intent.putExtra(LocationLogic.EXTRA_PAGENUM, 1);
-		intent.putExtra(LocationLogic.EXTRA_PAGESIZE, 20);
-		sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/PagerSlidingTabStrip.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/PagerSlidingTabStrip.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/PagerSlidingTabStrip.java	(revision )
@@ -1,554 +0,0 @@
-/*
- * Copyright (C) 2013 Andreas Stuetz <andreas.stuetz@gmail.com>
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.anniu.shandiandaojia.view;
-
-import android.annotation.SuppressLint;
-import android.content.Context;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Paint;
-import android.graphics.Paint.Style;
-import android.graphics.Typeface;
-import android.os.Build;
-import android.os.Parcel;
-import android.os.Parcelable;
-import android.support.v4.view.ViewPager;
-import android.support.v4.view.ViewPager.OnPageChangeListener;
-import android.util.AttributeSet;
-import android.util.DisplayMetrics;
-import android.util.TypedValue;
-import android.view.Gravity;
-import android.view.View;
-import android.view.ViewTreeObserver.OnGlobalLayoutListener;
-import android.widget.HorizontalScrollView;
-import android.widget.ImageButton;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-
-import java.util.Locale;
-
-@SuppressLint("NewApi")
-public class PagerSlidingTabStrip extends HorizontalScrollView {
-
-	public interface IconTabProvider {
-		public int getPageIconResId(int position);
-	}
-
-	// @formatter:off
-	private static final int[] ATTRS = new int[] { android.R.attr.textSize,
-			android.R.attr.textColor };
-	// @formatter:on
-
-	private LinearLayout.LayoutParams defaultTabLayoutParams;
-	private LinearLayout.LayoutParams expandedTabLayoutParams;
-
-	private final PageListener pageListener = new PageListener();
-	public OnPageChangeListener delegatePageListener;
-
-	private LinearLayout tabsContainer;
-	private ViewPager pager;
-
-	private int tabCount;
-
-	private int currentPosition = 0;
-	private float currentPositionOffset = 0f;
-
-	private Paint rectPaint;
-	private Paint dividerPaint;
-
-	private int indicatorColor = 0xFF666666;
-	private int underlineColor = 0x1A000000;
-	private int dividerColor = 0x1A000000;
-	// 把分割线颜色设置为透明
-	// private int dividerColor = 0x00000000;
-
-	private boolean shouldExpand = false;
-	private boolean textAllCaps = true;
-
-	private int scrollOffset = 52;
-	private int indicatorHeight = 4;
-	private int underlineHeight = 2;
-	private int dividerPadding = 12;
-	private int tabPadding = 24;
-	private int dividerWidth = 1;
-
-	private int tabTextSize = 16;
-	private int tabTextColor = 0xFF666666;
-	private int tabTextColorSelected = 0xFFFF4D4D;
-	private Typeface tabTypeface = null;
-	private int tabTypefaceStyle = Typeface.BOLD;
-
-	private int lastScrollX = 0;
-
-	private int tabBackgroundResId = R.drawable.background_tab;
-
-	private Locale locale;
-
-	public PagerSlidingTabStrip(Context context) {
-		this(context, null);
-	}
-
-	public PagerSlidingTabStrip(Context context, AttributeSet attrs) {
-		this(context, attrs, 0);
-	}
-
-	public PagerSlidingTabStrip(Context context, AttributeSet attrs,
-			int defStyle) {
-		super(context, attrs, defStyle);
-
-		setFillViewport(true);
-		setWillNotDraw(false);
-
-		tabsContainer = new LinearLayout(context);
-		tabsContainer.setOrientation(LinearLayout.HORIZONTAL);
-		tabsContainer.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
-		addView(tabsContainer);
-
-		DisplayMetrics dm = getResources().getDisplayMetrics();
-
-		scrollOffset = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, scrollOffset, dm);
-		indicatorHeight = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, indicatorHeight, dm);
-		underlineHeight = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, underlineHeight, dm);
-		dividerPadding = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dividerPadding, dm);
-		tabPadding = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, tabPadding, dm);
-		dividerWidth = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dividerWidth, dm);
-		tabTextSize = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, tabTextSize, dm);
-
-		// get system attrs (android:textSize and android:textColor)
-		TypedArray a = context.obtainStyledAttributes(attrs, ATTRS);
-		tabTextSize = a.getDimensionPixelSize(0, tabTextSize);
-		tabTextColor = a.getColor(1, tabTextColor);
-		a.recycle();
-		// get custom attrs
-		a = context.obtainStyledAttributes(attrs,R.styleable.PagerSlidingTabStrip);
-
-		indicatorColor = a.getColor(R.styleable.PagerSlidingTabStrip_pstsIndicatorColor,indicatorColor);
-		underlineColor = a.getColor(R.styleable.PagerSlidingTabStrip_pstsUnderlineColor,underlineColor);
-		dividerColor = a.getColor(R.styleable.PagerSlidingTabStrip_pstsDividerColor,dividerColor);
-		indicatorHeight = a.getDimensionPixelSize(R.styleable.PagerSlidingTabStrip_pstsIndicatorHeight,indicatorHeight);
-		underlineHeight = a.getDimensionPixelSize(R.styleable.PagerSlidingTabStrip_pstsUnderlineHeight,underlineHeight);
-		dividerPadding = a.getDimensionPixelSize(R.styleable.PagerSlidingTabStrip_pstsDividerPadding,dividerPadding);
-		tabPadding = a.getDimensionPixelSize(R.styleable.PagerSlidingTabStrip_pstsTabPaddingLeftRight,tabPadding);
-		tabBackgroundResId = a.getResourceId(R.styleable.PagerSlidingTabStrip_pstsTabBackground,tabBackgroundResId);
-		shouldExpand = a.getBoolean(R.styleable.PagerSlidingTabStrip_pstsShouldExpand,shouldExpand);
-		scrollOffset = a.getDimensionPixelSize(R.styleable.PagerSlidingTabStrip_pstsScrollOffset,scrollOffset);
-		textAllCaps = a.getBoolean(R.styleable.PagerSlidingTabStrip_pstsTextAllCaps, textAllCaps);
-
-		a.recycle();
-
-		rectPaint = new Paint();
-		rectPaint.setAntiAlias(true);
-		rectPaint.setStyle(Style.FILL);
-
-		dividerPaint = new Paint();
-		dividerPaint.setAntiAlias(true);
-		dividerPaint.setStrokeWidth(dividerWidth);
-
-		defaultTabLayoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
-		expandedTabLayoutParams = new LinearLayout.LayoutParams(0,LayoutParams.MATCH_PARENT, 1.0f);
-
-		if (locale == null) {
-			locale = getResources().getConfiguration().locale;
-		}
-	}
-
-	public void setViewPager(ViewPager pager) {
-		this.pager = pager;
-		if (pager.getAdapter() == null) {
-			throw new IllegalStateException("ViewPager does not have adapter instance.");
-		}
-		pager.setOnPageChangeListener(pageListener);
-		notifyDataSetChanged();
-	}
-
-	public void setOnPageChangeListener(OnPageChangeListener listener) {
-		this.delegatePageListener = listener;
-	}
-
-	public void notifyDataSetChanged() {
-		tabsContainer.removeAllViews();
-		tabCount = pager.getAdapter().getCount();
-		for (int i = 0; i < tabCount; i++) {
-			if (pager.getAdapter() instanceof IconTabProvider) {
-				addIconTab(i,((IconTabProvider) pager.getAdapter()).getPageIconResId(i));
-			} else {
-				addTextTab(i, pager.getAdapter().getPageTitle(i).toString());
-			}
-		}
-
-		updateTabStyles();
-
-		getViewTreeObserver().addOnGlobalLayoutListener(
-				new OnGlobalLayoutListener() {
-					@SuppressWarnings("deprecation")
-					@SuppressLint("NewApi")
-					@Override
-					public void onGlobalLayout() {
-						if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
-							getViewTreeObserver().removeGlobalOnLayoutListener(this);
-						} else {
-							getViewTreeObserver().removeOnGlobalLayoutListener(this);
-						}
-
-						currentPosition = pager.getCurrentItem();
-						scrollToChild(currentPosition, 0);
-					}
-				});
-
-	}
-
-	private void addTextTab(final int position, String title) {
-		TextView tab = new TextView(getContext());
-		tab.setText(title);
-		tab.setGravity(Gravity.CENTER);
-		tab.setSingleLine();
-		addTab(position, tab);
-	}
-
-	private void addIconTab(final int position, int resId) {
-		ImageButton tab = new ImageButton(getContext());
-		tab.setImageResource(resId);
-		addTab(position, tab);
-	}
-
-	private void addTab(final int position, View tab) {
-		tab.setFocusable(true);
-		tab.setOnClickListener(new OnClickListener() {
-			@Override
-			public void onClick(View v) {
-				pager.setCurrentItem(position);
-			}
-		});
-
-		tab.setPadding(tabPadding, 0, tabPadding, 0);
-		tabsContainer.addView(tab, position, shouldExpand ? expandedTabLayoutParams: defaultTabLayoutParams);
-	}
-
-	private void updateTabStyles() {
-		for (int i = 0; i < tabCount; i++) {
-			View v = tabsContainer.getChildAt(i);
-			v.setBackgroundResource(tabBackgroundResId);
-			if (v instanceof TextView) {
-				TextView tab = (TextView) v;
-				//TODO 设置tab字体大小   两个参数的重载方法，一个是单位，一个是数值
-				tab.setTextSize(TypedValue.COMPLEX_UNIT_SP, tabTextSize);
-				tab.setTypeface(tabTypeface, tabTypefaceStyle);
-				tab.setTextColor(tabTextColor);
-				
-				if (i == currentPosition) {
-					tab.setTextColor(tabTextColorSelected);
-				} else {
-					tab.setTextColor(tabTextColor);
-				}
-
-				if (textAllCaps) {
-					if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
-						tab.setAllCaps(true);
-					} else {
-						tab.setText(tab.getText().toString().toUpperCase(locale));
-					}
-				}
-			}
-		}
-	}
-
-	private void scrollToChild(int position, int offset) {
-		if (tabCount == 0) {
-			return;
-		}
-		int newScrollX = tabsContainer.getChildAt(position).getLeft() + offset;
-		if (position > 0 || offset > 0) {
-			newScrollX -= scrollOffset;
-		}
-		if (newScrollX != lastScrollX) {
-			lastScrollX = newScrollX;
-			scrollTo(newScrollX, 0);
-		}
-	}
-
-	@Override
-	protected void onDraw(Canvas canvas) {
-		super.onDraw(canvas);
-		if (isInEditMode() || tabCount == 0) {
-			return;
-		}
-		final int height = getHeight();
-		// draw indicator line
-		rectPaint.setColor(indicatorColor);
-		// default: line below current tab
-		View currentTab = tabsContainer.getChildAt(currentPosition);
-		float lineLeft = currentTab.getLeft();
-		float lineRight = currentTab.getRight();
-		// if there is an offset, start interpolating left and right coordinates
-		// between current and next tab
-		if (currentPositionOffset > 0f && currentPosition < tabCount - 1) {
-			View nextTab = tabsContainer.getChildAt(currentPosition + 1);
-			final float nextTabLeft = nextTab.getLeft();
-			final float nextTabRight = nextTab.getRight();
-			lineLeft = (currentPositionOffset * nextTabLeft + (1f - currentPositionOffset) * lineLeft);
-			lineRight = (currentPositionOffset * nextTabRight + (1f - currentPositionOffset) * lineRight);
-		}
-		canvas.drawRect(lineLeft, height - indicatorHeight, lineRight, height,rectPaint);
-		// draw underline
-		rectPaint.setColor(underlineColor);
-		canvas.drawRect(0, height - underlineHeight, tabsContainer.getWidth(),height, rectPaint);
-		// draw divider
-		dividerPaint.setColor(dividerColor);
-		for (int i = 0; i < tabCount - 1; i++) {
-			View tab = tabsContainer.getChildAt(i);
-			canvas.drawLine(tab.getRight(), dividerPadding, tab.getRight(),height - dividerPadding, dividerPaint);
-		}
-	}
-
-	private class PageListener implements OnPageChangeListener {
-		@Override
-		public void onPageScrolled(int position, float positionOffset,
-				int positionOffsetPixels) {
-			currentPosition = position;
-			currentPositionOffset = positionOffset;
-			scrollToChild(position, (int) (positionOffset * tabsContainer.getChildAt(position).getWidth()));
-			invalidate();
-			if (delegatePageListener != null) {
-				delegatePageListener.onPageScrolled(position, positionOffset,positionOffsetPixels);
-			}
-		}
-
-		@Override
-		public void onPageScrollStateChanged(int state) {
-			if (state == ViewPager.SCROLL_STATE_IDLE) {
-				scrollToChild(pager.getCurrentItem(), 0);
-			}
-			if (delegatePageListener != null) {
-				delegatePageListener.onPageScrollStateChanged(state);
-			}
-		}
-
-		@Override
-		public void onPageSelected(int position) {
-			setSelectTextColor(position);
-			if (delegatePageListener != null) {
-				delegatePageListener.onPageSelected(position);
-			}
-		}
-
-		private void setSelectTextColor(int position) {
-			for (int i = 0; i < tabCount; i++) {
-				View view = tabsContainer.getChildAt(i);
-				if (view instanceof View) {
-					TextView tabTextView = ((TextView) view);
-					if (position == i) {
-						tabTextView.setTextColor(tabTextColorSelected);
-					} else {
-						tabTextView.setTextColor(tabTextColor);
-					}
-				}
-			}
-		}
-
-	}
-
-	public void setIndicatorColor(int indicatorColor) {
-		this.indicatorColor = indicatorColor;
-		invalidate();
-	}
-
-	public void setIndicatorColorResource(int resId) {
-		this.indicatorColor = getResources().getColor(resId);
-		invalidate();
-	}
-
-	public int getIndicatorColor() {
-		return this.indicatorColor;
-	}
-
-	public void setIndicatorHeight(int indicatorLineHeightPx) {
-		this.indicatorHeight = indicatorLineHeightPx;
-		invalidate();
-	}
-
-	public int getIndicatorHeight() {
-		return indicatorHeight;
-	}
-
-	public void setUnderlineColor(int underlineColor) {
-		this.underlineColor = underlineColor;
-		invalidate();
-	}
-
-	public void setUnderlineColorResource(int resId) {
-		this.underlineColor = getResources().getColor(resId);
-		invalidate();
-	}
-
-	public int getUnderlineColor() {
-		return underlineColor;
-	}
-
-	public void setDividerColor(int dividerColor) {
-		this.dividerColor = dividerColor;
-		invalidate();
-	}
-
-	public void setDividerColorResource(int resId) {
-		this.dividerColor = getResources().getColor(resId);
-		invalidate();
-	}
-
-	public int getDividerColor() {
-		return dividerColor;
-	}
-
-	public void setUnderlineHeight(int underlineHeightPx) {
-		this.underlineHeight = underlineHeightPx;
-		invalidate();
-	}
-
-	public int getUnderlineHeight() {
-		return underlineHeight;
-	}
-
-	public void setDividerPadding(int dividerPaddingPx) {
-		this.dividerPadding = dividerPaddingPx;
-		invalidate();
-	}
-
-	public int getDividerPadding() {
-		return dividerPadding;
-	}
-
-	public void setScrollOffset(int scrollOffsetPx) {
-		this.scrollOffset = scrollOffsetPx;
-		invalidate();
-	}
-
-	public int getScrollOffset() {
-		return scrollOffset;
-	}
-
-	public void setShouldExpand(boolean shouldExpand) {
-		this.shouldExpand = shouldExpand;
-		requestLayout();
-	}
-
-	public boolean getShouldExpand() {
-		return shouldExpand;
-	}
-
-	public boolean isTextAllCaps() {
-		return textAllCaps;
-	}
-
-	public void setAllCaps(boolean textAllCaps) {
-		this.textAllCaps = textAllCaps;
-	}
-
-	public void setTextSize(int textSizePx) {
-		this.tabTextSize = textSizePx;
-		updateTabStyles();
-	}
-
-	public int getTextSize() {
-		return tabTextSize;
-	}
-
-	public void setTextColor(int textColor) {
-		this.tabTextColor = textColor;
-		updateTabStyles();
-	}
-
-	public void setTextColorResource(int resId) {
-		this.tabTextColor = getResources().getColor(resId);
-		updateTabStyles();
-	}
-
-	public int getTextColor() {
-		return tabTextColor;
-	}
-
-	public void setTypeface(Typeface typeface, int style) {
-		this.tabTypeface = typeface;
-		this.tabTypefaceStyle = style;
-		updateTabStyles();
-	}
-
-	public void setTabBackground(int resId) {
-		this.tabBackgroundResId = resId;
-	}
-
-	public int getTabBackground() {
-		return tabBackgroundResId;
-	}
-
-	public void setTabPaddingLeftRight(int paddingPx) {
-		this.tabPadding = paddingPx;
-		updateTabStyles();
-	}
-
-	public int getTabPaddingLeftRight() {
-		return tabPadding;
-	}
-
-	@Override
-	public void onRestoreInstanceState(Parcelable state) {
-		SavedState savedState = (SavedState) state;
-		super.onRestoreInstanceState(savedState.getSuperState());
-		currentPosition = savedState.currentPosition;
-		requestLayout();
-	}
-
-	@Override
-	public Parcelable onSaveInstanceState() {
-		Parcelable superState = super.onSaveInstanceState();
-		SavedState savedState = new SavedState(superState);
-		savedState.currentPosition = currentPosition;
-		return savedState;
-	}
-
-	static class SavedState extends BaseSavedState {
-		int currentPosition;
-
-		public SavedState(Parcelable superState) {
-			super(superState);
-		}
-
-		private SavedState(Parcel in) {
-			super(in);
-			currentPosition = in.readInt();
-		}
-
-		@Override
-		public void writeToParcel(Parcel dest, int flags) {
-			super.writeToParcel(dest, flags);
-			dest.writeInt(currentPosition);
-		}
-
-		public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
-			@Override
-			public SavedState createFromParcel(Parcel in) {
-				return new SavedState(in);
-			}
-
-			@Override
-			public SavedState[] newArray(int size) {
-				return new SavedState[size];
-			}
-		};
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WXCheckPayReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WXCheckPayReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WXCheckPayReq.java	(revision )
@@ -1,37 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: WXCheckPayReq
- * @Description: 微信支付获取支付状态
- * @author zxl
- * @date 2015年7月7日 下午7:55:25
- */
-public class WXCheckPayReq extends HttpReq {
-	private String out_trade_no;
-
-	public WXCheckPayReq(int id, String ordernum) {
-		super();
-		this.id = id;
-		this.out_trade_no = ordernum;
-	}
-
-	public String getOut_trade_no() {
-		return out_trade_no;
-	}
-
-	public void setOut_trade_no(String out_trade_no) {
-		this.out_trade_no = out_trade_no;
-	}
-
-	@Override
-	public String getParams() {
-		return "?out_trade_no=" + out_trade_no;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/SearchHotKeywordsAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/SearchHotKeywordsAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/SearchHotKeywordsAdapter.java	(revision )
@@ -1,69 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.HotWords;
-
-import java.util.List;
-
-public class SearchHotKeywordsAdapter extends BaseAdapter {
-
-	private LayoutInflater mInflater;
-	private List<HotWords> listItem;
-	private Context mContext;
-	
-	public SearchHotKeywordsAdapter(Context context,
-			List<HotWords> hotKeyList) {
-		super();
-		this.listItem = hotKeyList;
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-	}
-	
-	@Override
-	public int getCount() {
-		return listItem.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return listItem.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_hot_keyword, null);
-			holder.keyword = (TextView) convertView.findViewById(R.id.keyword_text);
-			convertView.setTag(holder); 
-		}else{
-			holder = (ViewHolder) convertView.getTag();
-		}
-		if (listItem != null && listItem.size() > 0) {
-			holder.keyword.setText(listItem.get(position).getName());
-		}
-		return convertView;
-	}
-
-	static class ViewHolder {
-		public TextView keyword;
-	}
-	
-	public void setData(List<HotWords> list){
-		listItem = list;
-		notifyDataSetChanged();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterConfired.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterConfired.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterConfired.java	(revision )
@@ -1,60 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: WaterConfired
- * @Description: 购买水票的请求
- * @author YY
- * @date 2015年6月16日 下午2:19:34
- */
-public class WaterConfired extends HttpReq {
-
-	private int shopCode;
-	private int goodsCode;
-	private int userCode;
-
-	public WaterConfired(int reqid, int shopCode, int goodsCode, int userCode) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-		this.goodsCode = goodsCode;
-		this.userCode = userCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	public int getGoodsCode() {
-		return goodsCode;
-	}
-
-	public void setGoodsCode(int goodsCode) {
-		this.goodsCode = goodsCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?shop_code=" + shopCode + "&goods_code=" + goodsCode + "&user_code=" + userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IconPagerAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IconPagerAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/IconPagerAdapter.java	(revision )
@@ -1,11 +0,0 @@
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-public interface IconPagerAdapter {
-    /**
-     * Get icon representing the page at {@code index} in the adapter.
-     */
-    int getIconResId(int index);
-
-    // From PagerAdapter
-    int getCount();
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyDialog.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyDialog.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyDialog.java	(revision )
@@ -1,185 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.app.Dialog;
-import android.content.Context;
-import android.content.DialogInterface;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup.LayoutParams;
-import android.widget.Button;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-
-public class MyDialog extends Dialog {
-	
-	public MyDialog(Context context) {
-		super(context);
-	}
-
-	public MyDialog(Context context, int theme) {
-		super(context, theme);
-	}
-
-	public static class Builder {
-		private Context context;
-		private String title;
-		private String message;
-		private String confirmButtonText;
-		private String cancelButtonText;
-		private View contentView;
-		private boolean cancelable;
-		private DialogInterface.OnClickListener confirmButtonClickListener;
-		private DialogInterface.OnClickListener cancelButtonClickListener;
-
-		public Builder(Context context) {
-			this.context = context;
-		}
-
-		public Builder setMessage(String message) {
-			this.message = message;
-			return this;
-		}
-
-		/**
-		 * Set the Dialog message from resource
-		 * 
-		 * @param title
-		 * @return
-		 */
-		public Builder setMessage(int message) {
-			this.message = (String) context.getText(message);
-			return this;
-		}
-
-		/**
-		 * Set the Dialog title from resource
-		 * 
-		 * @param title
-		 * @return
-		 */
-		public Builder setTitle(int title) {
-			this.title = (String) context.getText(title);
-			return this;
-		}
-
-		/**
-		 * Set the Dialog title from String
-		 * 
-		 * @param title
-		 * @return
-		 */
-
-		public Builder setTitle(String title) {
-			this.title = title;
-			return this;
-		}
-
-		public Builder setContentView(View v) {
-			this.contentView = v;
-			return this;
-		}
-		
-		public void setCancelable(boolean flag) {
-			this.cancelable = flag;
-		}
-		
-
-		/**
-		 * Set the positive button resource and it's listener
-		 * 
-		 * @param confirmButtonText
-		 * @return
-		 */
-		public Builder setConfirmButton(int confirmButtonText,
-				DialogInterface.OnClickListener listener) {
-			this.confirmButtonText = (String) context
-					.getText(confirmButtonText);
-			this.confirmButtonClickListener = listener;
-			return this;
-		}
-
-		public Builder setConfirmButton(String confirmButtonText,
-				DialogInterface.OnClickListener listener) {
-			this.confirmButtonText = confirmButtonText;
-			this.confirmButtonClickListener = listener;
-			return this;
-		}
-
-		public Builder setCancelButton(int cancelButtonText,
-				DialogInterface.OnClickListener listener) {
-			this.cancelButtonText = (String) context
-					.getText(cancelButtonText);
-			this.cancelButtonClickListener = listener;
-			return this;
-		}
-
-		public Builder setCancelButton(String cancelButtonText,
-				DialogInterface.OnClickListener listener) {
-			this.cancelButtonText = cancelButtonText;
-			this.cancelButtonClickListener = listener;
-			return this;
-		}
-		
-		public MyDialog create() {
-			LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
-			final MyDialog dialog = new MyDialog(context,R.style.MyDialog);
-			dialog.setCancelable(cancelable);
-			View layout = inflater.inflate(R.layout.dialog_layout, null);
-			dialog.addContentView(layout, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
-			
-			if (title != null) {
-				((TextView) layout.findViewById(R.id.title)).setText(title);
-			} else {
-				layout.findViewById(R.id.title).setVisibility(View.GONE);
-			}
-			if (confirmButtonText != null) {
-				((Button) layout.findViewById(R.id.confirmButton))
-						.setText(confirmButtonText);
-				if (confirmButtonClickListener != null) {
-					((Button) layout.findViewById(R.id.confirmButton))
-							.setOnClickListener(new View.OnClickListener() {
-								@Override
-								public void onClick(View v) {
-									confirmButtonClickListener.onClick(dialog,
-											DialogInterface.BUTTON_POSITIVE);
-								}
-							});
-				}
-			} else {
-				layout.findViewById(R.id.confirmLaytout).setVisibility(View.GONE);
-			}
-			if (cancelButtonText != null) {
-				((Button) layout.findViewById(R.id.cancelButton))
-						.setText(cancelButtonText);
-				if (cancelButtonClickListener != null) {
-					((Button) layout.findViewById(R.id.cancelButton))
-							.setOnClickListener(new View.OnClickListener() {
-								@Override
-								public void onClick(View v) {
-									cancelButtonClickListener.onClick(dialog,
-											DialogInterface.BUTTON_NEGATIVE);
-								}
-							});
-				}
-			} else {
-				layout.findViewById(R.id.cancelLaytout).setVisibility(
-						View.GONE);
-			}
-			if (message != null) {
-				((TextView) layout.findViewById(R.id.message)).setText(message);
-			} else if (contentView != null) {
-				((LinearLayout) layout.findViewById(R.id.content))
-						.removeAllViews();
-				((LinearLayout) layout.findViewById(R.id.content)).addView(
-						contentView, new LayoutParams(
-								LayoutParams.FILL_PARENT,
-								LayoutParams.FILL_PARENT));
-			}
-			dialog.setContentView(layout);
-			return dialog;
-		}
-
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MyLog.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MyLog.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MyLog.java	(revision )
@@ -1,26 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.util.Log;
-
-
-public class MyLog  {
-
-	private static boolean isDebug = true;
-	
-	public static void i(String tag,String msg){
-		if(isDebug){
-			Log.i(tag, msg);
-		}
-	}
-	
-	public static void w(String tag,String msg){
-		if(isDebug){
-			Log.w(tag, msg);
-		}
-	}
-	public static void e(String tag,String msg){
-		if(isDebug){
-			Log.e(tag, msg);
-		}
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/OrderDetailsActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/OrderDetailsActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/OrderDetailsActivity.java	(revision )
@@ -1,412 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.net.Uri;
-import android.os.Bundle;
-import android.view.KeyEvent;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.ListView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.GoodsAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.tencent.mm.sdk.constants.Build;
-import com.tencent.mm.sdk.modelpay.PayReq;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-/**
- * 
- * @ClassName:  OrderDetailsActivity
- * @Description: 订单详情
- * @author YY
- * @date 2015年6月9日 下午1:25:21
- */
-public class OrderDetailsActivity extends BaseActivity {
-	private String shop_tel, order_time, shopName, transaddr, user_tel,
-			order_num;
-	private ImageView iv_order_send, iv_comp, iv_send, iv_order_comp,
-			iv_order_status;
-	private TextView tv_order_num, tv_order_time, tv_order_pay_way,
-			tv_user_phone, tv_user_addr, shop_name, bt_evaluation,
-			bt_order_again, tv_pay_money, tv_order_comp, tv_order_comp_content,
-			titleBarTv, tv_send, tv_comp,noticeNopay,tv_voucher,send_money;
-	private int payment_way, order_status;
-	private double paymoney;
-	private ArrayList<Goods> goodslist = new ArrayList<Goods>();
-	private OrderInfo orderInfo = null;
-	private ListView lv_orderlist;// 展示订单里面的商品
-	private Boolean isCalling = true;
-	private LinearLayout ll_evaluation,ll_status;
-	private RelativeLayout loadingView,errorView,ll_nopay;
-
-	public static String EXTRA_FROM = "from";
-	private int from;//0订单列表，1订单确认页面
-
-	final IWXAPI msgApi = WXAPIFactory.createWXAPI(this, null);
-	private PayReq req;
-	private PrepayIdInfo prepayInfo;
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {//点击返回
-			if (from == 0) {
-				
-			} else {
-				startActivity(new Intent(this, MainActivity.class));
-			}
-			SPUtils.saveBoolean(this, GlobalInfo.KEY_NEEDLOAD, true);
-			finish();
-		}else if (v.getId()==R.id.title_bar_right) {//点击拨打店主电话
-			isCalling = true;
-			if (isCalling) {
-				Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+ shop_tel));
-				startActivity(intent);
-				isCalling = false;
-			}
-		}else if (v.getId()==R.id.bt_order_again) {//点击再来一单，跳转购物页面
-			SPUtils.saveBoolean(this, GlobalInfo.KEY_NEEDLOAD, true);
-			startActivity(new Intent(OrderDetailsActivity.this,MainActivity.class));
-		}else if (v.getId()==R.id.bt_evaluation) {
-			complaint(orderInfo);
-		}else if (v.getId() == R.id.tv_cancle_order){
-			cancelSendAction();
-		}else if (v.getId() == R.id.tv_pay_order){
-			boolean isPaySupported = msgApi.getWXAppSupportAPI() >= Build.PAY_SUPPORTED_SDK_INT;
-			if (isPaySupported) {
-				getWXPrepayidAction(orderInfo.getOrder_num());
-			} else {
-				MyToast.show(this, "您手机未安装微信或者当前版本不支持微信支付！");
-			}
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_order_status_details);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("订单详情");
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));//点击返回
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		findViewById(R.id.iv_logo_right).setBackgroundDrawable(getResources().getDrawable(R.drawable.shop_call));//点击拨打店主电话
-		findViewById(R.id.title_bar_right).setOnClickListener(this);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-
-	private void initView() {
-		Intent intent = getIntent();
-		order_num = intent.getStringExtra(OrderLogic.EXTRA_ORDER_NUM);
-		from = intent.getExtras().getInt(EXTRA_FROM, 0);
-		
-		bt_evaluation = (TextView) findViewById(R.id.bt_evaluation);
-		bt_order_again = (TextView) findViewById(R.id.bt_order_again);
-		bt_order_again.setOnClickListener(this);
-		iv_order_status = (ImageView) findViewById(R.id.iv_order_status);
-		lv_orderlist = (ListView) findViewById(R.id.lv_orderlist);
-		
-		iv_order_send = (ImageView) findViewById(R.id.iv_order_send);
-		iv_send = (ImageView) findViewById(R.id.iv_send);
-		iv_order_comp = (ImageView) findViewById(R.id.iv_order_comp);
-		iv_comp = (ImageView) findViewById(R.id.iv_comp);
-		tv_order_comp = (TextView) findViewById(R.id.tv_order_comp);
-		tv_order_comp_content = (TextView) findViewById(R.id.tv_order_comp_content);
-		
-		ll_status = (LinearLayout) findViewById(R.id.ll_status);
-		ll_evaluation = (LinearLayout) findViewById(R.id.ll_evaluation);
-		tv_order_num = (TextView) findViewById(R.id.tv_order_num);
-		tv_order_time = (TextView) findViewById(R.id.tv_order_time);
-		tv_order_pay_way = (TextView) findViewById(R.id.tv_order_pay_way);
-		tv_user_phone = (TextView) findViewById(R.id.tv_user_phone);
-		tv_user_addr = (TextView) findViewById(R.id.tv_user_addr);
-		shop_name = (TextView) findViewById(R.id.shop_name);
-		tv_pay_money = (TextView) findViewById(R.id.tv_pay_money);
-		tv_send = (TextView) findViewById(R.id.tv_send);
-		tv_comp = (TextView) findViewById(R.id.tv_comp);
-		
-		tv_voucher = (TextView) findViewById(R.id.tv_voucher);
-		send_money = (TextView) findViewById(R.id.send_money);
-
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-
-		ll_nopay = (RelativeLayout) findViewById(R.id.ll_nopay);
-		noticeNopay = (TextView) findViewById(R.id.tv_notice_nopay);
-		findViewById(R.id.tv_cancle_order).setOnClickListener(this);
-		findViewById(R.id.tv_pay_order).setOnClickListener(this);
-
-		sendOrderDetailsAction();
-	}
-
-	@SuppressWarnings("deprecation")
-	private void setData(ImageView iv_order_send, ImageView iv_send,
-			ImageView iv_order_comp, ImageView iv_comp,
-			LinearLayout ll_evaluation, TextView tv_order_num,
-			TextView tv_order_time, TextView tv_order_pay_way,
-			TextView tv_user_phone, TextView tv_user_addr, TextView shop_name,
-			ListView lv_orderlist, TextView tv_pay_money, OrderInfo orderinfo,
-			ArrayList<Goods> goods, TextView tv_comp2, TextView send_money2) {
-		
-		shop_tel = orderinfo.getShop_tel();//店主电话
-		order_status = orderinfo.getOrder_status();//获取订单的状态
-		order_num = orderinfo.getOrder_num();//获取订单编号
-		order_time = orderinfo.getOrder_time();//下单时间
-		payment_way = orderinfo.getPayment_way();//支付方式
-		user_tel = orderinfo.getUser_tel();//用户电话
-		transaddr = orderinfo.getTransaddr();//用户收货地址
-		shopName = orderinfo.getShop_name();//商店名称
-		paymoney = orderinfo.getPaymoney();//支付金额
-		tv_voucher.setText("￥"+orderinfo.getCouprice());
-		send_money.setText("￥"+orderinfo.getTransmoney());
-		
-		shop_name.setText(shopName);
-		tv_order_num.setText(order_num);
-		String string2Time = Utils.string2Time(order_time);
-		tv_order_time.setText(string2Time);
-		if (payment_way == 1) {
-			tv_order_pay_way.setText("支付宝");
-		} else if (payment_way == 2) {
-			tv_order_pay_way.setText("微信支付");
-		} else if (payment_way == 3) {
-			tv_order_pay_way.setText("百度钱包");
-		} else if (payment_way == 4) {
-			tv_order_pay_way.setText("现金支付");
-		}else {
-			tv_order_pay_way.setText("微信支付");
-		}
-		
-		tv_user_phone.setText(user_tel);
-		tv_user_addr.setText(transaddr);
-		if (order_status == 1) {//待发货
-			ll_status.setVisibility(View.VISIBLE);
-			//默认
-			ll_evaluation.setVisibility(View.GONE);
-		}else if (order_status==2) {//发货中
-			ll_status.setVisibility(View.VISIBLE);
-			iv_order_send.setBackgroundColor(getResources().getColor(R.color.text_color));
-			iv_send.setBackgroundDrawable(getResources().getDrawable(R.drawable.order_status_send2));
-			ll_evaluation.setVisibility(View.GONE);
-			tv_send.setTextColor(this.getResources().getColor(R.color.order_text_color));
-		}else if (order_status==3) {//已完成订单
-			ll_status.setVisibility(View.VISIBLE);
-			iv_order_send.setBackgroundColor(getResources().getColor(R.color.text_color));
-			iv_send.setBackgroundDrawable(getResources().getDrawable(R.drawable.order_status_send2));
-			iv_order_comp.setBackgroundColor(getResources().getColor(R.color.text_color));
-			iv_comp.setBackgroundDrawable(getResources().getDrawable(R.drawable.order_status_receiving2));
-			bt_evaluation.setVisibility(View.GONE);
-			iv_order_status.setBackgroundDrawable(getResources().getDrawable(R.drawable.order_finish));
-			tv_order_comp.setText("订单完成");
-			tv_order_comp_content.setText("感谢使用闪店到家，期待您的下次光临！");
-			tv_send.setTextColor(this.getResources().getColor(R.color.order_text_color));
-			tv_comp.setTextColor(this.getResources().getColor(R.color.order_text_color));
-		}else if (order_status==4 ) {//商铺取消订单
-			ll_status.setVisibility(View.GONE);
-			tv_order_comp.setText("订单取消");
-			tv_order_comp_content.setText("如果该订单为线上支付方式，订单金额将于三个工作日之内返还您的账户。");
-			bt_evaluation.setVisibility(View.VISIBLE);
-			bt_evaluation.setOnClickListener(this);
-		}else if (order_status==5) {//用户取消订单
-			ll_status.setVisibility(View.GONE);
-			tv_order_comp.setText("订单取消");
-			tv_order_comp_content.setText("如果该订单为线上支付方式，订单金额将于三个工作日之内返还您的账户。");
-			bt_evaluation.setVisibility(View.GONE);
-		}else{
-			ll_status.setVisibility(View.GONE);
-			ll_evaluation.setVisibility(View.GONE);
-			ll_nopay.setVisibility(View.VISIBLE);
-		}
-		GoodsAdapter goodsAdapter = new GoodsAdapter(goodslist,this);
-		lv_orderlist.setAdapter(goodsAdapter);
-		BigDecimal bdpaymoney = new BigDecimal(paymoney);
-		bdpaymoney = bdpaymoney.setScale(2, BigDecimal.ROUND_DOWN);
-		tv_pay_money.setText(" ￥"+bdpaymoney);
-	}
-
-	/**跳转界面投诉商铺*/
-	private void complaint(OrderInfo orderStatusInfo2) {
-		Intent intent = new Intent();
-		String order_num = orderStatusInfo2.getOrder_num();
-		int shop_code = orderStatusInfo2.getShop_code();
-		int user_code = SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0);
-		intent.putExtra(GlobalInfo.KEY_ORDER_NUM, order_num);
-		intent.putExtra(GlobalInfo.KEY_SHOPCODE, shop_code);
-		intent.putExtra(GlobalInfo.KEY_USERCODE, user_code);
-		intent.setClass(this, ComplaintActivity.class);
-		startActivity(intent);
-	}
-
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_ORDER_STATUS_SUCESS://获取订单详情成功事件
-			loadingView.setVisibility(View.GONE);
-			hideErrorLocal();
-			ArrayList<Goods> list = (ArrayList<Goods>) bundle.getSerializable(OrderLogic.EXTRA_GOODS_LIST);
-			if (list != null && list.size() > 0 ) {
-				goodslist.clear();
-				goodslist.addAll(list);
-			}
-			orderInfo = (OrderInfo) bundle.getSerializable(OrderLogic.EXTRA_ORDER_INFO_LIST);
-			setData(iv_order_send, iv_send, iv_order_comp, iv_comp, ll_evaluation, tv_order_num, tv_order_time, tv_order_pay_way, tv_user_phone, tv_user_addr,shop_name,lv_orderlist,tv_pay_money, orderInfo,goodslist,tv_comp,send_money);
-			
-			break;
-		case Event.GET_ORDER_STATUS_FAILED://获取订单详情失败事件
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_COMPLAINORDER_SUCESS://投诉商铺成功事件
-			MyToast.show(this, "您的投诉我们已收到，会在三天内给您答复！");
-			break;
-		case Event.POST_COMPLAINORDER_FAILED://投诉商铺失败事件
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_PREPAY_ID_DETAIL_TRUE_SUCESS://WX支付获取prepayid成功事件
-			prepayInfo = (PrepayIdInfo) bundle.getSerializable(OrderLogic.EXTRA_PREPAY_ID);
-			req = new PayReq();
-			msgApi.registerApp(prepayInfo.getAppid());
-			genPayReq();
-			sendPayReq();
-			break;
-		case Event.GET_PREPAY_ID_DETAIL_TRUE_FAILED://WX支付获取prepayid失败事件
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_CANCEL_ORDER_DETAIL_SUCESS://订单详情页面取消订单成功事件
-			findAllOrders();
-			finish();
-			break;
-		case Event.POST_CANCEL_ORDER_DETAIL_FAILED://订单详情页面取消订单失败事件
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_ORDER_STATUS_SUCESS,
-				Event.GET_ORDER_STATUS_FAILED, Event.POST_COMPLAINORDER_SUCESS,
-				Event.POST_COMPLAINORDER_FAILED, Event.GET_PREPAY_ID_DETAIL_TRUE_SUCESS,
-				Event.GET_PREPAY_ID_DETAIL_TRUE_FAILED,Event.POST_CANCEL_ORDER_DETAIL_SUCESS,
-				Event.POST_CANCEL_ORDER_DETAIL_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			if (from == 0) {
-				
-			} else {
-				startActivity(new Intent(this, MainActivity.class));
-			}
-			SPUtils.saveBoolean(this, GlobalInfo.KEY_NEEDLOAD, true);
-			finish();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-
-	/**根据订单编号获取订单详细信息*/
-	public void sendOrderDetailsAction(){
-		Intent intent = new Intent(OrderLogic.ACTION_GET_ORDER_STATUS);
-		intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, order_num);
-		sendAction(intent);
-	}
-
-	/**点击发送取消订单的请求*/
-	private void cancelSendAction() {
-		String cst = Utils.getCurrentSystemTime()+"";
-		Intent intent = new Intent(OrderLogic.ACTION_POST_CANCEL_ORDER_DETAIL);
-		intent.putExtra(OrderLogic.EXTRA_ORDER_NUM, order_num);
-		intent.putExtra(OrderLogic.EXTRA_CANCELCANSE, cst);
-		sendAction(intent);
-	}
-
-	/** 获取微信的prepayid */
-	private void getWXPrepayidAction(String ordernum) {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_PREPAYID_ORDERDETAIL);
-		intent.putExtra(OrderLogic.EXTRA_OUT_TRADE_NO,ordernum);
-		App.getInstance().sendAction(intent);
-	}
-
-	/** 根据用户ID查询所有订单 */
-	private void findAllOrders() {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_USER_ORDER);
-		intent.putExtra(OrderLogic.EXTRA_USER_CODE, SPUtils.getInt(this,GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	private void genPayReq() {
-		req.appId = prepayInfo.getAppid();
-		req.partnerId = prepayInfo.getPartnerid();
-		req.prepayId = prepayInfo.getPrepayid();
-		req.packageValue = "Sign=WXPay";
-		req.nonceStr = prepayInfo.getNoncestr();
-		req.timeStamp = prepayInfo.getTimestamp();
-		req.sign = prepayInfo.getSign();
-	}
-
-	private void sendPayReq() {
-		msgApi.registerApp(prepayInfo.getAppid());
-		msgApi.sendReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MultiValueMap.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MultiValueMap.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/MultiValueMap.java	(revision )
@@ -1,119 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.List;
-import java.util.Map;
-import java.util.Map.Entry;
-import java.util.Set;
-import java.util.concurrent.ConcurrentHashMap;
-
-public class MultiValueMap<K, V> {
-	private Map<K, List<V>> mMap;
-
-	public MultiValueMap() {
-		this(0);
-	}
-
-	public MultiValueMap(int capacity) {
-		mMap = new ConcurrentHashMap<K, List<V>>(capacity);
-	}
-
-	public List<V> get(K key) {
-		return mMap.get(key);
-	}
-
-	public void put(K key, V value) {
-		List<V> values = mMap.get(key);
-		if (values == null) {
-			values = new ArrayList<V>();
-			mMap.put(key, values);
-		}
-		if (!containsValue(key, value)) {
-			values.add(value);
-		}
-	}
-
-	public void putAll(K key, ArrayList<V> values) {
-		List<V> valuesMap = mMap.get(key);
-		if (valuesMap == null) {
-			valuesMap = new ArrayList<V>();
-			mMap.put(key, valuesMap);
-		}
-		if (values != null) {
-			for (V v : values) {
-				if (!containsValue(key, v)) {
-					valuesMap.add(v);
-				}
-			}
-		}
-	}
-
-	public List<V> remove(K key) {
-		List<V> values = mMap.get(key);
-		if (values != null) {
-			values.clear();
-		}
-		return mMap.remove(key);
-	}
-
-	public boolean remove(K key, V value) {
-		List<V> values = mMap.get(key);
-		if (values != null) {
-			return values.remove(value);
-		}
-		return false;
-	}
-
-	public boolean removeValue(V value) {
-		boolean isRemove = true;
-		for (Entry<K, List<V>> entry : mMap.entrySet()) {
-			List<V> values = entry.getValue();
-			if (values != null) {
-				if (!values.remove(value)) {
-					isRemove = false;
-				}
-			}
-		}
-		return isRemove;
-	}
-
-	public void clear() {
-		for (Entry<K, List<V>> entry : mMap.entrySet()) {
-			List<V> values = entry.getValue();
-			if (values != null) {
-				values.clear();
-			}
-		}
-		mMap.clear();
-	}
-
-	public boolean containsKey(K key) {
-		return mMap.containsKey(key);
-	}
-
-	public boolean containsValue(K key, V value) {
-		List<V> values = mMap.get(key);
-		return values != null && values.contains(value);
-	}
-
-	public boolean isEmpty() {
-		return mMap.isEmpty();
-	}
-
-	public int size() {
-		return mMap.size();
-	}
-
-	public Set<K> keySet() {
-		return mMap.keySet();
-	}
-
-	public Set<Entry<K, List<V>>> entrySet() {
-		return mMap.entrySet();
-	}
-
-	public Collection<List<V>> values() {
-		return mMap.values();
-	}
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderStatusReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderStatusReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderStatusReq.java	(revision )
@@ -1,33 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/**
- * 
- * @ClassName:  OrderStatusReq
- * @Description: 订单详情
- * @author YY
- * @date 2015年6月9日 下午1:14:21
- */
-public class OrderStatusReq extends HttpReq {
-	
-	private String orderNum;
-	
-	
-
-	public OrderStatusReq(int reqid,String orderNum) {
-		super();
-		this.id = reqid;
-		this.orderNum = orderNum;
-	}
-
-	@Override
-	public String getParams() {
-		return "?ordernum=" + orderNum;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/SearchLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/SearchLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/SearchLogic.java	(revision )
@@ -1,125 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.SearchGoodsReq;
-import com.anniu.shandiandaojia.service.HttpService;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.List;
-
-/**
- * 
- * @ClassName: SearchLogic
- * @Description: 搜索logic类
- * @author YY
- * @date 2015年6月25日 下午8:17:55
- */
-public class SearchLogic extends BaseLogic {
-	
-	/** 搜索商品*/
-	public static String ACTION_GET_SEARCH_GOODS = "GoodsLogic.ACTION_GET_SEARCH_GOODS";
-	/**商店ID*/
-	public static String EXTRA_SHOPCODE = "shopCode";
-	/**商品名称*/
-	public static String EXTRA_GOODSNAME = "goodsName";
-	/**搜索商品标识*/
-	public static String EXTRA_GOODS = "goods";
-	/**搜索商品集合*/
-	public static String EXTRA_GOODS_LIST = "goods_list";
-
-	public SearchLogic(HttpService service) {
-		super(service);
-		List<String> actions = new ArrayList<String>();
-		actions.add(ACTION_GET_SEARCH_GOODS);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_GET_SEARCH_GOODS.equals(action)) {
-			int shopCode = intent.getIntExtra(EXTRA_SHOPCODE, 0);
-			String goodsName = intent.getStringExtra(EXTRA_GOODSNAME);
-			getSearchGoods(shopCode,goodsName);
-		}
-	}
-
-	/**搜索商品*/
-	private void getSearchGoods(int shopCode, String goodsName) {
-		SearchGoodsReq req = new SearchGoodsReq(ReqInfo.REQ_GET_SEARCH_GOODS, shopCode, goodsName);
-		req.isHttpPost = true;
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					int code = 0;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								JSONObject jsonObject = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (jsonObject.has(EXTRA_GOODS)) {
-									String goodlist = jsonObject.getString(EXTRA_GOODS);
-									if (goodlist.equals("null")) {
-										bundle.putParcelableArrayList(EXTRA_GOODS_LIST, null);
-									}else {
-										JSONArray jsonArray = jsonObject.getJSONArray(EXTRA_GOODS);
-										if (jsonArray!=null&&jsonArray.length()>0) {
-											ArrayList<Goods> goodslList = new ArrayList<Goods>();
-											Goods goods = null;
-											for (int i = 0; i < jsonArray.length(); i++) {
-												JSONObject goodsObject = (JSONObject) jsonArray.get(i);
-												goods = gson.fromJson(goodsObject.toString(), Goods.class);
-												goodslList.add(goods);
-											}
-											bundle.putSerializable(EXTRA_GOODS_LIST,goodslList);
-										}
-									}
-								}
-							}
-							notice(Event.GET_SEARCH_GOODS_SUCESS,bundle);
-						} else if (code == 0) {
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_SEARCH_GOODS_FAILED,bundle);
-						} else {
-							bundle.putString(BaseLogic.EXTRA_ERROR,"服务器正忙，请稍后再试");
-							notice(Event.GET_SEARCH_GOODS_FAILED,bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_SEARCH_GOODS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/service/HttpService.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/service/HttpService.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/service/HttpService.java	(revision )
@@ -1,141 +0,0 @@
-package com.anniu.shandiandaojia.service;
-
-import android.app.Service;
-import android.content.Intent;
-import android.os.Bundle;
-import android.os.IBinder;
-import android.text.TextUtils;
-
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.logic.SearchLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.logic.UpdateLogic;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.net.NetMgr;
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-import com.anniu.shandiandaojia.net.bean.SocketReq;
-import com.anniu.shandiandaojia.utils.MultiValueMap;
-import com.anniu.shandiandaojia.utils.MyLog;
-
-import java.util.List;
-import java.util.concurrent.ExecutorService;
-import java.util.concurrent.Executors;
-
-public class HttpService extends Service {
-
-	protected static final String TAG = "BaseService";
-	public static String ACTION_UPDATE_UI = "com.yopark.service.BaseService.Update_UI";
-	public static String EXTRA_EVENT_ID = "Service_eventId";
-
-	private NetMgr netMgr;
-	private MultiValueMap<String, ActionListener> mResolver;
-	private ExecutorService actionThreadPool;
-	private UpdateLogic updateLogic;
-	private LocationLogic locationLogic;
-	private UserLogic userLogic;
-	private GoodsLogic goodsLogic;
-	private OrderLogic orderLogic;
-	private ShoppingCartLogic shoppingCartLogic;
-	private TicketLogic ticketLogic;
-	private SearchLogic searchLogic;
-
-	public void sendHttpReq(HttpReq req) {
-		netMgr.sendHttpReq(req);
-	}
-
-	public void sendSocketReq(SocketReq req) {
-		netMgr.sendSocketReq(req);
-	}
-
-	@Override
-	public void onCreate() {
-		actionThreadPool = Executors.newFixedThreadPool(1);
-		mResolver = new MultiValueMap<String, ActionListener>(8);
-		netMgr = new NetMgr();
-		updateLogic = new UpdateLogic(this);
-		locationLogic = new LocationLogic(this);
-		userLogic = new UserLogic(this);
-		goodsLogic = new GoodsLogic(this);
-		orderLogic = new OrderLogic(this);
-		shoppingCartLogic = new ShoppingCartLogic(this);
-		ticketLogic = new TicketLogic(this);
-		searchLogic = new SearchLogic(this);
-	}
-
-	@Override
-	public int onStartCommand(final Intent intent, int flags, int startId) {
-		actionThreadPool.execute(new Runnable() {
-			@Override
-			public void run() {
-				try {
-					onHandleAction(intent);
-				} catch (Exception t) {
-					MyLog.e(TAG, t.getMessage());
-				}
-			}
-		});
-
-		return super.onStartCommand(intent, flags, startId);
-	}
-
-	public void onHandleAction(Intent intent) {
-		if (intent != null) {
-			String action = intent.getAction();
-			synchronized (mResolver) {
-				if (!TextUtils.isEmpty(action) && mResolver.containsKey(action)) {
-					List<ActionListener> values = mResolver.get(action);
-					if (values != null) {
-						for (int i = 0; i < values.size(); i++) {
-							values.get(i).onHandleAction(intent);
-						}
-					}
-				} else {
-					MyLog.e(TAG, "resolveAction.action = " + action
-							+ " is unregister !");
-				}
-			}
-		}
-	}
-
-	public void sendBroadCast(int eventId, Bundle bundle) {
-		Intent intent = new Intent(ACTION_UPDATE_UI);
-		intent.putExtra(EXTRA_EVENT_ID, eventId);
-		if (bundle != null) {
-			intent.putExtras(bundle);
-		}
-		sendBroadcast(intent);
-	}
-
-	public void registerAction(ActionListener listener, List<String> actions) {
-		if (listener != null && actions != null) {
-			for (String action : actions) {
-				if (action != null) {
-					mResolver.put(action, listener);
-				}
-			}
-		}
-	}
-
-	public void unregisterAction(ActionListener listener, List<String> actions) {
-		if (listener != null && actions != null) {
-			for (String action : actions) {
-				if (action != null && mResolver != null) {
-					mResolver.remove(action);
-				}
-			}
-		}
-	}
-
-	public interface ActionListener {
-		public void onHandleAction(Intent intent);
-	}
-
-	@Override
-	public IBinder onBind(Intent intent) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/SignUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/SignUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/SignUtils.java	(revision )
@@ -1,36 +0,0 @@
-package com.anniu.shandiandaojia.alipay;
-
-import java.security.KeyFactory;
-import java.security.PrivateKey;
-import java.security.spec.PKCS8EncodedKeySpec;
-
-public class SignUtils {
-
-	private static final String ALGORITHM = "RSA";
-
-	private static final String SIGN_ALGORITHMS = "SHA1WithRSA";
-
-	private static final String DEFAULT_CHARSET = "UTF-8";
-
-	public static String sign(String content, String privateKey) {
-		try {
-			PKCS8EncodedKeySpec priPKCS8 = new PKCS8EncodedKeySpec(Base64.decode(privateKey));
-			KeyFactory keyf = KeyFactory.getInstance(ALGORITHM);
-			PrivateKey priKey = keyf.generatePrivate(priPKCS8);
-
-			java.security.Signature signature = java.security.Signature.getInstance(SIGN_ALGORITHMS);
-
-			signature.initSign(priKey);
-			signature.update(content.getBytes(DEFAULT_CHARSET));
-
-			byte[] signed = signature.sign();
-
-			return Base64.encode(signed);
-		} catch (Exception e) {
-			e.printStackTrace();
-		}
-
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ModifyLocationActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ModifyLocationActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ModifyLocationActivity.java	(revision )
@@ -1,121 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.ImageView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.baidu.location.LocationClient;
-import com.baidu.location.LocationClientOption;
-import com.baidu.location.LocationClientOption.LocationMode;
-
-/**
- * @ClassName: ModifyLocationActivity
- * @Description: 修改位置
- * @author zxl
- * @date 2015年5月29日 下午7:38:27
- */
-public class ModifyLocationActivity extends BaseActivity {
-	private ImageView leftTitle;
-	private TextView titleBarTv;
-	private TextView etAddr;
-
-	public static LocationClient mLocationClient;
-	private LocationMode tempMode = LocationMode.Hight_Accuracy;
-	private String tempcoor="gcj02";//gcj02、bd09ll、bd09
-	private String address = "";
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		Intent intent = new Intent(); 
-		switch (v.getId()) {
-		case R.id.title_bar_left:
-			finish();
-			break;
-		case R.id.tv_location_current://定位当前
-			InitLocation();
-			mLocationClient.start();
-			intent.setClass(this,FamliyMartActivity.class);
-			intent.putExtra(FamliyMartActivity.EXTRA_FROM, FamliyMartActivity.EXTRA_M);
-			startActivity(intent);
-			finish();
-			break;
-		case R.id.iv_search://搜索
-			String addr = etAddr.getText().toString();
-			if (TextUtils.isEmpty(addr)) {
-				MyToast.show(this, "请输入当前地址信息！");
-				return ;
-			}
-			address = addr;
-			sendGetShopListByAddrAction();
-			intent.setClass(this,FamliyMartActivity.class);
-			intent.putExtra(FamliyMartActivity.EXTRA_FROM, FamliyMartActivity.EXTRA_M);
-			intent.putExtra(FamliyMartActivity.EXTRA_ADDRESS, address);
-			startActivity(intent);
-			finish();
-			break;
-		default:
-			break;
-		}
-	}
-
-	
-	private void InitLocation(){
-		LocationClientOption option = new LocationClientOption();
-		option.setLocationMode(tempMode);//设置定位模式
-		option.setCoorType(tempcoor);//返回的定位结果是百度经纬度，默认值gcj02
-		option.setScanSpan(5000);//设置发起定位请求的间隔时间为5000ms
-		option.setIsNeedAddress(true);//是否反地理编码
-		mLocationClient.setLocOption(option);
-	}
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_modify_location);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.title_text_modifylocation);
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		etAddr = (TextView) findViewById(R.id.et_addr);
-		
-		findViewById(R.id.iv_search).setOnClickListener(this);
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		findViewById(R.id.tv_location_current).setOnClickListener(this);
-		mLocationClient = ((App)getApplication()).mLocationClient;
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-	
-	public void sendGetShopListByAddrAction() {
-		Intent intent = new Intent();
-		intent.setAction(LocationLogic.ACTION_GET_LOCATION_ADDR);
-		intent.putExtra(LocationLogic.EXTRA_ADDRESS, address);
-		intent.putExtra(LocationLogic.EXTRA_PAGENUM, 1);
-		intent.putExtra(LocationLogic.EXTRA_PAGESIZE, 20);
-		sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/GlobalInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/GlobalInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/GlobalInfo.java	(revision )
@@ -1,112 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-/**
- * @ClassName: GlobalInfo
- * @Description: 应用程序用到的常用变量
- * @author zxl xl_zh@foxmail.com
- * @date 2015年5月6日 上午9:42:57
- */
-public class GlobalInfo {
-
-	/** 移动登录的客户端标识 */
-	public static final String MOBILE_LOGIN_CLIENT = "btlfandroid";
-	/** http互联网连接 */
-	public static final int OPTION_NET_HTTP = 0;
-	/** CMWAP连接 */
-	public static final int OPTION_NET_CMWAP_PROXY = 1;
-	/** wifi链接 */
-	public static final int OPTION_NET_WIFI = 2;
-	/** 无链接 */
-	public static final int OPTION_NET_NO = -1;
-	/** 用户的登陆状态 */
-	public static final String LOGIN_STATE = "login_state";
-	/** 用户是否第一次启动app */
-	public static final String IS_FIRST = "is_first";
-	/** 用户是否第一次定位 */
-	public static final String HAS_LOCATION = "is_location";
-	/** address */
-	public static final String ADDRESS = "address";
-	/** lng */
-	public static final String LNG = "lng";
-	/** lat */
-	public static final String LAT = "lat";
-	/** totalPage */
-	public static final String TOTALPAGE = "totalPage";
-	/** curPage */
-	public static final String CURPAGE = "curPage";
-	/** totalRecorder */
-	public static final String TOTALRECORDER = "totalRecorder";
-	/**用户编号*/
-	public static final String KEY_USERCODE = "usercode";
-	/**用户订单*/
-	public static final String KEY_ORDER_NUM = "order_num";
-	/** shopcode */
-	public static final String KEY_SHOPCODE = "shopcode";
-	/** shopstate */
-	public static final String KEY_SHOPSTATE = "shopstate";
-	/** islogin */
-	public static final String KEY_ISLOGIN = "islogin";
-	/** iswater */
-	public static final String KEY_ISWATER = "iswater";
-	
-	/**用户手机号*/
-	public static String KEY_USER_TEL = "user_tel";
-	/**用户是否注册过*/
-	public static String KEY_ISREGISTER ="isregister";
-	/**用户信息*/
-	public static String KEY_USER ="user";
-	/**用户昵称*/
-	public static String KEY_NICK_NAME ="nick_name";
-	/**用户名称*/
-	public static String KEY_USER_NAME ="user_name";
-	/**用户地址*/
-	public static String KEY_USER_ADDR ="user_addr";
-	/**用户图片*/
-	public static String KEY_PIC_CODE ="pic_code";
-	/**用户注册时间*/
-	public static String KEY_REGISTER_TIME ="register_time";
-	/**用户性别*/
-	public static String KEY_USER_SEX = "sex";
-	/**地址信息*/
-	public static String KEY_LOC_INFO = "loc_info";
-	/**rev_name*/
-	public static String KEY_REV_NAME = "rev_name";
-	
-	/**shopinfo*/
-	public static String KEY_SHOPINFO = "shopinfo";
-	/**shop_name*/
-	public static String KEY_SHOPNAME = "shop_name";
-	/**shop_tel*/
-	public static String KEY_SHOPTEL = "shop_tel";
-	/**need_load*/
-	public static String KEY_NEEDLOAD = "need_load";
-	/**时间*/
-	public static String KEY_TIME = "time";
-	/** 整箱购 typecode值 */
-	public static int FCLCODE = 8;
-	
-	public static String KEY_CONTENT = "content";
-	
-	/**AppID 微信公众平台id */
-    public static final String APP_ID = "appid";
-    /**AppID 微信公众平台prepay_id */
-    public static final String APP_PREPAY_ID = "prepay_id";
-    /**AppID 微信公众平台mch_id */
-    public static final String APP_MCH_ID = "mch_id";
-    /**AppID 微信公众平台sign */
-    public static final String APP_SIGN = "sign";
-
-
-	// API密钥，在商户平台设置
-	public static final String API_KEY = "shandiandaojiashandiandaojia0605";
-	
-	//商户PID
-	public static final String PARTNER = "2088011325918143";
-	//商户收款账号
-	public static final String SELLER = "btfl@buttonad.com";
-	//商户私钥，pkcs8格式
-	public static final String RSA_PRIVATE = "MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBANX23iQrRAeE/LYJU7JJiJRUzXQAYD2ktMw104viJX2Jt43aLYA40PRwwChbRQHDOhWDVzw7vLQbAIEqh75L1CkpQA0PUUXS/Ac0FOGVsxVf/iXw3u6VGVpd6bMb/cWHNI1gsfuIOew3DiBC7FQ3po17q/5WErr3RF746tdudVORAgMBAAECgYBjzR+2zTuRKlXZ7yXMDoKXdarThe1eM3plmmHPaK/GC7vDfdYlbdsBeaoX6OKaPN7V9Ap3vQF7HPEyTo08lRAjO//PFCwQRL45LsPiWQ7Wrdvi5Yy91qWGJYLIwv5mDCR3lPIIeFTCHZEvX6zo1bi+/dJyIaToM5PvHFuN+saiAQJBAPvUl1Kp9XJcbmtKc8NpHJAGpehSMeW8Y7beb1AsfFwjGSnhRlpA5dBRGAhxefaVaVmYpEForrbJjA89kC3CNmECQQDZgcb8iHVpPJX0L9OSctd3uFEMf0amz0s57MVgacsegItB3Uyr0qHwKVCcQhYAPDA/ChCgk59LrOOkgZ6HassxAkAAqTIseV23ix6PEYb0QFZe2mWdEnonDDOGy1anczZwV3c9cOXqXrk7rrrNat7TEtlP7uKfeVLcD/NaJuM1+4iBAkAfBkff1YcJz76D6h5/kSnyxbOp2K23NXJBfOhabDywyR0T9ADvsUev/fSllTeWKP+ovkLI5MWgAbUmzeZS4oTBAkEAvwJh8d9EcJs6a65eiYWlPMp/pNuT80UQhFWi0eZmADUpt0OXvl8jefF7QdUSApKAIynimU3GL8BqRG/+0wIVMw==";
-	//支付宝公钥
-	public static final String RSA_PUBLIC = "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCnxj/9qwVfgoUh/y2W89L6BkRAFljhNhgPdyPuBV64bfQNN1PjbCzkIM6qRdKBoLPXmKKMiFYnkd6rAoprih3/PrQEB/VsW8OoM8fxn67UDYuyBTqA23MML9q1+ilIZwBC2AQ2UBVOrFXfFl75p6/B5KsiNG9zpgmLCUYuLkxpLQIDAQAB";
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/CirclePageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/CirclePageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/CirclePageIndicator.java	(revision )
@@ -1,557 +0,0 @@
-/*
- * Copyright (C) 2011 Patrik Akerfeldt
- * Copyright (C) 2011 Jake Wharton
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.content.res.Resources;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Paint;
-import android.graphics.Paint.Style;
-import android.graphics.drawable.Drawable;
-import android.os.Parcel;
-import android.os.Parcelable;
-import android.support.v4.view.MotionEventCompat;
-import android.support.v4.view.ViewConfigurationCompat;
-import android.support.v4.view.ViewPager;
-import android.util.AttributeSet;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.ViewConfiguration;
-
-import com.anniu.shandiandaojia.R;
-
-import static android.graphics.Paint.ANTI_ALIAS_FLAG;
-import static android.widget.LinearLayout.HORIZONTAL;
-import static android.widget.LinearLayout.VERTICAL;
-
-/**
- * Draws circles (one for each view). The current view position is filled and
- * others are only stroked.
- */
-public class CirclePageIndicator extends View implements PageIndicator {
-    private static final int INVALID_POINTER = -1;
-
-    private float mRadius;
-    private final Paint mPaintPageFill = new Paint(ANTI_ALIAS_FLAG);
-    private final Paint mPaintStroke = new Paint(ANTI_ALIAS_FLAG);
-    private final Paint mPaintFill = new Paint(ANTI_ALIAS_FLAG);
-    private ViewPager mViewPager;
-    private ViewPager.OnPageChangeListener mListener;
-    private int mCurrentPage;
-    private int mSnapPage;
-    private float mPageOffset;
-    private int mScrollState;
-    private int mOrientation;
-    private boolean mCentered;
-    private boolean mSnap;
-
-    private int mTouchSlop;
-    private float mLastMotionX = -1;
-    private int mActivePointerId = INVALID_POINTER;
-    private boolean mIsDragging;
-
-
-    public CirclePageIndicator(Context context) {
-        this(context, null);
-    }
-
-    public CirclePageIndicator(Context context, AttributeSet attrs) {
-        this(context, attrs, R.attr.vpiCirclePageIndicatorStyle);
-    }
-
-    public CirclePageIndicator(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-        if (isInEditMode()) return;
-
-        //Load defaults from resources
-        final Resources res = getResources();
-        final int defaultPageColor = res.getColor(R.color.default_circle_indicator_page_color);
-        final int defaultFillColor = res.getColor(R.color.default_circle_indicator_fill_color);
-        final int defaultOrientation = res.getInteger(R.integer.default_circle_indicator_orientation);
-        final int defaultStrokeColor = res.getColor(R.color.default_circle_indicator_stroke_color);
-        final float defaultStrokeWidth = res.getDimension(R.dimen.default_circle_indicator_stroke_width);
-        final float defaultRadius = res.getDimension(R.dimen.default_circle_indicator_radius);
-        final boolean defaultCentered = res.getBoolean(R.bool.default_circle_indicator_centered);
-        final boolean defaultSnap = res.getBoolean(R.bool.default_circle_indicator_snap);
-
-        //Retrieve styles attributes
-        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CirclePageIndicator, defStyle, 0);
-
-        mCentered = a.getBoolean(R.styleable.CirclePageIndicator_centered, defaultCentered);
-        mOrientation = a.getInt(R.styleable.CirclePageIndicator_android_orientation, defaultOrientation);
-        mPaintPageFill.setStyle(Style.FILL);
-        mPaintPageFill.setColor(a.getColor(R.styleable.CirclePageIndicator_pageColor, defaultPageColor));
-        mPaintStroke.setStyle(Style.STROKE);
-        mPaintStroke.setColor(a.getColor(R.styleable.CirclePageIndicator_strokeColor, defaultStrokeColor));
-        mPaintStroke.setStrokeWidth(a.getDimension(R.styleable.CirclePageIndicator_strokeWidth, defaultStrokeWidth));
-        mPaintFill.setStyle(Style.FILL);
-        mPaintFill.setColor(a.getColor(R.styleable.CirclePageIndicator_fillColor, defaultFillColor));
-        mRadius = a.getDimension(R.styleable.CirclePageIndicator_radius, defaultRadius);
-        mSnap = a.getBoolean(R.styleable.CirclePageIndicator_snap, defaultSnap);
-
-        Drawable background = a.getDrawable(R.styleable.CirclePageIndicator_android_background);
-        if (background != null) {
-          setBackgroundDrawable(background);
-        }
-
-        a.recycle();
-
-        final ViewConfiguration configuration = ViewConfiguration.get(context);
-        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
-    }
-
-
-    public void setCentered(boolean centered) {
-        mCentered = centered;
-        invalidate();
-    }
-
-    public boolean isCentered() {
-        return mCentered;
-    }
-
-    public void setPageColor(int pageColor) {
-        mPaintPageFill.setColor(pageColor);
-        invalidate();
-    }
-
-    public int getPageColor() {
-        return mPaintPageFill.getColor();
-    }
-
-    public void setFillColor(int fillColor) {
-        mPaintFill.setColor(fillColor);
-        invalidate();
-    }
-
-    public int getFillColor() {
-        return mPaintFill.getColor();
-    }
-
-    public void setOrientation(int orientation) {
-        switch (orientation) {
-            case HORIZONTAL:
-            case VERTICAL:
-                mOrientation = orientation;
-                requestLayout();
-                break;
-
-            default:
-                throw new IllegalArgumentException("Orientation must be either HORIZONTAL or VERTICAL.");
-        }
-    }
-
-    public int getOrientation() {
-        return mOrientation;
-    }
-
-    public void setStrokeColor(int strokeColor) {
-        mPaintStroke.setColor(strokeColor);
-        invalidate();
-    }
-
-    public int getStrokeColor() {
-        return mPaintStroke.getColor();
-    }
-
-    public void setStrokeWidth(float strokeWidth) {
-        mPaintStroke.setStrokeWidth(strokeWidth);
-        invalidate();
-    }
-
-    public float getStrokeWidth() {
-        return mPaintStroke.getStrokeWidth();
-    }
-
-    public void setRadius(float radius) {
-        mRadius = radius;
-        invalidate();
-    }
-
-    public float getRadius() {
-        return mRadius;
-    }
-
-    public void setSnap(boolean snap) {
-        mSnap = snap;
-        invalidate();
-    }
-
-    public boolean isSnap() {
-        return mSnap;
-    }
-
-    @Override
-    protected void onDraw(Canvas canvas) {
-        super.onDraw(canvas);
-
-        if (mViewPager == null) {
-            return;
-        }
-        final int count = mViewPager.getAdapter().getCount();
-        if (count == 0) {
-            return;
-        }
-
-        if (mCurrentPage >= count) {
-            setCurrentItem(count - 1);
-            return;
-        }
-
-        int longSize;
-        int longPaddingBefore;
-        int longPaddingAfter;
-        int shortPaddingBefore;
-        if (mOrientation == HORIZONTAL) {
-            longSize = getWidth();
-            longPaddingBefore = getPaddingLeft();
-            longPaddingAfter = getPaddingRight();
-            shortPaddingBefore = getPaddingTop();
-        } else {
-            longSize = getHeight();
-            longPaddingBefore = getPaddingTop();
-            longPaddingAfter = getPaddingBottom();
-            shortPaddingBefore = getPaddingLeft();
-        }
-
-        final float threeRadius = mRadius * 3;
-        final float shortOffset = shortPaddingBefore + mRadius;
-        float longOffset = longPaddingBefore + mRadius;
-        if (mCentered) {
-            longOffset += ((longSize - longPaddingBefore - longPaddingAfter) / 2.0f) - ((count * threeRadius) / 2.0f);
-        }
-
-        float dX;
-        float dY;
-
-        float pageFillRadius = mRadius;
-        if (mPaintStroke.getStrokeWidth() > 0) {
-            pageFillRadius -= mPaintStroke.getStrokeWidth() / 2.0f;
-        }
-
-        //Draw stroked circles
-        for (int iLoop = 0; iLoop < count; iLoop++) {
-            float drawLong = longOffset + (iLoop * threeRadius);
-            if (mOrientation == HORIZONTAL) {
-                dX = drawLong;
-                dY = shortOffset;
-            } else {
-                dX = shortOffset;
-                dY = drawLong;
-            }
-            // Only paint fill if not completely transparent
-            if (mPaintPageFill.getAlpha() > 0) {
-                canvas.drawCircle(dX, dY, pageFillRadius, mPaintPageFill);
-            }
-
-            // Only paint stroke if a stroke width was non-zero
-            if (pageFillRadius != mRadius) {
-                canvas.drawCircle(dX, dY, mRadius, mPaintStroke);
-            }
-        }
-
-        //Draw the filled circle according to the current scroll
-        float cx = (mSnap ? mSnapPage : mCurrentPage) * threeRadius;
-        if (!mSnap) {
-            cx += mPageOffset * threeRadius;
-        }
-        if (mOrientation == HORIZONTAL) {
-            dX = longOffset + cx;
-            dY = shortOffset;
-        } else {
-            dX = shortOffset;
-            dY = longOffset + cx;
-        }
-        canvas.drawCircle(dX, dY, mRadius, mPaintFill);
-    }
-
-    public boolean onTouchEvent(android.view.MotionEvent ev) {
-        if (super.onTouchEvent(ev)) {
-            return true;
-        }
-        if ((mViewPager == null) || (mViewPager.getAdapter().getCount() == 0)) {
-            return false;
-        }
-
-        final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
-        switch (action) {
-            case MotionEvent.ACTION_DOWN:
-                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
-                mLastMotionX = ev.getX();
-                break;
-
-            case MotionEvent.ACTION_MOVE: {
-                final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
-                final float x = MotionEventCompat.getX(ev, activePointerIndex);
-                final float deltaX = x - mLastMotionX;
-
-                if (!mIsDragging) {
-                    if (Math.abs(deltaX) > mTouchSlop) {
-                        mIsDragging = true;
-                    }
-                }
-
-                if (mIsDragging) {
-                    mLastMotionX = x;
-                    if (mViewPager.isFakeDragging() || mViewPager.beginFakeDrag()) {
-                        mViewPager.fakeDragBy(deltaX);
-                    }
-                }
-
-                break;
-            }
-
-            case MotionEvent.ACTION_CANCEL:
-            case MotionEvent.ACTION_UP:
-                if (!mIsDragging) {
-                    final int count = mViewPager.getAdapter().getCount();
-                    final int width = getWidth();
-                    final float halfWidth = width / 2f;
-                    final float sixthWidth = width / 6f;
-
-                    if ((mCurrentPage > 0) && (ev.getX() < halfWidth - sixthWidth)) {
-                        if (action != MotionEvent.ACTION_CANCEL) {
-                            mViewPager.setCurrentItem(mCurrentPage - 1);
-                        }
-                        return true;
-                    } else if ((mCurrentPage < count - 1) && (ev.getX() > halfWidth + sixthWidth)) {
-                        if (action != MotionEvent.ACTION_CANCEL) {
-                            mViewPager.setCurrentItem(mCurrentPage + 1);
-                        }
-                        return true;
-                    }
-                }
-
-                mIsDragging = false;
-                mActivePointerId = INVALID_POINTER;
-                if (mViewPager.isFakeDragging()) mViewPager.endFakeDrag();
-                break;
-
-            case MotionEventCompat.ACTION_POINTER_DOWN: {
-                final int index = MotionEventCompat.getActionIndex(ev);
-                mLastMotionX = MotionEventCompat.getX(ev, index);
-                mActivePointerId = MotionEventCompat.getPointerId(ev, index);
-                break;
-            }
-
-            case MotionEventCompat.ACTION_POINTER_UP:
-                final int pointerIndex = MotionEventCompat.getActionIndex(ev);
-                final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
-                if (pointerId == mActivePointerId) {
-                    final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
-                    mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
-                }
-                mLastMotionX = MotionEventCompat.getX(ev, MotionEventCompat.findPointerIndex(ev, mActivePointerId));
-                break;
-        }
-
-        return true;
-    }
-
-    @Override
-    public void setViewPager(ViewPager view) {
-        if (mViewPager == view) {
-            return;
-        }
-        if (mViewPager != null) {
-            mViewPager.setOnPageChangeListener(null);
-        }
-        if (view.getAdapter() == null) {
-            throw new IllegalStateException("ViewPager does not have adapter instance.");
-        }
-        mViewPager = view;
-        mViewPager.setOnPageChangeListener(this);
-        invalidate();
-    }
-
-    @Override
-    public void setViewPager(ViewPager view, int initialPosition) {
-        setViewPager(view);
-        setCurrentItem(initialPosition);
-    }
-
-    @Override
-    public void setCurrentItem(int item) {
-        if (mViewPager == null) {
-            throw new IllegalStateException("ViewPager has not been bound.");
-        }
-        mViewPager.setCurrentItem(item);
-        mCurrentPage = item;
-        invalidate();
-    }
-
-    @Override
-    public void notifyDataSetChanged() {
-        invalidate();
-    }
-
-    @Override
-    public void onPageScrollStateChanged(int state) {
-        mScrollState = state;
-
-        if (mListener != null) {
-            mListener.onPageScrollStateChanged(state);
-        }
-    }
-
-    @Override
-    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
-        mCurrentPage = position;
-        mPageOffset = positionOffset;
-        invalidate();
-
-        if (mListener != null) {
-            mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
-        }
-    }
-
-    @Override
-    public void onPageSelected(int position) {
-        if (mSnap || mScrollState == ViewPager.SCROLL_STATE_IDLE) {
-            mCurrentPage = position;
-            mSnapPage = position;
-            invalidate();
-        }
-
-        if (mListener != null) {
-            mListener.onPageSelected(position);
-        }
-    }
-
-    @Override
-    public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener) {
-        mListener = listener;
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see android.view.View#onMeasure(int, int)
-     */
-    @Override
-    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-        if (mOrientation == HORIZONTAL) {
-            setMeasuredDimension(measureLong(widthMeasureSpec), measureShort(heightMeasureSpec));
-        } else {
-            setMeasuredDimension(measureShort(widthMeasureSpec), measureLong(heightMeasureSpec));
-        }
-    }
-
-    /**
-     * Determines the width of this view
-     *
-     * @param measureSpec
-     *            A measureSpec packed into an int
-     * @return The width of the view, honoring constraints from measureSpec
-     */
-    private int measureLong(int measureSpec) {
-        int result;
-        int specMode = MeasureSpec.getMode(measureSpec);
-        int specSize = MeasureSpec.getSize(measureSpec);
-
-        if ((specMode == MeasureSpec.EXACTLY) || (mViewPager == null)) {
-            //We were told how big to be
-            result = specSize;
-        } else {
-            //Calculate the width according the views count
-            final int count = mViewPager.getAdapter().getCount();
-            result = (int)(getPaddingLeft() + getPaddingRight()
-                    + (count * 2 * mRadius) + (count - 1) * mRadius + 1);
-            //Respect AT_MOST value if that was what is called for by measureSpec
-            if (specMode == MeasureSpec.AT_MOST) {
-                result = Math.min(result, specSize);
-            }
-        }
-        return result;
-    }
-
-    /**
-     * Determines the height of this view
-     *
-     * @param measureSpec
-     *            A measureSpec packed into an int
-     * @return The height of the view, honoring constraints from measureSpec
-     */
-    private int measureShort(int measureSpec) {
-        int result;
-        int specMode = MeasureSpec.getMode(measureSpec);
-        int specSize = MeasureSpec.getSize(measureSpec);
-
-        if (specMode == MeasureSpec.EXACTLY) {
-            //We were told how big to be
-            result = specSize;
-        } else {
-            //Measure the height
-            result = (int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
-            //Respect AT_MOST value if that was what is called for by measureSpec
-            if (specMode == MeasureSpec.AT_MOST) {
-                result = Math.min(result, specSize);
-            }
-        }
-        return result;
-    }
-
-    @Override
-    public void onRestoreInstanceState(Parcelable state) {
-        SavedState savedState = (SavedState)state;
-        super.onRestoreInstanceState(savedState.getSuperState());
-        mCurrentPage = savedState.currentPage;
-        mSnapPage = savedState.currentPage;
-        requestLayout();
-    }
-
-    @Override
-    public Parcelable onSaveInstanceState() {
-        Parcelable superState = super.onSaveInstanceState();
-        SavedState savedState = new SavedState(superState);
-        savedState.currentPage = mCurrentPage;
-        return savedState;
-    }
-
-    static class SavedState extends BaseSavedState {
-        int currentPage;
-
-        public SavedState(Parcelable superState) {
-            super(superState);
-        }
-
-        private SavedState(Parcel in) {
-            super(in);
-            currentPage = in.readInt();
-        }
-
-        @Override
-        public void writeToParcel(Parcel dest, int flags) {
-            super.writeToParcel(dest, flags);
-            dest.writeInt(currentPage);
-        }
-
-        @SuppressWarnings("UnusedDeclaration")
-        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
-            @Override
-            public SavedState createFromParcel(Parcel in) {
-                return new SavedState(in);
-            }
-
-            @Override
-            public SavedState[] newArray(int size) {
-                return new SavedState[size];
-            }
-        };
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/PrepayIdInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/PrepayIdInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/PrepayIdInfo.java	(revision )
@@ -1,69 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/**
- * @ClassName: PrepayIdInfo
- * @Description: 获取微信支付的信息
- * @author zxl
- * @date 2015年7月6日 下午2:48:34
- */
-public class PrepayIdInfo implements Serializable {
-
-	private static final long serialVersionUID = -39241639963472404L;
-	private String sign;
-	private String appid;
-	private String partnerid;
-	private String prepayid;
-	private String noncestr;
-	private String timestamp;
-
-	public String getPrepayid() {
-		return prepayid;
-	}
-
-	public void setPrepayid(String prepayid) {
-		this.prepayid = prepayid;
-	}
-
-	public String getNoncestr() {
-		return noncestr;
-	}
-
-	public void setNoncestr(String noncestr) {
-		this.noncestr = noncestr;
-	}
-
-	public String getTimestamp() {
-		return timestamp;
-	}
-
-	public void setTimestamp(String timestamp) {
-		this.timestamp = timestamp;
-	}
-
-	public String getSign() {
-		return sign;
-	}
-
-	public void setSign(String sign) {
-		this.sign = sign;
-	}
-
-	public String getPartnerid() {
-		return partnerid;
-	}
-
-	public void setPartnerid(String partnerid) {
-		this.partnerid = partnerid;
-	}
-
-	public String getAppid() {
-		return appid;
-	}
-
-	public void setAppid(String appid) {
-		this.appid = appid;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/receiver/MyReceiver.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/receiver/MyReceiver.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/receiver/MyReceiver.java	(revision )
@@ -1,247 +0,0 @@
-package com.anniu.shandiandaojia.receiver;
-
-import android.app.ActivityManager;
-import android.app.ActivityManager.RunningTaskInfo;
-import android.app.Notification;
-import android.app.NotificationManager;
-import android.app.PendingIntent;
-import android.content.BroadcastReceiver;
-import android.content.Context;
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.util.Log;
-import android.view.Gravity;
-import android.widget.Toast;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.activity.MainActivity;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.PushMessage;
-import com.anniu.shandiandaojia.utils.ExampleUtil;
-import com.anniu.shandiandaojia.utils.MyLog;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.util.Date;
-import java.util.List;
-
-import cn.jpush.android.api.JPushInterface;
-
-/**
- * 自定义接收器
- * 
- * 如果不定义这个 Receiver，则：
- * 1) 默认用户会打开主界面
- * 2) 接收不到自定义消息
- */
-public class MyReceiver extends BroadcastReceiver {
-	private static final String TAG = "MyReceiver";
-	private static final String PUSH_MESSAGE = "1";
-	public static final String MSG_HREF_TYPE = "meg_href_type";
-	public static final String MSG_HREF_TARGET = "meg_href_target";
-	private Context mContext;
-	
-	private String content;
-	private String toTaskbar;
-	private String hrefTarget;
-	private String type;
-	private String hrefType;
-	private Toast toast;
-
-	@Override
-	public void onReceive(Context context, Intent intent) {
-		this.mContext = context;
-        Bundle bundle = intent.getExtras();
-		MyLog.i(TAG, "onReceive - " + intent.getAction() + ", extras: " + printBundle(bundle));
-		
-        if (JPushInterface.ACTION_REGISTRATION_ID.equals(intent.getAction())) {
-            String regId = bundle.getString(JPushInterface.EXTRA_REGISTRATION_ID);
-            MyLog.i(TAG, "接收Registration Id : " + regId);
-        } else if (JPushInterface.ACTION_MESSAGE_RECEIVED.equals(intent.getAction())) {
-        	MyLog.i(TAG,"收到了自定义消息。消息内容是：" + bundle.getString(JPushInterface.EXTRA_MESSAGE));
-        	MyLog.i(TAG,"收到了自定义消息。消息内容是：" + bundle.getString(JPushInterface.EXTRA_EXTRA));
-        	content = bundle.getString(JPushInterface.EXTRA_MESSAGE);
-        	String extra = bundle.getString(JPushInterface.EXTRA_EXTRA);
-        	
-        	try {
-				JSONObject jsonObj = new JSONObject(extra);
-				toTaskbar = String.valueOf(jsonObj.get("toTaskbar")); // 是否在通知栏显示 0否，1是
-				hrefTarget = String.valueOf(jsonObj.get("hrefTarget")); // 跳转目标
-				type = String.valueOf(jsonObj.get("type")); // 1消息，2公告，3推送固定用户消息（不保存）
-				hrefType = String.valueOf(jsonObj.get("hrefType")); // 跳转类型
-				MyLog.i(TAG,toTaskbar + hrefTarget + type + hrefType);
-				if (!TextUtils.isEmpty(content) && !TextUtils.isEmpty(toTaskbar) && !TextUtils.isEmpty(hrefTarget)
-						&& !TextUtils.isEmpty(type) && !TextUtils.isEmpty(hrefType)) {
-					receivePushMessage();
-				}
-			} catch (JSONException e) {
-				MyLog.i(TAG,e.getMessage());
-			}
-        	processCustomMessage(context, bundle);
-        } else if (JPushInterface.ACTION_NOTIFICATION_RECEIVED.equals(intent.getAction())) {
-            MyLog.i(TAG, "[MyReceiver] 接收到推送下来的通知");
-            int notifactionId = bundle.getInt(JPushInterface.EXTRA_NOTIFICATION_ID);
-            MyLog.i(TAG, "[MyReceiver] 接收到推送下来的通知的ID: " + notifactionId);
-        } else if (JPushInterface.ACTION_NOTIFICATION_OPENED.equals(intent.getAction())) {
-            MyLog.i(TAG, "[MyReceiver] 用户点击打开了通知");
-        	//打开自定义的Activity
-        	Intent i = new Intent(context, MainActivity.class);
-        	//i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
-        	i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP );
-        	context.startActivity(i);
-        } else if (JPushInterface.ACTION_RICHPUSH_CALLBACK.equals(intent.getAction())) {
-            MyLog.i(TAG, "[MyReceiver] 用户收到到RICH PUSH CALLBACK: " + bundle.getString(JPushInterface.EXTRA_EXTRA));
-            //在这里根据 JPushInterface.EXTRA_EXTRA 的内容处理代码，比如打开新的Activity， 打开一个网页等..
-        } else if(JPushInterface.ACTION_CONNECTION_CHANGE.equals(intent.getAction())) {
-        	boolean connected = intent.getBooleanExtra(JPushInterface.EXTRA_CONNECTION_CHANGE, false);
-        	Log.w(TAG, "[MyReceiver]" + intent.getAction() +" connected state change to "+connected);
-        } else {
-        	MyLog.i(TAG, "[MyReceiver] Unhandled intent - " + intent.getAction());
-        }
-	}
-
-	// 打印所有的 intent extra 数据
-	private static String printBundle(Bundle bundle) {
-		StringBuilder sb = new StringBuilder();
-		for (String key : bundle.keySet()) {
-			if (key.equals(JPushInterface.EXTRA_NOTIFICATION_ID)) {
-				sb.append("\nkey:" + key + ", value:" + bundle.getInt(key));
-			}else if(key.equals(JPushInterface.EXTRA_CONNECTION_CHANGE)){
-				sb.append("\nkey:" + key + ", value:" + bundle.getBoolean(key));
-			} 
-			else {
-				sb.append("\nkey:" + key + ", value:" + bundle.getString(key));
-			}
-		}
-		return sb.toString();
-	}
-	
-	//send msg to MainActivity
-	private void processCustomMessage(Context context, Bundle bundle) {
-		if (MainActivity.isForeground) {
-			String message = bundle.getString(JPushInterface.EXTRA_MESSAGE);
-			String extras = bundle.getString(JPushInterface.EXTRA_EXTRA);
-			Intent msgIntent = new Intent(MainActivity.MESSAGE_RECEIVED_ACTION);
-			msgIntent.putExtra(MainActivity.KEY_MESSAGE, message);
-			if (!ExampleUtil.isEmpty(extras)) {
-				try {
-					JSONObject extraJson = new JSONObject(extras);
-					if (null != extraJson && extraJson.length() > 0) {
-						msgIntent.putExtra(MainActivity.KEY_EXTRAS, extras);
-					}
-				} catch (JSONException e) {
-
-				}
-			}
-			context.sendBroadcast(msgIntent);
-		}
-	}
-	
-	/**
-	 * 收到推送消息
-	 */
-	private void receivePushMessage() {
-		MyLog.i(TAG,"receivePushMessage");
-		// 判断是否要通知栏提示
-		if (Integer.parseInt(toTaskbar) == 1) {// 需要通知栏提示
-			MyLog.i(TAG,"创建自定义通知栏");
-			NotificationManager manager = (NotificationManager) App.getInstance().getSystemService(Context.NOTIFICATION_SERVICE);
-			// 创建一个Notification
-			Notification notification = new Notification();
-			// 设置显示在手机最上边的状态栏的图标
-			notification.icon = R.drawable.ic_launcher;
-			notification.tickerText = content;
-			notification.flags |= Notification.FLAG_AUTO_CANCEL;
-			notification.defaults = Notification.DEFAULT_SOUND;
-			// 点击状态栏的图标出现的提示信息设置
-			notification.setLatestEventInfo(App.getInstance(), "您有一条新消息",content, getPendingIntent());
-			manager.notify((int) ((new Date()).getTime()%10000000), notification);
-		}
-		if(type == PUSH_MESSAGE) {
-			// 保存新消息
-			PushMessage pm = new PushMessage();
-			pm.setContent(content);
-			pm.setHrefTarget(hrefTarget);
-			pm.setHrefType(Integer.parseInt(hrefType));
-			pm.setIsLook(PushMessage.IS_LOOK_NO);
-			pm.setReceiveDate(new Date());
-			PushMessage.saveOrUpdate(pm);
-		
-			String curActivity = Utils.getCurrentActivity();
-			if (!(curActivity.contains("PersonalActivity") || curActivity.contains("ConfigActivity") 
-				|| "".equals(curActivity) || curActivity.contains("WelcomeActivity")
-				|| curActivity.contains("SplashActivity"))) {
-				long num = PushMessage.getUnReadMessageCount();
-				toast = Toast.makeText(mContext, "您有" + num + "条新消息",Toast.LENGTH_LONG);
-				toast.setGravity(Gravity.BOTTOM, App.windowWidth - (toast.getXOffset() * 2), 0);
-				toast.show();
-			}
-		}
-	}
-	
-	private PendingIntent getPendingIntent() {
-		Intent intent = new Intent();
-		ActivityManager manager = (ActivityManager) mContext.getSystemService(Context.ACTIVITY_SERVICE);
-		List<RunningTaskInfo> task_info = manager.getRunningTasks(20);
-		String className = "";
-		for (int i = 0; i < task_info.size(); i++) {
-			if ("com.anniu.shandiandaojia".equals(task_info.get(i).topActivity.getPackageName())) {
-				className = task_info.get(i).topActivity.getClassName();
-				// 这里是指从后台返回到前台 前两个的是关键
-				try {
-					intent.setClass(mContext, Class.forName(className));
-					setIntent(intent);
-					break;
-				} catch (ClassNotFoundException e) {
-					e.printStackTrace();
-				}
-			}
-		}
-		if ("".equals(className)) {
-			intent.setClass(mContext, MainActivity.class);
-			intent.putExtra(MSG_HREF_TYPE, hrefType);
-			intent.putExtra(MSG_HREF_TARGET, hrefTarget);
-		}
-		MyLog.i(TAG,"className-->" + className);
-		PendingIntent pendingIntent = PendingIntent.getActivity(mContext, (int) ((new Date()).getTime()%10000000),
-				intent, 0);
-		return pendingIntent;
-	}
-	
-	public Intent setIntent(Intent intent) {
-		if(!TextUtils.isEmpty(hrefType)) {
-//			int type = Integer.parseInt(hrefType);
-//			if(type == PushMessage.HREF_TYPE_GAME) {
-//				intent.setClass(context, GameDetailActivity.class);
-//				intent.putExtra(GamesLogic.EXTRA_GAMEID, StringUtil.String2Integer(hrefTarget, 0));
-//				intent.putExtra(GamesLogic.EXTRA_GAMENAME, "");
-//			} else if(type == PushMessage.HREF_TYPE_RACE) {
-//				intent.setClass(context, MatchDetailActivity.class);
-//				List<String> ids= StringUtil.String2List(hrefTarget, ",");
-//				intent.putExtra(RepKey.KEY_MATCHID, StringUtil.String2Integer((ids!=null&&ids.size()>0)?ids.get(0):null, 0));
-//				intent.putExtra(MatchesLogic.KEY_ROOMID, (ids!=null&&ids.size()>1)?ids.get(1):"");
-//			} else if(type == PushMessage.HREF_TYPE_LIVE) {
-//				intent.setClass(context, LiveActivity.class);
-//				intent.putExtra(LiveActivity.EXTRA_MEDIA_ID, hrefTarget);
-//			} else if(type == PushMessage.HREF_TYPE_SCREEN) {
-//				intent.setClass(context, VideoActivity.class);
-//				intent.putExtra(VideoActivity.EXTRA_MEDIA_ID, hrefTarget);
-//			} else if(type == PushMessage.HREF_TYPE_HTML) {
-//				intent.setClass(context, WebViewActivity.class);
-//				if(!StringUtil.isEmpty(hrefTarget) && hrefTarget.startsWith("http://")) {
-//					intent.putExtra("url",hrefTarget);
-//				} else {
-//					intent.putExtra("url","http://" + hrefTarget);
-//				}
-//			} else if(type == PushMessage.HREF_TYPE_HAND_GAME) {
-//				intent.setClass(context, HandGameDetailActivity.class);
-//				intent.putExtra(GamesLogic.EXTRA_GAMEID, StringUtil.String2Integer(hrefTarget, 0));
-//				intent.putExtra(GamesLogic.EXTRA_GAMENAME, "");
-//			}
-		}
-		return intent;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/SocketClient.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/SocketClient.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/SocketClient.java	(revision )
@@ -1,5 +0,0 @@
-package com.anniu.shandiandaojia.net;
-
-public class SocketClient {
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/BaseActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/BaseActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/BaseActivity.java	(revision )
@@ -1,126 +0,0 @@
-package com.anniu.shandiandaojia.base;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.os.Handler;
-import android.support.v4.app.FragmentActivity;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.view.Window;
-import android.widget.FrameLayout;
-import android.widget.RelativeLayout;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.utils.MyLog;
-import com.umeng.analytics.MobclickAgent;
-
-public abstract class BaseActivity extends FragmentActivity implements OnClickListener {
-	/*** 屏幕的高 */
-	protected int windowHeight;
-	/*** 屏幕的宽 */
-	protected int windowWidth;
-	protected App mApp;
-	protected Handler mUIHandler = new Handler();
-	protected BaseActivity context;
-	protected Intent baseIntent;
-	
-	protected View rootView = null;
-	protected RelativeLayout contentView;
-
-	@Override
-	protected void onCreate(Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		ActivityMgr.addActivity(this);
-		requestWindowFeature(Window.FEATURE_NO_TITLE);// 去掉标题栏
-		context = this;
-		baseIntent = getIntent();
-		mApp = (App) getApplication();
-		init(savedInstanceState);
-		addEventListener();
-	}
-	
-	@SuppressWarnings("deprecation")
-	private void initMainView() {
-		super.setContentView(R.layout.base_activity_layout);
-		rootView = findViewById(R.id.root_layout);
-		contentView = (RelativeLayout) findViewById(R.id.content_layout);
-		
-		LayoutParams params = contentView.getLayoutParams();
-		params.width = LayoutParams.FILL_PARENT;
-		contentView.setLayoutParams(params);
-	}
-	
-	@Override
-	public void setContentView(int layoutResID) {
-		initMainView();
-		FrameLayout outView = new FrameLayout(context);//定义框架布局器  
-		FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
-				ViewGroup.LayoutParams.WRAP_CONTENT,
-				ViewGroup.LayoutParams.WRAP_CONTENT);
-		outView.setLayoutParams(params);
-		View child = LayoutInflater.from(context).inflate(layoutResID, outView);
-
-		contentView.removeAllViews();
-		contentView.addView(child);
-	}
-	
-	@Override
-	protected void onResume() {
-		super.onResume();
-		MobclickAgent.onResume(context);
-	}
-
-	@Override
-	protected void onPause() {
-		super.onPause();
-		MobclickAgent.onPause(context);
-	}
-
-	@Override
-	protected void onDestroy() {
-		super.onDestroy();
-		removeListener();
-		ActivityMgr.destroyActivity(this);
-	}
-
-	public void sendAction(Intent intent) {
-		mApp.sendAction(intent);
-	}
-
-	/**
-	 * @Title: onNotify
-	 * @Description: 通知UI
-	 * @param eventId
-	 *            事件id
-	 * @param bundle
-	 *            传递的数据
-	 * @return void 返回类型
-	 * @throws
-	 */
-	public void onNotify(final int eventId, final Bundle bundle) {
-		mUIHandler.post(new Runnable() {
-
-			public void run() {
-				try {
-					onUIEvent(eventId, bundle);
-				} catch (Exception e) {
-					MyLog.e("mUIHandler", e.toString());
-				}
-			}
-		});
-	}
-	
-	protected abstract void init(Bundle bundle);
-
-	protected abstract void onUIEvent(int eventId, Bundle bundle);
-
-	protected abstract void addEventListener();
-
-	protected abstract void removeListener();
-	
-	
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/FollowerListFakeActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/FollowerListFakeActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/FollowerListFakeActivity.java	(revision )
@@ -1,168 +0,0 @@
-package com.sharesdk.onekeyshare;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-
-import cn.sharesdk.framework.Platform;
-
-import com.mob.tools.FakeActivity;
-
-public class FollowerListFakeActivity extends FakeActivity {
-	protected Platform platform;
-
-	public void setPlatform(Platform platform) {
-		this.platform = platform;
-	}
-
-	public Platform getPlatform() {
-		return platform;
-	}
-
-	public boolean isRadioMode(String platformName) {
-		return "FacebookMessenger".equals(platformName);
-	}
-
-	public void setResultForChecked(ArrayList<String> checked) {
-		HashMap<String, Object> res = new HashMap<String, Object>();
-		res.put("selected", checked);
-		res.put("platform", platform);
-		setResult(res);
-	}
-
-	public static class Following {
-		public boolean checked;
-		public String screenName;
-		public String description;
-		public String uid;
-		public String icon;
-		//@Name 用于微博等提示或关联某个人
-		public String atName;
-	}
-
-	public static class FollowersResult {
-		public ArrayList<Following> list;
-		public boolean hasNextPage = false;
-	}
-
-	public static FollowersResult parseFollowers(String platformName, HashMap<String, Object> res, HashMap<String, Boolean> uidMap) {
-		if (res == null || res.size() <= 0) {
-			return null;
-		}
-
-		boolean hasNext = false;
-		ArrayList<Following> data = new ArrayList<Following>();
-		if ("SinaWeibo".equals(platformName)) {
-			// users[id, name, description]
-			@SuppressWarnings("unchecked")
-			ArrayList<HashMap<String, Object>> users
-					= (ArrayList<HashMap<String,Object>>) res.get("users");
-			for (HashMap<String, Object> user : users) {
-				String uid = String.valueOf(user.get("id"));
-				if (!uidMap.containsKey(uid)) {
-					Following following = new Following();
-					following.uid = uid;
-					following.screenName = String.valueOf(user.get("name"));
-					following.description = String.valueOf(user.get("description"));
-					following.icon = String.valueOf(user.get("profile_image_url"));
-					following.atName = following.screenName;
-					uidMap.put(following.uid, true);
-					data.add(following);
-				}
-			}
-			hasNext = (Integer) res.get("total_number") > uidMap.size();
-		}
-		else if ("TencentWeibo".equals(platformName)) {
-			hasNext = ((Integer)res.get("hasnext") == 0);
-			// info[nick, name, tweet[text]]
-			@SuppressWarnings("unchecked")
-			ArrayList<HashMap<String, Object>> infos
-					= (ArrayList<HashMap<String,Object>>) res.get("info");
-			for (HashMap<String, Object> info : infos) {
-				String uid = String.valueOf(info.get("name"));
-				if (!uidMap.containsKey(uid)) {
-					Following following = new Following();
-					following.screenName = String.valueOf(info.get("nick"));
-					following.uid = uid;
-					following.atName = uid;
-					@SuppressWarnings("unchecked")
-					ArrayList<HashMap<String, Object>> tweets = (ArrayList<HashMap<String,Object>>) info.get("tweet");
-					for (HashMap<String, Object> tweet : tweets) {
-						following.description = String.valueOf(tweet.get("text"));
-						break;
-					}
-					following.icon = String.valueOf(info.get("head")) + "/100";
-					uidMap.put(following.uid, true);
-					data.add(following);
-				}
-			}
-		}
-		else if ("Facebook".equals(platformName)) {
-			// data[id, name]
-			@SuppressWarnings("unchecked")
-			ArrayList<HashMap<String, Object>> datas
-					= (ArrayList<HashMap<String,Object>>) res.get("data");
-			for (HashMap<String, Object> d : datas) {
-				String uid = String.valueOf(d.get("id"));
-				if (!uidMap.containsKey(uid)) {
-					Following following = new Following();
-					following.uid = uid;
-					following.atName = "["+uid+"]";
-					following.screenName = String.valueOf(d.get("name"));
-					@SuppressWarnings("unchecked")
-					HashMap<String, Object> picture = (HashMap<String, Object>) d.get("picture");
-					if (picture != null) {
-						@SuppressWarnings("unchecked")
-						HashMap<String, Object> pData = (HashMap<String, Object>) picture.get("data");
-						following.icon = String.valueOf(pData.get("url"));
-					}
-					uidMap.put(following.uid, true);
-					data.add(following);
-				}
-			}
-			@SuppressWarnings("unchecked")
-			HashMap<String, Object> paging = (HashMap<String, Object>) res.get("paging");
-			hasNext = paging.containsKey("next");
-		}
-		else if ("Twitter".equals(platformName)) {
-			// users[screen_name, name, description]
-			@SuppressWarnings("unchecked")
-			ArrayList<HashMap<String, Object>> users
-					= (ArrayList<HashMap<String,Object>>) res.get("users");
-			for (HashMap<String, Object> user : users) {
-				String uid = String.valueOf(user.get("screen_name"));
-				if (!uidMap.containsKey(uid)) {
-					Following following = new Following();
-					following.uid = uid;
-					following.atName = uid;
-					following.screenName = String.valueOf(user.get("name"));
-					following.description = String.valueOf(user.get("description"));
-					following.icon = String.valueOf(user.get("profile_image_url"));
-					uidMap.put(following.uid, true);
-					data.add(following);
-				}
-			}
-		}
-		else if ("FacebookMessenger".equals(platformName)) {
-			@SuppressWarnings("unchecked")
-			ArrayList<HashMap<String, Object>> users
-					= (ArrayList<HashMap<String,Object>>) res.get("users");
-			for (HashMap<String, Object> user : users) {
-				String userAddr = String.valueOf(user.get("jid"));
-				if (!uidMap.containsKey(userAddr)) {
-					Following following = new Following();
-					following.uid = userAddr;
-					following.atName = userAddr;
-					following.screenName = String.valueOf(user.get("name"));
-					uidMap.put(following.uid, true);
-					data.add(following);
-				}
-			}
-			hasNext = false;
-		}
-
-		FollowersResult ret = new FollowersResult();
-		ret.list = data;
-		ret.hasNextPage = hasNext;
-		return ret;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/ClearEditText.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/ClearEditText.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/ClearEditText.java	(revision )
@@ -1,150 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.content.Context;
-import android.graphics.drawable.Drawable;
-import android.text.Editable;
-import android.text.TextWatcher;
-import android.util.AttributeSet;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.View.OnFocusChangeListener;
-import android.view.animation.Animation;
-import android.view.animation.CycleInterpolator;
-import android.view.animation.TranslateAnimation;
-import android.widget.EditText;
-
-import com.anniu.shandiandaojia.R;
-
-public class ClearEditText extends EditText implements OnFocusChangeListener,
-		TextWatcher {
-	/**
-	 * 删除按钮的引用
-	 */
-	private Drawable mClearDrawable;
-	/**
-	 * 控件是否有焦点
-	 */
-	private boolean hasFoucs;
-
-	public ClearEditText(Context context) {
-		this(context, null);
-	}
-
-	public ClearEditText(Context context, AttributeSet attrs) {
-		// 这里构造方法也很重要，不加这个很多属性不能再XML里面定义
-		this(context, attrs, android.R.attr.editTextStyle);
-	}
-
-	public ClearEditText(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-		init();
-	}
-
-	private void init() {
-		// 获取EditText的DrawableRight,假如没有设置我们就使用默认的图片
-		mClearDrawable = getCompoundDrawables()[2];
-		if (mClearDrawable == null) {
-			// throw new
-			// NullPointerException("You can add drawableRight attribute in XML");
-			mClearDrawable = getResources().getDrawable(
-					R.drawable.delete_selector);
-		}
-
-		mClearDrawable.setBounds(0, 0, mClearDrawable.getIntrinsicWidth(),
-				mClearDrawable.getIntrinsicHeight());
-		// 默认设置隐藏图标
-		setClearIconVisible(false);
-		// 设置焦点改变的监听
-		setOnFocusChangeListener(this);
-		// 设置输入框里面内容发生改变的监听
-		addTextChangedListener(this);
-	}
-
-	/**
-	 * 因为我们不能直接给EditText设置点击事件，所以我们用记住我们按下的位置来模拟点击事件 当我们按下的位置 在 EditText的宽度 -
-	 * 图标到控件右边的间距 - 图标的宽度 和 EditText的宽度 - 图标到控件右边的间距之间我们就算点击了图标，竖直方向就没有考虑
-	 */
-	@Override
-	public boolean onTouchEvent(MotionEvent event) {
-		if (event.getAction() == MotionEvent.ACTION_UP) {
-			if (getCompoundDrawables()[2] != null) {
-
-				boolean touchable = event.getX() > (getWidth() - getTotalPaddingRight())
-						&& (event.getX() < ((getWidth() - getPaddingRight())));
-
-				if (touchable) {
-					this.setText("");
-				}
-			}
-		}
-
-		return super.onTouchEvent(event);
-	}
-
-	/**
-	 * 当ClearEditText焦点发生变化的时候，判断里面字符串长度设置清除图标的显示与隐藏
-	 */
-	@Override
-	public void onFocusChange(View v, boolean hasFocus) {
-		this.hasFoucs = hasFocus;
-		if (hasFocus) {
-			setClearIconVisible(getText().length() > 0);
-		} else {
-			setClearIconVisible(false);
-		}
-	}
-
-	/**
-	 * 设置清除图标的显示与隐藏，调用setCompoundDrawables为EditText绘制上去
-	 * 
-	 * @param visible
-	 */
-	protected void setClearIconVisible(boolean visible) {
-		Drawable right = visible ? mClearDrawable : null;
-		setCompoundDrawables(getCompoundDrawables()[0],
-				getCompoundDrawables()[1], right, getCompoundDrawables()[3]);
-	}
-
-	/**
-	 * 当输入框里面内容发生变化的时候回调的方法
-	 */
-	@Override
-	public void onTextChanged(CharSequence s, int start, int count, int after) {
-		if (hasFoucs) {
-			setClearIconVisible(s.length() > 0);
-		}
-		super.onTextChanged(s, start, count, after);
-	}
-
-	@Override
-	public void beforeTextChanged(CharSequence s, int start, int count,
-			int after) {
-
-	}
-
-	@Override
-	public void afterTextChanged(Editable s) {
-
-	}
-
-	/**
-	 * 设置晃动动画
-	 */
-	public void setShakeAnimation() {
-		this.setAnimation(shakeAnimation(5));
-	}
-
-	/**
-	 * 晃动动画
-	 * 
-	 * @param counts
-	 *            1秒钟晃动多少下
-	 * @return
-	 */
-	public static Animation shakeAnimation(int counts) {
-		Animation translateAnimation = new TranslateAnimation(0, 10, 0, 0);
-		translateAnimation.setInterpolator(new CycleInterpolator(counts));
-		translateAnimation.setDuration(1000);
-		return translateAnimation;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosAdapterView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosAdapterView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/TosAdapterView.java	(revision )
@@ -1,1193 +0,0 @@
-/*
- * Copyright (C) 2006 The Android Open Source Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.anniu.shandiandaojia.view.lee.wheel.widget;
-
-import android.content.Context;
-import android.database.DataSetObserver;
-import android.os.Handler;
-import android.os.Parcelable;
-import android.os.SystemClock;
-import android.util.AttributeSet;
-import android.util.SparseArray;
-import android.view.ContextMenu;
-import android.view.ContextMenu.ContextMenuInfo;
-import android.view.SoundEffectConstants;
-import android.view.View;
-import android.view.ViewDebug;
-import android.view.ViewGroup;
-import android.view.accessibility.AccessibilityEvent;
-import android.widget.Adapter;
-import android.widget.GridView;
-import android.widget.ListView;
-import android.widget.Spinner;
-
-/**
- * An AdapterView is a view whose children are determined by an {@link Adapter}.
- * 
- * <p>
- * See {@link ListView}, {@link GridView}, {@link Spinner} and {@link TosGallery} for commonly used
- * subclasses of AdapterView.
- */
-public abstract class TosAdapterView<T extends Adapter> extends ViewGroup {
-
-    /**
-     * The item view type returned by {@link Adapter#getItemViewType(int)} when the adapter does not
-     * want the item's view recycled.
-     */
-    public static final int ITEM_VIEW_TYPE_IGNORE = -1;
-
-    /**
-     * The item view type returned by {@link Adapter#getItemViewType(int)} when the item is a header
-     * or footer.
-     */
-    public static final int ITEM_VIEW_TYPE_HEADER_OR_FOOTER = -2;
-
-    /**
-     * The position of the first child displayed
-     */
-    @ViewDebug.ExportedProperty
-    int mFirstPosition = 0;
-
-    /**
-     * The offset in pixels from the top of the AdapterView to the top of the view to select during
-     * the next layout.
-     */
-    int mSpecificTop;
-
-    /**
-     * Position from which to start looking for mSyncRowId
-     */
-    int mSyncPosition;
-
-    /**
-     * Row id to look for when data has changed
-     */
-    long mSyncRowId = INVALID_ROW_ID;
-
-    /**
-     * Height of the view when mSyncPosition and mSyncRowId where set
-     */
-    long mSyncHeight;
-
-    /**
-     * True if we need to sync to mSyncRowId
-     */
-    boolean mNeedSync = false;
-
-    /**
-     * Indicates whether to sync based on the selection or position. Possible values are
-     * {@link #SYNC_SELECTED_POSITION} or {@link #SYNC_FIRST_POSITION}.
-     */
-    int mSyncMode;
-
-    /**
-     * Our height after the last layout
-     */
-    private int mLayoutHeight;
-
-    /**
-     * Sync based on the selected child
-     */
-    static final int SYNC_SELECTED_POSITION = 0;
-
-    /**
-     * Sync based on the first child displayed
-     */
-    static final int SYNC_FIRST_POSITION = 1;
-
-    /**
-     * Maximum amount of time to spend in {@link #findSyncPosition()}
-     */
-    static final int SYNC_MAX_DURATION_MILLIS = 100;
-
-    /**
-     * Indicates that this view is currently being laid out.
-     */
-    boolean mInLayout = false;
-
-    /**
-     * The listener that receives notifications when an item is selected.
-     */
-    OnItemSelectedListener mOnItemSelectedListener;
-
-    /**
-     * The listener that receives notifications when an item is clicked.
-     */
-    OnItemClickListener mOnItemClickListener;
-
-    /**
-     * The listener that receives notifications when an item is long clicked.
-     */
-    OnItemLongClickListener mOnItemLongClickListener;
-
-    /**
-     * The listener that receives notifications when an item is double clicked.
-     */
-    OnItemDoubleClickListener mOnItemDoubleClickListener;
-
-    /**
-     * True if the data has changed since the last layout
-     */
-    boolean mDataChanged;
-
-    /**
-     * The position within the adapter's data set of the item to select during the next layout.
-     */
-    @ViewDebug.ExportedProperty
-    int mNextSelectedPosition = INVALID_POSITION;
-
-    /**
-     * The item id of the item to select during the next layout.
-     */
-    long mNextSelectedRowId = INVALID_ROW_ID;
-
-    /**
-     * The position within the adapter's data set of the currently selected item.
-     */
-    @ViewDebug.ExportedProperty
-    int mSelectedPosition = INVALID_POSITION;
-
-    /**
-     * The item id of the currently selected item.
-     */
-    long mSelectedRowId = INVALID_ROW_ID;
-
-    /**
-     * View to show if there are no items to show.
-     */
-    private View mEmptyView;
-
-    /**
-     * The number of items in the current adapter.
-     */
-    @ViewDebug.ExportedProperty
-    int mItemCount;
-
-    /**
-     * The number of items in the adapter before a data changed event occured.
-     */
-    int mOldItemCount;
-
-    /**
-     * Represents an invalid position. All valid positions are in the range 0 to 1 less than the
-     * number of items in the current adapter.
-     */
-    public static final int INVALID_POSITION = -1;
-
-    /**
-     * Represents an empty or invalid row id
-     */
-    public static final long INVALID_ROW_ID = Long.MIN_VALUE;
-
-    /**
-     * The last selected position we used when notifying
-     */
-    int mOldSelectedPosition = INVALID_POSITION;
-
-    /**
-     * The id of the last selected position we used when notifying
-     */
-    long mOldSelectedRowId = INVALID_ROW_ID;
-
-    /**
-     * Indicates what focusable state is requested when calling setFocusable(). In addition to this,
-     * this view has other criteria for actually determining the focusable state (such as whether
-     * its empty or the text filter is shown).
-     * 
-     * @see #setFocusable(boolean)
-     * @see #checkFocus()
-     */
-    private boolean mDesiredFocusableState;
-    private boolean mDesiredFocusableInTouchModeState;
-
-    private SelectionNotifier mSelectionNotifier;
-    /**
-     * When set to true, calls to requestLayout() will not propagate up the parent hierarchy. This
-     * is used to layout the children during a layout pass.
-     */
-    boolean mBlockLayoutRequests = false;
-
-    public TosAdapterView(Context context) {
-        super(context);
-    }
-
-    public TosAdapterView(Context context, AttributeSet attrs) {
-        super(context, attrs);
-    }
-
-    public TosAdapterView(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-    }
-
-    /**
-     * Interface definition for a callback to be invoked when an item in this AdapterView has been
-     * clicked.
-     */
-    public interface OnItemClickListener {
-
-        /**
-         * Callback method to be invoked when an item in this AdapterView has been clicked.
-         * <p>
-         * Implementers can call getItemAtPosition(position) if they need to access the data
-         * associated with the selected item.
-         * 
-         * @param parent The AdapterView where the click happened.
-         * @param view The view within the AdapterView that was clicked (this will be a view
-         *            provided by the adapter)
-         * @param position The position of the view in the adapter.
-         * @param id The row id of the item that was clicked.
-         */
-        void onItemClick(TosAdapterView<?> parent, View view, int position, long id);
-    }
-
-    /**
-     * Register a callback to be invoked when an item in this AdapterView has been clicked.
-     * 
-     * @param listener The callback that will be invoked.
-     */
-    public void setOnItemClickListener(OnItemClickListener listener) {
-        mOnItemClickListener = listener;
-    }
-
-    /**
-     * @return The callback to be invoked with an item in this AdapterView has been clicked, or null
-     *         id no callback has been set.
-     */
-    public final OnItemClickListener getOnItemClickListener() {
-        return mOnItemClickListener;
-    }
-
-    @Override
-    public void addOnLayoutChangeListener(OnLayoutChangeListener listener) {
-        super.addOnLayoutChangeListener(listener);
-    }
-
-    /**
-     * Call the OnItemClickListener, if it is defined.
-     * 
-     * @param view The view within the AdapterView that was clicked.
-     * @param position The position of the view in the adapter.
-     * @param id The row id of the item that was clicked.
-     * @return True if there was an assigned OnItemClickListener that was called, false otherwise is
-     *         returned.
-     */
-    public boolean performItemClick(View view, int position, long id) {
-        if (mOnItemClickListener != null) {
-            playSoundEffect(SoundEffectConstants.CLICK);
-            mOnItemClickListener.onItemClick(this, view, position, id);
-            return true;
-        }
-
-        return false;
-    }
-
-    /**
-     * Interface definition for a callback to be invoked when an item in this view has been clicked
-     * and held.
-     */
-    public interface OnItemLongClickListener {
-        /**
-         * Callback method to be invoked when an item in this view has been clicked and held.
-         * 
-         * Implementers can call getItemAtPosition(position) if they need to access the data
-         * associated with the selected item.
-         * 
-         * @param parent The AbsListView where the click happened
-         * @param view The view within the AbsListView that was clicked
-         * @param position The position of the view in the list
-         * @param id The row id of the item that was clicked
-         * 
-         * @return true if the callback consumed the long click, false otherwise
-         */
-        boolean onItemLongClick(TosAdapterView<?> parent, View view, int position, long id);
-    }
-
-    // Added by LiHong at 2012/02/03 begin =====================
-    //
-    // Note: Support for the item double click.
-
-    /**
-     * Register a callback to be invoked when an item in this AdapterView has been clicked.
-     * 
-     * @param listener The callback that will be invoked.
-     */
-    public void setOnItemDoubleClickListener(OnItemDoubleClickListener listener) {
-        mOnItemDoubleClickListener = listener;
-    }
-
-    /**
-     * Call the OnItemClickListener, if it is defined.
-     * 
-     * @param view The view within the AdapterView that was clicked.
-     * @param position The position of the view in the adapter.
-     * @param id The row id of the item that was clicked.
-     * @return True if there was an assigned OnItemClickListener that was called, false otherwise is
-     *         returned.
-     */
-    public boolean performItemDoubleClick(View view, int position, long id) {
-        if (mOnItemDoubleClickListener != null) {
-            // playSoundEffect(SoundEffectConstants.CLICK);
-            mOnItemDoubleClickListener.onItemDoubleClick(this, view, position, id);
-            return true;
-        }
-
-        return false;
-    }
-
-    /**
-     * Interface definition for a callbace to be invoked when an item in this view has been double
-     * clicked and held.
-     */
-    public interface OnItemDoubleClickListener {
-        /**
-         * Callback method to be invoked when an item in this view has been double clicked and held.
-         * 
-         * Implementers can call getItemAtPosition(position) if they need to access the data
-         * associated with the selected item.
-         * 
-         * @param parent The AbsListView where the click happened
-         * @param view The view within the AbsListView that was clicked
-         * @param position The position of the view in the list
-         * @param id The row id of the item that was clicked
-         * 
-         * @return true if the callback consumed the long click, false otherwise
-         */
-        boolean onItemDoubleClick(TosAdapterView<?> parent, View view, int position, long id);
-    }
-
-    // Added by LiHong at 2012/02/03 end =======================
-
-    /**
-     * Register a callback to be invoked when an item in this AdapterView has been clicked and held
-     * 
-     * @param listener The callback that will run
-     */
-    public void setOnItemLongClickListener(OnItemLongClickListener listener) {
-        if (!isLongClickable()) {
-            setLongClickable(true);
-        }
-        mOnItemLongClickListener = listener;
-    }
-
-    /**
-     * @return The callback to be invoked with an item in this AdapterView has been clicked and
-     *         held, or null id no callback as been set.
-     */
-    public final OnItemLongClickListener getOnItemLongClickListener() {
-        return mOnItemLongClickListener;
-    }
-
-    /**
-     * Interface definition for a callback to be invoked when an item in this view has been
-     * selected.
-     */
-    public interface OnItemSelectedListener {
-        /**
-         * Callback method to be invoked when an item in this view has been selected.
-         * 
-         * Impelmenters can call getItemAtPosition(position) if they need to access the data
-         * associated with the selected item.
-         * 
-         * @param parent The AdapterView where the selection happened
-         * @param view The view within the AdapterView that was clicked
-         * @param position The position of the view in the adapter
-         * @param id The row id of the item that is selected
-         */
-        void onItemSelected(TosAdapterView<?> parent, View view, int position, long id);
-
-        /**
-         * Callback method to be invoked when the selection disappears from this view. The selection
-         * can disappear for instance when touch is activated or when the adapter becomes empty.
-         * 
-         * @param parent The AdapterView that now contains no selected item.
-         */
-        void onNothingSelected(TosAdapterView<?> parent);
-    }
-
-    /**
-     * Register a callback to be invoked when an item in this AdapterView has been selected.
-     * 
-     * @param listener The callback that will run
-     */
-    public void setOnItemSelectedListener(OnItemSelectedListener listener) {
-        mOnItemSelectedListener = listener;
-    }
-
-    public final OnItemSelectedListener getOnItemSelectedListener() {
-        return mOnItemSelectedListener;
-    }
-
-    /**
-     * Extra menu information provided to the
-     * {@link android.view.View.OnCreateContextMenuListener#onCreateContextMenu(ContextMenu, View, ContextMenuInfo) }
-     * callback when a context menu is brought up for this AdapterView.
-     * 
-     */
-    public static class AdapterContextMenuInfo implements ContextMenu.ContextMenuInfo {
-
-        public AdapterContextMenuInfo(View targetView, int position, long id) {
-            this.targetView = targetView;
-            this.position = position;
-            this.id = id;
-        }
-
-        /**
-         * The child view for which the context menu is being displayed. This will be one of the
-         * children of this AdapterView.
-         */
-        public View targetView;
-
-        /**
-         * The position in the adapter for which the context menu is being displayed.
-         */
-        public int position;
-
-        /**
-         * The row id of the item for which the context menu is being displayed.
-         */
-        public long id;
-    }
-
-    /**
-     * Returns the adapter currently associated with this widget.
-     * 
-     * @return The adapter used to provide this view's content.
-     */
-    public abstract T getAdapter();
-
-    /**
-     * Sets the adapter that provides the data and the views to represent the data in this widget.
-     * 
-     * @param adapter The adapter to use to create this view's content.
-     */
-    public abstract void setAdapter(T adapter);
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @param child Ignored.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void addView(View child) {
-        throw new UnsupportedOperationException("addView(View) is not supported in AdapterView");
-    }
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @param child Ignored.
-     * @param index Ignored.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void addView(View child, int index) {
-        throw new UnsupportedOperationException("addView(View, int) is not supported in AdapterView");
-    }
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @param child Ignored.
-     * @param params Ignored.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void addView(View child, LayoutParams params) {
-        throw new UnsupportedOperationException("addView(View, LayoutParams) " + "is not supported in AdapterView");
-    }
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @param child Ignored.
-     * @param index Ignored.
-     * @param params Ignored.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void addView(View child, int index, LayoutParams params) {
-        throw new UnsupportedOperationException("addView(View, int, LayoutParams) " + "is not supported in AdapterView");
-    }
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @param child Ignored.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void removeView(View child) {
-        throw new UnsupportedOperationException("removeView(View) is not supported in AdapterView");
-    }
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @param index Ignored.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void removeViewAt(int index) {
-        throw new UnsupportedOperationException("removeViewAt(int) is not supported in AdapterView");
-    }
-
-    /**
-     * This method is not supported and throws an UnsupportedOperationException when called.
-     * 
-     * @throws UnsupportedOperationException Every time this method is invoked.
-     */
-    @Override
-    public void removeAllViews() {
-        throw new UnsupportedOperationException("removeAllViews() is not supported in AdapterView");
-    }
-
-    protected void onLayout1(boolean changed, int left, int top, int right, int bottom) {
-        mLayoutHeight = getHeight();
-    }
-
-    /**
-     * Return the position of the currently selected item within the adapter's data set
-     * 
-     * @return int Position (starting at 0), or {@link #INVALID_POSITION} if there is nothing
-     *         selected.
-     */
-    @ViewDebug.CapturedViewProperty
-    public int getSelectedItemPosition() {
-        return mNextSelectedPosition;
-    }
-
-    /**
-     * @return The id corresponding to the currently selected item, or {@link #INVALID_ROW_ID} if
-     *         nothing is selected.
-     */
-    @ViewDebug.CapturedViewProperty
-    public long getSelectedItemId() {
-        return mNextSelectedRowId;
-    }
-
-    /**
-     * @return The view corresponding to the currently selected item, or null if nothing is selected
-     */
-    public abstract View getSelectedView();
-
-    /**
-     * @return The data corresponding to the currently selected item, or null if there is nothing
-     *         selected.
-     */
-    public Object getSelectedItem() {
-        T adapter = getAdapter();
-        int selection = getSelectedItemPosition();
-        if (adapter != null && adapter.getCount() > 0 && selection >= 0) {
-            return adapter.getItem(selection);
-        } else {
-            return null;
-        }
-    }
-
-    /**
-     * @return The number of items owned by the Adapter associated with this AdapterView. (This is
-     *         the number of data items, which may be larger than the number of visible view.)
-     */
-    @ViewDebug.CapturedViewProperty
-    public int getCount() {
-        return mItemCount;
-    }
-
-    /**
-     * Get the position within the adapter's data set for the view, where view is a an adapter item
-     * or a descendant of an adapter item.
-     * 
-     * @param view an adapter item, or a descendant of an adapter item. This must be visible in this
-     *            AdapterView at the time of the call.
-     * @return the position within the adapter's data set of the view, or {@link #INVALID_POSITION}
-     *         if the view does not correspond to a list item (or it is not currently visible).
-     */
-    public int getPositionForView(View view) {
-        View listItem = view;
-        try {
-            View v;
-            while (!(v = (View) listItem.getParent()).equals(this)) {
-                listItem = v;
-            }
-        } catch (ClassCastException e) {
-            // We made it up to the window without find this list view
-            return INVALID_POSITION;
-        }
-
-        // Search the children for the list item
-        final int childCount = getChildCount();
-        for (int i = 0; i < childCount; i++) {
-            if (getChildAt(i).equals(listItem)) {
-                return mFirstPosition + i;
-            }
-        }
-
-        // Child not found!
-        return INVALID_POSITION;
-    }
-
-    /**
-     * Returns the position within the adapter's data set for the first item displayed on screen.
-     * 
-     * @return The position within the adapter's data set
-     */
-    public int getFirstVisiblePosition() {
-        return mFirstPosition;
-    }
-
-    /**
-     * Returns the position within the adapter's data set for the last item displayed on screen.
-     * 
-     * @return The position within the adapter's data set
-     */
-    public int getLastVisiblePosition() {
-        return mFirstPosition + getChildCount() - 1;
-    }
-
-    /**
-     * Sets the currently selected item. To support accessibility subclasses that override this
-     * method must invoke the overriden super method first.
-     * 
-     * @param position Index (starting at 0) of the data item to be selected.
-     */
-    public abstract void setSelection(int position);
-
-    /**
-     * Sets the view to show if the adapter is empty
-     */
-    public void setEmptyView(View emptyView) {
-        mEmptyView = emptyView;
-
-        final T adapter = getAdapter();
-        final boolean empty = ((adapter == null) || adapter.isEmpty());
-        updateEmptyStatus(empty);
-    }
-
-    /**
-     * When the current adapter is empty, the AdapterView can display a special view call the empty
-     * view. The empty view is used to provide feedback to the user that no data is available in
-     * this AdapterView.
-     * 
-     * @return The view to show if the adapter is empty.
-     */
-    public View getEmptyView() {
-        return mEmptyView;
-    }
-
-    /**
-     * Indicates whether this view is in filter mode. Filter mode can for instance be enabled by a
-     * user when typing on the keyboard.
-     * 
-     * @return True if the view is in filter mode, false otherwise.
-     */
-    boolean isInFilterMode() {
-        return false;
-    }
-
-    @Override
-    public void setFocusable(boolean focusable) {
-        final T adapter = getAdapter();
-        final boolean empty = adapter == null || adapter.getCount() == 0;
-
-        mDesiredFocusableState = focusable;
-        if (!focusable) {
-            mDesiredFocusableInTouchModeState = false;
-        }
-
-        super.setFocusable(focusable && (!empty || isInFilterMode()));
-    }
-
-    @Override
-    public void setFocusableInTouchMode(boolean focusable) {
-        final T adapter = getAdapter();
-        final boolean empty = adapter == null || adapter.getCount() == 0;
-
-        mDesiredFocusableInTouchModeState = focusable;
-        if (focusable) {
-            mDesiredFocusableState = true;
-        }
-
-        super.setFocusableInTouchMode(focusable && (!empty || isInFilterMode()));
-    }
-
-    void checkFocus() {
-        final T adapter = getAdapter();
-        final boolean empty = adapter == null || adapter.getCount() == 0;
-        final boolean focusable = !empty || isInFilterMode();
-        // The order in which we set focusable in touch mode/focusable may matter
-        // for the client, see View.setFocusableInTouchMode() comments for more
-        // details
-        super.setFocusableInTouchMode(focusable && mDesiredFocusableInTouchModeState);
-        super.setFocusable(focusable && mDesiredFocusableState);
-        if (mEmptyView != null) {
-            updateEmptyStatus((adapter == null) || adapter.isEmpty());
-        }
-    }
-
-    /**
-     * Update the status of the list based on the empty parameter. If empty is true and we have an
-     * empty view, display it. In all the other cases, make sure that the listview is VISIBLE and
-     * that the empty view is GONE (if it's not null).
-     */
-    private void updateEmptyStatus(boolean empty) {
-        if (isInFilterMode()) {
-            empty = false;
-        }
-
-        if (empty) {
-            if (mEmptyView != null) {
-                mEmptyView.setVisibility(View.VISIBLE);
-                setVisibility(View.GONE);
-            } else {
-                // If the caller just removed our empty view, make sure the list view is visible
-                setVisibility(View.VISIBLE);
-            }
-
-            // We are now GONE, so pending layouts will not be dispatched.
-            // Force one here to make sure that the state of the list matches
-            // the state of the adapter.
-            if (mDataChanged) {
-
-                // this.onLayout(false, mLeft, mTop, mRight, mBottom);
-
-                // Added by Li Hong at 2011/08/05 begin
-                //
-                // Note: mLeft, mTop, mRight and mBottom are hide to subclasses, so we
-                // should use methods instead of members.
-                this.onLayout1(false, getLeft(), getTop(), getRight(), getBottom());
-                // Added by Li Hong at 2011/08/05 end
-            }
-        } else {
-            if (mEmptyView != null)
-                mEmptyView.setVisibility(View.GONE);
-            setVisibility(View.VISIBLE);
-        }
-    }
-
-    /**
-     * Gets the data associated with the specified position in the list.
-     * 
-     * @param position Which data to get
-     * @return The data associated with the specified position in the list
-     */
-    public Object getItemAtPosition(int position) {
-        T adapter = getAdapter();
-        return (adapter == null || position < 0) ? null : adapter.getItem(position);
-    }
-
-    public long getItemIdAtPosition(int position) {
-        T adapter = getAdapter();
-        return (adapter == null || position < 0) ? INVALID_ROW_ID : adapter.getItemId(position);
-    }
-
-    @Override
-    public void setOnClickListener(OnClickListener l) {
-        throw new RuntimeException("Don't call setOnClickListener for an AdapterView. "
-                + "You probably want setOnItemClickListener instead");
-    }
-
-    /**
-     * Override to prevent freezing of any views created by the adapter.
-     */
-    @Override
-    protected void dispatchSaveInstanceState(SparseArray<Parcelable> container) {
-        dispatchFreezeSelfOnly(container);
-    }
-
-    /**
-     * Override to prevent thawing of any views created by the adapter.
-     */
-    @Override
-    protected void dispatchRestoreInstanceState(SparseArray<Parcelable> container) {
-        dispatchThawSelfOnly(container);
-    }
-
-    class AdapterDataSetObserver extends DataSetObserver {
-
-        private Parcelable mInstanceState = null;
-
-        @Override
-        public void onChanged() {
-            mDataChanged = true;
-            mOldItemCount = mItemCount;
-            mItemCount = getAdapter().getCount();
-
-            // Detect the case where a cursor that was previously invalidated has
-            // been repopulated with new data.
-            if (TosAdapterView.this.getAdapter().hasStableIds() && mInstanceState != null && mOldItemCount == 0
-                    && mItemCount > 0) {
-                TosAdapterView.this.onRestoreInstanceState(mInstanceState);
-                mInstanceState = null;
-            } else {
-                rememberSyncState();
-            }
-            checkFocus();
-            requestLayout();
-        }
-
-        @Override
-        public void onInvalidated() {
-            mDataChanged = true;
-
-            if (TosAdapterView.this.getAdapter().hasStableIds()) {
-                // Remember the current state for the case where our hosting activity is being
-                // stopped and later restarted
-                mInstanceState = TosAdapterView.this.onSaveInstanceState();
-            }
-
-            // Data is invalid so we should reset our state
-            mOldItemCount = mItemCount;
-            mItemCount = 0;
-            mSelectedPosition = INVALID_POSITION;
-            mSelectedRowId = INVALID_ROW_ID;
-            mNextSelectedPosition = INVALID_POSITION;
-            mNextSelectedRowId = INVALID_ROW_ID;
-            mNeedSync = false;
-            checkSelectionChanged();
-
-            checkFocus();
-            requestLayout();
-        }
-
-        public void clearSavedState() {
-            mInstanceState = null;
-        }
-    }
-
-    private class SelectionNotifier extends Handler implements Runnable {
-        public void run() {
-            if (mDataChanged) {
-                // Data has changed between when this SelectionNotifier
-                // was posted and now. We need to wait until the AdapterView
-                // has been synched to the new data.
-                post(this);
-            } else {
-                fireOnSelected();
-            }
-        }
-    }
-
-    // Added by LiHong at 2012/11/20 begin =========
-    //
-    // NOTE: Add the protected keyword.
-    protected void selectionChanged() {
-        // Added by LiHong at 2012/11/20 begin =========
-        if (mOnItemSelectedListener != null) {
-            if (mInLayout || mBlockLayoutRequests) {
-                // If we are in a layout traversal, defer notification
-                // by posting. This ensures that the view tree is
-                // in a consistent state and is able to accomodate
-                // new layout or invalidate requests.
-                if (mSelectionNotifier == null) {
-                    mSelectionNotifier = new SelectionNotifier();
-                }
-                mSelectionNotifier.post(mSelectionNotifier);
-            } else {
-                fireOnSelected();
-            }
-        }
-
-        // we fire selection events here not in View
-        if (mSelectedPosition != ListView.INVALID_POSITION && isShown() && !isInTouchMode()) {
-            sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_SELECTED);
-        }
-    }
-
-    private void fireOnSelected() {
-        if (mOnItemSelectedListener == null)
-            return;
-
-        int selection = this.getSelectedItemPosition();
-        if (selection >= 0) {
-            View v = getSelectedView();
-            mOnItemSelectedListener.onItemSelected(this, v, selection, getAdapter().getItemId(selection));
-        } else {
-            mOnItemSelectedListener.onNothingSelected(this);
-        }
-    }
-
-    @Override
-    public boolean dispatchPopulateAccessibilityEvent(AccessibilityEvent event) {
-        boolean populated = false;
-        // This is an exceptional case which occurs when a window gets the
-        // focus and sends a focus event via its focused child to announce
-        // current focus/selection. AdapterView fires selection but not focus
-        // events so we change the event type here.
-        if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_FOCUSED) {
-            event.setEventType(AccessibilityEvent.TYPE_VIEW_SELECTED);
-        }
-
-        // we send selection events only from AdapterView to avoid
-        // generation of such event for each child
-        View selectedView = getSelectedView();
-        if (selectedView != null) {
-            populated = selectedView.dispatchPopulateAccessibilityEvent(event);
-        }
-
-        if (!populated) {
-            if (selectedView != null) {
-                event.setEnabled(selectedView.isEnabled());
-            }
-            event.setItemCount(getCount());
-            event.setCurrentItemIndex(getSelectedItemPosition());
-        }
-
-        return populated;
-    }
-
-    @Override
-    protected boolean canAnimate() {
-        return super.canAnimate() && mItemCount > 0;
-    }
-
-    void handleDataChanged() {
-        final int count = mItemCount;
-        boolean found = false;
-
-        if (count > 0) {
-
-            int newPos;
-
-            // Find the row we are supposed to sync to
-            if (mNeedSync) {
-                // Update this first, since setNextSelectedPositionInt inspects
-                // it
-                mNeedSync = false;
-
-                // See if we can find a position in the new data with the same
-                // id as the old selection
-                newPos = findSyncPosition();
-                if (newPos >= 0) {
-                    // Verify that new selection is selectable
-                    int selectablePos = lookForSelectablePosition(newPos, true);
-                    if (selectablePos == newPos) {
-                        // Same row id is selected
-                        setNextSelectedPositionInt(newPos);
-                        found = true;
-                    }
-                }
-            }
-            if (!found) {
-                // Try to use the same position if we can't find matching data
-                newPos = getSelectedItemPosition();
-
-                // Pin position to the available range
-                if (newPos >= count) {
-                    newPos = count - 1;
-                }
-                if (newPos < 0) {
-                    newPos = 0;
-                }
-
-                // Make sure we select something selectable -- first look down
-                int selectablePos = lookForSelectablePosition(newPos, true);
-                if (selectablePos < 0) {
-                    // Looking down didn't work -- try looking up
-                    selectablePos = lookForSelectablePosition(newPos, false);
-                }
-                if (selectablePos >= 0) {
-                    setNextSelectedPositionInt(selectablePos);
-                    checkSelectionChanged();
-                    found = true;
-                }
-            }
-        }
-        if (!found) {
-            // Nothing is selected
-            mSelectedPosition = INVALID_POSITION;
-            mSelectedRowId = INVALID_ROW_ID;
-            mNextSelectedPosition = INVALID_POSITION;
-            mNextSelectedRowId = INVALID_ROW_ID;
-            mNeedSync = false;
-            checkSelectionChanged();
-        }
-    }
-
-    void checkSelectionChanged() {
-        if ((mSelectedPosition != mOldSelectedPosition) || (mSelectedRowId != mOldSelectedRowId)) {
-            selectionChanged();
-            mOldSelectedPosition = mSelectedPosition;
-            mOldSelectedRowId = mSelectedRowId;
-        }
-    }
-
-    /**
-     * Searches the adapter for a position matching mSyncRowId. The search starts at mSyncPosition
-     * and then alternates between moving up and moving down until 1) we find the right position, or
-     * 2) we run out of time, or 3) we have looked at every position
-     * 
-     * @return Position of the row that matches mSyncRowId, or {@link #INVALID_POSITION} if it can't
-     *         be found
-     */
-    int findSyncPosition() {
-        int count = mItemCount;
-
-        if (count == 0) {
-            return INVALID_POSITION;
-        }
-
-        long idToMatch = mSyncRowId;
-        int seed = mSyncPosition;
-
-        // If there isn't a selection don't hunt for it
-        if (idToMatch == INVALID_ROW_ID) {
-            return INVALID_POSITION;
-        }
-
-        // Pin seed to reasonable values
-        seed = Math.max(0, seed);
-        seed = Math.min(count - 1, seed);
-
-        long endTime = SystemClock.uptimeMillis() + SYNC_MAX_DURATION_MILLIS;
-
-        long rowId;
-
-        // first position scanned so far
-        int first = seed;
-
-        // last position scanned so far
-        int last = seed;
-
-        // True if we should move down on the next iteration
-        boolean next = false;
-
-        // True when we have looked at the first item in the data
-        boolean hitFirst;
-
-        // True when we have looked at the last item in the data
-        boolean hitLast;
-
-        // Get the item ID locally (instead of getItemIdAtPosition), so
-        // we need the adapter
-        T adapter = getAdapter();
-        if (adapter == null) {
-            return INVALID_POSITION;
-        }
-
-        while (SystemClock.uptimeMillis() <= endTime) {
-            rowId = adapter.getItemId(seed);
-            if (rowId == idToMatch) {
-                // Found it!
-                return seed;
-            }
-
-            hitLast = last == count - 1;
-            hitFirst = first == 0;
-
-            if (hitLast && hitFirst) {
-                // Looked at everything
-                break;
-            }
-
-            if (hitFirst || (next && !hitLast)) {
-                // Either we hit the top, or we are trying to move down
-                last++;
-                seed = last;
-                // Try going up next time
-                next = false;
-            } else if (hitLast || (!next && !hitFirst)) {
-                // Either we hit the bottom, or we are trying to move up
-                first--;
-                seed = first;
-                // Try going down next time
-                next = true;
-            }
-
-        }
-
-        return INVALID_POSITION;
-    }
-
-    /**
-     * Find a position that can be selected (i.e., is not a separator).
-     * 
-     * @param position The starting position to look at.
-     * @param lookDown Whether to look down for other positions.
-     * @return The next selectable position starting at position and then searching either up or
-     *         down. Returns {@link #INVALID_POSITION} if nothing can be found.
-     */
-    int lookForSelectablePosition(int position, boolean lookDown) {
-        return position;
-    }
-
-    /**
-     * Utility to keep mSelectedPosition and mSelectedRowId in sync
-     * 
-     * @param position Our current position
-     */
-    void setSelectedPositionInt(int position) {
-        mSelectedPosition = position;
-        mSelectedRowId = getItemIdAtPosition(position);
-    }
-
-    /**
-     * Utility to keep mNextSelectedPosition and mNextSelectedRowId in sync
-     * 
-     * @param position Intended value for mSelectedPosition the next time we go through layout
-     */
-    void setNextSelectedPositionInt(int position) {
-        mNextSelectedPosition = position;
-        mNextSelectedRowId = getItemIdAtPosition(position);
-        // If we are trying to sync to the selection, update that too
-        if (mNeedSync && mSyncMode == SYNC_SELECTED_POSITION && position >= 0) {
-            mSyncPosition = position;
-            mSyncRowId = mNextSelectedRowId;
-        }
-    }
-
-    /**
-     * Remember enough information to restore the screen state when the data has changed.
-     * 
-     */
-    void rememberSyncState() {
-        if (getChildCount() > 0) {
-            mNeedSync = true;
-            mSyncHeight = mLayoutHeight;
-            if (mSelectedPosition >= 0) {
-                // Sync the selection state
-                View v = getChildAt(mSelectedPosition - mFirstPosition);
-                mSyncRowId = mNextSelectedRowId;
-                mSyncPosition = mNextSelectedPosition;
-                if (v != null) {
-                    mSpecificTop = v.getTop();
-                }
-                mSyncMode = SYNC_SELECTED_POSITION;
-            } else {
-                // Sync the based on the offset of the first view
-                View v = getChildAt(0);
-                T adapter = getAdapter();
-                if (mFirstPosition >= 0 && mFirstPosition < adapter.getCount()) {
-                    mSyncRowId = adapter.getItemId(mFirstPosition);
-                } else {
-                    mSyncRowId = NO_ID;
-                }
-                mSyncPosition = mFirstPosition;
-                if (v != null) {
-                    mSpecificTop = v.getTop();
-                }
-                mSyncMode = SYNC_FIRST_POSITION;
-            }
-        }
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyListView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyListView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyListView.java	(revision )
@@ -1,26 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.widget.ListView;
-
-public class MyListView extends ListView {
-
-	public MyListView(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-	}
-
-	public MyListView(Context context, AttributeSet attrs) {
-		super(context, attrs);
-	}
-
-	public MyListView(Context context) {
-		super(context);
-	}
-	@Override 
-	protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { 
-	    int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);  
-	     
-	    super.onMeasure(widthMeasureSpec, expandSpec); 
-	} 
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindpersonbyidReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindpersonbyidReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/FindpersonbyidReq.java	(revision )
@@ -1,41 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-/***
- * 
- * @ClassName:  FindpersonbyidReq
- * @Description: 获取个人中心详情
- * @author YY
- * @date 2015年6月4日 下午4:47:36
- */
-public class FindpersonbyidReq extends HttpReq {
-	
-	private int userCode;
-	
-
-
-	public FindpersonbyidReq(int reqid,int userCode) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/SettingActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/SettingActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/SettingActivity.java	(revision )
@@ -1,88 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.logic.UpdateLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-/**
- * @ClassName:  SettingActivity
- * @Description: 设置界面
- * @author YY
- * @date 2015年5月30日 下午8:03:50
- */
-public class SettingActivity extends BaseActivity {
-	private TextView titleBarTv;//界面标题
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {
-			finish();
-		}else if (v.getId()==R.id.rl_version) {//版本检查
-			sendUpdateAction();
-		}else if (v.getId()==R.id.rl_about_us) {//关于我们
-			startActivity(new Intent(this,AboutActivity.class));
-		}else if (v.getId()==R.id.logout) {//退出
-			MyToast.show(this, "成功退出");
-			sendLoginOut();
-			finish();
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_setting);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("设置");
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		findViewById(R.id.rl_version).setOnClickListener(this);
-		findViewById(R.id.rl_about_us).setOnClickListener(this);
-		findViewById(R.id.logout).setOnClickListener(this);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {}
-
-	@Override
-	protected void addEventListener() {}
-
-	@Override
-	protected void removeListener() {}
-	
-	
-	/**退出登录*/
-	private void sendLoginOut() {
-		startActivity(new Intent(SettingActivity.this, MainActivity.class));
-		SPUtils.saveString(this, GlobalInfo.ADDRESS, "");
-		SPUtils.saveInt(this, GlobalInfo.KEY_USERCODE, 0);
-		SPUtils.saveBoolean(this, GlobalInfo.KEY_NEEDLOAD, true);
-		SPUtils.saveString(this, GlobalInfo.KEY_USER_TEL, "");
-		SPUtils.saveBoolean(this, GlobalInfo.KEY_ISLOGIN, false);
-		SPUtils.saveString(this, GlobalInfo.KEY_USER_NAME, "");
-		SPUtils.saveString(this, GlobalInfo.KEY_USER_SEX, "");
-		SPUtils.saveString(this, GlobalInfo.KEY_NICK_NAME, "");
-	}
-
-	/**版本检查*/
-	private void sendUpdateAction() {
-		Intent intent = new Intent();
-		intent.setAction(UpdateLogic.ACTION_GET_UPDATEINFO);
-		intent.putExtra(UpdateLogic.KEY_UPDATE_MODE,UpdateLogic.UPDATE_STRATEGY_USER);
-		intent.putExtra(UpdateLogic.KEY_VERSION_NAME, Utils.version_name);
-		sendAction(intent);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/WaterInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/WaterInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/WaterInfo.java	(revision )
@@ -1,105 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-
-/**
- * @ClassName: WaterTicketInfo
- * @Description: 水票信息
- * @author YY
- * @date 2015年6月16日 下午3:53:40
- */
-public class WaterInfo implements Serializable {
-
-	private static final long serialVersionUID = 5833972777958275612L;
-	/** 水票名称 */
-	private String goods_name;
-	/** 水票价格 */
-	private double goods_price;
-	/** 水票数量 */
-	private int goods_num;
-	/** 水票编号 */
-	private int goods_code;
-	/** 水票水量 */
-	private int numbers;
-	/** 返回优惠券 */
-	private double coupon_price;
-	/** 水图片 */
-	private String pictrue_addr;
-	/** 水图片详情 */
-	private String water_intro_url;
-	/** 水票id */
-	private int tic_code;
-
-	public String getWater_intro_url() {
-		return water_intro_url;
-	}
-
-	public void setWater_intro_url(String water_intro_url) {
-		this.water_intro_url = water_intro_url;
-	}
-
-	public int getTic_code() {
-		return tic_code;
-	}
-
-	public void setTic_code(int tic_code) {
-		this.tic_code = tic_code;
-	}
-
-	public String getPictrue_addr() {
-		return pictrue_addr;
-	}
-
-	public void setPictrue_addr(String pictrue_addr) {
-		this.pictrue_addr = pictrue_addr;
-	}
-
-	public int getGoods_num() {
-		return goods_num;
-	}
-
-	public void setGoods_num(int goods_num) {
-		this.goods_num = goods_num;
-	}
-
-	public double getGoods_price() {
-		return goods_price;
-	}
-
-	public void setGoods_price(double goods_price) {
-		this.goods_price = goods_price;
-	}
-
-	public String getGoods_name() {
-		return goods_name;
-	}
-
-	public void setGoods_name(String goods_name) {
-		this.goods_name = goods_name;
-	}
-
-	public int getGoods_code() {
-		return goods_code;
-	}
-
-	public void setGoods_code(int goods_code) {
-		this.goods_code = goods_code;
-	}
-
-	public int getNumbers() {
-		return numbers;
-	}
-
-	public void setNumbers(int numbers) {
-		this.numbers = numbers;
-	}
-
-	public double getCoupon_price() {
-		return coupon_price;
-	}
-
-	public void setCoupon_price(double coupon_price) {
-		this.coupon_price = coupon_price;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GuaidActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GuaidActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/GuaidActivity.java	(revision )
@@ -1,112 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.support.v4.view.ViewPager;
-import android.support.v4.view.ViewPager.OnPageChangeListener;
-import android.view.View;
-import android.widget.Button;
-import android.widget.ImageView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.ViewPagerAdapter;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-import java.util.List;
-
-/**
-* @ClassName: GuaidActivity 
-* @Description: 引导页面
-* @author zxl 
-* @date 2015年5月7日 下午2:01:45
- */
-public class GuaidActivity extends BaseActivity {
-	private ViewPager view_pager;
-	private Button button;
-
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.button:
-			boolean isLocation = SPUtils.getBoolean(GuaidActivity.this, GlobalInfo.HAS_LOCATION, false);
-			if (isLocation) {
-				startActivity(new Intent(GuaidActivity.this,MainActivity.class));
-			}else{
-				startActivity(new Intent(GuaidActivity.this,LocationActivity.class));
-			}
-			finish();
-			break;
-		}
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		
-	}
-
-	@Override
-	protected void addEventListener() {
-		
-	}
-
-	@Override
-	protected void removeListener() {
-		
-	}
-
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_guaid);
-		view_pager = (ViewPager) findViewById(R.id.view_pager);
-		button = (Button) findViewById(R.id.button);
-		button.setOnClickListener(this);
-		view_pager.setOnClickListener(this);
-
-		List<View> lists = new ArrayList<View>();
-		ImageView imageView1 = new ImageView(this);
-		imageView1.setBackgroundResource(R.drawable.guide_step1);
-
-		ImageView imageView2 = new ImageView(this);
-		imageView2.setBackgroundResource(R.drawable.guide_step2);
-
-		ImageView imageView3 = new ImageView(this);
-		imageView3.setBackgroundResource(R.drawable.guide_step3);
-		
-		ImageView imageView4 = new ImageView(this);
-		imageView4.setBackgroundResource(R.drawable.guide_step4);
-
-		lists.add(imageView1);
-		lists.add(imageView2);
-		lists.add(imageView3);
-		lists.add(imageView4);
-
-		ViewPagerAdapter adapter = new ViewPagerAdapter(lists);
-		view_pager.setAdapter(adapter);
-		view_pager.setOnPageChangeListener(new OnPageChangeListener() {
-
-			@Override
-			public void onPageSelected(int arg0) {
-				if (arg0 == 3) {
-					button.setVisibility(View.VISIBLE);
-				}else{
-					button.setVisibility(View.GONE);
-				}
-			}
-
-			@Override
-			public void onPageScrolled(int arg0, float arg1, int arg2) {
-			}
-
-			@Override
-			public void onPageScrollStateChanged(int arg0) {
-			}
-		});
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/MyAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/MyAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/MyAdapter.java	(revision )
@@ -1,42 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.support.v4.view.PagerAdapter;
-import android.support.v4.view.ViewPager;
-import android.view.View;
-import android.widget.ImageView;
-
-public class MyAdapter extends PagerAdapter {
-	private ImageView[] mImageViews;
-
-	public MyAdapter(ImageView[] mImageViews) {
-		super();
-		this.mImageViews = mImageViews;
-	}
-
-	@Override
-	public int getCount() {
-		return Integer.MAX_VALUE;
-	}
-
-	@Override
-	public boolean isViewFromObject(View arg0, Object arg1) {
-		return arg0 == arg1;
-	}
-
-	@Override
-	public void destroyItem(View container, int position, Object object) {
-		((ViewPager) container).removeView(mImageViews[position % mImageViews.length]);
-	}
-
-	/**
-	 * 载入图片进去，用当前的position 除以 图片数组长度取余数是关键
-	 */
-	@Override
-	public Object instantiateItem(View container, int position) {
-		ImageView child = mImageViews[position % mImageViews.length];
-		((ViewPager) container).removeView(child);
-		((ViewPager) container).addView(child, 0);
-		return child;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/LinePageIndicator.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/LinePageIndicator.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/viewpagerindicator/LinePageIndicator.java	(revision )
@@ -1,450 +0,0 @@
-/*
- * Copyright (C) 2012 Jake Wharton
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package com.anniu.shandiandaojia.view.viewpagerindicator;
-
-import android.content.Context;
-import android.content.res.Resources;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Paint;
-import android.graphics.drawable.Drawable;
-import android.os.Parcel;
-import android.os.Parcelable;
-import android.support.v4.view.MotionEventCompat;
-import android.support.v4.view.ViewConfigurationCompat;
-import android.support.v4.view.ViewPager;
-import android.util.AttributeSet;
-import android.util.FloatMath;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.ViewConfiguration;
-
-import com.anniu.shandiandaojia.R;
-
-/**
- * Draws a line for each page. The current page line is colored differently
- * than the unselected page lines.
- */
-public class LinePageIndicator extends View implements PageIndicator {
-    private static final int INVALID_POINTER = -1;
-
-    private final Paint mPaintUnselected = new Paint(Paint.ANTI_ALIAS_FLAG);
-    private final Paint mPaintSelected = new Paint(Paint.ANTI_ALIAS_FLAG);
-    private ViewPager mViewPager;
-    private ViewPager.OnPageChangeListener mListener;
-    private int mCurrentPage;
-    private boolean mCentered;
-    private float mLineWidth;
-    private float mGapWidth;
-
-    private int mTouchSlop;
-    private float mLastMotionX = -1;
-    private int mActivePointerId = INVALID_POINTER;
-    private boolean mIsDragging;
-
-
-    public LinePageIndicator(Context context) {
-        this(context, null);
-    }
-
-    public LinePageIndicator(Context context, AttributeSet attrs) {
-        this(context, attrs, R.attr.vpiLinePageIndicatorStyle);
-    }
-
-    public LinePageIndicator(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-        if (isInEditMode()) return;
-
-        final Resources res = getResources();
-
-        //Load defaults from resources
-        final int defaultSelectedColor = res.getColor(R.color.default_line_indicator_selected_color);
-        final int defaultUnselectedColor = res.getColor(R.color.default_line_indicator_unselected_color);
-        final float defaultLineWidth = res.getDimension(R.dimen.default_line_indicator_line_width);
-        final float defaultGapWidth = res.getDimension(R.dimen.default_line_indicator_gap_width);
-        final float defaultStrokeWidth = res.getDimension(R.dimen.default_line_indicator_stroke_width);
-        final boolean defaultCentered = res.getBoolean(R.bool.default_line_indicator_centered);
-
-        //Retrieve styles attributes
-        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.LinePageIndicator, defStyle, 0);
-
-        mCentered = a.getBoolean(R.styleable.LinePageIndicator_centered, defaultCentered);
-        mLineWidth = a.getDimension(R.styleable.LinePageIndicator_lineWidth, defaultLineWidth);
-        mGapWidth = a.getDimension(R.styleable.LinePageIndicator_gapWidth, defaultGapWidth);
-        setStrokeWidth(a.getDimension(R.styleable.LinePageIndicator_strokeWidth, defaultStrokeWidth));
-        mPaintUnselected.setColor(a.getColor(R.styleable.LinePageIndicator_unselectedColor, defaultUnselectedColor));
-        mPaintSelected.setColor(a.getColor(R.styleable.LinePageIndicator_selectedColor, defaultSelectedColor));
-
-        Drawable background = a.getDrawable(R.styleable.LinePageIndicator_android_background);
-        if (background != null) {
-          setBackgroundDrawable(background);
-        }
-
-        a.recycle();
-
-        final ViewConfiguration configuration = ViewConfiguration.get(context);
-        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
-    }
-
-
-    public void setCentered(boolean centered) {
-        mCentered = centered;
-        invalidate();
-    }
-
-    public boolean isCentered() {
-        return mCentered;
-    }
-
-    public void setUnselectedColor(int unselectedColor) {
-        mPaintUnselected.setColor(unselectedColor);
-        invalidate();
-    }
-
-    public int getUnselectedColor() {
-        return mPaintUnselected.getColor();
-    }
-
-    public void setSelectedColor(int selectedColor) {
-        mPaintSelected.setColor(selectedColor);
-        invalidate();
-    }
-
-    public int getSelectedColor() {
-        return mPaintSelected.getColor();
-    }
-
-    public void setLineWidth(float lineWidth) {
-        mLineWidth = lineWidth;
-        invalidate();
-    }
-
-    public float getLineWidth() {
-        return mLineWidth;
-    }
-
-    public void setStrokeWidth(float lineHeight) {
-        mPaintSelected.setStrokeWidth(lineHeight);
-        mPaintUnselected.setStrokeWidth(lineHeight);
-        invalidate();
-    }
-
-    public float getStrokeWidth() {
-        return mPaintSelected.getStrokeWidth();
-    }
-
-    public void setGapWidth(float gapWidth) {
-        mGapWidth = gapWidth;
-        invalidate();
-    }
-
-    public float getGapWidth() {
-        return mGapWidth;
-    }
-
-    @Override
-    protected void onDraw(Canvas canvas) {
-        super.onDraw(canvas);
-
-        if (mViewPager == null) {
-            return;
-        }
-        final int count = mViewPager.getAdapter().getCount();
-        if (count == 0) {
-            return;
-        }
-
-        if (mCurrentPage >= count) {
-            setCurrentItem(count - 1);
-            return;
-        }
-
-        final float lineWidthAndGap = mLineWidth + mGapWidth;
-        final float indicatorWidth = (count * lineWidthAndGap) - mGapWidth;
-        final float paddingTop = getPaddingTop();
-        final float paddingLeft = getPaddingLeft();
-        final float paddingRight = getPaddingRight();
-
-        float verticalOffset = paddingTop + ((getHeight() - paddingTop - getPaddingBottom()) / 2.0f);
-        float horizontalOffset = paddingLeft;
-        if (mCentered) {
-            horizontalOffset += ((getWidth() - paddingLeft - paddingRight) / 2.0f) - (indicatorWidth / 2.0f);
-        }
-
-        //Draw stroked circles
-        for (int i = 0; i < count; i++) {
-            float dx1 = horizontalOffset + (i * lineWidthAndGap);
-            float dx2 = dx1 + mLineWidth;
-            canvas.drawLine(dx1, verticalOffset, dx2, verticalOffset, (i == mCurrentPage) ? mPaintSelected : mPaintUnselected);
-        }
-    }
-
-    public boolean onTouchEvent(android.view.MotionEvent ev) {
-        if (super.onTouchEvent(ev)) {
-            return true;
-        }
-        if ((mViewPager == null) || (mViewPager.getAdapter().getCount() == 0)) {
-            return false;
-        }
-
-        final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
-        switch (action) {
-            case MotionEvent.ACTION_DOWN:
-                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
-                mLastMotionX = ev.getX();
-                break;
-
-            case MotionEvent.ACTION_MOVE: {
-                final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
-                final float x = MotionEventCompat.getX(ev, activePointerIndex);
-                final float deltaX = x - mLastMotionX;
-
-                if (!mIsDragging) {
-                    if (Math.abs(deltaX) > mTouchSlop) {
-                        mIsDragging = true;
-                    }
-                }
-
-                if (mIsDragging) {
-                    mLastMotionX = x;
-                    if (mViewPager.isFakeDragging() || mViewPager.beginFakeDrag()) {
-                        mViewPager.fakeDragBy(deltaX);
-                    }
-                }
-
-                break;
-            }
-
-            case MotionEvent.ACTION_CANCEL:
-            case MotionEvent.ACTION_UP:
-                if (!mIsDragging) {
-                    final int count = mViewPager.getAdapter().getCount();
-                    final int width = getWidth();
-                    final float halfWidth = width / 2f;
-                    final float sixthWidth = width / 6f;
-
-                    if ((mCurrentPage > 0) && (ev.getX() < halfWidth - sixthWidth)) {
-                        if (action != MotionEvent.ACTION_CANCEL) {
-                            mViewPager.setCurrentItem(mCurrentPage - 1);
-                        }
-                        return true;
-                    } else if ((mCurrentPage < count - 1) && (ev.getX() > halfWidth + sixthWidth)) {
-                        if (action != MotionEvent.ACTION_CANCEL) {
-                            mViewPager.setCurrentItem(mCurrentPage + 1);
-                        }
-                        return true;
-                    }
-                }
-
-                mIsDragging = false;
-                mActivePointerId = INVALID_POINTER;
-                if (mViewPager.isFakeDragging()) mViewPager.endFakeDrag();
-                break;
-
-            case MotionEventCompat.ACTION_POINTER_DOWN: {
-                final int index = MotionEventCompat.getActionIndex(ev);
-                mLastMotionX = MotionEventCompat.getX(ev, index);
-                mActivePointerId = MotionEventCompat.getPointerId(ev, index);
-                break;
-            }
-
-            case MotionEventCompat.ACTION_POINTER_UP:
-                final int pointerIndex = MotionEventCompat.getActionIndex(ev);
-                final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
-                if (pointerId == mActivePointerId) {
-                    final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
-                    mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
-                }
-                mLastMotionX = MotionEventCompat.getX(ev, MotionEventCompat.findPointerIndex(ev, mActivePointerId));
-                break;
-        }
-
-        return true;
-    }
-
-    @Override
-    public void setViewPager(ViewPager viewPager) {
-        if (mViewPager == viewPager) {
-            return;
-        }
-        if (mViewPager != null) {
-            //Clear us from the old pager.
-            mViewPager.setOnPageChangeListener(null);
-        }
-        if (viewPager.getAdapter() == null) {
-            throw new IllegalStateException("ViewPager does not have adapter instance.");
-        }
-        mViewPager = viewPager;
-        mViewPager.setOnPageChangeListener(this);
-        invalidate();
-    }
-
-    @Override
-    public void setViewPager(ViewPager view, int initialPosition) {
-        setViewPager(view);
-        setCurrentItem(initialPosition);
-    }
-
-    @Override
-    public void setCurrentItem(int item) {
-        if (mViewPager == null) {
-            throw new IllegalStateException("ViewPager has not been bound.");
-        }
-        mViewPager.setCurrentItem(item);
-        mCurrentPage = item;
-        invalidate();
-    }
-
-    @Override
-    public void notifyDataSetChanged() {
-        invalidate();
-    }
-
-    @Override
-    public void onPageScrollStateChanged(int state) {
-        if (mListener != null) {
-            mListener.onPageScrollStateChanged(state);
-        }
-    }
-
-    @Override
-    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
-        if (mListener != null) {
-            mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
-        }
-    }
-
-    @Override
-    public void onPageSelected(int position) {
-        mCurrentPage = position;
-        invalidate();
-
-        if (mListener != null) {
-            mListener.onPageSelected(position);
-        }
-    }
-
-    @Override
-    public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener) {
-        mListener = listener;
-    }
-
-    @Override
-    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-        setMeasuredDimension(measureWidth(widthMeasureSpec), measureHeight(heightMeasureSpec));
-    }
-
-    /**
-     * Determines the width of this view
-     *
-     * @param measureSpec
-     *            A measureSpec packed into an int
-     * @return The width of the view, honoring constraints from measureSpec
-     */
-    private int measureWidth(int measureSpec) {
-        float result;
-        int specMode = MeasureSpec.getMode(measureSpec);
-        int specSize = MeasureSpec.getSize(measureSpec);
-
-        if ((specMode == MeasureSpec.EXACTLY) || (mViewPager == null)) {
-            //We were told how big to be
-            result = specSize;
-        } else {
-            //Calculate the width according the views count
-            final int count = mViewPager.getAdapter().getCount();
-            result = getPaddingLeft() + getPaddingRight() + (count * mLineWidth) + ((count - 1) * mGapWidth);
-            //Respect AT_MOST value if that was what is called for by measureSpec
-            if (specMode == MeasureSpec.AT_MOST) {
-                result = Math.min(result, specSize);
-            }
-        }
-        return (int)FloatMath.ceil(result);
-    }
-
-    /**
-     * Determines the height of this view
-     *
-     * @param measureSpec
-     *            A measureSpec packed into an int
-     * @return The height of the view, honoring constraints from measureSpec
-     */
-    private int measureHeight(int measureSpec) {
-        float result;
-        int specMode = MeasureSpec.getMode(measureSpec);
-        int specSize = MeasureSpec.getSize(measureSpec);
-
-        if (specMode == MeasureSpec.EXACTLY) {
-            //We were told how big to be
-            result = specSize;
-        } else {
-            //Measure the height
-            result = mPaintSelected.getStrokeWidth() + getPaddingTop() + getPaddingBottom();
-            //Respect AT_MOST value if that was what is called for by measureSpec
-            if (specMode == MeasureSpec.AT_MOST) {
-                result = Math.min(result, specSize);
-            }
-        }
-        return (int)FloatMath.ceil(result);
-    }
-
-    @Override
-    public void onRestoreInstanceState(Parcelable state) {
-        SavedState savedState = (SavedState)state;
-        super.onRestoreInstanceState(savedState.getSuperState());
-        mCurrentPage = savedState.currentPage;
-        requestLayout();
-    }
-
-    @Override
-    public Parcelable onSaveInstanceState() {
-        Parcelable superState = super.onSaveInstanceState();
-        SavedState savedState = new SavedState(superState);
-        savedState.currentPage = mCurrentPage;
-        return savedState;
-    }
-
-    static class SavedState extends BaseSavedState {
-        int currentPage;
-
-        public SavedState(Parcelable superState) {
-            super(superState);
-        }
-
-        private SavedState(Parcel in) {
-            super(in);
-            currentPage = in.readInt();
-        }
-
-        @Override
-        public void writeToParcel(Parcel dest, int flags) {
-            super.writeToParcel(dest, flags);
-            dest.writeInt(currentPage);
-        }
-
-        @SuppressWarnings("UnusedDeclaration")
-        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
-            @Override
-            public SavedState createFromParcel(Parcel in) {
-                return new SavedState(in);
-            }
-
-            @Override
-            public SavedState[] newArray(int size) {
-                return new SavedState[size];
-            }
-        };
-    }
-}
\ No newline at end of file
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ShopInfoReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ShopInfoReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ShopInfoReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
-* @ClassName: ShopInfoReq 
-* @Description: 获取商铺首页信息 
-* @author zxl 
-* @date 2015年6月2日 上午11:06:43
- */
-public class ShopInfoReq extends HttpReq {
-
-	/** 选择商店的id */
-	private int shopcode;
-	/** 如果用户登录，那么传用户id */
-	private int usercode;
-
-	public ShopInfoReq(int reqId, int shopcode, int usercode) {
-		super();
-		this.id = reqId;
-		this.shopcode = shopcode;
-		this.usercode = usercode;
-	}
-
-	public int getShopcode() {
-		return shopcode;
-	}
-
-	public void setShopcode(int shopcode) {
-		this.shopcode = shopcode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?shopcode=" + shopcode + "&usercode=" + usercode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/wxapi/WXEntryActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/wxapi/WXEntryActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/wxapi/WXEntryActivity.java	(revision )
@@ -1,50 +0,0 @@
-/*
- * 官网地站:http://www.ShareSDK.cn
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 ShareSDK.cn. All rights reserved.
- */
-
-package com.sharesdk.wxapi;
-
-import android.content.Intent;
-import android.widget.Toast;
-import cn.sharesdk.wechat.utils.WXAppExtendObject;
-import cn.sharesdk.wechat.utils.WXMediaMessage;
-import cn.sharesdk.wechat.utils.WechatHandlerActivity;
-
-/** 微信客户端回调activity示例 */
-public class WXEntryActivity extends WechatHandlerActivity {
-
-	/**
-	 * 处理微信发出的向第三方应用请求app message
-	 * <p>
-	 * 在微信客户端中的聊天页面有“添加工具”，可以将本应用的图标添加到其中
-	 * 此后点击图标，下面的代码会被执行。Demo仅仅只是打开自己而已，但你可
-	 * 做点其他的事情，包括根本不打开任何页面
-	 */
-	public void onGetMessageFromWXReq(WXMediaMessage msg) {
-		Intent iLaunchMyself = getPackageManager().getLaunchIntentForPackage(getPackageName());
-		startActivity(iLaunchMyself);
-	}
-
-	/**
-	 * 处理微信向第三方应用发起的消息
-	 * <p>
-	 * 此处用来接收从微信发送过来的消息，比方说本demo在wechatpage里面分享
-	 * 应用时可以不分享应用文件，而分享一段应用的自定义信息。接受方的微信
-	 * 客户端会通过这个方法，将这个信息发送回接收方手机上的本demo中，当作
-	 * 回调。
-	 * <p>
-	 * 本Demo只是将信息展示出来，但你可做点其他的事情，而不仅仅只是Toast
-	 */
-	public void onShowMessageFromWXReq(WXMediaMessage msg) {
-		if (msg != null && msg.mediaObject != null
-				&& (msg.mediaObject instanceof WXAppExtendObject)) {
-			WXAppExtendObject obj = (WXAppExtendObject) msg.mediaObject;
-			Toast.makeText(this, obj.extInfo, Toast.LENGTH_SHORT).show();
-		}
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/KeyboardLayout.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/KeyboardLayout.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/KeyboardLayout.java	(revision )
@@ -1,66 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.widget.RelativeLayout;
-
-public class KeyboardLayout extends RelativeLayout {
-
-	private static final String TAG = KeyboardLayout.class.getSimpleName();
-	public static final byte KEYBOARD_STATE_SHOW = -3;
-	public static final byte KEYBOARD_STATE_HIDE = -2;
-	public static final byte KEYBOARD_STATE_INIT = -1;
-	private boolean mHasInit;
-	private boolean mHasKeybord;
-	private int mHeight;
-	private onKybdsChangeListener mListener;
-
-	public KeyboardLayout(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-	}
-
-	public KeyboardLayout(Context context, AttributeSet attrs) {
-		super(context, attrs);
-	}
-
-	public KeyboardLayout(Context context) {
-		super(context);
-	}
-
-	/**
-	 * set keyboard state listener
-	 */
-	public void setOnkbdStateListener(onKybdsChangeListener listener) {
-		mListener = listener;
-	}
-
-	@Override
-	protected void onLayout(boolean changed, int l, int t, int r, int b) {
-		super.onLayout(changed, l, t, r, b);
-		if (!mHasInit) {
-			mHasInit = true;
-			mHeight = b;
-			if (mListener != null) {
-				mListener.onKeyBoardStateChange(KEYBOARD_STATE_INIT);
-			}
-		} else {
-			mHeight = mHeight < b ? b : mHeight;
-		}
-		if (mHasInit && mHeight > b) {
-			mHasKeybord = true;
-			if (mListener != null) {
-				mListener.onKeyBoardStateChange(KEYBOARD_STATE_SHOW);
-			}
-		}
-		if (mHasInit && mHasKeybord && mHeight == b) {
-			mHasKeybord = false;
-			if (mListener != null) {
-				mListener.onKeyBoardStateChange(KEYBOARD_STATE_HIDE);
-			}
-		}
-	}
-
-	public interface onKybdsChangeListener {
-		public void onKeyBoardStateChange(int state);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ExpandAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ExpandAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/ExpandAdapter.java	(revision )
@@ -1,149 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseExpandableListAdapter;
-import android.widget.ImageView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.util.List;
-
-/**
- * @ClassName: ExpandAdapter
- * @Description: expandableListView
- * @author zxl
- * @date 2015年7月20日 下午2:23:31
- */
-public class ExpandAdapter extends BaseExpandableListAdapter {
-	private Context context;
-	private List<String> group;
-	private List<List<String>> child;
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-
-	@SuppressWarnings("deprecation")
-	public ExpandAdapter(Context context, List<String> group,
-			List<List<String>> child) {
-		this.context = context;
-		this.group = group;
-		this.child = child;
-		mImageLoader = App.initImageLoader(context);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)//设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-
-	@Override
-	public int getGroupCount() {
-		return group.size();
-	}
-
-	@Override
-	public int getChildrenCount(int groupPosition) {
-		return child.get(groupPosition).size();
-	}
-
-	@Override
-	public Object getGroup(int groupPosition) {
-		return group.get(groupPosition);
-	}
-
-	@Override
-	public Object getChild(int groupPosition, int childPosition) {
-		return child.get(groupPosition).get(childPosition);
-	}
-
-	@Override
-	public long getGroupId(int groupPosition) {
-		return groupPosition;
-	}
-
-	@Override
-	public long getChildId(int groupPosition, int childPosition) {
-		return childPosition;
-	}
-
-	/*** group */
-	@Override
-	public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
-		ViewParentHolder parentHolder;
-		if (convertView == null) {
-			convertView = LayoutInflater.from(context).inflate(R.layout.list_item_parent, null);
-			parentHolder = new ViewParentHolder();
-			parentHolder.parentTextView = (TextView) convertView.findViewById(R.id.parentText);
-			parentHolder.parentImageViw = (ImageView) convertView.findViewById(R.id.arrow);
-			convertView.setTag(parentHolder);
-		} else {
-			parentHolder = (ViewParentHolder) convertView.getTag();
-		}
-		
-		parentHolder.parentTextView.setText(group.get(groupPosition));
-		if (isExpanded) {
-			parentHolder.parentImageViw.setBackgroundResource(R.drawable.water_arrow_up);
-		} else {
-			parentHolder.parentImageViw.setBackgroundResource(R.drawable.water_arrow_down);
-		}
-		return convertView;
-	}
-
-	/*** child */
-	@Override
-	public View getChildView(int groupPosition, int childPosition,
-			boolean isLastChild, View convertView, ViewGroup parent) {
-		ViewHolder holder;
-		if (convertView == null) {
-			convertView = LayoutInflater.from(context).inflate(R.layout.list_item, null);
-			holder = new ViewHolder();
-			holder.childTextView = (TextView) convertView.findViewById(R.id.childText);
-			holder.childImageViw = (ImageView) convertView.findViewById(R.id.childImage);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		
-		if (groupPosition == 2) {
-			holder.childTextView.setVisibility(View.GONE);
-			holder.childImageViw.setVisibility(View.VISIBLE);
-			mImageLoader.displayImage(child.get(groupPosition).get(childPosition),holder.childImageViw, options);
-		} else {
-			holder.childTextView.setVisibility(View.VISIBLE);
-			holder.childImageViw.setVisibility(View.GONE);
-			holder.childTextView.setText(child.get(groupPosition).get(childPosition));
-		}
-		
-		return convertView;
-	}
-
-	class ViewHolder {
-		TextView childTextView;
-		ImageView childImageViw;
-	}
-
-	class ViewParentHolder {
-		TextView parentTextView;
-		ImageView parentImageViw;
-	}
-
-	@Override
-	public boolean hasStableIds() {
-		return true;
-	}
-	
-	@Override
-	public boolean isChildSelectable(int groupPosition, int childPosition) {
-		return true;
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/OnekeyShareTheme.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/OnekeyShareTheme.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/OnekeyShareTheme.java	(revision )
@@ -1,3 +0,0 @@
-package com.sharesdk.onekeyshare;
-
-public enum OnekeyShareTheme {CLASSIC, SKYBLUE}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/Shake2Share.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/Shake2Share.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/Shake2Share.java	(revision )
@@ -1,138 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare;
-
-import static com.mob.tools.utils.R.getBitmapRes;
-import static com.mob.tools.utils.R.getStringRes;
-import android.app.Activity;
-import android.content.Context;
-import android.hardware.Sensor;
-import android.hardware.SensorEvent;
-import android.hardware.SensorEventListener;
-import android.hardware.SensorManager;
-import android.util.FloatMath;
-import android.view.Window;
-import android.widget.ImageView;
-import android.widget.ImageView.ScaleType;
-import android.widget.Toast;
-
-import com.mob.tools.FakeActivity;
-
-/** 摇一摇启动分享的例子 */
-public class Shake2Share extends FakeActivity implements SensorEventListener {
-	// 检测的时间间隔
-	private static final int UPDATE_INTERVAL = 100;
-	// 摇晃检测阈值，决定了对摇晃的敏感程度，越小越敏感
-	private static final int SHAKE_THRESHOLD = 1500;
-
-	private OnShakeListener listener;
-	private SensorManager mSensorManager;
-	private long mLastUpdateTime;
-	private float mLastX;
-	private float mLastY;
-	private float mLastZ;
-	private boolean shaken;
-
-	public void setOnShakeListener(OnShakeListener listener) {
-		this.listener = listener;
-	}
-
-	public void setActivity(Activity activity) {
-		super.setActivity(activity);
-		int resId = getBitmapRes(activity, "ssdk_oks_shake_to_share_back");
-		if (resId > 0) {
-			activity.setTheme(android.R.style.Theme_Dialog);
-			activity.requestWindowFeature(Window.FEATURE_NO_TITLE);
-			Window win = activity.getWindow();
-			win.setBackgroundDrawableResource(resId);
-		}
-	}
-
-	public void onCreate() {
-		startSensor();
-
-		int resId = getBitmapRes(activity, "ssdk_oks_yaoyiyao");
-		if (resId > 0) {
-			ImageView iv = new ImageView(activity);
-			iv.setScaleType(ScaleType.CENTER_INSIDE);
-			iv.setImageResource(resId);
-			activity.setContentView(iv);
-		}
-
-		resId = getStringRes(activity, "shake2share");
-		if (resId > 0) {
-			Toast.makeText(activity, resId, Toast.LENGTH_SHORT).show();
-		}
-	}
-
-	private void startSensor() {
-		mSensorManager = (SensorManager) activity.getSystemService(Context.SENSOR_SERVICE);
-		if (mSensorManager == null) {
-			throw new UnsupportedOperationException();
-		}
-		Sensor sensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
-		if (sensor == null) {
-			throw new UnsupportedOperationException();
-		}
-		boolean success = mSensorManager.registerListener(this, sensor, SensorManager.SENSOR_DELAY_GAME);
-		if (!success) {
-			throw new UnsupportedOperationException();
-		}
-	}
-
-	public void onDestroy() {
-		stopSensor();
-	}
-
-	private void stopSensor() {
-		if (mSensorManager != null) {
-			mSensorManager.unregisterListener(this);
-			mSensorManager = null;
-		}
-	}
-
-	public void onSensorChanged(SensorEvent event) {
-		long currentTime = System.currentTimeMillis();
-		long diffTime = currentTime - mLastUpdateTime;
-		if (diffTime > UPDATE_INTERVAL) {
-			if(mLastUpdateTime != 0) {
-				float x = event.values[0];
-				float y = event.values[1];
-				float z = event.values[2];
-				float deltaX = x - mLastX;
-				float deltaY = y - mLastY;
-				float deltaZ = z - mLastZ;
-				float delta = FloatMath.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ) / diffTime * 10000;
-				if (delta > SHAKE_THRESHOLD) {
-					if (!shaken) {
-						shaken = true;
-						finish();
-					}
-
-					if (listener != null) {
-						listener.onShake();
-					}
-				}
-				mLastX = x;
-				mLastY = y;
-				mLastZ = z;
-			}
-			mLastUpdateTime = currentTime;
-		}
-	}
-
-	public void onAccuracyChanged(Sensor sensor, int accuracy) {
-
-	}
-
-	public static interface OnShakeListener {
-		public void onShake();
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MySwitch.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MySwitch.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MySwitch.java	(revision )
@@ -1,175 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.graphics.Canvas;
-import android.graphics.Matrix;
-import android.graphics.Paint;
-import android.util.AttributeSet;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.View.OnTouchListener;
-
-import com.anniu.shandiandaojia.R;
-/**自定义开关，用来显示男女*/
-public class MySwitch extends View implements OnTouchListener {
-	private Bitmap bg_on, bg_off, slipper_btn;
-	/**
-	 * 按下时的x和当前的x
-	 */
-	private float downX, nowX;
-	
-	/**
-	 * 记录用户是否在滑动
-	 */
-	private boolean onSlip = false;
-	
-	/**
-	 * 当前的状态
-	 */
-	private boolean nowStatus = false;
-	
-	/**
-	 * 监听接口
-	 */
-	private OnChangedListener listener;
-	
-	
-	public MySwitch(Context context) {
-		super(context);
-		init();
-	}
-
-	public MySwitch(Context context, AttributeSet attrs) {
-		super(context, attrs);
-		init();
-	}
-	
-	public MySwitch(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-		init();
-	}
-
-	public void init(){
-		//载入图片资源
-		bg_on = BitmapFactory.decodeResource(getResources(), R.drawable.on_btn);
-		bg_off = BitmapFactory.decodeResource(getResources(), R.drawable.off_btn);
-		slipper_btn = BitmapFactory.decodeResource(getResources(), R.drawable.white_btn);
-		
-		setOnTouchListener(this);
-	}
-	
-	protected void onDraw(Canvas canvas) {
-		super.onDraw(canvas);
-		Matrix matrix = new Matrix();
-		Paint paint = new Paint();
-		float x = 0;
-		
-		//根据nowX设置背景，开或者关状态
-		if (nowX < (bg_on.getWidth()/2)){
-			canvas.drawBitmap(bg_off, matrix, paint);//画出关闭时的背景
-		}else{
-			canvas.drawBitmap(bg_on, matrix, paint);//画出打开时的背景 
-		}
-		
-		if (onSlip) {//是否是在滑动状态,  
-			if(nowX >= bg_on.getWidth())//是否划出指定范围,不能让滑块跑到外头,必须做这个判断
-				x = bg_on.getWidth() - slipper_btn.getWidth()/2;//减去滑块1/2的长度
-			else
-				x = nowX - slipper_btn.getWidth()/2;
-		}else {
-			if(nowStatus){//根据当前的状态设置滑块的x值
-				x = bg_on.getWidth() - slipper_btn.getWidth();
-			}else{
-				x = 0;
-			}
-		}
-		
-		//对滑块滑动进行异常处理，不能让滑块出界
-		if (x < 0 ){
-			x = 0;
-		}
-		else if(x > bg_on.getWidth() - slipper_btn.getWidth()){
-			x = bg_on.getWidth() - slipper_btn.getWidth();
-		}
-		
-		//画出滑块
-		canvas.drawBitmap(slipper_btn, x , 0, paint); 
-	}
-
-	@Override
-	public boolean onTouch(View v, MotionEvent event) {
-		switch(event.getAction()){
-		case MotionEvent.ACTION_DOWN:{
-			if (event.getX() > bg_off.getWidth() || event.getY() > bg_off.getHeight()){
-				return false;
-			}else{
-				onSlip = true;
-				downX = event.getX();
-				nowX = downX;
-			}
-			break;
-		}
-		case MotionEvent.ACTION_MOVE:{
-			nowX = event.getX();
-			break;
-		}
-		case MotionEvent.ACTION_UP:{
-			onSlip = false;
-			if(event.getX() >= (bg_on.getWidth()/2)){
-				nowStatus = true;
-				nowX = bg_on.getWidth() - slipper_btn.getWidth();
-			}else{
-				nowStatus = false;
-				nowX = 0;
-			}
-			
-			if(listener != null){
-				listener.OnChanged(MySwitch.this, nowStatus);
-			}
-			break;
-		}
-		}
-		//刷新界面
-		invalidate();
-		return true;
-	}
-	
-	
-	
-	/**
-	 * 为WiperSwitch设置一个监听，供外部调用的方法
-	 * @param listener
-	 */
-	public void setOnChangedListener(OnChangedListener listener){
-		this.listener = listener;
-	}
-	
-	
-	/**
-	 * 设置滑动开关的初始状态，供外部调用
-	 * @param checked
-	 */
-	public void setChecked(boolean checked){
-		if(checked){
-			nowX = bg_off.getWidth();
-		}else{
-			nowX = 0;
-		}
-		nowStatus = checked;
-	}
-
-	
-    /**
-     * 回调接口
-     * @author len
-     *
-     */
-	public interface OnChangedListener {
-		public void OnChanged(MySwitch wiperSwitch, boolean checkState);
-	}
-
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/PlatformListFakeActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/PlatformListFakeActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/PlatformListFakeActivity.java	(revision )
@@ -1,213 +0,0 @@
-package com.sharesdk.onekeyshare;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-
-import android.content.Context;
-import android.content.Intent;
-import android.view.KeyEvent;
-import android.view.View;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.ShareSDK;
-
-import com.mob.tools.FakeActivity;
-
-public class PlatformListFakeActivity extends FakeActivity {
-	protected HashMap<String, Object> shareParamsMap;
-	protected boolean silent;
-	protected ArrayList<CustomerLogo> customerLogos;
-	protected HashMap<String, String> hiddenPlatforms;
-	private boolean canceled = false;
-	protected View backgroundView;
-
-	protected OnShareButtonClickListener onShareButtonClickListener;
-	protected boolean dialogMode = false;
-	protected ThemeShareCallback themeShareCallback;
-
-	public static interface OnShareButtonClickListener {
-		void onClick(View v, List<Object> checkPlatforms);
-	}
-
-	public void onCreate() {
-		super.onCreate();
-
-		canceled = false;
-
-		if(themeShareCallback == null) {
-			finish();
-		}
-	}
-
-	public boolean onKeyEvent(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			canceled = true;
-		}
-		return super.onKeyEvent(keyCode, event);
-	}
-
-	protected void setCanceled(boolean canceled) {
-		this.canceled = canceled;
-	}
-
-	public boolean onFinish() {
-
-		// 取消分享菜单的统计
-		if (canceled) {
-			ShareSDK.logDemoEvent(2, null);
-		}
-
-		return super.onFinish();
-	}
-
-	@Override
-	public void show(Context context, Intent i) {
-		super.show(context, i);
-	}
-
-	public HashMap<String, Object> getShareParamsMap() {
-		return shareParamsMap;
-	}
-
-	public void setShareParamsMap(HashMap<String, Object> shareParamsMap) {
-		this.shareParamsMap = shareParamsMap;
-	}
-
-	public boolean isSilent() {
-		return silent;
-	}
-
-	public void setSilent(boolean silent) {
-		this.silent = silent;
-	}
-
-	public ArrayList<CustomerLogo> getCustomerLogos() {
-		return customerLogos;
-	}
-
-	public void setCustomerLogos(ArrayList<CustomerLogo> customerLogos) {
-		this.customerLogos = customerLogos;
-	}
-
-	public HashMap<String, String> getHiddenPlatforms() {
-		return hiddenPlatforms;
-	}
-
-	public void setHiddenPlatforms(HashMap<String, String> hiddenPlatforms) {
-		this.hiddenPlatforms = hiddenPlatforms;
-	}
-
-	public View getBackgroundView() {
-		return backgroundView;
-	}
-
-	public void setBackgroundView(View backgroundView) {
-		this.backgroundView = backgroundView;
-	}
-
-	public OnShareButtonClickListener getOnShareButtonClickListener() {
-		return onShareButtonClickListener;
-	}
-
-	public void setOnShareButtonClickListener(OnShareButtonClickListener onShareButtonClickListener) {
-		this.onShareButtonClickListener = onShareButtonClickListener;
-	}
-
-	public boolean isDialogMode() {
-		return dialogMode;
-	}
-
-	public void setDialogMode(boolean dialogMode) {
-		this.dialogMode = dialogMode;
-	}
-
-	public ThemeShareCallback getThemeShareCallback() {
-		return themeShareCallback;
-	}
-
-	public void setThemeShareCallback(ThemeShareCallback themeShareCallback) {
-		this.themeShareCallback = themeShareCallback;
-	}
-
-	protected void onShareButtonClick(View v, List<Object> checkedPlatforms) {
-
-		if(onShareButtonClickListener != null) {
-			onShareButtonClickListener.onClick(v, checkedPlatforms);
-		}
-
-		HashMap<Platform, HashMap<String, Object>> silentShareData = new HashMap<Platform, HashMap<String,Object>>();
-		final List<Platform> supportEditPagePlatforms = new ArrayList<Platform>();
-
-		Platform plat;
-		HashMap<String, Object> shareParam;
-		for(Object item : checkedPlatforms) {
-			if(item instanceof CustomerLogo){
-				CustomerLogo customerLogo = (CustomerLogo)item;
-				customerLogo.listener.onClick(v);
-				continue;
-			}
-
-			plat = (Platform)item;
-			String name = plat.getName();
-
-			// EditPage不支持微信平台、Google+、QQ分享、Pinterest、信息和邮件，总是执行直接分享
-			if(silent || ShareCore.isDirectShare(plat)) {
-				shareParam = new HashMap<String, Object>(shareParamsMap);
-				shareParam.put("platform", name);
-				silentShareData.put(plat, shareParam);
-			} else {
-				supportEditPagePlatforms.add(plat);
-			}
-		}
-		if (silentShareData.size() > 0) {
-			themeShareCallback.doShare(silentShareData);
-		}
-
-		// 跳转EditPage分享
-		if(supportEditPagePlatforms.size() > 0) {
-			showEditPage(supportEditPagePlatforms);
-		}
-
-		finish();
-	}
-
-	protected void showEditPage(List<Platform> platforms) {
-		showEditPage(getContext(), platforms);
-	}
-
-	public void showEditPage(Context context, Platform platform) {
-		ArrayList<Platform> platforms = new ArrayList<Platform>(1);
-		platforms.add(platform);
-		showEditPage(context, platforms);
-	}
-
-	protected void showEditPage(Context context, List<Platform> platforms) {
-		EditPageFakeActivity editPageFakeActivity;
-		String editPageClass = ((Object)this).getClass().getPackage().getName()+".EditPage";
-		try {
-			editPageFakeActivity = (EditPageFakeActivity) Class.forName(editPageClass).newInstance();
-		} catch (Exception e) {
-			e.printStackTrace();
-			return;
-		}
-
-		editPageFakeActivity.setBackgroundView(backgroundView);
-		editPageFakeActivity.setShareData(shareParamsMap);
-		editPageFakeActivity.setPlatforms(platforms);
-		if (dialogMode) {
-			editPageFakeActivity.setDialogMode();
-		}
-		editPageFakeActivity.showForResult(context, null, new FakeActivity() {
-			public void onResult(HashMap<String, Object> data) {
-				if(data == null)
-					return;
-				if (data.containsKey("editRes")) {
-					@SuppressWarnings("unchecked")
-					HashMap<Platform, HashMap<String, Object>> editRes
-							= (HashMap<Platform, HashMap<String, Object>>) data.get("editRes");
-					themeShareCallback.doShare(editRes);
-				}
-			}
-		});
-	}
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/FollowListPage.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/FollowListPage.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/classic/FollowListPage.java	(revision )
@@ -1,458 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.classic;
-
-import static com.mob.tools.utils.R.dipToPx;
-import static com.mob.tools.utils.R.getBitmapRes;
-import static com.mob.tools.utils.R.getStringRes;
-
-import java.util.ArrayList;
-import java.util.HashMap;
-
-import android.app.Activity;
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.graphics.Canvas;
-import android.os.Handler.Callback;
-import android.os.Message;
-import android.util.TypedValue;
-import android.view.Gravity;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.FrameLayout;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.LinearLayout.LayoutParams;
-import android.widget.ProgressBar;
-import android.widget.TextView;
-import cn.sharesdk.framework.Platform;
-import cn.sharesdk.framework.PlatformActionListener;
-import cn.sharesdk.framework.TitleLayout;
-
-import com.mob.tools.gui.AsyncImageView;
-import com.mob.tools.gui.BitmapProcessor;
-import com.mob.tools.gui.PullToRefreshListAdapter;
-import com.mob.tools.gui.PullToRefreshView;
-import com.mob.tools.utils.UIHandler;
-import com.sharesdk.onekeyshare.FollowerListFakeActivity;
-
-/** 获取好友或关注列表 */
-public class FollowListPage extends FollowerListFakeActivity implements OnClickListener, OnItemClickListener {
-	private TitleLayout llTitle;
-	private FollowAdapter adapter;
-	private int lastPosition = -1;
-
-	public void onCreate() {
-		LinearLayout llPage = new LinearLayout(getContext());
-		llPage.setBackgroundColor(0xfff5f5f5);
-		llPage.setOrientation(LinearLayout.VERTICAL);
-		activity.setContentView(llPage);
-
-		// 标题栏
-		llTitle = new TitleLayout(getContext());
-		int resId = getBitmapRes(getContext(), "title_back");
-		if (resId > 0) {
-			llTitle.setBackgroundResource(resId);
-		}
-		llTitle.getBtnBack().setOnClickListener(this);
-		resId = getStringRes(getContext(), "multi_share");
-		if (resId > 0) {
-			llTitle.getTvTitle().setText(resId);
-		}
-		llTitle.getBtnRight().setVisibility(View.VISIBLE);
-		resId = getStringRes(getContext(), "finish");
-		if (resId > 0) {
-			llTitle.getBtnRight().setText(resId);
-		}
-		llTitle.getBtnRight().setOnClickListener(this);
-		llTitle.setLayoutParams(new LinearLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
-		llPage.addView(llTitle);
-
-		FrameLayout flPage = new FrameLayout(getContext());
-		LinearLayout.LayoutParams lpFl = new LinearLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		lpFl.weight = 1;
-		flPage.setLayoutParams(lpFl);
-		llPage.addView(flPage);
-
-		// 关注（或朋友）列表
-		PullToRefreshView followList = new PullToRefreshView(getContext());
-		FrameLayout.LayoutParams lpLv = new FrameLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
-		followList.setLayoutParams(lpLv);
-		flPage.addView(followList);
-		adapter = new FollowAdapter(followList);
-		adapter.setPlatform(platform);
-		followList.setAdapter(adapter);
-		adapter.getListView().setOnItemClickListener(this);
-
-		ImageView ivShadow = new ImageView(getContext());
-		resId = getBitmapRes(getContext(), "title_shadow");
-		if (resId > 0) {
-			ivShadow.setBackgroundResource(resId);
-		}
-		FrameLayout.LayoutParams lpSd = new FrameLayout.LayoutParams(
-				LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-		ivShadow.setLayoutParams(lpSd);
-		flPage.addView(ivShadow);
-
-		// 请求数据
-		followList.performPulling(true);
-	}
-
-	public void onClick(View v) {
-		if (v.equals(llTitle.getBtnRight())) {
-			ArrayList<String> selected = new ArrayList<String>();
-			for (int i = 0, size = adapter.getCount(); i < size; i++) {
-				if (adapter.getItem(i).checked) {
-					selected.add(adapter.getItem(i).atName);
-				}
-			}
-
-			setResultForChecked(selected);
-		}
-
-		finish();
-	}
-
-	public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-		String name = platform.getName();
-		if (isRadioMode(name)) {
-			if(lastPosition >= 0) {
-				Following lastFollwing = adapter.getItem(lastPosition);
-				lastFollwing.checked = false;
-			}
-			lastPosition  = position;
-		}
-		Following following = adapter.getItem(position);
-		following.checked = !following.checked;
-		adapter.notifyDataSetChanged();
-	}
-
-	private static class FollowAdapter extends PullToRefreshListAdapter
-			implements PlatformActionListener, Callback {
-		private static final int FOLLOW_LIST_EMPTY = 2;
-		private int curPage;
-		private ArrayList<Following> follows;
-		private HashMap<String, Boolean> map;
-		private boolean hasNext;
-		private Platform platform;
-		private PRTHeader llHeader;
-		private Bitmap bmChd;
-		private Bitmap bmUnch;
-
-		public FollowAdapter(PullToRefreshView view) {
-			super(view);
-			curPage = -1;
-			hasNext = true;
-			map = new HashMap<String, Boolean>();
-			follows = new ArrayList<Following>();
-
-			llHeader = new PRTHeader(getContext());
-
-			int resId = getBitmapRes(getContext(), "auth_follow_cb_chd");
-			if (resId > 0) {
-				bmChd = BitmapFactory.decodeResource(view.getResources(), resId);
-			}
-			resId = getBitmapRes(getContext(), "auth_follow_cb_unc");
-			if (resId > 0) {
-				bmUnch = BitmapFactory.decodeResource(view.getResources(), resId);
-			}
-		}
-
-		public void setPlatform(Platform platform) {
-			this.platform = platform;
-			platform.setPlatformActionListener(this);
-		}
-
-		private void next() {
-			if (hasNext) {
-				platform.listFriend(15, curPage + 1, null);
-			}
-		}
-
-		public View getView(int position, View convertView, ViewGroup parent) {
-			FollowListItem item = null;
-			boolean simpleMode = "FacebookMessenger".equals(platform.getName());
-			if (convertView == null) {
-				LinearLayout llItem = new LinearLayout(parent.getContext());
-				item = new FollowListItem();
-				llItem.setTag(item);
-				convertView = llItem;
-
-				int dp_52 = com.mob.tools.utils.R.dipToPx(getContext(), 52);
-				int dp_10 = com.mob.tools.utils.R.dipToPx(parent.getContext(), 10);
-				int dp_5 = com.mob.tools.utils.R.dipToPx(parent.getContext(), 5);
-
-				if(!simpleMode) {
-					item.aivIcon = new AsyncImageView(getContext());
-					LinearLayout.LayoutParams lpIcon = new LinearLayout.LayoutParams(dp_52, dp_52);
-					lpIcon.gravity = Gravity.CENTER_VERTICAL;
-					lpIcon.setMargins(dp_10, dp_5, dp_10, dp_5);
-					item.aivIcon.setLayoutParams(lpIcon);
-					llItem.addView(item.aivIcon);
-				}
-
-				LinearLayout llText = new LinearLayout(parent.getContext());
-				llText.setPadding(0, dp_10, dp_10, dp_10);
-				llText.setOrientation(LinearLayout.VERTICAL);
-				LinearLayout.LayoutParams lpText = new LinearLayout.LayoutParams(
-						LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-				lpText.gravity = Gravity.CENTER_VERTICAL;
-				lpText.weight = 1;
-				llText.setLayoutParams(lpText);
-				llItem.addView(llText);
-
-				item.tvName = new TextView(parent.getContext());
-				item.tvName.setTextColor(0xff000000);
-				item.tvName.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-				item.tvName.setSingleLine();
-				if(simpleMode) {
-					item.tvName.setPadding(dp_10, 0, 0, 0);
-				}
-				llText.addView(item.tvName);
-
-				if(!simpleMode) {
-					item.tvSign = new TextView(parent.getContext());
-					item.tvSign.setTextColor(0x7f000000);
-					item.tvSign.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 14);
-					item.tvSign.setSingleLine();
-					llText.addView(item.tvSign);
-				}
-
-				item.ivCheck = new ImageView(parent.getContext());
-				item.ivCheck.setPadding(0, 0, dp_10, 0);
-				LinearLayout.LayoutParams lpCheck = new LinearLayout.LayoutParams(
-						LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-				lpCheck.gravity = Gravity.CENTER_VERTICAL;
-				item.ivCheck.setLayoutParams(lpCheck);
-				llItem.addView(item.ivCheck);
-			} else {
-				item = (FollowListItem) convertView.getTag();
-			}
-
-			Following following = getItem(position);
-			item.tvName.setText(following.screenName);
-			if(!simpleMode) {
-				item.tvSign.setText(following.description);
-			}
-			item.ivCheck.setImageBitmap(following.checked ? bmChd : bmUnch);
-			if(!simpleMode) {
-				if (isFling()) {
-					Bitmap bm = BitmapProcessor.getBitmapFromCache(following.icon);
-					if (bm != null && !bm.isRecycled()) {
-						item.aivIcon.setImageBitmap(bm);
-					} else {
-						item.aivIcon.execute(null, 0);
-					}
-				} else {
-					item.aivIcon.execute(following.icon,0);
-				}
-			}
-
-			if (position == getCount() - 1) {
-				next();
-			}
-			return convertView;
-		}
-
-		public Following getItem(int position) {
-			return follows.get(position);
-		}
-
-		public long getItemId(int position) {
-			return position;
-		}
-
-		public int getCount() {
-			return follows == null ? 0 : follows.size();
-		}
-
-		public View getHeaderView() {
-			return llHeader;
-		}
-
-		public void onPullDown(int percent) {
-			llHeader.onPullDown(percent);
-		}
-
-		public void onRequest() {
-			llHeader.onRequest();
-			curPage = -1;
-			hasNext = true;
-			map.clear();
-			next();
-		}
-
-		public void onCancel(Platform plat, int action) {
-			UIHandler.sendEmptyMessage(-1, this);
-		}
-
-		public void onComplete(Platform plat, int action, HashMap<String, Object> res) {
-			FollowersResult followersResult = parseFollowers(platform.getName(), res, map);
-
-			if(followersResult == null) {
-				UIHandler.sendEmptyMessage(FOLLOW_LIST_EMPTY, this);
-				return;
-			}
-			hasNext = followersResult.hasNextPage;
-			if (followersResult.list != null && followersResult.list.size() > 0) {
-				curPage++;
-				Message msg = new Message();
-				msg.what = 1;
-				msg.obj = followersResult.list;
-				UIHandler.sendMessage(msg, this);
-			}
-		}
-
-		public void onError(Platform plat, int action, Throwable t) {
-			t.printStackTrace();
-		}
-
-		public boolean handleMessage(Message msg) {
-			if (msg.what < 0) {
-				((Activity) getContext()).finish();
-			} else if(msg.what == FOLLOW_LIST_EMPTY) {
-				notifyDataSetChanged();
-			} else {
-				if (curPage <= 0) {
-					follows.clear();
-				}
-				@SuppressWarnings("unchecked")
-				ArrayList<Following> data = (ArrayList<Following>) msg.obj;
-				follows.addAll(data);
-				notifyDataSetChanged();
-			}
-			return false;
-		}
-
-		public void onReversed() {
-			super.onReversed();
-			llHeader.reverse();
-		}
-
-	}
-
-	private static class FollowListItem {
-		public AsyncImageView aivIcon;
-		public TextView tvName;
-		public TextView tvSign;
-		public ImageView ivCheck;
-	}
-
-	private static class PRTHeader extends LinearLayout {
-		private TextView tvHeader;
-		private RotateImageView ivArrow;
-		private ProgressBar pbRefreshing;
-
-		public PRTHeader(Context context) {
-			super(context);
-			setOrientation(VERTICAL);
-
-			LinearLayout llInner = new LinearLayout(context);
-			LinearLayout.LayoutParams lpInner = new LinearLayout.LayoutParams(
-					LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-			lpInner.gravity = Gravity.CENTER_HORIZONTAL;
-			addView(llInner, lpInner);
-
-			ivArrow = new RotateImageView(context);
-			int resId = getBitmapRes(context, "ssdk_oks_ptr_ptr");
-			if (resId > 0) {
-				ivArrow.setImageResource(resId);
-			}
-			int dp_32 = dipToPx(context, 32);
-			LayoutParams lpIv = new LayoutParams(dp_32, dp_32);
-			lpIv.gravity = Gravity.CENTER_VERTICAL;
-			llInner.addView(ivArrow, lpIv);
-
-			pbRefreshing = new ProgressBar(context);
-			llInner.addView(pbRefreshing, lpIv);
-			pbRefreshing.setVisibility(View.GONE);
-
-			tvHeader = new TextView(getContext());
-			tvHeader.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
-			tvHeader.setGravity(Gravity.CENTER);
-			int dp_10 = com.mob.tools.utils.R.dipToPx(getContext(), 10);
-			tvHeader.setPadding(dp_10, dp_10, dp_10, dp_10);
-			tvHeader.setTextColor(0xff000000);
-			LayoutParams lpTv = new LayoutParams(
-					LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-			lpTv.gravity = Gravity.CENTER_VERTICAL;
-			llInner.addView(tvHeader, lpTv);
-		}
-
-		public void onPullDown(int percent) {
-			if (percent > 100) {
-				int degree = (percent - 100) * 180 / 20;
-				if (degree > 180) {
-					degree = 180;
-				}
-				if (degree < 0) {
-					degree = 0;
-				}
-				ivArrow.setRotation(degree);
-			} else {
-				ivArrow.setRotation(0);
-			}
-
-			if (percent < 100) {
-				int resId = getStringRes(getContext(), "pull_to_refresh");
-				if (resId > 0) {
-					tvHeader.setText(resId);
-				}
-			} else {
-				int resId = getStringRes(getContext(), "release_to_refresh");
-				if (resId > 0) {
-					tvHeader.setText(resId);
-				}
-			}
-		}
-
-		public void onRequest() {
-			ivArrow.setVisibility(View.GONE);
-			pbRefreshing.setVisibility(View.VISIBLE);
-			int resId = getStringRes(getContext(), "refreshing");
-			if (resId > 0) {
-				tvHeader.setText(resId);
-			}
-		}
-
-		public void reverse() {
-			pbRefreshing.setVisibility(View.GONE);
-			ivArrow.setRotation(180);
-			ivArrow.setVisibility(View.VISIBLE);
-		}
-
-	}
-
-	private static class RotateImageView extends ImageView {
-		private int rotation;
-
-		public RotateImageView(Context context) {
-			super(context);
-		}
-
-		public void setRotation(int degree) {
-			rotation = degree;
-			invalidate();
-		}
-
-		protected void onDraw(Canvas canvas) {
-			canvas.rotate(rotation, getWidth() / 2, getHeight() / 2);
-			super.onDraw(canvas);
-		}
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/WheelView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/WheelView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/lee/wheel/widget/WheelView.java	(revision )
@@ -1,185 +0,0 @@
-package com.anniu.shandiandaojia.view.lee.wheel.widget;
-
-import android.content.Context;
-import android.graphics.Canvas;
-import android.graphics.Rect;
-import android.graphics.drawable.Drawable;
-import android.graphics.drawable.GradientDrawable;
-import android.graphics.drawable.GradientDrawable.Orientation;
-import android.util.AttributeSet;
-import android.view.Gravity;
-import android.view.SoundEffectConstants;
-import android.view.View;
-
-import com.anniu.shandiandaojia.R;
-
-public class WheelView extends TosGallery {
-    /**
-     * The selector.
-     */
-    private Drawable mSelectorDrawable = null;
-
-    /**
-     * The bound rectangle of selector.
-     */
-    private Rect mSelectorBound = new Rect();
-
-    /**
-     * The top shadow.
-     */
-    private GradientDrawable mTopShadow = null;
-
-    /**
-     * The bottom shadow.
-     */
-    private GradientDrawable mBottomShadow = null;
-
-    /**
-     * Shadow colors
-     */
-    private static final int[] SHADOWS_COLORS = { 0xFF111111, 0x00AAAAAA, 0x00AAAAAA };
-
-    /**
-     * The constructor method.
-     * 
-     * @param context
-     */
-    public WheelView(Context context) {
-        super(context);
-
-        initialize(context);
-    }
-
-    /**
-     * The constructor method.
-     * 
-     * @param context
-     * @param attrs
-     */
-    public WheelView(Context context, AttributeSet attrs) {
-        super(context, attrs);
-
-        initialize(context);
-    }
-
-    /**
-     * The constructor method.
-     * 
-     * @param context
-     * @param attrs
-     * @param defStyle
-     */
-    public WheelView(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-
-        initialize(context);
-    }
-
-    /**
-     * Initialize.
-     * 
-     * @param context
-     */
-    private void initialize(Context context) {
-        this.setVerticalScrollBarEnabled(false);
-        this.setSlotInCenter(true);
-        this.setOrientation(TosGallery.VERTICAL);
-        this.setGravity(Gravity.CENTER_HORIZONTAL);
-        this.setUnselectedAlpha(1.0f);
-
-        // This lead the onDraw() will be called.
-        this.setWillNotDraw(false);
-
-        // The selector rectangle drawable.
-        this.mSelectorDrawable = getContext().getResources().getDrawable(R.drawable.wheel_val);
-        this.mTopShadow = new GradientDrawable(Orientation.TOP_BOTTOM, SHADOWS_COLORS);
-        this.mBottomShadow = new GradientDrawable(Orientation.BOTTOM_TOP, SHADOWS_COLORS);
-
-        // The default background.
-//        this.setBackgroundResource(R.drawable.wheel_bg);
-
-        // Disable the sound effect default.
-        this.setSoundEffectsEnabled(true);
-    }
-
-    /**
-     * Called by draw to draw the child views. This may be overridden by derived classes to gain
-     * control just before its children are drawn (but after its own view has been drawn).
-     */
-    @Override
-    protected void dispatchDraw(Canvas canvas) {
-        super.dispatchDraw(canvas);
-
-        // After draw child, we do the following things:
-        // +1, Draw the center rectangle.
-        // +2, Draw the shadows on the top and bottom.
-
-//        drawCenterRect(canvas);
-//        drawShadows(canvas);
-    }
-
-    /**
-     * setOrientation
-     */
-    @Override
-    public void setOrientation(int orientation) {
-        if (TosGallery.HORIZONTAL == orientation) {
-            throw new IllegalArgumentException("The orientation must be VERTICAL");
-        }
-
-        super.setOrientation(orientation);
-    }
-
-    /**
-     * Call when the ViewGroup is layout.
-     */
-    @Override
-    protected void onLayout(boolean changed, int l, int t, int r, int b) {
-        super.onLayout(changed, l, t, r, b);
-
-        int galleryCenter = getCenterOfGallery();
-        View v = this.getChildAt(0);
-
-        int height = (null != v) ? v.getMeasuredHeight() : 50;
-        int top = galleryCenter - height / 2;
-        int bottom = top + height;
-
-        mSelectorBound.set(getPaddingLeft(), top, getWidth() - getPaddingRight(), bottom);
-    }
-
-    /**
-     * @see com.anniu.shandiandaojia.view.lee.wheel.widget.nj1s.lib.widget.TosGallery#setSelectedPositionInt(int)
-     */
-    @Override
-    protected void selectionChanged() {
-        super.selectionChanged();
-
-        playSoundEffect(SoundEffectConstants.CLICK);
-    }
-
-    /**
-     * Draw the selector drawable.
-     * 
-     * @param canvas
-     */
-    private void drawCenterRect(Canvas canvas) {
-        if (null != mSelectorDrawable) {
-            mSelectorDrawable.setBounds(mSelectorBound);
-            mSelectorDrawable.draw(canvas);
-        }
-    }
-
-    /**
-     * Draw the shadow
-     * 
-     * @param canvas
-     */
-    private void drawShadows(Canvas canvas) {
-        int height = (int) (2.0 * mSelectorBound.height());
-        mTopShadow.setBounds(0, 0, getWidth(), height);
-        mTopShadow.draw(canvas);
-
-        mBottomShadow.setBounds(0, getHeight() - height, getWidth(), getHeight());
-        mBottomShadow.draw(canvas);
-    }
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/Observer.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/Observer.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/Observer.java	(revision )
@@ -1,5 +0,0 @@
-package com.anniu.shandiandaojia.base.event;
-
-public interface Observer {
-    public void onNotify(int eventId, Object... args);
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BuyWaterTicketAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BuyWaterTicketAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/BuyWaterTicketAdapter.java	(revision )
@@ -1,91 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-
-import java.util.ArrayList;
-/***
- * @ClassName:  BuyWaterTicketAdapter
- * @Description: 购买水票的适配器
- * @author YY
- * @date 2015年7月3日 上午9:46:45
- */
-public class BuyWaterTicketAdapter extends BaseAdapter {
-	private LayoutInflater mInflater;
-	private ArrayList<WaterInfo> mWaterList;
-	private Context mContext;
-	public BuyWaterTicketAdapter(ArrayList<WaterInfo> waterInfos,Context context) {
-		super();
-		this.mWaterList = waterInfos;
-		this.mContext = context;
-		mInflater = LayoutInflater.from(mContext);
-	}
-
-	@Override
-	public int getCount() {
-		if (mWaterList != null) {
-			return mWaterList.size();
-		}
-		return 0;
-	}
-
-	@Override
-	public Object getItem(int position) {
-		if (mWaterList != null) {
-			return mWaterList.get(position);
-		}
-		return null;
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		WaterInfo waterInfo = mWaterList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = mInflater.inflate(R.layout.item_water_ticket,null);
-			holder.goods_name = (TextView) convertView.findViewById(R.id.tv_water_name);
-			holder.price = (TextView) convertView.findViewById(R.id.tv_coupon_money);
-			holder.goods_price = (TextView) convertView.findViewById(R.id.tv_water_money);
-			holder.stock_num = (TextView) convertView.findViewById(R.id.tv_water_num);
-			holder.tv_water_use = (TextView) convertView.findViewById(R.id.tv_water_use);
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-
-		holder.goods_name.setText(waterInfo.getGoods_name()+"桶裝水");
-		holder.price.setText("返" + waterInfo.getCoupon_price() + "元代金券");
-		holder.goods_price.setText("￥" + waterInfo.getGoods_price() + "元");
-		holder.stock_num.setText(waterInfo.getGoods_num() + "桶");
-		holder.tv_water_use.setText("购买");
-		holder.tv_water_use.setTag(waterInfo);
-		return convertView;
-	}
-	
-	static class ViewHolder {
-		/** 水的名称 */
-		TextView goods_name;
-		/** 水返回的优惠券 */
-		TextView price;
-		/** 水的价格 */
-		TextView goods_price;
-		/** 水的数量 */
-		TextView stock_num;
-		/** 点击购买 */
-		TextView tv_water_use;
-	}
-}
-
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ConfirmOrderReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ConfirmOrderReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ConfirmOrderReq.java	(revision )
@@ -1,32 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @author YY
- * @ClassName: ConfirmOrderReq
- * @Description: 确认订单请求
- * @date 2015年6月9日 下午12:39:55
- */
-public class ConfirmOrderReq extends HttpReq {
-    private String orderNum;
-    private String recTime;
-
-    public ConfirmOrderReq(int reqid, String orderNum, String recTime) {
-        super();
-        this.id = reqid;
-        this.orderNum = orderNum;
-        this.recTime = recTime;
-    }
-
-    @Override
-    public String getParams() {
-        return "?ordernum=" + orderNum + "&time=" + recTime;
-    }
-
-    @Override
-    public String parseData(String str) {
-        return null;
-    }
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/EventsActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/EventsActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/EventsActivity.java	(revision )
@@ -1,86 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.annotation.SuppressLint;
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.webkit.WebSettings;
-import android.webkit.WebView;
-import android.webkit.WebViewClient;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.utils.Utils;
-
-/**
-* @ClassName: EventsActivity 
-* @Description: 活动页面 
-* @author zxl
-* @date 2015年7月14日 上午11:55:28
- */
-@SuppressLint("SetJavaScriptEnabled")
-public class EventsActivity extends BaseActivity {
-	private TextView titleBarTv;// 界面标题
-	private WebView web_view;
-	public static String EXTRA_TAYENAME = "type_name";
-	public static String EXTRA_TAYEURL = "type_url";
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId() == R.id.title_bar_left) {
-			finish();
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_question);
-		
-		Intent intent = getIntent();
-		String name = intent.getExtras().getString(EXTRA_TAYENAME);
-		String url = intent.getExtras().getString(EXTRA_TAYEURL);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(name);
-
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-
-		web_view = (WebView) findViewById(R.id.web_view);
-		// 加载网络资源
-		web_view.loadUrl(url);
-
-		// 启用支持javascript
-		WebSettings settings = web_view.getSettings();
-		settings.setJavaScriptEnabled(true);
-		web_view.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
-
-		web_view.setWebViewClient(new WebViewClient() {
-			@Override
-			public boolean shouldOverrideUrlLoading(WebView view, String url) {
-				view.loadUrl(url);
-				return true;
-			}
-		});
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/HotWords.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/HotWords.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/HotWords.java	(revision )
@@ -1,37 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-/***
- * @ClassName:  HotWords
- * @Description: 热词集合
- * @author YY
- * @date 2015年6月25日 下午5:35:36
- */
-public class HotWords implements Serializable {
-
-	private static final long serialVersionUID = -247710011229620776L;
-	/**排序ID*/
-	private int id;
-	/**热词*/
-	private String name;
-	/**状态*/
-	private int status;
-	public int getId() {
-		return id;
-	}
-	public void setId(int id) {
-		this.id = id;
-	}
-	public String getName() {
-		return name;
-	}
-	public void setName(String name) {
-		this.name = name;
-	}
-	public int getStatus() {
-		return status;
-	}
-	public void setStatus(int status) {
-		this.status = status;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterTicketDetailActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterTicketDetailActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterTicketDetailActivity.java	(revision )
@@ -1,371 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.os.Bundle;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.widget.Button;
-import android.widget.ExpandableListAdapter;
-import android.widget.ExpandableListView;
-import android.widget.ImageView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.ExpandAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.OrderInfo;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.OrderLogic;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.MyExpandableListView;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-import com.tencent.mm.sdk.constants.Build;
-import com.tencent.mm.sdk.modelpay.PayReq;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-import java.util.ArrayList;
-import java.util.List;
-/**
- * @ClassName:  WaterTicketDetailActivity
- * @Description: 水票的详细信息
- * @author YY
- * @date 2015年6月17日 下午2:46:24
- */
-public class WaterTicketDetailActivity extends BaseActivity {
-	public static String EXTRA_GOODSCODE = "goods_code";
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-
-	private TextView titleBarTv, name, price;
-	private ImageView leftTitle, imgbg;
-	private WaterInfo waterInfo;
-	private Button pay;
-	private int goods_code;
-	private MyExpandableListView elv;
-	
-	private OrderInfo orderInfo = null;
-	private PrepayIdInfo prepayInfo = null;
-	final IWXAPI msgApi = WXAPIFactory.createWXAPI(this, null);
-	private PayReq req;
-	
-	private List<String> group;
-	private List<List<String>> child;
-	private ExpandAdapter adapter;
-	private boolean isCommit = true ;
-	private RelativeLayout loadingView,errorView;
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_water_detail);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("水票详情");
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-
-	private void initView() {
-		goods_code = getIntent().getExtras().getInt(EXTRA_GOODSCODE);
-		getWaterDetail(goods_code);
-		
-		pay = (Button) findViewById(R.id.bt_pay);
-		imgbg = (ImageView) findViewById(R.id.iv_img);
-		name = (TextView) findViewById(R.id.tv_name);
-		price = (TextView) findViewById(R.id.tv_price);
-		pay.setOnClickListener(this);
-		elv = (MyExpandableListView) findViewById(R.id.elv);
-		elv.setGroupIndicator(null);
-		
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		initImageLoader();
-	}
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left:// 关闭
-			finish();
-			break;
-		case R.id.bt_pay://支付
-			if (Utils.loginState()) {// 判断是否登录过
-				if (isCommit) {
-					loadingView.setVisibility(View.VISIBLE);
-					isCommit = !isCommit;
-					if (orderInfo == null) {
-						boolean isPaySupported = msgApi.getWXAppSupportAPI() >= Build.PAY_SUPPORTED_SDK_INT;
-						if (isPaySupported) {
-							postOrderInfo();
-						} else {
-							isCommit = !isCommit;
-							MyToast.show(this, "您手机未安装微信或者当前版本不支持微信支付！");
-						}
-					}else{
-						isCommit = !isCommit;
-						getWXPrepayidAction(orderInfo.getOrder_num());
-					}
-				}
-			} else {
-				startActivity(new Intent(this, RegistActivity.class));
-				finish();
-			}
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_WATER_DETAIL_SUCESS://获取水票详情成功事件 
-			hideErrorLocal();
-			loadingView.setVisibility(View.GONE);
-			waterInfo = (WaterInfo) bundle.getSerializable(TicketLogic.EXTRA_WATER_DETAIL);
-			
-			int w = App.windowWidth;
-			LayoutParams params = imgbg.getLayoutParams();
-			params.height = (int) (w * 0.84);
-			imgbg.setLayoutParams(params);
-			
-			mImageLoader.displayImage(waterInfo.getPictrue_addr(), imgbg, options);
-			name.setText(waterInfo.getGoods_name()+"桶裝水("+waterInfo.getGoods_num()+"桶)");
-			price.setText(waterInfo.getGoods_price()+"元");
-			initData();
-			adapter = new ExpandAdapter(this,group,child);
-			elv.setAdapter(adapter);
-			elv.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
-
-				@Override
-				public boolean onGroupClick(ExpandableListView parent, View v,int groupPosition, long id) {
-					setListViewHeight(parent, groupPosition);
-					return false;
-				}
-			});
-			break;
-		case Event.GET_WATER_DETAIL_FAILED://获取水票详情失败事件 
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_WATER_SUBMIT_SUCESS://购买水票成功事件
-			isCommit = !isCommit;
-			orderInfo = (OrderInfo) bundle.getSerializable(OrderLogic.EXTRA_ORDER_INFO_LIST);
-			getWXPrepayidAction(orderInfo.getOrder_num());
-			break;
-		case Event.GET_WATER_SUBMIT_FAILED://购买水票失败事件
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_PREPAY_ID_WATER_SUCESS://WX支付获取prepayid水票页面成功事件 
-			loadingView.setVisibility(View.GONE);
-			SPUtils.saveString(context, GlobalInfo.KEY_ORDER_NUM, orderInfo.getOrder_num());
-			SPUtils.saveBoolean(context, GlobalInfo.KEY_ISWATER, true);
-			prepayInfo = (PrepayIdInfo) bundle.getSerializable(OrderLogic.EXTRA_PREPAY_ID);
-			msgApi.registerApp(prepayInfo.getAppid());
-			req = new PayReq();
-			genPayReq();
-			sendPayReq();
-			finish();
-			break;
-		case Event.GET_PREPAY_ID_WATER_FAILED://WX支付获取prepayid水票页面失败事件 
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	private void setListViewHeight(ExpandableListView parent, int groupPosition) {
-		ExpandableListAdapter listAdapter = (ExpandableListAdapter) elv.getExpandableListAdapter();
-		int totalHeight = 0;
-		int desiredWidth = View.MeasureSpec.makeMeasureSpec(elv.getWidth(),View.MeasureSpec.EXACTLY);
-		for (int i = 0; i < listAdapter.getGroupCount(); i++) {
-			View groupItem = listAdapter.getGroupView(i, false, null, elv);
-			groupItem.measure(desiredWidth, View.MeasureSpec.UNSPECIFIED);
-			totalHeight += groupItem.getMeasuredHeight();
-			if (((elv.isGroupExpanded(i)) && (i != groupPosition)) || ((!elv.isGroupExpanded(i)) && (i == groupPosition))) {
-				for (int j = 0; j < listAdapter.getChildrenCount(i); j++) {
-					View listItem = listAdapter.getChildView(i, j, false, null, elv);
-					listItem.measure(desiredWidth, View.MeasureSpec.UNSPECIFIED);
-					totalHeight += listItem.getMeasuredHeight();
-				}
-			}
-		}
-
-		ViewGroup.LayoutParams params = elv.getLayoutParams();
-		int height = totalHeight + (elv.getDividerHeight() * (listAdapter.getGroupCount() - 1));
-		if (height < 10)
-			height = 200;
-		params.height = height;
-		elv.setLayoutParams(params);
-		elv.requestLayout();
-	}
-
-	private void initData() {
-		group = new ArrayList<String>();
-		child = new ArrayList<List<String>>();
-		addInfo("水票简介",new String[]{
-				"水票",
-				"1."+waterInfo.getGoods_price()+"元水票含"+waterInfo.getGoods_num()+"桶水",
-				"2.水票仅限当前购买所在便利店使用",
-				"3.水票无使用期限",
-				" ",
-				"代金券",
-				"1."+waterInfo.getGoods_price()+"元水票返"+waterInfo.getCoupon_price()+"元代金券.",
-				"2.代金券仅限当前购买所在便利店使用",
-				"3.代金券请在有效期之内用完."});
-		addInfo("使用方法", new String[]{
-				"首次购买水票",
-				"1.首页点击“一键送水”",
-				"2.购买心仪的水票",
-				"3.在个人中心-我的水票页点击使用",
-				"4.输入收货人信息，提交订单即可",
-				" ",
-				"已有水票，快递下单",
-				"1.首页点击“一键送水”",
-				"2.提交订单"});
-		addInfo(waterInfo.getGoods_name()+"桶装水介绍（含真伪鉴别方法）", new String[]{waterInfo.getWater_intro_url()});
-	}
-	
-	/**
-	 * 添加数据信息
-	 * @param g
-	 * @param c
-	 */
-	private void addInfo(String g,String[] c) {
-		group.add(g);
-		List<String> list = new ArrayList<String>();
-		for (int i = 0; i < c.length; i++) {
-			list.add(c[i]);
-		}
-		child.add(list);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,
-				Event.GET_WATER_DETAIL_SUCESS,Event.GET_WATER_DETAIL_FAILED,
-				Event.GET_WATER_SUBMIT_SUCESS,Event.GET_WATER_SUBMIT_FAILED,
-				Event.GET_PREPAY_ID_WATER_SUCESS,Event.GET_PREPAY_ID_WATER_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	/**购买水票*/
-	protected void postWaterConfired(int userCode) {
-		Intent intent = new Intent(TicketLogic.ACTION_POST_WATER_CONFIRED);
-		intent.putExtra(TicketLogic.EXTRA_SHOP_CODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(TicketLogic.EXTRA_GOODS_CODE, waterInfo.getGoods_code());
-		intent.putExtra(TicketLogic.EXTRA_USER_CODE, userCode);
-		sendAction(intent);
-	}
-	
-	/** 获取水票详情 */
-	private void getWaterDetail(int goods_code) {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_WATER_DETAIL);
-		intent.putExtra(TicketLogic.EXTRA_GOODS_CODE,goods_code );
-		intent.putExtra(TicketLogic.EXTRA_SHOP_CODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		sendAction(intent);
-	}
-	
-	/** 请求公司服务器购买水票 */
-	private void postOrderInfo() {
-		Intent intent = new Intent(OrderLogic.ACTION_POST_ORDER_WATER_TICKET);
-		intent.putExtra(OrderLogic.EXTRA_SHOP_CODE,SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(OrderLogic.EXTRA_USER_CODE,SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(OrderLogic.EXTRA_GOODS_CODE, waterInfo.getGoods_code());
-		intent.putExtra(OrderLogic.EXTRA_PAY_WAY, 2);
-		sendAction(intent);
-	}
-	
-	/** WX支付获取prepayid水票  */
-	private void getWXPrepayidAction(String ordernum) {
-		Intent intent = new Intent(OrderLogic.ACTION_GET_PREPAYID_WATER);
-		intent.putExtra(OrderLogic.EXTRA_OUT_TRADE_NO, ordernum);
-		sendAction(intent);
-	}
-	
-	@SuppressWarnings("deprecation")
-	private void initImageLoader() {
-		mImageLoader = App.initImageLoader(this);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				 .showStubImage(R.drawable.no_data)//加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_data) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_data) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-	
-	private void genPayReq() {
-		req.appId = prepayInfo.getAppid();
-		req.partnerId = prepayInfo.getPartnerid();
-		req.prepayId = prepayInfo.getPrepayid();
-		req.packageValue = "Sign=WXPay";
-		req.nonceStr = prepayInfo.getNoncestr();
-		req.timeStamp = prepayInfo.getTimestamp();
-		req.sign = prepayInfo.getSign();
-	}
-	
-	private void sendPayReq() {
-		msgApi.registerApp(prepayInfo.getAppid());
-		msgApi.sendReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/ReqInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/ReqInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/ReqInfo.java	(revision )
@@ -1,99 +0,0 @@
-package com.anniu.shandiandaojia.net;
-
-public class ReqInfo {
-
-	/** 定位 */
-	public static final int REQ_GET_LOCATION = 101;
-	/** 定位--通过地址 */
-	public static final int REQ_GET_LOCATION_ADDR = 102;
-	/** 升级 */
-	public static final int REQ_GET_UPDATE = 103;
-	/** 升级 */
-	public static final int REQ_GET_SHOP_INFO = 104;
-	/** 获取验证码 */
-	public static final int REQ_POST_VERFICATION_CODE = 105;
-	/** 校验验证码并登录 */
-	public static final int REQ_POST_CHECK_OUT_VERFICATION_CODE = 106;
-	/** 获取商品详情 */
-	public static final int REQ_GET_GOODS_DETAILS = 107;
-	/** 获取个人中心详情 */
-	public static final int REQ_GET_PERSON_SETTING = 108;
-	/** 保存个人中心姓名性别 */
-	public static final int REQ_POST_PERSON_NAME_SEX = 109;
-	/** 获取用户订单 */
-	public static final int REQ_GET_FIND_ALLORDERS = 110;
-	/** 首页重新选择便利店 */
-	public static final int REQ_GET_SELECT_BROWERS_SHOP = 111;
-	/** 获取个人中心我的地址 */
-	public static final int REQ_GET_PERSON_FINDUSERLOC = 112;
-	/** 添加或删除/修改商品数量 */
-	public static final int REQ_GET_INSERT_OR_UPDATE_CART_GOOD_NUM = 113;
-	/** 修改用户收货信息--修改 */
-	public static final int REQ_POST_PERSON_EDITADDR = 114;
-	/** 修改用户收货信息--新增 */
-	public static final int REQ_POST_PERSON_INSERTADDR = 115;
-	/** 修改用户收货信息--选择默认地址 */
-	public static final int REQ_GET_PERSON_EDITDEFAULT_ADDR = 116;
-	/** 购物车商品列表 */
-	public static final int REQ_GET_CARTLIST = 117;
-	/** 删除用户收货信息--单个 */
-	public static final int REQ_POST_DELETEADDR = 118;
-	/** 取消订单 */
-	public static final int REQ_GET_CANCELORDER = 119;
-	/** 确认订单 */
-	public static final int REQ_GET_CONFIRMORDER = 120;
-	/** 订单详情 */
-	public static final int REQ_GET_ORDERSTATUS = 121;
-	/** 购物车详情 */
-	public static final int REQ_GET_CARTINFO = 122;
-	/** 根据商品商店id 和用户id 删除 购物车 列表的一条 */
-	public static final int REQ_GET_DELETECARTGOOD = 123;
-	/** 意见反馈 */
-	public static final int REQ_POST_SUBMITADVICE = 124;
-	/** 按照商品分类获取 商品信息 */
-	public static final int REQ_GET_GETGOODSBYTYPE = 125;
-	/** 投诉商铺 */
-	public static final int REQ_POST_COMPLAINORDER = 126;
-	/** 通过分类首次进入显示 全部商品 */
-	public static final int REQ_GET_GOODS = 127;
-	/** 结算跳转订单确认页面 */
-	public static final int REQ_GET_ACKORDER = 128;
-	/** 版本更新检测 */
-	public static final int REQ_GET_VERSION = 129;
-	/** 优惠券 */
-	public static final int REQ_GET_FINDUSERCOUPON = 130;
-	/** 水券 */
-	public static final int REQ_GET_FINDWATERTICKET = 131;
-	/** 初始化一键送水界面 */
-	public static final int REQ_GET_WATER_FIND = 132;
-	/** 购买水票 */
-	public static final int REQ_POST_WATER_CONFIRED = 133;
-	/** 水票详情 */
-	public static final int REQ_GET_WATER_DETAIL = 134;
-	/** 水票购买*/
-	public static final int REQ_GET_WATER_SUBMIT = 135;
-	/** 进入一键送水界面 */
-	public static final int REQ_GET_WATER_USETICKETS = 136;
-	/** 一键送水界面提交订单 */
-	public static final int REQ_GET_WATER_WATERORDER = 137;
-	/** 点击进入搜索界面 */
-	public static final int REQ_GET_INDEX_SEARCHHOTS = 138;
-	/** 搜索商品 */
-	public static final int REQ_GET_SEARCH_GOODS = 139;
-	/** 获取个人中心我的水票 */
-	public static final int REQ_GET_PERSON_FINDTICKETS = 140;
-	/** 用水票购买水 */
-	public static final int REQ_POST_WATER_ORDER = 141;
-	/** 普通商品提交订单 */
-	public static final int REQ_POST_ORDER_INSERTORDER = 142;
-	/** 点击切换使用水票 */
-	public static final int REQ_GET_WATER_SELECTEDTICKET = 143;
-	/** 触发优惠券 */
-	public static final int REQ_GET_ORDER_FINDCOUPON = 144;
-	/** 微信支付获取prepayid */
-	public static final int REQ_GET_GETPREPAYID = 145;
-	/** 微信支付获取订单状态 */
-	public static final int REQ_GET_WXCALLBACK = 146;
-	/** 提交日志 */
-	public static final int REQ_POST_EXCEPTION = 147;
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/GoodsLogic.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/GoodsLogic.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/logic/GoodsLogic.java	(revision )
@@ -1,390 +0,0 @@
-package com.anniu.shandiandaojia.logic;
-
-import android.content.Intent;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Category;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.net.GlobalValue;
-import com.anniu.shandiandaojia.net.NetMgr.OnHttpRsp;
-import com.anniu.shandiandaojia.net.ReqInfo;
-import com.anniu.shandiandaojia.net.bean.HttpRsp;
-import com.anniu.shandiandaojia.net.bean.entity.CategoryGoodsReq;
-import com.anniu.shandiandaojia.net.bean.entity.GoodsDetailsReq;
-import com.anniu.shandiandaojia.net.bean.entity.TabCategoryGoodsReq;
-import com.anniu.shandiandaojia.service.HttpService;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.List;
-
-/**
-* @ClassName: GoodsLogic 
-* @Description: 商品逻辑类
-* @author zxl 
-* @date 2015年6月3日 下午7:22:50
- */
-public class GoodsLogic extends BaseLogic {
-
-	/** 获取商品详情*/
-	public static String ACTION_GET_GOODS_DETAILS = "GoodsLogic.ACTION_GET_GOODS_DETAILS";
-	/** 通过分类id获取商品列表*/
-	public static String ACTION_GET_GOODS_BY_TYPE = "GoodsLogic.ACTION_GET_GOODS_BY_TYPE";
-	/** 通过分类首次进入显示 全部商品*/
-	public static String ACTION_GET_GOODS = "GoodsLogic.ACTION_GET_GOODS";
-	
-	public static String EXTRA_LOADTYPE = "loadtype";
-	public static String EXTRA_GOODS_NUMBER = "goods_num";
-	public static String EXTRA_GOODS_CODE = "changcode";
-	public static String EXTRA_USER_CODE = "usercode";
-	
-	public static String EXTRA_GOODINFO = "goodInfo";
-	public static String EXTRA_GOODSLOVE = "Goodslove";
-	public static String EXTRA_SENDINFO = "sendInfo";
-	
-	public static String EXTRA_SHOPCODE = "shopcode";
-	public static String EXTRA_GOODSTYPECODE = "goodstypecode";
-	public static String EXTRA_GOODSTYPENAME = "goodstypename";
-	public static String EXTRA_PAGENUM = "pagenum";
-	public static String EXTRA_PAGESIZE = "pagesize";
-	
-	public static String EXTRA_TOTALRECORDER = "totalRecorder";
-	public static String EXTRA_CURPAGE = "curPage";
-	public static String EXTRA_TOTALPAGE = "totalPage";
-	public static String EXTRA_GOODLIST = "goodlist";
-
-	public static String EXTRA_GOODS = "goods";
-	public static String EXTRA_GOODSTYPELIST = "goodstypeList";
-	public static String EXTRA_GOODSLIST = "goodslist";
-	public static String EXTRA_LIMITED = "limited";
-
-	public GoodsLogic(HttpService service) {
-		super(service);
-		List<String> actions = new ArrayList<String>();
-		actions.add(ACTION_GET_GOODS_DETAILS);
-		actions.add(ACTION_GET_GOODS_BY_TYPE);
-		actions.add(ACTION_GET_GOODS);
-		mService.registerAction(this, actions);
-	}
-
-	@Override
-	public void onHandleAction(Intent intent) {
-		String action = intent.getAction();
-		if (ACTION_GET_GOODS_DETAILS.equals(action)) {
-			int changcode = intent.getExtras().getInt(EXTRA_GOODS_CODE);
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
-			getGoodsDetails(changcode, usercode);
- 		}else if (ACTION_GET_GOODS_BY_TYPE.equals(action)) {
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
-			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
-			int goodstypecode = intent.getExtras().getInt(EXTRA_GOODSTYPECODE);
-			int pagenum = intent.getExtras().getInt(EXTRA_PAGENUM);
-			int pagesize = intent.getExtras().getInt(EXTRA_PAGESIZE);
-			int loadtype = intent.getExtras().getInt(EXTRA_LOADTYPE);
-			getGoodsByType(usercode,shopcode,goodstypecode,pagenum,pagesize,loadtype);
-		}else if (ACTION_GET_GOODS.equals(action)) {
-			int shopcode = intent.getExtras().getInt(EXTRA_SHOPCODE);
-			int usercode = intent.getExtras().getInt(EXTRA_USER_CODE);
-			int pagenum = intent.getExtras().getInt(EXTRA_PAGENUM);
-			int pagesize = intent.getExtras().getInt(EXTRA_PAGESIZE);
-			int goodstypecode = intent.getExtras().getInt(EXTRA_GOODSTYPECODE);
-			getGoods(shopcode,usercode,pagenum,pagesize,goodstypecode);
-		}
-	}
-
-	
-	/** 通过分类id获取商品列表*/
-	private void getGoods(int shopcode, int usercode, int pagenum,
-			int pagesize, final int goodstypecode) {
-		TabCategoryGoodsReq req = new TabCategoryGoodsReq(ReqInfo.REQ_GET_GOODS, usercode, shopcode, goodstypecode, pagenum, pagesize);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_GOODSTYPECODE, goodstypecode);
-							bundle.putInt(EXTRA_LOADTYPE, 1);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_GOODS)) {
-									JSONArray array = msg.getJSONArray(EXTRA_GOODS);
-									if ( array != null && array.length() > 0) {
-										JSONObject typeObj = (JSONObject) array.get(0);
-										JSONObject goodsObj = (JSONObject) array.get(1);
-										JSONObject sendObj = (JSONObject) array.get(2);
-										
-										if (typeObj != null && typeObj.has(EXTRA_GOODSTYPELIST)) {
-											JSONArray typeList = typeObj.getJSONArray(EXTRA_GOODSTYPELIST);
-											if (typeList != null && typeList.length() > 0 ) {
-												ArrayList<Category> typelist = new ArrayList<Category>();
-												Category category = null;
-												JSONObject tO = null;
-												for (int i = 0; i < typeList.length(); i++) {
-													tO = (JSONObject) typeList.get(i);
-													category = gson.fromJson(tO.toString(), Category.class);
-													typelist.add(category);
-												}
-												bundle.putSerializable(EXTRA_GOODSTYPELIST,typelist);
-											}
-										}
-										
-										if (goodsObj != null) {
-											if (goodsObj.has(EXTRA_TOTALRECORDER)) {
-												int totalRecorder = goodsObj.getInt(EXTRA_TOTALRECORDER);
-												bundle.putInt(EXTRA_TOTALRECORDER, totalRecorder);
-											}
-											if (goodsObj.has(EXTRA_CURPAGE)) {
-												int curpage = goodsObj.getInt(EXTRA_CURPAGE);
-												bundle.putInt(EXTRA_CURPAGE, curpage);
-											}
-											if (goodsObj.has(EXTRA_TOTALPAGE)) {
-												int totalpage = goodsObj.getInt(EXTRA_TOTALPAGE);
-												bundle.putInt(EXTRA_TOTALPAGE, totalpage);
-											}
-											
-											if (goodsObj.has(EXTRA_GOODSLIST)) {
-												JSONArray goodsArray = goodsObj.getJSONArray(EXTRA_GOODSLIST);
-												if (goodsArray != null && goodsArray.length() > 0 ) {
-													ArrayList<Goods> goodsList = new ArrayList<Goods>();
-													Goods good = null ;
-													JSONObject goodObj = null;
-													for (int i = 0; i < goodsArray.length(); i++) {
-														goodObj = (JSONObject) goodsArray.get(i);
-														good = gson.fromJson(goodObj.toString(), Goods.class);
-														goodsList.add(good);
-													}
-													bundle.putSerializable(EXTRA_GOODLIST,goodsList);
-												}
-											}
-										}
-										
-										if (sendObj != null && sendObj.has(EXTRA_SENDINFO)) {
-											JSONArray sendArray = sendObj.getJSONArray(EXTRA_SENDINFO);
-											if (sendArray != null && sendArray.length() > 0 ) {
-												ArrayList<BottomStatusBar> bsbList = new ArrayList<BottomStatusBar>();
-												BottomStatusBar bsb = null;
-												JSONObject send = null;
-												for (int i = 0; i < sendArray.length(); i++) {
-													send = (JSONObject) sendArray.get(i);
-													bsb = gson.fromJson(send.toString(), BottomStatusBar.class);
-													bsbList.add(bsb);
-												}
-												bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST,bsbList);
-											}
-										}
-									}
-								}
-							}
-							notice(Event.GET_GOODS_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_GOODS_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_GOODS_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_GOODS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 通过分类id获取商品列表*/
-	private void getGoodsByType(int usercode, int shopcode, final int goodstypecode,
-			int pagenum, int pagesize,final int loadtype) {
-		CategoryGoodsReq req = new CategoryGoodsReq(ReqInfo.REQ_GET_GETGOODSBYTYPE, usercode, shopcode, goodstypecode, pagenum, pagesize);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-							bundle.putInt(EXTRA_LOADTYPE, loadtype);
-							bundle.putInt(EXTRA_GOODSTYPECODE, goodstypecode);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null ) {
-									if (msg.has(EXTRA_TOTALRECORDER)) {
-										int totalRecorder = msg.getInt(EXTRA_TOTALRECORDER);
-										bundle.putInt(EXTRA_TOTALRECORDER, totalRecorder);
-									}
-									if (msg.has(EXTRA_CURPAGE)) {
-										int curpage = msg.getInt(EXTRA_CURPAGE);
-										bundle.putInt(EXTRA_CURPAGE, curpage);
-									}
-									if (msg.has(EXTRA_TOTALPAGE)) {
-										int totalpage = msg.getInt(EXTRA_TOTALPAGE);
-										bundle.putInt(EXTRA_TOTALPAGE, totalpage);
-									}
-									
-									if (msg.has(EXTRA_GOODLIST)) {
-										JSONArray array = msg.getJSONArray(EXTRA_GOODLIST);
-										if (array != null && array.length() > 0 ) {
-											ArrayList<Goods> goodsList = new ArrayList<Goods>();
-											JSONObject json = null;
-											Goods good = null;
-											for (int i = 0; i < array.length(); i++) {
-												json = (JSONObject) array.get(i);
-												good = gson.fromJson(json.toString(), Goods.class);
-												goodsList.add(good);
-											}
-											bundle.putSerializable(EXTRA_GOODLIST,goodsList);
-										}
-									}
-								}
-							}
-							notice(Event.GET_GOODS_BY_TYPE_SUCESS, bundle);
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_GOODS_BY_TYPE_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_GOODS_BY_TYPE_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_GOODS_BY_TYPE_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-
-	/** 商品详情*/
-	private void getGoodsDetails(int changcode, int usercode) {
-		GoodsDetailsReq req = new GoodsDetailsReq(ReqInfo.REQ_GET_GOODS_DETAILS, changcode, usercode);
-		req.setOnHttpRsp(new OnHttpRsp() {
-			
-			@SuppressWarnings("unchecked")
-			@Override
-			public void onHttpRsp(HttpRsp httpRsp) {
-
-				Bundle bundle = new Bundle();
-				if (httpRsp.code == HttpRsp.CODE_SUCCESS) {
-					byte[] data = httpRsp.data;
-					try {
-						String str = new String(data, GlobalValue.ENCODING);
-						JSONObject obj = new JSONObject(str);
-						int code = 0;
-						JSONObject msg = null;
-						if (obj.has(GlobalValue.KEY_CODE)) {
-							code = obj.getInt(GlobalValue.KEY_CODE);
-							bundle.putInt(GlobalValue.KEY_CODE, code);
-						}
-						if (code == 200) {
-							if (obj.has(GlobalValue.KEY_MSG)) {
-								msg = obj.getJSONObject(GlobalValue.KEY_MSG);
-								if (msg != null && msg.has(EXTRA_GOODINFO)) {
-									JSONArray jsonArray = msg.getJSONArray(EXTRA_GOODINFO);
-									if (jsonArray != null && jsonArray.length() > 0) {
-										if (jsonArray != null && jsonArray.length() > 0 ) {
-											JSONObject obj1 = (JSONObject) jsonArray.get(0);
-											JSONObject obj2 = (JSONObject) jsonArray.get(1);
-											JSONObject obj3 = (JSONObject) jsonArray.get(2);
-											
-											Goods goodsDetail = gson.fromJson(obj1.toString(), Goods.class);
-											bundle.putSerializable(EXTRA_GOODINFO, goodsDetail);
-											
-											if (obj2 != null && obj2.has(EXTRA_GOODSLOVE)) {
-												JSONArray array = obj2.getJSONArray(EXTRA_GOODSLOVE);
-												if (array != null && array.length() > 0 ) {
-													ArrayList<Goods> goodsList = new ArrayList<Goods>();
-													Goods g = null;
-													for (int i = 0; i < array.length(); i++) {
-														JSONObject o = (JSONObject) array.get(i);
-														g = gson.fromJson(o.toString(), Goods.class);
-														goodsList.add(g);
-													}
-													bundle.putSerializable(EXTRA_GOODSLOVE,goodsList);
-												}
-											}
-											
-											if (obj3 != null && obj3.has(EXTRA_SENDINFO)) {
-												JSONArray send = obj3.getJSONArray(EXTRA_SENDINFO);
-												if (send != null && send.length() > 0 ) {
-													ArrayList<BottomStatusBar> list = new ArrayList<BottomStatusBar>();
-													JSONObject sendObj = null ;
-													BottomStatusBar	g = null;
-													for (int i = 0; i < send.length(); i++) {
-														sendObj = (JSONObject) send.get(i);
-														g = gson.fromJson(sendObj.toString(), BottomStatusBar.class);
-														list.add(g);
-													}
-													bundle.putSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST,list);
-												}
-											}
-										}
-										notice(Event.GET_GOODS_DETAILS_SUCCESS, bundle);
-									}else{
-										bundle.putString(BaseLogic.EXTRA_ERROR, "获取商品详情信息失败！");
-										notice(Event.GET_GOODS_DETAILS_FAILED, bundle);
-									}
-								}
-							}
-						}else if(code == 0){
-							String error = obj.getString(GlobalValue.KEY_MSG);
-							bundle.putString(BaseLogic.EXTRA_ERROR, error);
-							notice(Event.GET_GOODS_DETAILS_FAILED, bundle);
-						}else {
-							bundle.putString(BaseLogic.EXTRA_ERROR, "获取信息失败，请稍后重试！");
-							notice(Event.GET_GOODS_DETAILS_FAILED, bundle);
-						}
-					} catch (UnsupportedEncodingException e) {
-						e.printStackTrace();
-					} catch (JSONException e) {
-						e.printStackTrace();
-					}
-				} else {
-					bundle.putString(BaseLogic.EXTRA_ERROR,httpRsp.getMsg(httpRsp.code));
-					notice(Event.GET_GOODS_DETAILS_FAILED, bundle);
-				}
-			}
-		});
-		sendHttpReq(req);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterOrderActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterOrderActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/WaterOrderActivity.java	(revision )
@@ -1,167 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.ImageView;
-import android.widget.RadioGroup;
-import android.widget.RadioGroup.OnCheckedChangeListener;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.LocMap;
-import com.anniu.shandiandaojia.db.jsondb.MyAddress;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.Utils;
-/**
- * @ClassName:  WaterOrderActivity
- * @Description: 购买水票生成的订单
- * @author YY
- * @date 2015年6月16日 下午5:41:42
- */
-public class WaterOrderActivity extends BaseActivity {
-	private TextView tv_name, tv_phone, tv_address, tv_water_name,
-			tv_water_num, tv_water_price, pay_money, tv_remark, titleBarTv;
-	private String rev_name, user_tel, user_addr;
-	private ImageView leftTitle;
-	private WaterInfo waterTicketInfo;
-	private LocMap locMap;
-	private RadioGroup rg_group;
-	private int pay_way = 1;
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left:// 关闭
-			if (Utils.isIMMShow(v)) {
-				Utils.hidiInputMethodManager(v);
-			}
-			finish();
-			break;
-		case R.id.rl_contacts://点击跳转到修改多个地址界面
-			Intent intent =  new Intent();
-            intent.setClass(this,AddressListActivity.class);
-            startActivityForResult(intent,AddressListActivity.REQUESTCODE);
-			break;
-		case R.id.bt_commit://点击提交订单
-			
-			break;
-		case R.id.rl_remark://点击填写备注
-			Intent intent2 = new Intent(this,RemarkActivity.class);
-			startActivityForResult(intent2, RemarkActivity.REQUESTCODE);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	@Override
-	protected void onActivityResult(int requestCode, int resultCode, Intent data) {
-		super.onActivityResult(requestCode, resultCode, data);
-		if (requestCode == AddressListActivity.REQUESTCODE) {
-			MyAddress addr = (MyAddress) data.getSerializableExtra(GlobalInfo.KEY_LOC_INFO);
-			rev_name = addr.getRev_name();
-			user_tel = addr.getUser_tel();
-			user_addr = addr.getUser_addr();
-			tv_name.setText(rev_name);
-			tv_phone.setText(user_tel);
-			tv_address.setText(user_addr);
-		}
-		if (requestCode == RemarkActivity.REQUESTCODE) {
-			String content = data.getStringExtra(GlobalInfo.KEY_CONTENT);
-			tv_remark.setText(content);
-		}
-	}
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_water_order);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("确认订单");
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-	}
-
-	/**初始化界面*/
-	private void initDate() {
-		tv_name = (TextView) findViewById(R.id.tv_name);
-		tv_phone = (TextView) findViewById(R.id.tv_phone);
-		tv_address = (TextView) findViewById(R.id.tv_address);
-		tv_water_name = (TextView) findViewById(R.id.tv_water_name);
-		tv_water_num = (TextView) findViewById(R.id.tv_water_num);
-		tv_water_price = (TextView) findViewById(R.id.tv_water_price);
-		pay_money = (TextView) findViewById(R.id.pay_money);
-		tv_remark = (TextView) findViewById(R.id.tv_remark);
-		findViewById(R.id.rl_contacts).setOnClickListener(this);
-		findViewById(R.id.bt_commit).setOnClickListener(this);
-		findViewById(R.id.rl_remark).setOnClickListener(this);
-		rg_group = (RadioGroup) findViewById(R.id.rg_group);
-		rg_group.setOnCheckedChangeListener(new OnCheckedChangeListener() {
-			
-			@Override
-			public void onCheckedChanged(RadioGroup group, int checkedId) {
-				if (checkedId==R.id.rb_wxzf) {
-					pay_way = 1;
-					MyToast.show(WaterOrderActivity.this, "您选择微信支付");
-				}else if (checkedId==R.id.rb_zfb) {
-					pay_way = 2;
-					MyToast.show(WaterOrderActivity.this, "您选择支付宝支付");
-				}else if (checkedId==R.id.rb_bdqb) {
-					pay_way = 3;
-					MyToast.show(WaterOrderActivity.this, "您选择百度钱包支付");
-				}
-			}
-		});
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.POST_WATER_CONFIRED_SUCESS://生成 购买水票订单成功事件
-			waterTicketInfo = (WaterInfo) bundle.getSerializable(TicketLogic.EXTRA_WATER_TICKET_INFO);
-			locMap = (LocMap) bundle.getSerializable(TicketLogic.EXTRA_LOCMAP);
-			initDate();
-			if (locMap==null) {
-				tv_name.setText("暂无");
-				tv_phone.setText("暂无");
-				tv_address.setText("暂无");
-			}
-			tv_name.setText(locMap.getRev_name());
-			tv_phone.setText(locMap.getUser_tel());
-			tv_address.setText(locMap.getUser_addr());
-			tv_water_name.setText(waterTicketInfo.getGoods_name());
-			tv_water_num.setText("1");
-			tv_water_price.setText(waterTicketInfo.getGoods_price()+"元");
-			pay_money.setText("总计 ￥"+waterTicketInfo.getGoods_price()+"元");
-			break;
-		case Event.POST_WATER_CONFIRED_FAILED://生成 购买水票订单失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.POST_WATER_CONFIRED_SUCESS,Event.POST_WATER_CONFIRED_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AddressListActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AddressListActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/AddressListActivity.java	(revision )
@@ -1,192 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.view.KeyEvent;
-import android.view.View;
-import android.widget.ListView;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.AddressListAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.MyAddress;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-/**
- * 
- * @ClassName:  AddressListActivity
- * @Description: 我的地址list
- * @author YY
- * @date 2015年5月30日 下午6:41:03
- */
-public class AddressListActivity extends BaseActivity {
-	private TextView titleBarTv;
-	private ArrayList<MyAddress> myAddresses = new ArrayList<MyAddress>();
-	private AddressListAdapter addressAdapter;
-	private ListView listview_address;
-	private int userCode;//用户ID
-	/**状态码*/
-	public static int REQUESTCODE = 1;
-	public static String ISHASADDRESS = "hasAddress";
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {
-			setDefaut();
-		}else if (v.getId()==R.id.title_bar_right) {//点击标题右边的图标，新增加地址
-			startActivity(new Intent(this,AddAddress.class));
-		}
-	}
-
-	private void setDefaut() {
-		Intent inten = null;
-		if (myAddresses != null && myAddresses.size() > 0) {
-			for (int i = 0; i < myAddresses.size(); i++) {
-				MyAddress myAddress = myAddresses.get(i);
-				if (myAddress.getDefalut_addr() == 1) {
-					inten = new Intent();
-					inten.putExtra(ISHASADDRESS, true);
-					inten.putExtra(GlobalInfo.KEY_LOC_INFO, myAddress);
-					setResult(REQUESTCODE, inten);
-					finish();
-					break;
-				}
-			}
-		}else{
-			inten = new Intent();
-			inten.putExtra(ISHASADDRESS, false);
-			setResult(REQUESTCODE, inten);
-			finish();
-		}
-	}
-	
-	@Override
-	protected void onCreate(Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		userCode = SPUtils.getInt(AddressListActivity.this, GlobalInfo.KEY_USERCODE,0);
-		getFindUserloc(userCode);
-	}
-	
-	/**获取个人中心我的地址*/
-	private void getFindUserloc(int userCode) {
-		Intent intent = new Intent(UserLogic.ACTION_GET_PERSON_FINDUSERLOC);
-		intent.putExtra(UserLogic.EXTRA_USER_CODE, userCode);
-		sendAction(intent);
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_myaddress);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.my_address);
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		findViewById(R.id.iv_logo_right).setBackgroundDrawable(getResources().getDrawable(R.drawable.title_add_address));
-		findViewById(R.id.title_bar_right).setOnClickListener(this);
-		
-		listview_address=(ListView) findViewById(R.id.listview_address);
-	}
-
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_PERSON_FINDUSERLOC_SUCESS://获取个人中心我的地址成功事件
-			ArrayList<MyAddress> addresses = (ArrayList<MyAddress>) bundle.getSerializable(UserLogic.EXTRA_MYADDRESS_STATES_LIST);
-			if (addresses != null) {
-				myAddresses.clear();
-				myAddresses.addAll(addresses);
-				if (addressAdapter == null) {
-					addressAdapter = new AddressListAdapter(AddressListActivity.this,myAddresses);
-					listview_address.setAdapter(addressAdapter);
-				}else{
-					addressAdapter.notifyDataSetChanged();
-				}
-			}
-			break;
-		case Event.GET_PERSON_FINDUSERLOC_FAILED://获取个人中心我的地址失败事件
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_PERSON_EDITADDR_SUCESS://修改用户收货信息--修改成功事件 
-			getFindUserloc(userCode);
-			break;
-		case Event.POST_PERSON_EDITADDR_FAILED://修改用户收货信息--修改失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_PERSON_EDITDEFAULT_ADDR_SUCESS:// 修改用户收货信息--修改默认收货地址成功事件
-			
-			int user_loc_code = addressAdapter.getUser_loc_code();
-			MyAddress address = null ;
-			for (int i = 0; i < myAddresses.size(); i++) {
-				address = myAddresses.get(i);
-				if (user_loc_code == address.getUser_loc_code()) {
-					break;
-				}
-			}
-			
-			Intent inten = new Intent();
-			inten.putExtra(ISHASADDRESS, true);
-			inten.putExtra(GlobalInfo.KEY_LOC_INFO, address);
-			setResult(REQUESTCODE, inten);
-			
-			finish();
-			break;
-		case Event.GET_PERSON_EDITDEFAULT_ADDR_FAILED://修改用户收货信息--修改默认收货地址失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_PERSON_DELETEADDR_SUCESS://删除用户收货信息成功事件 
-			getFindUserloc(userCode);
-			break;
-		case Event.POST_PERSON_DELETEADDR_FAILED://删除用户收货信息失败事件
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-		
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,
-				Event.GET_PERSON_FINDUSERLOC_SUCESS,
-				Event.GET_PERSON_FINDUSERLOC_FAILED,
-				Event.POST_PERSON_EDITADDR_SUCESS,
-				Event.POST_PERSON_EDITADDR_FAILED,
-				Event.GET_PERSON_EDITDEFAULT_ADDR_SUCESS,
-				Event.GET_PERSON_EDITDEFAULT_ADDR_FAILED,
-				Event.POST_PERSON_DELETEADDR_SUCESS,
-				Event.POST_PERSON_DELETEADDR_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			setDefaut();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/EditAddrReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/EditAddrReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/EditAddrReq.java	(revision )
@@ -1,70 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: EditAddrReq
- * @Description: 修改用户收货地址请求--修改
- * @author YY
- * @date 2015年6月8日 下午3:21:18
- */
-public class EditAddrReq extends HttpReq {
-
-	private int userLocCode;
-	private String userName;
-	private String userPhone;
-	private String userAddr;
-
-	public EditAddrReq(int reqid, int userLocCode, String userName,String userPhone, String userAddr) {
-		super();
-		this.id = reqid;
-		this.userLocCode = userLocCode;
-		this.userName = userName;
-		this.userPhone = userPhone;
-		this.userAddr = userAddr;
-	}
-
-	public int getUserLocCode() {
-		return userLocCode;
-	}
-
-	public void setUserLocCode(int userLocCode) {
-		this.userLocCode = userLocCode;
-	}
-
-	public String getUserName() {
-		return userName;
-	}
-
-	public void setUserName(String userName) {
-		this.userName = userName;
-	}
-
-	public String getUserPhone() {
-		return userPhone;
-	}
-
-	public void setUserPhone(String userPhone) {
-		this.userPhone = userPhone;
-	}
-
-	public String getUserAddr() {
-		return userAddr;
-	}
-
-	public void setUserAddr(String userAddr) {
-		this.userAddr = userAddr;
-	}
-
-	@Override
-	public String getParams() {
-		return "user_loc_code="+userLocCode+"&rev_name="+userName+"&user_tel="+userPhone+"&user_addr="+userAddr;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ExampleUtil.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ExampleUtil.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/ExampleUtil.java	(revision )
@@ -1,103 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import android.content.Context;
-import android.content.pm.ApplicationInfo;
-import android.content.pm.PackageInfo;
-import android.content.pm.PackageManager;
-import android.content.pm.PackageManager.NameNotFoundException;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
-import android.os.Bundle;
-import android.os.Looper;
-import android.telephony.TelephonyManager;
-import android.util.Log;
-import android.widget.Toast;
-
-import java.util.regex.Matcher;
-import java.util.regex.Pattern;
-
-public class ExampleUtil {
-    public static final String PREFS_NAME = "JPUSH_EXAMPLE";
-    public static final String PREFS_DAYS = "JPUSH_EXAMPLE_DAYS";
-    public static final String PREFS_START_TIME = "PREFS_START_TIME";
-    public static final String PREFS_END_TIME = "PREFS_END_TIME";
-    public static final String KEY_APP_KEY = "JPUSH_APPKEY";
-
-    public static boolean isEmpty(String s) {
-        if (null == s)
-            return true;
-        if (s.length() == 0)
-            return true;
-        if (s.trim().length() == 0)
-            return true;
-        return false;
-    }
-    
-    // 校验Tag Alias 只能是数字,英文字母和中文
-    public static boolean isValidTagAndAlias(String s) {
-        Pattern p = Pattern.compile("^[\u4E00-\u9FA50-9a-zA-Z_-]{0,}$");
-        Matcher m = p.matcher(s);
-        return m.matches();
-    }
-
-    // 取得AppKey
-    public static String getAppKey(Context context) {
-        Bundle metaData = null;
-        String appKey = null;
-        try {
-            ApplicationInfo ai = context.getPackageManager().getApplicationInfo(
-                    context.getPackageName(), PackageManager.GET_META_DATA);
-            if (null != ai)
-                metaData = ai.metaData;
-            if (null != metaData) {
-                appKey = metaData.getString(KEY_APP_KEY);
-                if ((null == appKey) || appKey.length() != 24) {
-                    appKey = null;
-                }
-            }
-        } catch (NameNotFoundException e) {
-
-        }
-        return appKey;
-    }
-    
-    // 取得版本号
-    public static String GetVersion(Context context) {
-		try {
-			PackageInfo manager = context.getPackageManager().getPackageInfo(
-					context.getPackageName(), 0);
-			return manager.versionName;
-		} catch (NameNotFoundException e) {
-			return "Unknown";
-		}
-	}
-	
-    public static void showToast(final String toast, final Context context)
-    {
-    	new Thread(new Runnable() {
-			
-			@Override
-			public void run() {
-				Looper.prepare();
-				Toast.makeText(context, toast, Toast.LENGTH_SHORT).show();
-				Looper.loop();
-			}
-		}).start();
-    }
-    
-    public static boolean isConnected(Context context) {
-        ConnectivityManager conn = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
-        NetworkInfo info = conn.getActiveNetworkInfo();
-        return (info != null && info.isConnected());
-    }
-    
-	public static String getImei(Context context, String imei) {
-		try {
-			TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
-			imei = telephonyManager.getDeviceId();
-		} catch (Exception e) {
-			Log.e(ExampleUtil.class.getSimpleName(), e.getMessage());
-		}
-		return imei;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SubmitadviceReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SubmitadviceReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SubmitadviceReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/***
- * 
- * @ClassName: SubmitadviceReq
- * @Description: 意见反馈请求
- * @author YY
- * @date 2015年6月10日 下午2:06:57
- */
-public class SubmitadviceReq extends HttpReq {
-
-	private int userCode;
-	private String content;
-
-	public SubmitadviceReq(int reqid, int userCode, String content) {
-		super();
-		this.id = reqid;
-		this.userCode = userCode;
-		this.content = content;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	public String getContent() {
-		return content;
-	}
-
-	public void setContent(String content) {
-		this.content = content;
-	}
-
-	@Override
-	public String getParams() {
-		return "usercode=" + userCode + "&advice=" + content;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/DownloadUtils.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/DownloadUtils.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/utils/DownloadUtils.java	(revision )
@@ -1,150 +0,0 @@
-package com.anniu.shandiandaojia.utils;
-
-import org.apache.http.Header;
-import org.apache.http.HttpResponse;
-import org.apache.http.HttpStatus;
-import org.apache.http.client.HttpClient;
-import org.apache.http.client.methods.HttpGet;
-import org.apache.http.impl.client.DefaultHttpClient;
-import org.apache.http.params.BasicHttpParams;
-import org.apache.http.params.HttpConnectionParams;
-import org.apache.http.params.HttpParams;
-
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.util.zip.GZIPInputStream;
-
-/**
- * 文件下载工具
- * @author DavikChen
- */
-public class DownloadUtils {
-	 private static final int CONNECT_TIMEOUT = 10000; // 连接超时
-	    private static final int DATA_TIMEOUT = 40000; // 读取数超时
-	    private final static int DATA_BUFFER = 8192; // 缓冲区大小
-
-	    /**
-	     * 回调接口
-	     * @author DavikChen
-	     *
-	     */
-	    public interface DownloadListener {
-	    	
-	    	/**
-	    	 * 下载中
-	    	 * @param progress 进度
-	    	 */
-	        public void downloading(int progress);
-	        
-	        /**
-	         * 下载完成
-	         */
-	        public void downloaded();
-	    }
-
-	    /**
-	     * 下载指定路径文件
-	     * @param urlStr 文件下载地址
-	     * @param dest 文件存放路径
-	     * @param append 是否追加下载文件
-	     * @param downloadListener 下载进度监听器
-	     * @return 文件下载大小
-	     * @throws Exception
-	     */
-	    public static long download(String urlStr, File dest, boolean append, DownloadListener downloadListener) throws Exception {
-	        int downloadProgress = 0; // 进度
-	        long remoteSize = 0; // 文件大小
-	        int currentSize = 0; // 上次下载大小
-	        long totalSize = -1; // 总大小
-
-	        if(!append && dest.exists() && dest.isFile()) {
-	            dest.delete(); // 不追加 删除
-	        }
-
-	        if(append && dest.exists() && dest.exists()) {
-	            FileInputStream fis = null;
-	            try {
-	                fis = new FileInputStream(dest);
-	                currentSize = fis.available();
-	            } catch(IOException e) {
-	                throw e;
-	            } finally {
-	                if(fis != null) {
-	                    fis.close();
-	                }
-	            }
-	        }
-
-	        HttpGet request = new HttpGet(urlStr);
-
-	        if(currentSize > 0) {
-	            request.addHeader("RANGE", "bytes=" + currentSize + "-"); // 断点下载
-	        }
-
-	        HttpParams params = new BasicHttpParams();
-	        HttpConnectionParams.setConnectionTimeout(params, CONNECT_TIMEOUT);
-	        HttpConnectionParams.setSoTimeout(params, DATA_TIMEOUT);
-	        HttpClient httpClient = new DefaultHttpClient(params);
-
-	        InputStream is = null;
-	        FileOutputStream os = null;
-	        try {
-	            HttpResponse response = httpClient.execute(request);
-	            if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
-	                is = response.getEntity().getContent();
-	                remoteSize = response.getEntity().getContentLength();
-	                Header contentEncoding = response.getFirstHeader("Content-Encoding");
-	                if(contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
-	                    is = new GZIPInputStream(is);
-	                }
-	                os = new FileOutputStream(dest, append);
-	                byte buffer[] = new byte[DATA_BUFFER];
-	                int readSize = 0;
-	                long lastTime = 0;
-	                while((readSize = is.read(buffer)) > 0){
-	                    os.write(buffer, 0, readSize);
-	                    os.flush();
-	                    totalSize += readSize;
-	                    if(downloadListener!= null){
-	                        downloadProgress = (int) (totalSize*100/remoteSize);
-	                        	long cuurentTime = System.currentTimeMillis();
-	                        	if (lastTime==0) {
-	                        		 downloadListener.downloading(downloadProgress);
-	                        		 lastTime = cuurentTime;
-							}else if((cuurentTime-lastTime) >5000){
-								 downloadListener.downloading(downloadProgress);
-                        		 lastTime = cuurentTime;
-							}
-	                       
-	                    }
-	                }
-	                if(totalSize < 0) {
-	                    totalSize = 0;
-	                }
-	            }
-	        } finally {
-	            if(os != null) {
-	                os.close();
-	            }
-	            if(is != null) {
-	                is.close();
-	            }
-	        }
-
-	        if(totalSize < 0) {
-	            throw new Exception("Download file fail: " + urlStr);
-	        }
-
-	        if(downloadListener!= null){
-	            downloadListener.downloaded();
-	        }
-
-	        return totalSize;
-	    }
-	
-	
-	
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/wxapi/PayActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/wxapi/PayActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/wxapi/PayActivity.java	(revision )
@@ -1,45 +0,0 @@
-package com.anniu.shandiandaojia.wxapi;
-
-import android.app.Activity;
-import android.os.Bundle;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.db.jsondb.PrepayIdInfo;
-import com.tencent.mm.sdk.modelpay.PayReq;
-import com.tencent.mm.sdk.openapi.IWXAPI;
-import com.tencent.mm.sdk.openapi.WXAPIFactory;
-
-public class PayActivity extends Activity {
-
-	public static String EXTRA_PAYINFO = "payinfo";
-	final IWXAPI msgApi = WXAPIFactory.createWXAPI(this, null);
-	private PrepayIdInfo prepayId;
-	private PayReq req;
-
-	@Override
-	protected void onCreate(Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		setContentView(R.layout.pay);
-		prepayId = (PrepayIdInfo) getIntent().getExtras().getSerializable(EXTRA_PAYINFO);
-
-		req = new PayReq();
-		msgApi.registerApp(prepayId.getAppid());
-		genPayReq();
-		sendPayReq();
-	}
-
-	private void sendPayReq() {
-		msgApi.registerApp(prepayId.getAppid());
-		msgApi.sendReq(req);
-	}
-
-	private void genPayReq() {
-		req.appId = prepayId.getAppid();
-		req.partnerId = prepayId.getPartnerid();
-		req.prepayId = prepayId.getPrepayid();
-		req.packageValue = "Sign=WXPay";
-		req.nonceStr = prepayId.getNoncestr();
-		req.timeStamp = prepayId.getTimestamp();
-		req.sign = prepayId.getSign();
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/Base64.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/Base64.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/alipay/Base64.java	(revision )
@@ -1,268 +0,0 @@
-package com.anniu.shandiandaojia.alipay;
-
-public final class Base64 {
-
-	private static final int BASELENGTH = 128;
-	private static final int LOOKUPLENGTH = 64;
-	private static final int TWENTYFOURBITGROUP = 24;
-	private static final int EIGHTBIT = 8;
-	private static final int SIXTEENBIT = 16;
-	private static final int FOURBYTE = 4;
-	private static final int SIGN = -128;
-	private static char PAD = '=';
-	private static byte[] base64Alphabet = new byte[BASELENGTH];
-	private static char[] lookUpBase64Alphabet = new char[LOOKUPLENGTH];
-
-	static {
-		for (int i = 0; i < BASELENGTH; ++i) {
-			base64Alphabet[i] = -1;
-		}
-		for (int i = 'Z'; i >= 'A'; i--) {
-			base64Alphabet[i] = (byte) (i - 'A');
-		}
-		for (int i = 'z'; i >= 'a'; i--) {
-			base64Alphabet[i] = (byte) (i - 'a' + 26);
-		}
-
-		for (int i = '9'; i >= '0'; i--) {
-			base64Alphabet[i] = (byte) (i - '0' + 52);
-		}
-
-		base64Alphabet['+'] = 62;
-		base64Alphabet['/'] = 63;
-
-		for (int i = 0; i <= 25; i++) {
-			lookUpBase64Alphabet[i] = (char) ('A' + i);
-		}
-
-		for (int i = 26, j = 0; i <= 51; i++, j++) {
-			lookUpBase64Alphabet[i] = (char) ('a' + j);
-		}
-
-		for (int i = 52, j = 0; i <= 61; i++, j++) {
-			lookUpBase64Alphabet[i] = (char) ('0' + j);
-		}
-		lookUpBase64Alphabet[62] = (char) '+';
-		lookUpBase64Alphabet[63] = (char) '/';
-
-	}
-
-	private static boolean isWhiteSpace(char octect) {
-		return (octect == 0x20 || octect == 0xd || octect == 0xa || octect == 0x9);
-	}
-
-	private static boolean isPad(char octect) {
-		return (octect == PAD);
-	}
-
-	private static boolean isData(char octect) {
-		return (octect < BASELENGTH && base64Alphabet[octect] != -1);
-	}
-
-	/**
-	 * Encodes hex octects into Base64
-	 * 
-	 * @param binaryData
-	 *            Array containing binaryData
-	 * @return Encoded Base64 array
-	 */
-	public static String encode(byte[] binaryData) {
-
-		if (binaryData == null) {
-			return null;
-		}
-
-		int lengthDataBits = binaryData.length * EIGHTBIT;
-		if (lengthDataBits == 0) {
-			return "";
-		}
-
-		int fewerThan24bits = lengthDataBits % TWENTYFOURBITGROUP;
-		int numberTriplets = lengthDataBits / TWENTYFOURBITGROUP;
-		int numberQuartet = fewerThan24bits != 0 ? numberTriplets + 1
-				: numberTriplets;
-		char encodedData[] = null;
-
-		encodedData = new char[numberQuartet * 4];
-
-		byte k = 0, l = 0, b1 = 0, b2 = 0, b3 = 0;
-
-		int encodedIndex = 0;
-		int dataIndex = 0;
-
-		for (int i = 0; i < numberTriplets; i++) {
-			b1 = binaryData[dataIndex++];
-			b2 = binaryData[dataIndex++];
-			b3 = binaryData[dataIndex++];
-
-			l = (byte) (b2 & 0x0f);
-			k = (byte) (b1 & 0x03);
-
-			byte val1 = ((b1 & SIGN) == 0) ? (byte) (b1 >> 2)
-					: (byte) ((b1) >> 2 ^ 0xc0);
-			byte val2 = ((b2 & SIGN) == 0) ? (byte) (b2 >> 4)
-					: (byte) ((b2) >> 4 ^ 0xf0);
-			byte val3 = ((b3 & SIGN) == 0) ? (byte) (b3 >> 6)
-					: (byte) ((b3) >> 6 ^ 0xfc);
-
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[val1];
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[val2 | (k << 4)];
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[(l << 2) | val3];
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[b3 & 0x3f];
-		}
-
-		// form integral number of 6-bit groups
-		if (fewerThan24bits == EIGHTBIT) {
-			b1 = binaryData[dataIndex];
-			k = (byte) (b1 & 0x03);
-			
-			byte val1 = ((b1 & SIGN) == 0) ? (byte) (b1 >> 2)
-					: (byte) ((b1) >> 2 ^ 0xc0);
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[val1];
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[k << 4];
-			encodedData[encodedIndex++] = PAD;
-			encodedData[encodedIndex++] = PAD;
-		} else if (fewerThan24bits == SIXTEENBIT) {
-			b1 = binaryData[dataIndex];
-			b2 = binaryData[dataIndex + 1];
-			l = (byte) (b2 & 0x0f);
-			k = (byte) (b1 & 0x03);
-
-			byte val1 = ((b1 & SIGN) == 0) ? (byte) (b1 >> 2)
-					: (byte) ((b1) >> 2 ^ 0xc0);
-			byte val2 = ((b2 & SIGN) == 0) ? (byte) (b2 >> 4)
-					: (byte) ((b2) >> 4 ^ 0xf0);
-
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[val1];
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[val2 | (k << 4)];
-			encodedData[encodedIndex++] = lookUpBase64Alphabet[l << 2];
-			encodedData[encodedIndex++] = PAD;
-		}
-
-		return new String(encodedData);
-	}
-
-	/**
-	 * Decodes Base64 data into octects
-	 * 
-	 * @param encoded
-	 *            string containing Base64 data
-	 * @return Array containind decoded data.
-	 */
-	public static byte[] decode(String encoded) {
-
-		if (encoded == null) {
-			return null;
-		}
-
-		char[] base64Data = encoded.toCharArray();
-		// remove white spaces
-		int len = removeWhiteSpace(base64Data);
-
-		if (len % FOURBYTE != 0) {
-			return null;// should be divisible by four
-		}
-
-		int numberQuadruple = (len / FOURBYTE);
-
-		if (numberQuadruple == 0) {
-			return new byte[0];
-		}
-
-		byte decodedData[] = null;
-		byte b1 = 0, b2 = 0, b3 = 0, b4 = 0;
-		char d1 = 0, d2 = 0, d3 = 0, d4 = 0;
-
-		int i = 0;
-		int encodedIndex = 0;
-		int dataIndex = 0;
-		decodedData = new byte[(numberQuadruple) * 3];
-
-		for (; i < numberQuadruple - 1; i++) {
-
-			if (!isData((d1 = base64Data[dataIndex++]))
-					|| !isData((d2 = base64Data[dataIndex++]))
-					|| !isData((d3 = base64Data[dataIndex++]))
-					|| !isData((d4 = base64Data[dataIndex++]))) {
-				return null;
-			}// if found "no data" just return null
-
-			b1 = base64Alphabet[d1];
-			b2 = base64Alphabet[d2];
-			b3 = base64Alphabet[d3];
-			b4 = base64Alphabet[d4];
-
-			decodedData[encodedIndex++] = (byte) (b1 << 2 | b2 >> 4);
-			decodedData[encodedIndex++] = (byte) (((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
-			decodedData[encodedIndex++] = (byte) (b3 << 6 | b4);
-		}
-
-		if (!isData((d1 = base64Data[dataIndex++]))
-				|| !isData((d2 = base64Data[dataIndex++]))) {
-			return null;// if found "no data" just return null
-		}
-
-		b1 = base64Alphabet[d1];
-		b2 = base64Alphabet[d2];
-
-		d3 = base64Data[dataIndex++];
-		d4 = base64Data[dataIndex++];
-		if (!isData((d3)) || !isData((d4))) {// Check if they are PAD characters
-			if (isPad(d3) && isPad(d4)) {
-				if ((b2 & 0xf) != 0)// last 4 bits should be zero
-				{
-					return null;
-				}
-				byte[] tmp = new byte[i * 3 + 1];
-				System.arraycopy(decodedData, 0, tmp, 0, i * 3);
-				tmp[encodedIndex] = (byte) (b1 << 2 | b2 >> 4);
-				return tmp;
-			} else if (!isPad(d3) && isPad(d4)) {
-				b3 = base64Alphabet[d3];
-				if ((b3 & 0x3) != 0)// last 2 bits should be zero
-				{
-					return null;
-				}
-				byte[] tmp = new byte[i * 3 + 2];
-				System.arraycopy(decodedData, 0, tmp, 0, i * 3);
-				tmp[encodedIndex++] = (byte) (b1 << 2 | b2 >> 4);
-				tmp[encodedIndex] = (byte) (((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
-				return tmp;
-			} else {
-				return null;
-			}
-		} else { // No PAD e.g 3cQl
-			b3 = base64Alphabet[d3];
-			b4 = base64Alphabet[d4];
-			decodedData[encodedIndex++] = (byte) (b1 << 2 | b2 >> 4);
-			decodedData[encodedIndex++] = (byte) (((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
-			decodedData[encodedIndex++] = (byte) (b3 << 6 | b4);
-
-		}
-
-		return decodedData;
-	}
-
-	/**
-	 * remove WhiteSpace from MIME containing encoded Base64 data.
-	 * 
-	 * @param data
-	 *            the byte array of base64 data (with WS)
-	 * @return the new length
-	 */
-	private static int removeWhiteSpace(char[] data) {
-		if (data == null) {
-			return 0;
-		}
-
-		// count characters that's not whitespace
-		int newSize = 0;
-		int len = data.length;
-		for (int i = 0; i < len; i++) {
-			if (!isWhiteSpace(data[i])) {
-				data[newSize++] = data[i];
-			}
-		}
-		return newSize;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/SocketRsp.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/SocketRsp.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/SocketRsp.java	(revision )
@@ -1,10 +0,0 @@
-package com.anniu.shandiandaojia.net.bean;
-
-public class SocketRsp {
-	public static final int CODE_TIMEOUT = -99;
-	public static final int CODE_UNKNOW_HOST = -100;
-	public static final int CODE_NET_ERROR = -101;
-	public int code;
-	public byte[] data;
-	
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MainActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MainActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/MainActivity.java	(revision )
@@ -1,979 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.graphics.Bitmap;
-import android.graphics.drawable.BitmapDrawable;
-import android.net.Uri;
-import android.os.Bundle;
-import android.os.Handler;
-import android.support.v4.view.ViewPager;
-import android.support.v4.view.ViewPager.OnPageChangeListener;
-import android.text.TextUtils;
-import android.view.Gravity;
-import android.view.KeyEvent;
-import android.view.LayoutInflater;
-import android.view.Menu;
-import android.view.View;
-import android.view.View.MeasureSpec;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.view.ViewGroup.MarginLayoutParams;
-import android.view.WindowManager;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ImageView;
-import android.widget.ImageView.ScaleType;
-import android.widget.LinearLayout;
-import android.widget.ListAdapter;
-import android.widget.ListView;
-import android.widget.PopupWindow;
-import android.widget.PopupWindow.OnDismissListener;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.BargainGoodsAdapter;
-import com.anniu.shandiandaojia.adapter.CartListAdapter;
-import com.anniu.shandiandaojia.adapter.HomeCategoryGoodsAdapter;
-import com.anniu.shandiandaojia.adapter.MyAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.ActivityMgr;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.Banner;
-import com.anniu.shandiandaojia.db.jsondb.BottomStatusBar;
-import com.anniu.shandiandaojia.db.jsondb.Category;
-import com.anniu.shandiandaojia.db.jsondb.Goods;
-import com.anniu.shandiandaojia.db.jsondb.PushMessage;
-import com.anniu.shandiandaojia.db.jsondb.ShopInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.GoodsLogic;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.logic.ShoppingCartLogic;
-import com.anniu.shandiandaojia.receiver.MyReceiver;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.MyDialog;
-import com.anniu.shandiandaojia.view.MyGridView;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.PullToRefreshLayout;
-import com.anniu.shandiandaojia.view.pulltorefreshlayout.PullToRefreshLayout.OnRefreshListener;
-import com.baidu.location.LocationClient;
-import com.baidu.location.LocationClientOption;
-import com.baidu.location.LocationClientOption.LocationMode;
-import com.nostra13.universalimageloader.core.DisplayImageOptions;
-import com.nostra13.universalimageloader.core.ImageLoader;
-
-import java.math.BigDecimal;
-import java.util.ArrayList;
-
-public class MainActivity extends BaseActivity implements OnRefreshListener {
-	private ImageLoader mImageLoader;
-	private DisplayImageOptions options;
-	private PullToRefreshLayout pullToRefreshLayout;
-	private TextView tvShopTitle,tvTimeText,tvReceiveTime,tvPriceMinText,cartNum,cartPrice,cartNotice,bargainTitle;
-	private View line1,line2,line3;
-	private ShopInfo shop;
-	
-	private ViewPager viewPager;
-	/*** 装点点的ImageView数组 */
-	private ImageView[] tips;
-	/*** 装ImageView数组 */
-	private ImageView[] mImageViews;
-	private ViewGroup group;
-	private MyGridView gridView;
-	private Runnable viewpagerRunnable;
-	private static Handler handler;
-	private static final int TIME = 5000;
-	private boolean isFrist = false ;
-	
-	private BargainGoodsAdapter bargainAdapter;
-	private ArrayList<Goods> bragainList = new ArrayList<Goods>();
-	private LinearLayout category;
-	private RelativeLayout rlShopTitle,loadingView,errorView;
-	
-	private PopupWindow popupWindow,carPopupWindow;  
-	private CartListAdapter cartListAdapter;
-	private ArrayList<Goods> cartList = new ArrayList<Goods>();
-	
-	public static final int LOAD_TYPE_REFRESH = 1;
-	public static final int LOAD_TYPE_LOADMORE = 2;
-	
-	public static LocationClient mLocationClient;
-	private LocationMode tempMode = LocationMode.Hight_Accuracy;
-	private String tempcoor="gcj02";//gcj02、bd09ll、bd09
-	
-	private int firstFlag;
-	private String shopName = null;
-	private ImageView shopClose,ivArrow;
-	private BottomStatusBar bsb = null;
-	
-	public static final String MESSAGE_RECEIVED_ACTION = "com.anniu.shandiandaojia.MESSAGE_RECEIVED_ACTION";
-	public static final String KEY_TITLE = "title";
-	public static final String KEY_MESSAGE = "message";
-	public static final String KEY_EXTRAS = "extras";
-	private String hrefType = "";
-	private String hrefTarget = "";
-	public static boolean isForeground = false;
-	private ListView popupListView;
-	
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_main);
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-
-	@Override
-	public void onPanelClosed(int featureId, Menu menu) {
-		super.onPanelClosed(featureId, menu);
-	}
-
-	private void initView() {
-		//获取商铺信息
-		sendGetShopInfoAction(LOAD_TYPE_REFRESH);
-		//实例化imageloader对象和参数
-		initImageLoader();
-		handler = new Handler();
-		
-		pullToRefreshLayout = (PullToRefreshLayout) findViewById(R.id.refresh_view);
-		pullToRefreshLayout.setOnRefreshListener(this);
-		
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		
-		findViewById(R.id.tv_call).setOnClickListener(this);
-		findViewById(R.id.tv_search).setOnClickListener(this);
-		findViewById(R.id.tv_personal).setOnClickListener(this);
-		findViewById(R.id.rl_title_text).setOnClickListener(this);
-		rlShopTitle = (RelativeLayout) findViewById(R.id.rl_title_text);
-		tvShopTitle = (TextView) findViewById(R.id.tv_shop_title);
-		tvTimeText = (TextView) findViewById(R.id.tv_time_text);
-		tvReceiveTime = (TextView) findViewById(R.id.tv_receive_time);
-		tvPriceMinText = (TextView) findViewById(R.id.tv_price_min_text);
-		shopClose = (ImageView) findViewById(R.id.iv_shop_close);
-		ivArrow = (ImageView) findViewById(R.id.iv_arrow);
-		
-		findViewById(R.id.tv_category).setOnClickListener(this);
-		findViewById(R.id.tv_carrying_water).setOnClickListener(this);
-		findViewById(R.id.tv_full).setOnClickListener(this);
-		
-		gridView = (MyGridView) findViewById(R.id.grid_view);
-		category = (LinearLayout) findViewById(R.id.column_category);
-		
-		findViewById(R.id.iv_cart).setOnClickListener(this);
-		cartNum = (TextView) findViewById(R.id.tv_cart_num);
-		cartPrice = (TextView) findViewById(R.id.cart_price);
-		cartNotice = (TextView) findViewById(R.id.tv_notice);	
-		findViewById(R.id.rl_notice).setOnClickListener(this);	
-		
-		viewPager = (ViewPager) findViewById(R.id.viewPager);
-		group = (ViewGroup)findViewById(R.id.viewGroup);
-		
-		bargainTitle = (TextView) findViewById(R.id.tv_bargain_title);
-		line1 = (View) findViewById(R.id.line1);
-		line2 = (View) findViewById(R.id.line2);
-		line3 = (View) findViewById(R.id.line3);
-		
-		mLocationClient = ((App)getApplication()).mLocationClient;
-		
-		boolean isHref = false; // 是否通过通知栏链接启动App
-		Intent i = getIntent();
-		if(i != null) {
-			hrefType = i.getStringExtra(MyReceiver.MSG_HREF_TYPE);
-			hrefTarget = i.getStringExtra(MyReceiver.MSG_HREF_TARGET);
-			if(!TextUtils.isEmpty(hrefType)){
-				isHref = true;
-				startActivity(getHrefIntent());
-			}
-		}
-	}
-	
-	private Intent getHrefIntent() {
-		Intent intent = new Intent();
-		if(!TextUtils.isEmpty(hrefType)) {
-			int type = Integer.parseInt(hrefType);
-			if(type == PushMessage.HREF_TYPE_RECEIVE) {
-				intent.setClass(this, MainActivity.class);
-			}
-		}
-		return intent;
-	}
-	
-	@Override
-	protected void onResume() {
-		super.onResume();
-		boolean needLoad = SPUtils.getBoolean(this, GlobalInfo.KEY_NEEDLOAD, false);
-		if (needLoad) {
-			sendGetShopInfoAction(LOAD_TYPE_REFRESH);
-		}
-		ActivityMgr.finishAllActivity(true);
-	}
-
-	@Override
-	protected void onPause() {
-		super.onPause();
-		SPUtils.saveBoolean(this, GlobalInfo.KEY_NEEDLOAD, false);
-	}
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		Intent intent = null;
-		switch (v.getId()) {
-		case R.id.tv_personal://个人中心
-			if (Utils.loginState()) {//判断是否登录过
-				startActivity(new Intent(this,UserCenterActivity.class));
-			}else {
-				startActivity(new Intent(this,RegistActivity.class));
-			}
-			break;
-		case R.id.tv_call://老板电话
-			showAlertDialog();
-			break;
-		case R.id.tv_search://搜索
-			startActivity(new Intent(this,SearchActivity.class));
-			break;
-		case R.id.rl_title_text://点击title
-			sendSelectBrowerShopAction();
-			break;
-		case R.id.tv_category:// 分类
-			intent = new Intent();
-			intent.setClass(this, GoodsCategoryActivity.class);
-			intent.putExtra(GoodsCategoryActivity.EXTRA_TYPE_CODE, 0);
-			intent.putExtra(GoodsCategoryActivity.EXTRA_SHOP_NAME, shopName);
-			startActivity(intent);
-			break;
-		case R.id.tv_carrying_water://桶装水
-			if (firstFlag == 0) {
-				startActivity(new Intent(this, BuyWaterTicket.class));
-			} else {
-				startActivity(new Intent(this, AKeyWaterActivity.class));
-			}
-			break;
-		case R.id.tv_full://整箱购
-			intent = new Intent();
-			intent.setClass(this, GoodsCategoryActivity.class);
-			intent.putExtra(GoodsCategoryActivity.EXTRA_TYPE_CODE, GlobalInfo.FCLCODE);
-			intent.putExtra(GoodsCategoryActivity.EXTRA_SHOP_NAME, shopName);
-			startActivity(intent);
-			break;
-		case R.id.iv_cart://购物车图标
-			if (Utils.loginState()) {//判断是否登录过
-				sendGetCartGoodsListAction();
-			}else {
-				startActivity(new Intent(this,RegistActivity.class));
-			}
-			break;
-		case R.id.rl_notice://去购物车
-			if (Utils.loginState()) {// 判断是否登录过
-				startActivity(new Intent(this, ShoppingCartActivity.class));
-			} else {
-				startActivity(new Intent(this, RegistActivity.class));
-			}
-			break;
-		default:
-			break;
-		}
-	}
-	
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_SHOP_INFO_SUCCESS://获取商铺首页信息成功事件 
-			loadingView.setVisibility(View.GONE);
-			hideErrorLocal();
-			pullToRefreshLayout.completePull(PullToRefreshLayout.PULL_FINISH_FINISH);
-			shopName = SPUtils.getString(this, GlobalInfo.KEY_SHOPNAME, "");
-			int type = bundle.getInt(LocationLogic.EXTRA_LOADTYPE);
-			firstFlag = bundle.getInt(LocationLogic.EXTRA_FLAG);
-			
-			initShopInfo(bundle);
-			setVidwPager(bundle,type);
-			bargainGoods(bundle);
-			cartNotice(bundle);
-			categoryGoods(bundle);
-			break;
-		case Event.GET_SHOP_INFO_FAILED://获取商铺首页信息失败事件 
-			loadingView.setVisibility(View.GONE);
-			pullToRefreshLayout.completePull(PullToRefreshLayout.PULL_FINISH_FAIL);
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_SELECT_BROWER_SHOP_SUCESS://首页重新选择便利店成功事件 
-			showPopWindow(bundle);
-			break;
-		case Event.GET_SELECT_BROWER_SHOP_FAILED://首页重新选择便利店失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS://添加或删除/修改商品数量成功事件 
-			cartNotice(bundle);
-			notifyPop(bundle);
-			break;
-		case Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED://添加或删除/修改商品数量失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_CART_LIST_SUCESS://获取购物车商品列表成功事件 
-			showCartPopWindow(bundle);
-			break;
-		case Event.GET_CART_LIST_FAILED://获取购物车商品列表失败事件 
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_DELETE_CART_GOOD_SUCESS://删除购物车一条商品成功事件 
-			cartNotice(bundle);
-			notifyPopDete(bundle);
-			break;
-		case Event.GET_DELETE_CART_GOOD_FAILED://删除购物车一条商品失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-	/** 点击加减判断是否减到0*/
-	private void notifyPop(Bundle bundle) {
-		int operation = bundle.getInt(ShoppingCartLogic.EXTRA_OPERATION);
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		int number = bundle.getInt(ShoppingCartLogic.EXTRA_NUM);
-		
-		if (operation == 2) {
-			Goods goods = null;
-			for (int i = 0; i < cartList.size(); i++) {
-				goods = cartList.get(i);
-				if (goods.getChange_code() == changecode) {
-					break;
-				}
-			}
-			int num = goods.getGoods_num();
-			if (--num <= 0 ) {
-				cartList.remove(goods);
-				if (cartList.size() <= 0) {
-					carPopupWindow.dismiss();
-				}
-				cartListAdapter.notifyDataSetChanged();
-				setListViewHeightBasedOnChildren(popupListView);
-			}else{
-				goods.setGoods_num(num--);
-			}
-		}else if (operation == 3) {
-			if (number == 0) {
-				Goods goods = null;
-				for (int i = 0; i < cartList.size(); i++) {
-					goods = cartList.get(i);
-					if (goods.getChange_code() == changecode) {
-						break;
-					}
-				}
-				cartList.remove(goods);
-				cartListAdapter.notifyDataSetChanged();
-				setListViewHeightBasedOnChildren(popupListView);
-			}
-		}
-	}
-	
-	/** 刪除*/
-	private void notifyPopDete(Bundle bundle) {
-		int changecode = bundle.getInt(ShoppingCartLogic.EXTRA_CHANGECODE);
-		Goods goods = null;
-		for (int i = 0; i < cartList.size(); i++) {
-			goods = cartList.get(i);
-			if (goods.getChange_code() == changecode) {
-				break;
-			}
-		}
-		cartList.remove(goods);
-		cartListAdapter.notifyDataSetChanged();
-		setListViewHeightBasedOnChildren(popupListView);
-	}
-	
-	/*** 提示框 */
-	public void showAlertDialog() {
-		MyDialog.Builder builder = new MyDialog.Builder(this);
-		builder.setTitle(shop.getShop_name());
-		builder.setMessage("老板电话："+shop.getShop_tel()+"\n您可以直接拨打老板电话，电话订购所需商品！");
-		builder.setConfirmButton("确定", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-				startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+ shop.getShop_tel())));
-			}
-		});
-		builder.setCancelButton("取消", new android.content.DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-			}
-		});
-		builder.create().show();
-	}
-	
-	/** 显示购物车商品view*/
-	@SuppressWarnings({ "deprecation", "rawtypes", "null", "unchecked" })
-	private void showCartPopWindow(Bundle bundle) {
-		ArrayList<Goods> list = (ArrayList<Goods>) bundle.getSerializable(ShoppingCartLogic.EXTRA_CARTGOODLIST);
-		if (list == null && list.size() == 0) {
-			MyToast.show(this, "购物车没有商品！");
-			return;
-		}
-		cartList.clear();
-		cartList.addAll(list);
-		
-		View view = getLayoutInflater().inflate(R.layout.popupwindow_goods_list, null,false);
-		popupListView = (ListView) view.findViewById(R.id.listview);
-		cartListAdapter = new CartListAdapter(this, cartList);
-		popupListView.setAdapter(cartListAdapter);
-		setListViewHeightBasedOnChildren(popupListView);
-		
-		carPopupWindow = new PopupWindow(view, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
-		WindowManager.LayoutParams params = getWindow().getAttributes();
-		params.alpha = 0.7f;
-		getWindow().setAttributes(params);
-		
-		carPopupWindow.setBackgroundDrawable(new BitmapDrawable());
-		carPopupWindow.setAnimationStyle(R.style.style_ppwcart);
-		carPopupWindow.setOutsideTouchable(true);
-		carPopupWindow.setFocusable(true);
-		carPopupWindow.setOnDismissListener(new OnDismissListener() {
-			@Override
-			public void onDismiss() {
-				WindowManager.LayoutParams params = getWindow().getAttributes();
-				params.alpha = 1f;
-				getWindow().setAttributes(params);
-			}
-		});
-		
-		carPopupWindow.update();
-		carPopupWindow.showAtLocation(findViewById(R.id.layout_cart), Gravity.BOTTOM, 0, Utils.dip2px(this, 50));
-	}
-	
-	public void setListViewHeightBasedOnChildren(ListView listView) {
-		ListAdapter listAdapter = listView.getAdapter();
-		if (listAdapter == null) {
-			return;
-		}
-		int totalHeight = 0;
-		for (int i = 0; i < listAdapter.getCount(); i++) {
-			View listItem = listAdapter.getView(i, null, listView);
-			listItem.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
-			totalHeight += listItem.getMeasuredHeight();
-		}
-		
-		int h = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-		
-		if (h > App.windowHeight - Utils.dip2px(context, 180)) {
-			h = App.windowHeight - Utils.dip2px(context, 180);
-		} else {
-			h = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-		}
-		ViewGroup.LayoutParams params = listView.getLayoutParams();
-		params.height = h;
-		((MarginLayoutParams) params).setMargins(10, 10, 10, 10);
-		listView.setLayoutParams(params);
-	}
-	
-	/** 重新选择便利店*/
-	@SuppressWarnings({ "deprecation", "rawtypes" })
-	private void showPopWindow(Bundle bundle) {
-		ArrayList<ShopInfo> shopList =(ArrayList<ShopInfo>)bundle.getSerializable(LocationLogic.EXTRA_SHOPLIST);
-
-		View view = getLayoutInflater().inflate(R.layout.popupwindow_shop_list, null,false);
-		LinearLayout group = (LinearLayout) view.findViewById(R.id.ll_pop_group);
-		
-		if (shopList != null && shopList.size() > 0 ) {
-			RelativeLayout viewText = null ;
-			ShopInfo shop = null ;
-			for (int i = 0; i < shopList.size(); i++) {
-				shop = (ShopInfo) shopList.get(i);
-				viewText = (RelativeLayout) LayoutInflater.from(this).inflate(R.layout.item_shop, null);
-				TextView textView = (TextView) viewText.findViewById(R.id.shop);
-				textView.setText(shop.getShop_name()+"("+shop.getDistance()+"m)");
-				textView.setTag(shop);
-				textView.setOnClickListener(new OnClickListener() {
-					
-					@Override
-					public void onClick(View v) {
-						popupWindow.dismiss();
-						ShopInfo shop = (ShopInfo) v.getTag();
-						int old = SPUtils.getInt(MainActivity.this, GlobalInfo.KEY_SHOPCODE, 0);
-						SPUtils.saveInt(MainActivity.this, GlobalInfo.KEY_SHOPSTATE, shop.getStatus());
-						if (old != shop.getShop_code()) {
-							SPUtils.saveBoolean(MainActivity.this, GlobalInfo.KEY_NEEDLOAD, true);
-							SPUtils.saveInt(MainActivity.this, GlobalInfo.KEY_SHOPCODE, shop.getShop_code());
-							sendGetShopInfoAction(LOAD_TYPE_REFRESH);
-						}
-					}
-				});
-				group.addView(viewText, i);
-			}
-		}
-		
-		TextView text = new TextView(this);
-		text.setText("+ 添加便利店");
-		text.setTextSize(16);
-		text.setPadding(0, 10, 0, 0);
-		text.setGravity(Gravity.CENTER);
-		text.setOnClickListener(new OnClickListener() {
-			
-			@Override
-			public void onClick(View v) {
-				popupWindow.dismiss();
-				InitLocation();
-				mLocationClient.start();
-				
-				Intent intent = new Intent(MainActivity.this, FamliyMartActivity.class);
-				intent.putExtra(FamliyMartActivity.EXTRA_FROM, FamliyMartActivity.EXTRA_MAIN);
-				startActivity(intent);
-			}
-		});
-		group.addView(text, shopList.size());
-		view.setFocusableInTouchMode(true);
-		popupWindow = new PopupWindow(view, (int)(App.windowWidth * 0.6f),LayoutParams.WRAP_CONTENT, true);
-		popupWindow.setBackgroundDrawable(new BitmapDrawable());
-		popupWindow.setAnimationStyle(R.style.style_ppw);
-		popupWindow.setOutsideTouchable(true);
-
-		ivArrow.setBackgroundDrawable(getResources().getDrawable(R.drawable.home_title_arrow_up));
-		
-		popupWindow.setOnDismissListener(new OnDismissListener() {
-			
-			@Override
-			public void onDismiss() {
-				ivArrow.setBackgroundDrawable(getResources().getDrawable(R.drawable.home_title_arrow_down));
-			}
-		});
-		
-		// 计算x轴方向的偏移量，使得PopupWindow在Title的正下方显示，此处的单位是pixels
-//		int xoffInPixels = App.windowWidth / 2 - tvShopTitle.getWidth() / 2;
-		int xoffInPixels = App.windowWidth / 2 - rlShopTitle.getWidth() / 2;
-		// 将pixels转为dip
-	    int xoffInDip = Utils.px2dip(this, xoffInPixels); 
-//		popupWindow.showAsDropDown(tvShopTitle, -xoffInDip, 0);
-		popupWindow.showAsDropDown(rlShopTitle, -xoffInDip, 0);
-		popupWindow.update();
-	}
-
-	/** 购物车提示*/
-	@SuppressWarnings("rawtypes")
-	private void cartNotice(Bundle bundle) {
-		ArrayList<BottomStatusBar> bottomstatusbar = (ArrayList<BottomStatusBar>) bundle.getSerializable(LocationLogic.EXTRA_BOTTOMSTATUSBARLIST);
-		int limited = bundle.getInt(ShoppingCartLogic.KEY_OVERLIMITED);
-		if (limited == 1){
-			MyToast.show(this,"该商品已经超过限购数量！");
-			return;
-		}
-		if (bottomstatusbar == null) {
-			return;
-		}
-		
-		bsb  = (BottomStatusBar) bottomstatusbar.get(0);
-		
-		if (bsb .getCount() > 0 ) {
-			cartNum.setVisibility(View.VISIBLE);
-		}else{
-			cartNum.setVisibility(View.GONE);
-		}
-		
-		String number = "";
-		if (bsb.getCount() > 99) {
-			number = "99+";
-		} else {
-			number = bsb.getCount() + "";
-		}
-		cartNum.setText(number);
-		double amount = bsb.getAmount();
-		BigDecimal bdmoney = new BigDecimal(amount);
-		bdmoney = bdmoney.setScale(2, BigDecimal.ROUND_DOWN);
-		cartPrice.setText(amount > 0 ? "￥" + bdmoney : "￥0.00");
-		String text = "";
-		if (amount == 0) {
-			double free_send_price = bsb.getFree_send_price();
-			BigDecimal bdsend = new BigDecimal(free_send_price);
-			bdsend = bdsend.setScale(2, BigDecimal.ROUND_DOWN);
-			text = "差" + bdsend + "元免费配送";
-		} else if (0 < amount && amount < bsb.getFree_send_price()) {
-			double sub = Utils.sub(bsb.getFree_send_price(), amount);
-			text = "差" + sub + "元免费配送";
-		} else {
-			text = "选好了";
-		}
-		cartNotice.setText(text);
-	}
-	
-	/** 分类商品*/
-	@SuppressWarnings("rawtypes")
-	private void categoryGoods(Bundle bundle) {
-		ArrayList<Category> typegoods = (ArrayList<Category>) bundle.getSerializable(LocationLogic.EXTRA_GOODSLIST);
-		if (category.getChildCount() > 0) {
-			category.removeAllViews();
-		}
-		Category categoryGoods = null;
-		for (int i = 0; i < typegoods.size(); i++) {
-			categoryGoods = (Category) typegoods.get(i);
-			final ArrayList<Goods> goodsList = categoryGoods.getGoodsList();
-			View goodsView = LayoutInflater.from(this).inflate(R.layout.home_category_goods, null);
-			category.addView(goodsView, category.getChildCount());
-			
-			MyGridView itemGoodsView = (MyGridView) goodsView.findViewById(R.id.gridview_goods);
-			
-			TextView titleView = (TextView) goodsView.findViewById(R.id.tv_category_name);
-			TextView moreView = (TextView) goodsView.findViewById(R.id.tv_more);
-
-			titleView.setText(categoryGoods.getGoodstype_name());
-			moreView.setTag(categoryGoods.getGoodstype_code());
-			
-			moreView.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					int goodsTypeCode = (Integer) v.getTag();
-					Intent intent = new Intent();
-					intent.setClass(MainActivity.this, GoodsCategoryActivity.class);
-					intent.putExtra(GoodsCategoryActivity.EXTRA_TYPE_CODE, goodsTypeCode);
-					intent.putExtra(GoodsCategoryActivity.EXTRA_SHOP_NAME, shopName);
-					startActivity(intent);
-				}
-			});
-			
-			itemGoodsView.setOnItemClickListener(new OnItemClickListener() {
-
-				@Override
-				public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-					Goods goods = goodsList.get(position);
-					Intent intent = new Intent(ActivityMgr.mContext, GoodsDetailActivity.class);
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_CODE, goods.getChange_code());
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_NUMBER, goods.getGoods_num());
-					intent.putExtra(GoodsLogic.EXTRA_LIMITED,goods.getLimited());
-					startActivity(intent);
-				}
-			});
-			
-			HomeCategoryGoodsAdapter homeCategoryGoodsAdapter = new HomeCategoryGoodsAdapter(this, goodsList);
-			itemGoodsView.setAdapter(homeCategoryGoodsAdapter);
-		}
-	}
-
-	/** 特价商品*/
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	private void bargainGoods(Bundle bundle) {
-		ArrayList<Goods> bargaingoods = (ArrayList<Goods>) bundle.getSerializable(LocationLogic.EXTRA_BARGAINGOODSLIST);
-		if (bargaingoods != null && bargaingoods.size() > 0) {
-			bargainTitle.setVisibility(View.VISIBLE);
-			gridView.setVisibility(View.VISIBLE);
-			line1.setVisibility(View.VISIBLE);
-			line2.setVisibility(View.VISIBLE);
-			line3.setVisibility(View.VISIBLE);
-			
-			bragainList.clear();
-			bragainList = bargaingoods;
-			if (bargainAdapter == null ) {
-				bargainAdapter = new BargainGoodsAdapter(this, bragainList);
-				gridView.setAdapter(bargainAdapter);
-			}else{
-				bargainAdapter.addData(bragainList);
-			}
-			
-			gridView.setOnItemClickListener(new OnItemClickListener() {
-
-				@Override
-				public void onItemClick(AdapterView<?> parent, View view,
-						int position, long id) {
-					Goods goods = bragainList.get(position);
-					Intent intent = new Intent(ActivityMgr.mContext, GoodsDetailActivity.class);
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_CODE, goods.getChange_code());
-					intent.putExtra(GoodsLogic.EXTRA_GOODS_NUMBER, goods.getGoods_num());
-					intent.putExtra(GoodsLogic.EXTRA_LIMITED,goods.getLimited());
-					startActivity(intent);
-				}
-			});
-		} else {
-			bargainTitle.setVisibility(View.GONE);
-			gridView.setVisibility(View.GONE);
-			line1.setVisibility(View.GONE);
-			line2.setVisibility(View.GONE);
-			line3.setVisibility(View.GONE);
-		}
-	}
-
-	/** viewpager*/
-	@SuppressWarnings("rawtypes")
-	private void setVidwPager(Bundle bundle,int loadTtpe) {
-		ArrayList<Banner> banner = (ArrayList<Banner>) bundle.getSerializable(LocationLogic.EXTRA_BANNERINFO);
-
-		if (tips != null ) {
-			tips = null;
-		}
-		if (mImageViews != null ) {
-			mImageViews = null;
-		}
-		if (group != null ) {
-			group.removeAllViews();
-		}
-		
-		// 将点点加入到ViewGroup中
-		tips = new ImageView[banner.size()];
-		for (int i = 0; i < tips.length; i++) {
-			ImageView imageView = new ImageView(this);
-			android.widget.LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(10, 10);
-			layoutParams.setMargins(0, 0, 10, 0);
-			tips[i] = imageView;
-			if (i == 0) {
-				tips[i].setBackgroundResource(R.drawable.page_indicator_focused);
-			} else {
-				tips[i].setBackgroundResource(R.drawable.page_indicator_unfocused);
-			}
-			group.addView(imageView, layoutParams);
-		}
-		
-		// 将图片装载到数组中
-		mImageViews = new ImageView[banner.size()];
-		Banner b = null;
-		for (int i = 0; i < mImageViews.length; i++) {
-			b = (Banner) banner.get(i);
-			ImageView imageView = new ImageView(this);
-			mImageViews[i] = imageView;
-			imageView.setScaleType(ScaleType.FIT_XY);
-			mImageLoader.displayImage(b.getPic_url(), imageView, options);
-			imageView.setTag(b);
-			imageView.setOnClickListener(new OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					Banner banner = (Banner) v.getTag();
-					String url = banner.getBanner_url();
-					String name = banner.getType_name();
-					int code = banner.getGoodstype_code();
-					Intent intent = new Intent();
-					if (!TextUtils.isEmpty(url)) {
-						intent.setClass(MainActivity.this, EventsActivity.class);
-						intent.putExtra(EventsActivity.EXTRA_TAYENAME, name);
-						intent.putExtra(EventsActivity.EXTRA_TAYEURL, url);
-						startActivity(intent);
-						return;
-					} 
-					
-					if (!TextUtils.isEmpty(name)) {
-						intent.setClass(MainActivity.this, GoodsCategoryActivity.class);
-						intent.putExtra(GoodsCategoryActivity.EXTRA_TYPE_CODE, code);
-						intent.putExtra(GoodsCategoryActivity.EXTRA_SHOP_NAME, name);
-						startActivity(intent);
-						return;
-					}
-				}
-			});
-		}
-		
-		//设置Adapter
-		viewPager.setAdapter(new MyAdapter(mImageViews));
-		
-		if (!isFrist) {
-			isFrist = !isFrist;
-			initRunnable();
-			//设置监听，主要是设置点点的背景
-			initListener();
-		}
-	}
-	
-	/** 初始化商铺信息*/
-	@SuppressWarnings("rawtypes")
-	private void initShopInfo(Bundle bundle) {
-		ArrayList<ShopInfo> shopInfo = (ArrayList<ShopInfo>) bundle.getSerializable(LocationLogic.EXTRA_SHOPLIST);
-		if (shopInfo != null) {
-			shop = (ShopInfo) shopInfo.get(0);
-			int status = shop.getStatus();
-			if (status == 1) {
-				shopClose.setVisibility(View.GONE);
-			}else{
-				shopClose.setVisibility(View.VISIBLE);
-			}
-			tvShopTitle.setText(shop.getShop_name());
-			tvTimeText.setText(shop.getStartbus_time()+"-"+shop.getEndbus_time());
-			tvReceiveTime.setText(shop.getDelivery_time()+"分钟");
-			tvPriceMinText.setText(shop.getFree_send_price()+"元");
-		}
-	}
-	
-	/** 获取购物车商品列表*/
-	private void sendGetCartGoodsListAction() {
-		Intent intent = new Intent(ShoppingCartLogic.ACTION_GETCARTLIST);
-		intent.putExtra(ShoppingCartLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(ShoppingCartLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-	
-	/** 首页重新选择便利店*/
-	private void sendSelectBrowerShopAction() {
-		Intent intent = new Intent(LocationLogic.ACTION_GET_SELECT_BROWER_SHOP);
-		intent.putExtra(LocationLogic.EXTRA_LNG, SPUtils.getString(this, GlobalInfo.LNG, ""));
-		intent.putExtra(LocationLogic.EXTRA_LAT, SPUtils.getString(this, GlobalInfo.LAT, ""));
-		intent.putExtra(LocationLogic.EXTRA_SHOPCODE, SPUtils.getInt(this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(LocationLogic.EXTRA_USERCODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-
-	/** 获取商铺信息*/
-	private void sendGetShopInfoAction(int loadType){
-		Intent intent = new Intent(LocationLogic.ACTION_GET_LOCATION_LIST2SHOP);
-		intent.putExtra(LocationLogic.EXTRA_SHOPCODE, SPUtils.getInt(MainActivity.this, GlobalInfo.KEY_SHOPCODE, 0));
-		intent.putExtra(LocationLogic.EXTRA_USERCODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		intent.putExtra(LocationLogic.EXTRA_LOADTYPE, loadType);
-		sendAction(intent);
-	}
-
-	private void InitLocation(){
-		LocationClientOption option = new LocationClientOption();
-		option.setLocationMode(tempMode);//设置定位模式
-		option.setCoorType(tempcoor);//返回的定位结果是百度经纬度，默认值gcj02
-		option.setScanSpan(5000);//设置发起定位请求的间隔时间为5000ms
-		option.setIsNeedAddress(true);//是否反地理编码
-		mLocationClient.setLocOption(option);
-	}
-	
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_SHOP_INFO_SUCCESS,Event.GET_SHOP_INFO_FAILED,
-				Event.GET_SELECT_BROWER_SHOP_SUCESS,Event.GET_SELECT_BROWER_SHOP_FAILED,
-				Event.INSERT_OR_UPDATE_CART_GOOD_NUM_SUCESS,Event.INSERT_OR_UPDATE_CART_GOOD_NUM_FAILED,
-				Event.GET_CART_LIST_SUCESS,Event.GET_CART_LIST_FAILED,
-				Event.GET_DELETE_CART_GOOD_SUCESS,Event.GET_DELETE_CART_GOOD_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			moveTaskToBack(true);
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-
-	@Override
-	public boolean dispatchKeyEvent(KeyEvent event) {
-		if (event.getKeyCode() == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
-			moveTaskToBack(true);
-			return false;
-		}
-		return super.dispatchKeyEvent(event);
-	}
-	
-	@Override
-	public void onRefresh(PullToRefreshLayout pullToRefreshLayout,int typecode) {
-		sendGetShopInfoAction(LOAD_TYPE_REFRESH);
-	}
-
-	@Override
-	public void onLoadMore(PullToRefreshLayout pullToRefreshLayout,int typecode) {
-		
-	}
-	
-	//viewPager数据显示开始----------------------------------------------------------------------------------------------
-	@SuppressWarnings("deprecation")
-	private void initImageLoader() {
-		mImageLoader = App.initImageLoader(this);
-		options = new DisplayImageOptions.Builder()
-				.bitmapConfig(Bitmap.Config.RGB_565)// 设置图片的解码类型
-				.showStubImage(R.drawable.no_banner)// 加载过程中显示的图像，可以不设置
-				.showImageForEmptyUri(R.drawable.no_banner) // 设置图片Uri为空或是错误的时候显示的图片
-				.showImageOnFail(R.drawable.no_banner) // 设置图片加载/解码过程中错误时候显示的图片
-				.cacheInMemory(true) // 设置下载的图片是否缓存在内存中
-				.cacheOnDisc(true) // 设置下载的图片是否缓存在SD卡中
-				.build();
-	}
-	
-	protected void initRunnable() {
-		viewpagerRunnable = new Runnable() {
-
-			@Override
-			public void run() {
-				int nowIndex = viewPager.getCurrentItem();
-				int count = viewPager.getAdapter().getCount();
-				if (nowIndex + 1 >= count) {
-					viewPager.setCurrentItem(0);
-				} else {
-					viewPager.setCurrentItem(nowIndex + 1);
-				}
-				handler.postDelayed(viewpagerRunnable, TIME);
-			}
-		};
-		handler.postDelayed(viewpagerRunnable, TIME);
-	}
-	
-	private void initListener() {
-		viewPager.setOnPageChangeListener(new OnPageChangeListener() {
-			boolean isScrolled = false;
-			@Override
-			public void onPageScrollStateChanged(int status) {
-				switch (status) {
-				case 1:
-					isScrolled = false;
-					break;
-				case 2:
-					isScrolled = true;
-					break;
-				case 0:
-					if (viewPager.getCurrentItem() == viewPager.getAdapter().getCount() - 1 && !isScrolled) {
-						viewPager.setCurrentItem(0);
-					}
-					else if (viewPager.getCurrentItem() == 0 && !isScrolled) {
-						viewPager.setCurrentItem(viewPager.getAdapter().getCount() - 1);
-					}
-					break;
-				}
-			}
-
-			@Override
-			public void onPageScrolled(int arg0, float arg1, int arg2) {
-			}
-
-			@Override
-			public void onPageSelected(int index) {
-				setImageBackground(index % mImageViews.length);
-			}
-		});
-	}
-	
-	private void setImageBackground( int selectItems){
-		for(int i=0; i<tips.length; i++){
-			if(i == selectItems){
-				tips[i].setBackgroundResource(R.drawable.page_indicator_focused);
-			}else{
-				tips[i].setBackgroundResource(R.drawable.page_indicator_unfocused);
-			}
-		}
-	}
-	//viewPager数据显示结束----------------------------------------------------------------------------------------------
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-	
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-	
-	private OnClickListener tryAgainListener = new OnClickListener() {
-
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				initView();
-			}
-		}
-	};
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/RegistActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/RegistActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/RegistActivity.java	(revision )
@@ -1,191 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.os.Handler;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.EditText;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-/**
- * @ClassName:  RegistActivity
- * @Description: 注册登录页面
- * @author YY
- * @date 2015年6月3日 下午3:30:26
- */
-public class RegistActivity extends BaseActivity {
-	private TextView titleBarTv;//界面标题
-	private EditText phone;//手机号码
-	private EditText verificationCode;//验证码
-	private TextView login;//点击登录
-	private TextView sendVerficationCode;
-	private int num = 60;// 倒计时60s
-	private RelativeLayout loadingView;
-	private Handler handler = new Handler();
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		
-		String phoneNum = phone.getText().toString().trim();
-		if (v.getId()==R.id.tv_send_verfication_code) {
-			if (TextUtils.isEmpty(phoneNum)) {
-				MyToast.show(this, "手机号码不能为空！");
-				return;
-			}
-			if (phoneNum.length() != 11) {
-				MyToast.show(this, "请输入正确的手机号码！");
-				return;
-			}
-			
-			String text = sendVerficationCode.getText().toString();
-			if (text.equals("获取验证码")) {
-				loadingView.setVisibility(View.VISIBLE);
-				sendVerficationAction(phoneNum);
-			} else if (text.equals("重新发送")) {
-				loadingView.setVisibility(View.VISIBLE);
-				sendVerficationAction(phoneNum);
-				num = 60;
-			} else {
-				MyToast.show(this, "请等待" + num + "秒后重新发送！");
-				return;
-			}
-		}else if (v.getId()==R.id.bt_login) {
-			String verficationcode = verificationCode.getText().toString();
-			if (TextUtils.isEmpty(phoneNum)) {
-				MyToast.show(this, "手机号码不能为空！");
-				return;
-			}
-			if (TextUtils.isEmpty(verficationcode)) {
-				MyToast.show(this, "验证码不能为空");
-				return;
-			} 
-			if (verficationcode.length() != 6) {
-				MyToast.show(this, "验证码长度不符合要求");
-				return;
-			}
-
-			loadingView.setVisibility(View.VISIBLE);
-			sendCheckOutVerficationCodeAction(phoneNum, verficationcode);
-		}else if (v.getId()==R.id.title_bar_left) {
-			finish();
-		}
-	}
-	
-	
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_regist_login);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.login_in);
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		phone = (EditText) findViewById(R.id.et_phone);
-		verificationCode = (EditText) findViewById(R.id.et_verification_code);
-		login = (TextView) findViewById(R.id.bt_login);
-		login.setOnClickListener(this);
-		
-		sendVerficationCode = (TextView) findViewById(R.id.tv_send_verfication_code);
-		sendVerficationCode.setOnClickListener(this);
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.POST_SEND_VERFICATION_SUCCESS://发送验证码成功事件 
-			loadingView.setVisibility(View.GONE);
-			String isSuccess = bundle.getString(UserLogic.EXTRA_ISSUCCESS);
-			String result = bundle.getString(UserLogic.EXTRA_RESULT);
-			if ("no".equals(isSuccess)) {
-				MyToast.show(this, result);
-			} else {
-				MyToast.show(this, "验证码已发送至您手机，请注意查收！");
-				handler.postDelayed(runnable, 1000);
-			}
-			break;
-		case Event.POST_SEND_VERFICATION_FAILED://发送验证码失败事件 
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-		case Event.POST_CHECK_OUT_VERFICATION_SUCCESS://验证码校验并登录成功事件
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, "恭喜您登录成功！");
-			startActivity(new Intent(this,MainActivity.class));//登录成功后跳转到主界面，如果不退出，就不再进入登录界面
-			finish();
-			break;
-		case Event.POST_CHECK_OUT_VERFICATION_FAILED://验证码校验并登录失败事件
-			loadingView.setVisibility(View.GONE);
-			MyToast.show(this, notice);
-			break;
-
-		default:
-			break;
-		}
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this,
-				Event.POST_SEND_VERFICATION_SUCCESS,
-				Event.POST_SEND_VERFICATION_FAILED,
-				Event.POST_CHECK_OUT_VERFICATION_SUCCESS,
-				Event.POST_CHECK_OUT_VERFICATION_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	/**获取验证码*/
-	private void sendVerficationAction(String phoneNum){
-		Intent intent = new Intent();
-		intent.setAction(UserLogic.ACTION_POST_VERFICATION_CODE);
-		intent.putExtra(UserLogic.EXTRA_PHONE, phoneNum);
-		sendAction(intent);
-	}
-
-	/**校验验证码并登录*/
-	private void sendCheckOutVerficationCodeAction(String phone,String verficationCode) {
-		int shopCode = SPUtils.getInt(RegistActivity.this, GlobalInfo.KEY_SHOPCODE, 0);
-		Intent intent = new Intent();
-		intent.setAction(UserLogic.ACTION_POST_CHECK_OUT_VERFICATION_CODE);
-		intent.putExtra(UserLogic.EXTRA_SHOP_CODE, shopCode);
-		intent.putExtra(UserLogic.EXTRA_PHONE, phone);
-		intent.putExtra(UserLogic.EXTRA_VERTIFYCODE, verficationCode);
-		sendAction(intent);
-	}
-	
-	Runnable runnable = new Runnable() {
-		@Override
-		public void run() {
-			num--;
-			sendVerficationCode.setText(num + "s");
-			handler.postDelayed(this, 1000);
-			if (num < 0) {
-				sendVerficationCode.setText("重新发送");
-				handler.removeCallbacks(runnable);
-			}
-		}
-	};
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderInsertorderReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderInsertorderReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/OrderInsertorderReq.java	(revision )
@@ -1,46 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/***
- * 
- * @ClassName:  OrderInsertorderReq
- * @Description: 普通商品订单支付
- * @author YY
- * @date 2015年6月29日 下午7:00:54
- */
-public class OrderInsertorderReq extends HttpReq {
-	
-	private int shopCode;
-	private int userCode;
-	private String remark;
-	private String startTime;
-	private String endTime;
-	private int payWay;
-	private String couponCode;
-	
-	public OrderInsertorderReq(int reqid, int shopCode, int userCode, String remark,
-			String startTime, String endTime, int payWay, String couponCode) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-		this.userCode = userCode;
-		this.remark = remark;
-		this.startTime = startTime;
-		this.endTime = endTime;
-		this.payWay = payWay;
-		this.couponCode = couponCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "shop_code=" + shopCode +"&user_code="+userCode+"&remark="+remark+"&start_time="+startTime
-				+"&end_time="+endTime+"&payment_way="+payWay+"&coupon_code="+couponCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ShoppingCartInfoReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ShoppingCartInfoReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ShoppingCartInfoReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * @ClassName: ShoppingCartInfoReq
- * @Description:购物车页面信息
- * @author zxl
- * @date 2015年6月9日 下午2:48:26
- */
-public class ShoppingCartInfoReq extends HttpReq {
-
-	/** 用户id */
-	private int usercode;
-	/** 商店id */
-	private int shopcode;
-
-	public ShoppingCartInfoReq(int reqId, int usercode, int shopcode) {
-		super();
-		this.id = reqId;
-		this.usercode = usercode;
-		this.shopcode = shopcode;
-	}
-
-	public int getUsercode() {
-		return usercode;
-	}
-
-	public void setUsercode(int usercode) {
-		this.usercode = usercode;
-	}
-
-	public int getShopcode() {
-		return shopcode;
-	}
-
-	public void setShopcode(int shopcode) {
-		this.shopcode = shopcode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?usercode=" + usercode + "&shopcode=" + shopcode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableGridView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableGridView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/pulltorefreshlayout/pullableview/PullableGridView.java	(revision )
@@ -1,84 +0,0 @@
-package com.anniu.shandiandaojia.view.pulltorefreshlayout.pullableview;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.widget.GridView;
-
-public class PullableGridView extends GridView implements Pullable
-{
-
-	private boolean enablePullDown = true;
-	private boolean enablePullUp = true;
-	
-	public PullableGridView(Context context)
-	{
-		super(context);
-	}
-
-	public PullableGridView(Context context, AttributeSet attrs)
-	{
-		super(context, attrs);
-	}
-
-	public PullableGridView(Context context, AttributeSet attrs, int defStyle)
-	{
-		super(context, attrs, defStyle);
-	}
-
-	@Override
-	public boolean canPullDown()
-	{
-		if(!enablePullDown){
-			return false;
-		}
-		if (getCount() == 0)
-		{
-			// 没有item的时候也可以下拉刷新
-			return true;
-		} else if (getFirstVisiblePosition() == 0
-				&& getChildAt(0).getTop() >= 0)
-		{
-			// 滑到顶部了
-			return true;
-		} else
-			return false;
-	}
-
-	@Override
-	public boolean canPullUp()
-	{
-		if(!enablePullUp){
-			return false;
-		}
-		if (getCount() == 0)
-		{
-			// 没有item的时候也可以上拉加载
-			return true;
-		} else if (getLastVisiblePosition() == (getCount() - 1))
-		{
-			// 滑到底部了
-			if (getChildAt(getLastVisiblePosition() - getFirstVisiblePosition()) != null
-					&& getChildAt(
-							getLastVisiblePosition()
-									- getFirstVisiblePosition()).getBottom() <= getMeasuredHeight())
-				return true;
-		}
-		return false;
-	}
-	
-	public boolean isEnablePullDown() {
-		return enablePullDown;
-	}
-
-	public void setEnablePullDown(boolean enablePullDown) {
-		this.enablePullDown = enablePullDown;
-	}
-
-	public boolean isEnablePullUp() {
-		return enablePullUp;
-	}
-
-	public void setEnablePullUp(boolean enablePullUp) {
-		this.enablePullUp = enablePullUp;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterUseticketsReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterUseticketsReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/WaterUseticketsReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/***
- * 
- * @ClassName: WaterUseticketsReq
- * @Description: 获取一键送水界面提交订单页面数据
- * @author YY
- * @date 2015年6月17日 下午6:29:24
- */
-public class WaterUseticketsReq extends HttpReq {
-
-	private int shopCode;
-	private int userCode;
-
-	public WaterUseticketsReq(int reqid, int shopCode, int userCode) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-		this.userCode = userCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	@Override
-	public String getParams() {
-		return "?shop_code=" + shopCode + "&user_code=" + userCode;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/ActivityMgr.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/ActivityMgr.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/ActivityMgr.java	(revision )
@@ -1,81 +0,0 @@
-package com.anniu.shandiandaojia.base;
-
-import android.content.Context;
-import android.support.v4.app.FragmentActivity;
-
-import com.anniu.shandiandaojia.utils.MyLog;
-
-import java.util.ArrayList;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Map.Entry;
-
-public class ActivityMgr {
-	private static String TAG = "ActivityMgr";
-	public static Context mContext;
-	public static Context mCurActivity;
-	private static LinkedHashMap<Integer, FragmentActivity> mCacheActivities;
-
-	public static Context getContext() {
-		if (mContext == null) {
-			mCurActivity.getApplicationContext();
-		}
-		return mContext;
-	}
-
-	public static void setContext(Context context) {
-		mContext = context;
-	}
-
-	public static void addActivity(FragmentActivity activity) {
-		mCurActivity = activity;
-		if (mCacheActivities == null) {
-			mCacheActivities = new LinkedHashMap<Integer, FragmentActivity>();
-		}
-		int hashCode = activity.hashCode();
-		if (mCacheActivities.containsKey(hashCode)) {
-			mCacheActivities.remove(hashCode);
-		}
-		mCacheActivities.put(hashCode, activity);
-		MyLog.i(TAG, "addActivity.activity = "
-				+ activity.getClass().getSimpleName()
-				+ ", mCacheActivities.size() = " + mCacheActivities.size());
-	}
-
-	public static void destroyActivity(FragmentActivity activity) {
-		if (mCacheActivities != null) {
-			mCacheActivities.remove(activity.hashCode());
-
-			MyLog.i(TAG, "destroyActivity.activity = "
-					+ activity.getClass().getSimpleName()
-					+ ", mCacheActivities.size() = " + mCacheActivities.size());
-		}
-	}
-
-	public static int finishAllActivity(boolean isIgnoreCurrentActivity) {
-		int finishCount = 0;
-		MyLog.i(TAG, "finishAllActivity.mCacheActivities.size() = "
-				+ (mCacheActivities == null ? 0 : mCacheActivities.size()));
-		if (mCacheActivities != null && !mCacheActivities.isEmpty()) {
-			List<FragmentActivity> activitys = new ArrayList<FragmentActivity>();
-			for (Entry<Integer, FragmentActivity> entry : mCacheActivities.entrySet()) {
-				activitys.add(entry.getValue());
-			}
-			for (FragmentActivity activity : activitys) {
-				mCacheActivities.remove(activity.hashCode());
-				if (!isIgnoreCurrentActivity
-						|| (isIgnoreCurrentActivity && activity != mCurActivity)) {
-					if (!activity.isFinishing()) {
-						activity.finish();
-						finishCount++;
-						MyLog.i(TAG, "finishAllActivity.activity = "
-								+ activity.getClass().getSimpleName()
-								+ " finished");
-					}
-				}
-			}
-		}
-		MyLog.i(TAG, "finishAllActivity.finishCount = " + finishCount);
-		return finishCount;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/UrlInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/UrlInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/UrlInfo.java	(revision )
@@ -1,111 +0,0 @@
-package com.anniu.shandiandaojia.net;
-
-public class UrlInfo {
-	public final static String PROTOCOL = "http://";
-	public final static String HOST = "api2.shandiandaojia.com";
-	public final static String PORT = "";//:80
-//	public final static String HOST = "192.168.188.76";
-//	public final static String PORT = ":801";
-//	public final static String HOST = "test.shandiandaojia.com";
-//	public final static String PORT = "";//:80
-	public final static String PREFIX = "/btfl/v1.0/appuser";
-	public final static String APPTYPE = "?type=android&";
-	public final static String BASEURL = PROTOCOL + HOST + PORT + PREFIX;
-	public static String getUrl(int id) {
-		switch (id) {
-		case ReqInfo.REQ_GET_LOCATION://通过经纬度定位
-			return BASEURL + "/index/findshopbylng"+APPTYPE;
-		case ReqInfo.REQ_GET_LOCATION_ADDR://通过地址定位
-			return BASEURL + "/index/findshopaddress";
-		case ReqInfo.REQ_GET_SHOP_INFO://选择商铺，获取详情
-			return BASEURL + "/index/selectshop";
-		case ReqInfo.REQ_POST_VERFICATION_CODE://获取验证码
-			return BASEURL +"/login/getcode";
-		case ReqInfo.REQ_POST_CHECK_OUT_VERFICATION_CODE://检验验证码并登录
-			return BASEURL +"/login/login";
-		case ReqInfo.REQ_GET_GOODS_DETAILS://商品详情
-			return BASEURL +"/good/getgoodbychangcode";
-		case ReqInfo.REQ_GET_PERSON_SETTING://获取个人中心详情
-			return BASEURL +"/person/findpersonbyid";
-		case ReqInfo.REQ_POST_PERSON_NAME_SEX://保存个人中心姓名性别
-			return BASEURL +"/person/updatepersoninfo";
-		case ReqInfo.REQ_GET_FIND_ALLORDERS://获取用户订单
-			return BASEURL +"/person/findallorders";
-		case ReqInfo.REQ_GET_SELECT_BROWERS_SHOP://首页重新选择便利店
-			return BASEURL +"/index/selectbrowershop";
-		case ReqInfo.REQ_GET_PERSON_FINDUSERLOC://获取个人中心我的地址
-			return BASEURL +"/person/finduserloc";
-		case ReqInfo.REQ_GET_INSERT_OR_UPDATE_CART_GOOD_NUM://添加或删除/修改商品数量 
-			return BASEURL +"/cart/updatenum";
-		case ReqInfo.REQ_POST_PERSON_EDITADDR://修改用户收货信息--修改
-			return BASEURL+"/person/editAddr";
-		case ReqInfo.REQ_POST_PERSON_INSERTADDR://新增用户收货信息
-			return BASEURL +"/person/insertAddr";
-		case ReqInfo.REQ_GET_PERSON_EDITDEFAULT_ADDR://选择用户默认收货信息
-			return BASEURL +"/person/editdefaultAddr";
-		case ReqInfo.REQ_GET_CARTLIST://购物车商品列表
-			return BASEURL +"/cart/cartlist";
-		case ReqInfo.REQ_POST_DELETEADDR://删除用户信息--单个
-			return BASEURL +"/person/deleteaddr";
-		case ReqInfo.REQ_GET_CANCELORDER://取消订单
-			return BASEURL +"/order/cancelorder";
-		case ReqInfo.REQ_GET_CONFIRMORDER://确认订单
-			return BASEURL +"/order/confirmorder";
-		case ReqInfo.REQ_GET_ORDERSTATUS://订单详情
-			return BASEURL +"/order/orderdetail";
-		case ReqInfo.REQ_GET_CARTINFO://购物车详情
-			return BASEURL +"/cart/cartinfo";
-		case ReqInfo.REQ_GET_DELETECARTGOOD://根据商品商店id 和用户id 删除 购物车 列表的一条
-			return BASEURL +"/cart/deletecartgood";
-		case ReqInfo.REQ_POST_SUBMITADVICE://意见反馈
-			return BASEURL +"/person/submitadvice";
-		case ReqInfo.REQ_GET_GETGOODSBYTYPE://按照商品分类获取 商品信息
-			return BASEURL +"/good/getgoodsbytype";
-		case ReqInfo.REQ_POST_COMPLAINORDER://投诉商铺
-			return BASEURL +"/order/complainorder";
-		case ReqInfo.REQ_GET_GOODS://分类首次进入显示全部商品
-			return BASEURL +"/good/getgoods";
-		case ReqInfo.REQ_GET_ACKORDER://结算跳转订单确认页面
-			return BASEURL +"/order/ackorder";
-		case ReqInfo.REQ_GET_VERSION://版本检查更新
-			return BASEURL +"/person/version";
-		case ReqInfo.REQ_GET_FINDUSERCOUPON://优惠券
-			return BASEURL +"/person/findusercoupon";
-		case ReqInfo.REQ_GET_FINDWATERTICKET://水券
-			return BASEURL +"/person/findwaterticket";
-		case ReqInfo.REQ_GET_WATER_FIND://初始化一键送水界面
-			return BASEURL +"/water/find";
-		case ReqInfo.REQ_POST_WATER_CONFIRED://购买水票
-			return BASEURL + "/water/confirm";
-		case ReqInfo.REQ_GET_WATER_DETAIL://水票详情
-			return BASEURL +"/water/detail";
-		case ReqInfo.REQ_GET_WATER_SUBMIT://水票支付
-			return BASEURL +"/water/submit";
-		case ReqInfo.REQ_GET_WATER_USETICKETS://进入一键送水界面
-			return BASEURL +"/water/usetickets";
-		case ReqInfo.REQ_POST_WATER_ORDER://一键送水界面提交订单
-			return BASEURL +"/water/waterorder";
-		case ReqInfo.REQ_GET_INDEX_SEARCHHOTS://点击进入搜索界面
-			return BASEURL +"/index/searchhots";
-		case ReqInfo.REQ_GET_SEARCH_GOODS://搜索商品
-			return BASEURL +"/good/searchgoods";
-		case ReqInfo.REQ_GET_PERSON_FINDTICKETS://获取个人中心我的水票
-			return BASEURL +"/person/findtickets";
-		case ReqInfo.REQ_POST_ORDER_INSERTORDER://普通商品提交订单
-			return BASEURL +"/order/insertorder";
-		case ReqInfo.REQ_GET_WATER_SELECTEDTICKET://点击切换使用水票
-			return BASEURL +"/water/selectedticket";
-		case ReqInfo.REQ_GET_ORDER_FINDCOUPON://触发优惠券
-			return BASEURL +"/order/findcoupon";
-		case ReqInfo.REQ_GET_GETPREPAYID://微信支付获取prepayid
-			return BASEURL +"/tenpay/getprepayid";
-		case ReqInfo.REQ_GET_WXCALLBACK://微信支付获取订单状态
-			return BASEURL +"/tenpay/checkpay";
-		case ReqInfo.REQ_POST_EXCEPTION://提交日志
-			return BASEURL +"/common/date";
-		default:
-			break;
-		}
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/SocketReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/SocketReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/SocketReq.java	(revision )
@@ -1,18 +0,0 @@
-package com.anniu.shandiandaojia.net.bean;
-
-import com.anniu.shandiandaojia.net.NetMgr.OnSocketRsp;
-
-
-public abstract class SocketReq {
-	public int id;
-	private OnSocketRsp mOnSocketRsp;
-	public abstract String getParams();
-	public abstract String parseData(String str);
-	
-	public OnSocketRsp getOnSocketRsp() {
-		return mOnSocketRsp;
-	}
-	public void setOnSocketRsp(OnSocketRsp mOnSocketRsp) {
-		this.mOnSocketRsp = mOnSocketRsp;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyGridView.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyGridView.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/view/MyGridView.java	(revision )
@@ -1,27 +0,0 @@
-package com.anniu.shandiandaojia.view;
-
-import android.content.Context;
-import android.util.AttributeSet;
-import android.widget.GridView;
-
-public class MyGridView extends GridView {
-
-	public MyGridView(Context context) {
-		super(context);
-	}
-
-	public MyGridView(Context context, AttributeSet attrs) {
-		super(context, attrs);
-	}
-
-	public MyGridView(Context context, AttributeSet attrs, int defStyle) {
-		super(context, attrs, defStyle);
-	}
-
-	@Override
-	public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
-
-		int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2,MeasureSpec.AT_MOST);
-		super.onMeasure(widthMeasureSpec, expandSpec);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ComplainorderReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ComplainorderReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/ComplainorderReq.java	(revision )
@@ -1,71 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: ComplainorderReq
- * @Description: 投诉商铺请求
- * @author YY
- * @date 2015年6月11日 下午3:37:49
- */
-public class ComplainorderReq extends HttpReq {
-
-	private String orderNum;
-	private int userCode;
-	private int shopCode;
-	private String content;
-
-	public ComplainorderReq(int reqid, String orderNum, int userCode,
-			int shopCode, String content) {
-		super();
-		this.id = reqid;
-		this.orderNum = orderNum;
-		this.userCode = userCode;
-		this.shopCode = shopCode;
-		this.content = content;
-	}
-
-	public String getOrderNum() {
-		return orderNum;
-	}
-
-	public void setOrderNum(String orderNum) {
-		this.orderNum = orderNum;
-	}
-
-	public int getUserCode() {
-		return userCode;
-	}
-
-	public void setUserCode(int userCode) {
-		this.userCode = userCode;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	public String getContent() {
-		return content;
-	}
-
-	public void setContent(String content) {
-		this.content = content;
-	}
-
-	@Override
-	public String getParams() {
-		return "ordernum="+orderNum+"&user_code=" + userCode + "&shop_code=" + shopCode + "&content="+ content;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/MultiHashMap.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/MultiHashMap.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/base/event/MultiHashMap.java	(revision )
@@ -1,102 +0,0 @@
-package com.anniu.shandiandaojia.base.event;
-
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.HashMap;
-import java.util.Map.Entry;
-import java.util.Set;
-
-/**
- * @author 允许一个Key对应多个值的Map
- * @param <K>
- * @param <V>
- */
-public class MultiHashMap<K, V> {
-	private HashMap<K, ArrayList<V>> model;
-
-	public MultiHashMap() {
-		this(16);
-	}
-
-	public MultiHashMap(int capacity) {
-		model = new HashMap<K, ArrayList<V>>(capacity < 8 ? 8 : capacity);
-	}
-
-	public void clear() {
-		model.clear();
-	}
-
-	public boolean containsKey(K key) {
-		return model.containsKey(key);
-	}
-
-	public boolean containsValue(V value) {
-		return model.containsValue(value);
-	}
-
-	public Set<Entry<K, ArrayList<V>>> entrySet() {
-		return model.entrySet();
-	}
-
-	public ArrayList<V> get(K key) {
-		return model.get(key);
-	}
-
-	public boolean isEmpty() {
-		return model.isEmpty();
-	}
-
-	public Set<K> keySet() {
-		return model.keySet();
-	}
-
-	public void put(K key, V value) {
-		ArrayList<V> ls = model.get(key);
-		if (ls == null) {
-			ls = new ArrayList<V>();
-			model.put(key, ls);
-		}
-		if (!ls.contains(value)) {
-			ls.add(value);
-		}
-	}
-
-	public ArrayList<V> remove(K key) {
-		return model.remove(key);
-	}
-
-	public void remove(K key, V val) {
-		ArrayList<V> ls = model.get(key);
-		if (ls != null) {
-			ls.remove(val);
-		}
-	}
-
-	/**
-	 * 低效率, 需要遍历
-	 * 
-	 * @param val
-	 */
-	public void removeValue(V val) {
-		for (Entry<K, ArrayList<V>> e : model.entrySet()) {
-			ArrayList<V> ls = e.getValue();
-			for (int i = 0; i < ls.size();) {
-				V v = ls.get(i);
-				if (v == val || (v != null && v.equals(val))) {
-					e.getValue().remove(val);
-					continue;
-				}
-				++i;
-			}
-		}
-	}
-
-	public int size() {
-		return model.size();
-	}
-
-	public Collection<ArrayList<V>> values() {
-		return model.values();
-	}
-
-}
Index: D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/PlatformGridViewAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/PlatformGridViewAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/sharesdk/onekeyshare/theme/skyblue/PlatformGridViewAdapter.java	(revision )
@@ -1,211 +0,0 @@
-/*
- * 官网地站:http://www.mob.com
- * 技术支持QQ: 4006852216
- * 官方微信:ShareSDK   （如果发布新版本的话，我们将会第一时间通过微信将版本更新内容推送给您。如果使用过程中有任何问题，也可以通过微信与我们取得联系，我们将会在24小时内给予回复）
- *
- * Copyright (c) 2013年 mob.com. All rights reserved.
- */
-
-package com.sharesdk.onekeyshare.theme.skyblue;
-
-import static com.mob.tools.utils.R.getBitmapRes;
-import static com.mob.tools.utils.R.getIdRes;
-import static com.mob.tools.utils.R.getLayoutRes;
-
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.HashMap;
-import java.util.List;
-
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.TextView;
-import cn.sharesdk.framework.Platform;
-
-import com.sharesdk.onekeyshare.CustomerLogo;
-import com.sharesdk.onekeyshare.ShareCore;
-
-public class PlatformGridViewAdapter extends BaseAdapter implements View.OnClickListener {
-
-	private final Context context;
-	private List<Object> logos = new ArrayList<Object>();
-	private List<Integer> checkedPositionList = new ArrayList<Integer>();
-	private int directOnlyPosition = -1;
-
-	static class ViewHolder {
-		public Integer position;
-		public ImageView logoImageView;
-		public ImageView checkedImageView;
-		public TextView nameTextView;
-	}
-
-	public PlatformGridViewAdapter(Context context) {
-		this.context = context;
-	}
-
-	@Override
-	public int getCount() {
-		return logos.size();
-	}
-
-	@Override
-	public Object getItem(int i) {
-		return logos.get(i);
-	}
-
-	@Override
-	public long getItemId(int i) {
-		return i;
-	}
-
-	@Override
-	public View getView(int position, View view, ViewGroup viewGroup) {
-		ViewHolder viewHolder;
-		if(view == null) {
-			view = LayoutInflater.from(context).inflate(getLayoutRes(context, "skyblue_share_platform_list_item"), null);
-			viewHolder = new ViewHolder();
-			viewHolder.checkedImageView = (ImageView) view.findViewById(getIdRes(context, "checkedImageView"));
-			viewHolder.logoImageView = (ImageView) view.findViewById(getIdRes(context, "logoImageView"));
-			viewHolder.nameTextView = (TextView) view.findViewById(getIdRes(context, "nameTextView"));
-			view.setTag(viewHolder);
-		} else {
-			viewHolder = (ViewHolder) view.getTag();
-		}
-
-		Bitmap logo;
-		String label;
-		Object item = getItem(position);
-		boolean disabled;
-		boolean isDirectShare = item instanceof Platform ? ShareCore.isDirectShare((Platform) item) : true;
-		if(directOnlyPosition == -1) {
-			disabled = !checkedPositionList.isEmpty() && isDirectShare;
-		} else {
-			disabled = position != directOnlyPosition;
-		}
-
-		if (item instanceof Platform) {
-			logo = getIcon((Platform) item, disabled ? "" : "_checked");
-			label = getName((Platform) item);
-			view.setOnClickListener(this);
-		} else {
-			CustomerLogo customerLogo = (CustomerLogo) item;
-			logo = disabled ? customerLogo.disableLogo : customerLogo.enableLogo;
-			label = customerLogo.label;
-			view.setOnClickListener(this);
-		//	view.setOnClickListener(((CustomerLogo) item).listener);
-		}
-		String checkedResName = directOnlyPosition != -1 && directOnlyPosition != position ? "skyblue_platform_checked_disabled" : "skyblue_platform_checked";
-		viewHolder.position = position;
-		viewHolder.checkedImageView.setImageBitmap(BitmapFactory.decodeResource(context.getResources(), getBitmapRes(context, checkedResName)));
-		viewHolder.checkedImageView.setVisibility(checkedPositionList.contains(viewHolder.position) ? View.VISIBLE : View.GONE);
-		viewHolder.nameTextView.setText(label);
-		viewHolder.logoImageView.setImageBitmap(logo);
-
-		return view;
-	}
-
-	@Override
-	public void onClick(View view) {
-		ViewHolder viewHolder = (ViewHolder) view.getTag();
-		Integer position = viewHolder.position;
-		//直接分享平台选中后，其它的不可用
-		if(directOnlyPosition != -1 && position != directOnlyPosition)
-			return;
-
-		Object item = getItem(position);
-		boolean direct = false;
-		//normal platform
-		if(item instanceof Platform){
-			direct = ShareCore.isDirectShare((Platform) item);
-		}else{
-			//自定义图标
-			direct = true;
-		}
-		//EditPage Platforms only
-		if(direct && directOnlyPosition == -1 && !checkedPositionList.isEmpty())
-			return;
-
-		if(checkedPositionList.contains(position)) {
-			checkedPositionList.remove(position);
-			if(direct)
-				directOnlyPosition = -1;
-		} else {
-			checkedPositionList.add(position);
-			if(direct)
-				directOnlyPosition = position;
-		}
-
-		notifyDataSetChanged();
-	}
-
-	public void setData(Platform[] platforms, HashMap<String, String> hiddenPlatforms) {
-		if(platforms == null)
-			return;
-		if (hiddenPlatforms != null && hiddenPlatforms.size() > 0) {
-			ArrayList<Platform> ps = new ArrayList<Platform>();
-			for (Platform p : platforms) {
-				if (hiddenPlatforms.containsKey(p.getName())) {
-					continue;
-				}
-				ps.add(p);
-			}
-
-			logos.addAll(ps);
-		} else {
-			logos.addAll(Arrays.asList(platforms));
-		}
-		checkedPositionList.clear();
-		notifyDataSetChanged();
-	}
-
-	public void setCustomerLogos(ArrayList<CustomerLogo> customers) {
-		if(customers == null || customers.size() == 0)
-			return;
-		logos.addAll(customers);
-	}
-
-	public List<Object> getCheckedItems() {
-		ArrayList<Object> list = new ArrayList<Object>();
-
-		if(directOnlyPosition != -1) {
-			list.add(getItem(directOnlyPosition));
-			return list;
-		}
-
-		Object item;
-		for(Integer position : checkedPositionList) {
-			item = getItem(position);
-			list.add(item);
-		}
-		return list;
-	}
-
-	private Bitmap getIcon(Platform plat, String subfix) {
-		String resName = "skyblue_logo_" + plat.getName() + subfix;
-		int resId = getBitmapRes(context, resName);
-		return BitmapFactory.decodeResource(context.getResources(), resId);
-	}
-
-	private String getName(Platform plat) {
-		if (plat == null) {
-			return "";
-		}
-
-		String name = plat.getName();
-		if (name == null) {
-			return "";
-		}
-
-		int resId = com.mob.tools.utils.R.getStringRes(context, plat.getName());
-		if (resId > 0) {
-			return context.getString(resId);
-		}
-		return null;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SearchGoodsReq.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SearchGoodsReq.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/net/bean/entity/SearchGoodsReq.java	(revision )
@@ -1,50 +0,0 @@
-package com.anniu.shandiandaojia.net.bean.entity;
-
-import com.anniu.shandiandaojia.net.bean.HttpReq;
-
-/**
- * 
- * @ClassName: SearchGoodsReq
- * @Description: 搜索商品
- * @author YY
- * @date 2015年6月25日 下午8:28:05
- */
-public class SearchGoodsReq extends HttpReq {
-
-	private int shopCode;
-	private String goodsName;
-
-	public SearchGoodsReq(int reqid, int shopCode, String goodsName) {
-		super();
-		this.id = reqid;
-		this.shopCode = shopCode;
-		this.goodsName = goodsName;
-	}
-
-	public int getShopCode() {
-		return shopCode;
-	}
-
-	public void setShopCode(int shopCode) {
-		this.shopCode = shopCode;
-	}
-
-	public String getGoodsName() {
-		return goodsName;
-	}
-
-	public void setGoodsName(String goodsName) {
-		this.goodsName = goodsName;
-	}
-
-	@Override
-	public String getParams() {
-		return "shopcode=" + shopCode + "&goodsname=" + goodsName;
-	}
-
-	@Override
-	public String parseData(String str) {
-		return null;
-	}
-
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/UserInfo.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/UserInfo.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/db/jsondb/UserInfo.java	(revision )
@@ -1,91 +0,0 @@
-package com.anniu.shandiandaojia.db.jsondb;
-
-import java.io.Serializable;
-/**
- * 
- * @ClassName:  UserInfo
- * @Description: 用户信息
- * @author YY
- * @date 2015年6月3日 下午3:57:37
- */
-public class UserInfo implements Serializable {
-
-	private static final long serialVersionUID = -5202626219389858707L;
-	/**用户昵称*/
-	private String nick_name;
-	/**用户姓名*/
-	private String user_name;
-	/**用户图片*/
-	private String pic_code;
-	/**注册时间*/
-	private String register_time;
-	/**用户地址*/
-	private String user_addr;
-	/**用户电话*/
-	private String user_tel;
-	/**用户编号*/
-	private int user_code;
-	/**用户性别	1为男	2为女*/
-	private String sex;
-	/**用户名称*/
-	private String rev_name;
-	
-	
-	
-	public String getRev_name() {
-		return rev_name;
-	}
-	public void setRev_name(String rev_name) {
-		this.rev_name = rev_name;
-	}
-	public String getSex() {
-		return sex;
-	}
-	public void setSex(String sex) {
-		this.sex = sex;
-	}
-	public String getNick_name() {
-		return nick_name;
-	}
-	public void setNick_name(String nick_name) {
-		this.nick_name = nick_name;
-	}
-	public String getUser_name() {
-		return user_name;
-	}
-	public void setUser_name(String user_name) {
-		this.user_name = user_name;
-	}
-	public String getPic_code() {
-		return pic_code;
-	}
-	public void setPic_code(String pic_code) {
-		this.pic_code = pic_code;
-	}
-	public String getRegister_time() {
-		return register_time;
-	}
-	public void setRegister_time(String register_time) {
-		this.register_time = register_time;
-	}
-	public String getUser_addr() {
-		return user_addr;
-	}
-	public void setUser_addr(String user_addr) {
-		this.user_addr = user_addr;
-	}
-	public String getUser_tel() {
-		return user_tel;
-	}
-	public void setUser_tel(String user_tel) {
-		this.user_tel = user_tel;
-	}
-	public int getUser_code() {
-		return user_code;
-	}
-	public void setUser_code(int user_code) {
-		this.user_code = user_code;
-	}
-	
-	
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/UserCenterActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/UserCenterActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/UserCenterActivity.java	(revision )
@@ -1,202 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.DialogInterface;
-import android.content.Intent;
-import android.net.Uri;
-import android.os.Bundle;
-import android.view.View;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-import com.anniu.shandiandaojia.view.MyDialog;
-import com.sharesdk.onekeyshare.OnekeyShare;
-
-import cn.sharesdk.framework.ShareSDK;
-
-/**
- * @ClassName: UserCenterActivity
- * @Description: 个人中心
- * @author zxl
- * @date 2015年5月7日 下午2:09:10
- */
-public class UserCenterActivity extends BaseActivity {
-	private TextView titleBarTv;//界面标题
-	private TextView tv_user_name;//显示用户昵称/姓名
-	private TextView tv_user_phone;//显示用户电话
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		Intent intent = new Intent();
-		if (v.getId() == R.id.rl_mine_order_list) {//我的订单
-			startActivity(new Intent(this,MyOrderActivity.class));
-		}else if (v.getId()==R.id.rl_mine_collect) {//我的水票
-			intent.setClass(this,WaterTicketActivity.class);
-			intent.putExtra(WaterTicketActivity.EXTRA_FROM, 0);
-			startActivity(intent);
-		}else if (v.getId()==R.id.rl_my_address) {//我的地址
-			startActivity(new Intent(this,AddressListActivity.class));
-		}
-//		else if (v.getId()==R.id.rl_user_news) {//消息中心
-//			startActivity(new Intent(UserCenterActivity.this,MessageCenterActivity.class));
-//		}
-		else if (v.getId()==R.id.rl_user_feedback) {//意见反馈
-			startActivity(new Intent(this,FeedBackActivity.class));
-		}else if (v.getId()==R.id.rl_user_richscan) {//扫一扫
-//			startActivity(new Intent(this,SweepActivity.class));
-		}
-//		else if (v.getId()==R.id.rl_user_question) {//常见问题
-//			startActivity(new Intent(UserCenterActivity.this,FAQActivity.class));
-//		}
-		else if (v.getId()==R.id.rl_notescontact) {//联系客服
-			callPhone("4008885708");
-		}else if (v.getId()==R.id.rl_mine_integration) {//我的代金券
-			startActivity(new Intent(this,VouchersActivity.class));
-		}else if (v.getId()==R.id.title_bar_left) {
-			finish();
-		}else if (v.getId()==R.id.title_bar_right) {//设置
-			startActivity(new Intent(this,SettingActivity.class));
-		}else if (v.getId()==R.id.rl_user_info) {//个人中心
-			startActivity(new Intent(this,UserInfoActivity.class));
-		}else if (v.getId()==R.id.rl_user_share) {//分享界面
-			showShare();
-		}
-	}
-
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_user_center);
-		getFindPersonById();
-		ShareSDK.initSDK(this);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("个人中心");
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));//点击返回
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		
-		findViewById(R.id.iv_logo_right).setBackgroundDrawable(getResources().getDrawable(R.drawable.setting_set));//点击进入设置
-		findViewById(R.id.title_bar_right).setOnClickListener(this);
-		
-		findViewById(R.id.rl_mine_order_list).setOnClickListener(this);//我的订单
-		findViewById(R.id.rl_mine_collect).setOnClickListener(this);//我的水票
-		findViewById(R.id.rl_mine_integration).setOnClickListener(this);//代金券
-		findViewById(R.id.rl_my_address).setOnClickListener(this);//我的地址
-//		findViewById(R.id.rl_user_news).setOnClickListener(this);//消息中心
-		findViewById(R.id.rl_user_feedback).setOnClickListener(this);//意见反馈
-//		findViewById(R.id.rl_user_richscan).setOnClickListener(this);//扫一扫
-//		findViewById(R.id.rl_user_question).setOnClickListener(this);//常见问题
-		findViewById(R.id.rl_notescontact).setOnClickListener(this);//联系客服
-		findViewById(R.id.rl_user_info).setOnClickListener(this);//个人信息
-		findViewById(R.id.rl_user_share).setOnClickListener(this);//分享
-		
-		tv_user_name = (TextView) findViewById(R.id.tv_user_name);
-		tv_user_phone = (TextView) findViewById(R.id.tv_user_phone);
-		tv_user_name.setText(SPUtils.getString(this, GlobalInfo.KEY_NICK_NAME, ""));
-		tv_user_phone.setText(SPUtils.getString(this, GlobalInfo.KEY_USER_TEL, ""));
-	}
-	
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_PERSON_SETTING_SUCESS://获取个人中心设置成功事件 
-			tv_user_name.setText(SPUtils.getString(this, GlobalInfo.KEY_NICK_NAME, ""));
-			tv_user_phone.setText(SPUtils.getString(this, GlobalInfo.KEY_USER_TEL, ""));
-			break;
-		case Event.GET_PERSON_SETTING_FAILED://获取个人中心设置失败事件 
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-	
-	@Override
-	protected void onResume() {
-		super.onResume();
-		tv_user_name.setText(SPUtils.getString(this, GlobalInfo.KEY_NICK_NAME, ""));
-		tv_user_phone.setText(SPUtils.getString(this, GlobalInfo.KEY_USER_TEL, ""));
-	}
-	
-	@Override
-	protected void onDestroy() {
-		super.onDestroy();
-		ShareSDK.stopSDK(this);
-	}
-
-	
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_PERSON_SETTING_SUCESS,
-				Event.GET_PERSON_SETTING_FAILED);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-	
-	
-	/** 获取个人中心详情*/
-	private void getFindPersonById() {
-		Intent intent = new Intent();
-		intent.setAction(UserLogic.ACTION_GET_PERSON_SETTING);
-		intent.putExtra(UserLogic.EXTRA_USER_CODE, SPUtils.getInt(this, GlobalInfo.KEY_USERCODE, 0));
-		sendAction(intent);
-	}
-	
-	/**拨打电话*/
-	private void callPhone(final String phone) {
-		MyDialog.Builder builder = new MyDialog.Builder(this);
-		builder.setTitle("拨打客服");
-		builder.setMessage("客服："+phone);
-		builder.setConfirmButton("拨号", new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-				startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+ phone)));
-			}
-		});
-		builder.setCancelButton("取消", new android.content.DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				dialog.dismiss();
-			}
-		});
-		builder.create().show();
-	}
-	
-	private void showShare() {
-		OnekeyShare oks = new OnekeyShare();
-		// 关闭sso授权
-		oks.disableSSOWhenAuthorize();
-		// title标题，印象笔记、邮箱、信息、微信、人人网和QQ空间使用
-		oks.setTitle(getString(R.string.share));
-		// titleUrl是标题的网络链接，仅在人人网和QQ空间使用
-		oks.setTitleUrl("http://www.xiaojiaodian.com/");
-		// text是分享文本，所有平台都需要这个字段
-		oks.setText(getResources().getString(R.string.share_notice));
-		// url仅在微信（包括好友和朋友圈）中使用
-		oks.setUrl("http://sharesdk.cn");
-		// site是分享此内容的网站名称，仅在QQ空间使用
-		oks.setSite(getString(R.string.app_name));
-		// siteUrl是分享此内容的网站地址，仅在QQ空间使用
-		oks.setSiteUrl("http://www.xiaojiaodian.com/");
-		oks.setSilent(true);
-		// 启动分享GUI
-		oks.show(this);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/WaterTicketAdapter.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/WaterTicketAdapter.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/adapter/WaterTicketAdapter.java	(revision )
@@ -1,96 +0,0 @@
-package com.anniu.shandiandaojia.adapter;
-
-import android.content.Context;
-import android.content.Intent;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.db.jsondb.WaterInfo;
-import com.anniu.shandiandaojia.logic.TicketLogic;
-
-import java.util.ArrayList;
-/***
- * @ClassName:  WaterTicketAdapter
- * @Description: 水票适配器
- * @author YY
- * @date 2015年6月29日 下午2:22:36
- */
-public class WaterTicketAdapter extends BaseAdapter {
-	
-	private Context mContext;
-	private ArrayList<WaterInfo> waterticketList;
-	public WaterTicketAdapter(Context context,ArrayList<WaterInfo> mList){
-		super();
-		this.mContext = context;
-		this.waterticketList = mList;
-	}
-
-	@Override
-	public int getCount() {
-		return waterticketList.size();
-	}
-
-	@Override
-	public Object getItem(int position) {
-		return waterticketList.get(position);
-	}
-
-	@Override
-	public long getItemId(int position) {
-		return position;
-	}
-
-	@Override
-	public View getView(int position, View convertView, ViewGroup parent) {
-		ViewHolder holder = null;
-		WaterInfo waterTicketInfo = waterticketList.get(position);
-		if (convertView == null) {
-			holder = new ViewHolder();
-			convertView = LayoutInflater.from(mContext).inflate(R.layout.item_water_ticket, null);
-			holder.water_name = (TextView) convertView.findViewById(R.id.tv_water_name);
-			holder.coupon_money = (TextView) convertView.findViewById(R.id.tv_coupon_money);
-			holder.water_money = (TextView) convertView.findViewById(R.id.tv_water_money);
-			holder.water_num = (TextView) convertView.findViewById(R.id.tv_water_num);
-			holder.tv_water_use = (TextView) convertView.findViewById(R.id.tv_water_use);
-			/**点击使用水票*/
-			holder.tv_water_use.setOnClickListener(new OnClickListener() {
-				
-				@Override
-				public void onClick(View v) {
-					getWaterUsetickets((int)v.getTag());
-				}
-			});
-			convertView.setTag(holder);
-		} else {
-			holder = (ViewHolder) convertView.getTag();
-		}
-		holder.water_name.setText(waterTicketInfo.getGoods_name());
-		holder.coupon_money.setText("返"+waterTicketInfo.getCoupon_price()+"元代金券");
-		holder.water_money.setText("￥"+waterTicketInfo.getGoods_price()+"元");
-		holder.water_num.setText("剩余："+waterTicketInfo.getNumbers()+"桶");
-		holder.tv_water_use.setText("使用");
-		holder.tv_water_use.setTag(waterTicketInfo.getTic_code());
-		return convertView;
-	}
-	
-	/**点击切换使用该水券*/
-	protected void getWaterUsetickets(int tic_code) {
-		Intent intent = new Intent(TicketLogic.ACTION_GET_WATER_SELECTEDTICKET);
-		intent.putExtra(TicketLogic.EXTRA_TIC_CODE, tic_code);
-		App.getInstance().sendAction(intent);
-	}
-
-	static class ViewHolder{
-		TextView water_name;
-		TextView coupon_money;
-		TextView water_money;
-		TextView water_num;
-		TextView tv_water_use;
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FamliyMartActivity.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FamliyMartActivity.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/FamliyMartActivity.java	(revision )
@@ -1,249 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.KeyEvent;
-import android.view.View;
-import android.view.View.OnClickListener;
-import android.widget.AdapterView;
-import android.widget.AdapterView.OnItemClickListener;
-import android.widget.ImageView;
-import android.widget.ListView;
-import android.widget.RelativeLayout;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.adapter.ShopListAdapter;
-import com.anniu.shandiandaojia.app.App;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.base.BaseLogic;
-import com.anniu.shandiandaojia.db.jsondb.ShopInfo;
-import com.anniu.shandiandaojia.logic.Event;
-import com.anniu.shandiandaojia.logic.LocationLogic;
-import com.anniu.shandiandaojia.utils.CommonUtil;
-import com.anniu.shandiandaojia.utils.GlobalInfo;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.SPUtils;
-import com.anniu.shandiandaojia.utils.Utils;
-
-import java.util.ArrayList;
-
-/**
-* @ClassName: FamliyMartActivity 
-* @Description: 附近便利店 
-* @author zxl 
-* @date 2015年5月29日 下午7:33:49
- */
-public class FamliyMartActivity extends BaseActivity {
-
-	public static String EXTRA_FROM = "from";
-	public static String EXTRA_ADDRESS = "address";
-	public static String EXTRA_M = "ModifyLocationActivity";
-	public static String EXTRA_L = "LocationActivity";
-	public static String EXTRA_MAIN = "MainActivity";
-	public static String EXTRA_C = "GoodsCategoryActivity";
-	
-	private ImageView leftTitle;
-	private TextView titleBarTv,shopAddr;
-	private ListView listview;
-
-	private static final int LOAD_TYPE_REFRESH = 1;
-	private ArrayList<ShopInfo> shopList = new ArrayList<ShopInfo>();
-	private ShopListAdapter adapter ;
-	private String fromActivity = "";
-	private String address = "";
-	private RelativeLayout loadingView,errorView;
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		switch (v.getId()) {
-		case R.id.title_bar_left:
-			stopLocation();
-			finish();
-			break;
-		case R.id.tv_modify://修改地址
-			startActivity(new Intent(this, ModifyLocationActivity.class));
-			finish();
-			break;
-		}
-	}
-
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_famliymart);
-		if (CommonUtil.isNetworkConnected(context)) {
-			initView();
-		} else {
-			showErrorLocal(tryAgainListener);
-		}
-	}
-
-	
-	private void showErrorLocal(OnClickListener tryAgainListener) {
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		errorView.setOnClickListener(tryAgainListener);
-		errorView.setVisibility(View.VISIBLE);
-	}
-
-	private void hideErrorLocal(){
-		errorView.setVisibility(View.GONE);
-	}
-
-	private OnClickListener tryAgainListener = new OnClickListener() {
-	
-		@Override
-		public void onClick(View v) {
-			if (CommonUtil.isNetworkConnected(context)) {
-				Intent i = baseIntent;
-				if (baseIntent != null) {
-					startActivity(i);
-					finish();
-				}
-			}
-		}
-	};
-
-	@SuppressWarnings("deprecation")
-	private void initView() {
-		Intent intent = getIntent();
-		fromActivity = intent.getStringExtra(EXTRA_FROM);
-		address = intent.getStringExtra(EXTRA_ADDRESS);
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText(R.string.title_text_famliymart);
-		leftTitle = (ImageView) findViewById(R.id.iv_logo);
-		leftTitle.setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		shopAddr = (TextView) findViewById(R.id.tv_shop_addr);
-		listview = (ListView) findViewById(R.id.listview);
-		loadingView = (RelativeLayout) findViewById(R.id.rl_loading);
-		loadingView.setVisibility(View.VISIBLE);
-		errorView = (RelativeLayout) findViewById(R.id.rl_error);
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		findViewById(R.id.tv_modify).setOnClickListener(this);
-		listview.setOnItemClickListener(new OnItemClickListener() {
-
-			@Override
-			public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-				ShopInfo shopInfo = shopList.get(position);
-				int status = shopInfo.getStatus();
-				int shopcode = shopInfo.getShop_code();
-				int state = shopInfo.getStatus();
-				SPUtils.saveInt(FamliyMartActivity.this, GlobalInfo.KEY_SHOPCODE, shopcode);
-				SPUtils.saveInt(FamliyMartActivity.this, GlobalInfo.KEY_SHOPSTATE, state);
-				SPUtils.saveBoolean(FamliyMartActivity.this, GlobalInfo.KEY_NEEDLOAD, true);
-				SPUtils.saveBoolean(FamliyMartActivity.this, GlobalInfo.HAS_LOCATION, true);
-				if (status == 1) {// 1：正常营业 0：店铺休息中
-					if (fromActivity.equals(EXTRA_C)) {
-						Intent intent = new Intent();
-						intent.setClass(FamliyMartActivity.this, GoodsCategoryActivity.class);
-						intent.putExtra(GoodsCategoryActivity.EXTRA_SHOP_NAME, shopInfo.getShop_name());
-						intent.putExtra(GoodsCategoryActivity.EXTRA_TYPE_CODE, 0);
-						startActivity(intent);
-					}else{
-						startActivity(new Intent(FamliyMartActivity.this, MainActivity.class));
-					}
-				} else {
-					MyToast.show(FamliyMartActivity.this, "超市休息中！");
-					startActivity(new Intent(FamliyMartActivity.this, MainActivity.class));
-				}
-				finish();
-			}
-		});
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-		String notice = bundle.getString(BaseLogic.EXTRA_ERROR);
-		switch (eventId) {
-		case Event.GET_LOCATION_SUCCESS:
-			hideErrorLocal();
-			loadingView.setVisibility(View.GONE);
-			setData(bundle);
-			break;
-		case Event.GET_LOCATION_FAILED:
-			MyToast.show(this, notice);
-			break;
-		case Event.GET_LOCATION_ADDR_SUCCESS:
-			hideErrorLocal();
-			loadingView.setVisibility(View.GONE);
-			setData(bundle);
-			break;
-		case Event.GET_LOCATION_ADDR_FAILED:
-			loadingView.setVisibility(View.GONE);
-			stopLocation();
-			MyToast.show(this, notice);
-			break;
-		default:
-			break;
-		}
-	}
-
-
-	@SuppressWarnings({ "rawtypes", "unchecked" })
-	private void setData(Bundle bundle) {
-		int loadType = bundle.getInt(LocationLogic.EXTRA_LOADTYPE);
-		String address = SPUtils.getString(this, GlobalInfo.ADDRESS, "");
-		shopAddr.setText(address);
-		ArrayList<ShopInfo> list = (ArrayList<ShopInfo>) bundle.getSerializable(LocationLogic.EXTRA_SHOPLIST);
-		if (loadType == LOAD_TYPE_REFRESH) {
-			stopLocation();
-			shopList.clear();
-			shopList.addAll(list);
-			if (adapter == null) {
-				adapter = new ShopListAdapter(this, shopList);
-				listview.setAdapter(adapter);
-			}else{
-				adapter.addData(shopList);
-			}
-		} else {
-			shopList.addAll(list);
-			if (adapter == null) {
-				adapter = new ShopListAdapter(this, shopList);
-				listview.setAdapter(adapter);
-			} else {
-				adapter.addData(shopList);
-			}
-		}
-	}
-
-	private void stopLocation() {
-		if (!TextUtils.isEmpty(fromActivity)) {
-			if (fromActivity.equals(EXTRA_M)) {
-				ModifyLocationActivity.mLocationClient.stop();
-			} else if (fromActivity.equals(EXTRA_L)) {
-				LocationActivity.mLocationClient.stop();
-			}else if (fromActivity.equals(EXTRA_C)) {
-				GoodsCategoryActivity.mLocationClient.stop();
-			}else {
-				MainActivity.mLocationClient.stop();
-			}
-		}else{
-			ModifyLocationActivity.mLocationClient.stop();
-		}
-	}
-	
-	@Override
-	public boolean onKeyDown(int keyCode, KeyEvent event) {
-		if (keyCode == KeyEvent.KEYCODE_BACK) {
-			stopLocation();
-			finish();
-			return true;
-		}
-		return super.onKeyDown(keyCode, event);
-	}
-
-	@Override
-	protected void addEventListener() {
-		App.getInstance().addListener(this, Event.GET_LOCATION_SUCCESS,
-				Event.GET_LOCATION_FAILED, Event.GET_LOCATION_ADDR_FAILED,
-				Event.GET_LOCATION_ADDR_SUCCESS);
-	}
-
-	@Override
-	protected void removeListener() {
-		App.getInstance().removeListener(this);
-	}
-}
Index: D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ModifyAddress.java
===================================================================
--- D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ModifyAddress.java	(revision )
+++ D:/git/ButtonLife/src/com/anniu/shandiandaojia/activity/ModifyAddress.java	(revision )
@@ -1,132 +0,0 @@
-package com.anniu.shandiandaojia.activity;
-
-import android.content.Intent;
-import android.os.Bundle;
-import android.text.TextUtils;
-import android.view.View;
-import android.widget.EditText;
-import android.widget.TextView;
-
-import com.anniu.shandiandaojia.R;
-import com.anniu.shandiandaojia.base.BaseActivity;
-import com.anniu.shandiandaojia.logic.UserLogic;
-import com.anniu.shandiandaojia.utils.CustomLengthFilter;
-import com.anniu.shandiandaojia.utils.MyToast;
-import com.anniu.shandiandaojia.utils.Utils;
-/**
- * @ClassName:  ModifyAddress
- * @Description: 修改收货地址页面/删除
- * @author YY
- * @date 2015年6月4日 下午2:30:45
- */
-public class ModifyAddress extends BaseActivity {
-	private TextView titleBarTv;//标题
-	private EditText et_name;
-	private EditText et_phone;
-	private EditText et_address;
-	private int userLocCode;
-	private String userName;
-	private String userPhone;
-	private String userAddr;
-	
-	@Override
-	public void onClick(View v) {
-		if (Utils.isFastClick()) {
-			return;
-		}
-		if (v.getId()==R.id.title_bar_left) {//点击返回
-			finish();
-		}else if (v.getId()==R.id.bt_save) {//修改保存
-			String name = et_name.getText().toString().trim();
-			String phone = et_phone.getText().toString().trim();
-			String address = et_address.getText().toString().trim();
-			if (TextUtils.isEmpty(name)) {
-				MyToast.show(this, "姓名不能为空");
-				return;
-			}
-			
-			if (TextUtils.isEmpty(phone)) {
-				MyToast.show(this, "电话号码不能为空");
-				return;
-			}
-			
-			if (CustomLengthFilter.getLength(phone) != 11) {
-				MyToast.show(this, "输入的手机号码长度不对！");
-				return;
-			}
-			
-			if (TextUtils.isEmpty(address)) {
-				MyToast.show(this, "收货地址不能为空");
-				return;
-			}
-			
-			int length = CustomLengthFilter.getLength(name);
-			if (length > 12) {
-				MyToast.show(this, "姓名不能超过6个字符");
-				return;
-			}
-			
-			phone = et_phone.getText().toString().trim();
-			address = et_address.getText().toString().trim();
-			
-			Intent intent = new Intent(UserLogic.ACTION_POST_PERSON_EDITADDR);
-			intent.putExtra(UserLogic.EXTRA_USER_LOC_CODE, userLocCode);
-			intent.putExtra(UserLogic.EXTRA_USER_NAME, name);
-			intent.putExtra(UserLogic.EXTRA_PHONE, phone);
-			intent.putExtra(UserLogic.EXTRA_USER_ADDR, address);
-			sendAction(intent);
-			finish();
-		}else if (v.getId()==R.id.title_bar_right) {//删除
-			Intent intent = new Intent(UserLogic.ACTION_POST_PERSON_DELETEADDR);
-			intent.putExtra(UserLogic.EXTRA_USER_LOC_CODE, userLocCode);
-			sendAction(intent);
-			finish();
-		}
-	}
-	
-	@SuppressWarnings("deprecation")
-	@Override
-	protected void init(Bundle saveInstanceState) {
-		setContentView(R.layout.activity_new_address);
-		
-		titleBarTv = (TextView) findViewById(R.id.title_bar_tv);
-		titleBarTv.setText("修改收货地址");
-		
-		findViewById(R.id.iv_logo).setBackgroundDrawable(getResources().getDrawable(R.drawable.arrow_back));
-		findViewById(R.id.title_bar_left).setOnClickListener(this);
-		findViewById(R.id.iv_logo_right).setBackgroundDrawable(getResources().getDrawable(R.drawable.title_del_address));
-		findViewById(R.id.title_bar_right).setOnClickListener(this);//删除
-		
-		et_name = (EditText) findViewById(R.id.et_name);
-		et_phone = (EditText) findViewById(R.id.et_phone);
-		et_address = (EditText) findViewById(R.id.et_address);
-		
-		findViewById(R.id.bt_save).setOnClickListener(this);//保存
-		Intent intent = getIntent();
-		userLocCode = intent.getIntExtra(UserLogic.EXTRA_USER_LOC_CODE,0);
-		userName = intent.getStringExtra(UserLogic.EXTRA_USER_NAME);
-		userPhone = intent.getStringExtra(UserLogic.EXTRA_PHONE);
-		userAddr = intent.getStringExtra(UserLogic.EXTRA_USER_ADDR);
-		
-		et_name.setText(userName);
-		et_phone.setText(userPhone);
-		et_address.setText(userAddr);
-		
-	}
-
-	@Override
-	protected void onUIEvent(int eventId, Bundle bundle) {
-
-	}
-
-	@Override
-	protected void addEventListener() {
-
-	}
-
-	@Override
-	protected void removeListener() {
-
-	}
-
-}
